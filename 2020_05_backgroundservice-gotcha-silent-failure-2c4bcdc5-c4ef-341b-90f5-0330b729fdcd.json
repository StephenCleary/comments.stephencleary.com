[{"_id":"16212530-a109-11ea-adbd-9bebfa4e0427","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"","authorUri":"","message":"Isn't that try/catch-when-false an empty try/finally or am I missing something?","date":"2020-05-28T17:31:38.942Z"},{"_id":"82625a10-a10a-11ea-adbd-9bebfa4e0427","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"16212530-a109-11ea-adbd-9bebfa4e0427","authorEmailEncrypted":"s3IAMZ+9c0Dh9LIgArjEJ1WzGdOOmfGOFlOtlUnnc6jal9mQ2A826NK7+C4abPuz8xAqpRFBE+aredTbQekdkNZcupVMHKIOiGdtBqinAZCMcoho7whMSHkjlOolalxNh3uhDWqjdc2KkZV2kZuQgVeqaIICGl9aLlheENStiju++Pu0pgafhR2LP+wbtOX9FX3TmbnY3FEx046aZeAvbfXQez8BRrqvSNHFuZL+WSSovR6FMpRwRSU+Mftxfp61zFkSROvq5ZPs4EOkJUvJtImeTWsezZ8R2+HZzhrAnn1vxoALDWVjXuSvRiTNs1EbWFRcG4UWTOZ6EqSNGp0bsKlrnnifHvYsK+3/t13cnREhNhwOuDWPRtPM2Pk+aJFHSdmreZqASmn58CXCnoYqjY1xRnFAIYk+1N4Ov/5Xp4VaETkPAl1+lnxtQY424RHlQfyaqbhix7ArTligr68mdqpCvQq9g0lYzFv/rGdmn1Fgg2M6P0tE91CY3HdVdJbiOIX5PDS7NpXk6au4vBvDh8a+a3CT6Z86V3YfPKmY8HibIv9775908IJYxPWjVnqVDbcaxBcssxJQmv7aQB96PZAaoKRsKMDyirsi1QYM358SD0VtBFHWJDzsDYpK4dBNGwHJRHRoO4NTxcSgKG2h4xvUObXrV125DoKOqsU22zY=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"The `try`/`catch`-with-action-in-filter pattern is one that is becoming more common. I'll blog about it sooner or later.\r\n\r\nTo summarize, the handling of the exception is done in the filter. In this case, the \"handling\" is just logging the exception. This pattern is especially useful for logging exceptions because the filter runs at the point where the exception is thrown, not after the call stack has been unwound. So this logging captures all logging data scopes that are active at the time when the exception is thrown.","date":"2020-05-28T17:41:49.942Z"},{"_id":"1a40c8b0-a18f-11ea-a012-bf5d27f5ba57","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"82625a10-a10a-11ea-adbd-9bebfa4e0427","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"","authorUri":"","message":"Thanks. I missed that you're logging the exception object.","date":"2020-05-29T09:30:58.424Z"},{"_id":"2091eca0-a1dd-11ea-9a68-4d0fbd271741","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"20f677a0-a1d9-11ea-9a68-4d0fbd271741","authorEmailEncrypted":"Eloi2OlIEo7OKO7VMdMhJd4KMGDxXjRZ9k/ylmNtX9d21BbR4dzyUXJPqvux2OhUjCZmx4zuWlQ31KbewvUFdGZHroCZmZmQ6tE5SyombozadeZQvZsLaH4aB5f2jscWjyX24BL6hjl2brfDl97kH9gY0FPAqo/Xl4FNOxJ52xYsJ4CiN48j55UL93xU3FzT5xJex2SHMYFU9gvH+aYo9+p6ELWeqAWc5YlfQm7ek3kJkecUxWLdR9sZMujKFko5Kam8yuSNch7GeVjlYHmSZXMFeX12IEBeDZipUyt0ohsg+YuAYTrO6W0gsfMaMw5Ly4LtUpAvWu1M7nIlQQcXDmrPx3Uc6pboAjv3I85//9Cls8ncj21waoi6guhuvQuMn9PmkgQK+eTGIuUpDREp+6wzcE7G67j55SdXkXlsOdRK0lxtnkH1Ar6MkfVsOIugntmk0N+bjY1efdAI5BCd4lSi1JoTk7K0RgXafq7aUoTIn0P5iOK+Go9VoxmktPksM4TV74Dr4Bhn7sB+F3062cefm2Ssk4dyVihMeMAqgqJatoYm8VFUhzQ0+ulhWQcb6a81bG5axSl02y+DroQ5jW2aZLRkmRNSLRbKf/549aqcNSr31f1gnfzLh4s0HeoKHCsbTytKyEd/zI4N3GZFoj1p8AuSFit5xJ/vh0Hb35o=","authorEmailMD5":"937deb1cb87b98293023deff9c9b51ad","authorName":"Rene Riedinger","authorUri":"","message":"https://weblogs.asp.net/dixin/c-6-0-exception-filter-and-when-keyword","date":"2020-05-29T18:49:29.616Z"},{"_id":"20f677a0-a1d9-11ea-9a68-4d0fbd271741","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"6ade8530-a1d7-11ea-9a68-4d0fbd271741","authorEmailEncrypted":"KuefFJp8vrX5cO6SDf85txrUBNinXzlan+F+ZV6ZqX2XMX5I6cyhLzUa1BEl5ms99btlUL8brPbvPdcg8W7iYYYYFoZ2ewPdJD6GJRqDOaTQLooO33Q7VBgpT0UWMjL/2yrtl14SfsEQC2VBDIuXL8aspMJnYkrAtcZywQwoU4vSaYOGY/FHuCBvWBkqOeFjRlm34OBmJtY4dWksSdQZ4JwgEbE3NF8Q6BG/yk/ALH6EErQwX4SQvMuO7z9vl2zqinVvQwjZRzO9DMqrqqnLaRyPwLomd5APoTD6SRRjca/uyNOPsHUl/p9oQubFsjzewTHp0ANA2CubnOt/ugYvLeL2AmO4JUwG9nto5/2ZQ+NvmiYw39mqFtjD4tqcivY5uFejgfPl/J/mCj+mwpX5l0ySESzOJP0NtEwAoz0EF3L/b1dpMa8RF9RXJcfyqtFBtfiAl37kvZ1rMkOQbs2RyAMHJVR2W25AK4FgLMh/AukRIXsdSbgTg0kVS7ssrPrvwLWC4zoa7Ie012sUfTmxr9Y0PrMJV1kGFh68CS/4Enr6CIICHcnHxrgMMzLSm88NGSlAZ3T4XBJ1gbGm+PX9bNL0Bg1tNiZ0RZvJ2kEpVLJkAl0v4lUKodREc0PHd3cnmDaMtGcs/Iurl8D1JCdSiDwRsqJCzPxwdFKlE+z+I8U=","authorEmailMD5":"937deb1cb87b98293023deff9c9b51ad","authorName":"Rene Riedinger","authorUri":"","message":"I think you are right, found some additional information here: https://thomaslevesque.com/2015/06/21/exception-filters-in-c-6/","date":"2020-05-29T18:20:52.277Z"},{"_id":"27fcdd10-a1bf-11ea-9269-a38d9d7ed17b","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"e95d3120-a1b6-11ea-a362-318b8ed51204","authorEmailEncrypted":"tfarGrPXcqGF0feKklGgYS1iz+IWGtrVOqghdFMMYmzNgvg+/hOhfL3SgrHzhq8RsobtaSwXznMCZsMyLrWqRGVimPZOdcfvuwrhuC3HkJ0DwaE9zWRrmAS5FNpMvFH9fg0vmekT22W2viWt/QHPHkCrWLDO8tEiNImDQUMsO3kD2OcV5V7PZWvcVKO0QKmODyKh60dyV3uP4CWn05CdOyNyPd+Ruherw9o+TnRfKDors0bQ3KZ8I9Z3BVKd2sD3UIpmIn4cknJ6cN9qNgkEsL4a1avFQx8NJk5cy0USKuSRiYJNi3z5PBYVFHvaWtVGwgt7/nLT689Vo4E60l8/yttbZroXAQPe8+cP+IT4UkOvVFAefBWMgRKmIz7KvEowdOFxZdRlgIp+65mt615Lw5qWKM0s7EUPdZKMK/WCCPsjawROJARlB1l4zT9xU44BO/ZQXUTMuHqLe8mi3TJ1mTLs0CSQNTWqPI6JIqoaD5xDX2PC0Q7cV7Ns8UwuHRs0L/tOiY/9YvMprpkyz+i+CcKTfy4VgCwZBWtPdfPVRzun6X2E4OErIJm6rPH5x+mUAnvmaIx40CK95qzQPpdctckdtxKvSLYygDOeURA5VEGBObLcrlaL7HF4a4x7eX15ROzxuSFvt6+Wp4UEPjHmIp1m946shIotEmUKaEhrzCQ=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"That is the desired behavior, yes. And yes, it is odd.\r\n\r\nSo, what happens is that the exception is thrown, and then our filter is run (logging the exception). Since the filter returns false, the exception is not caught. This means that any code further up the call stack will see the exception as though it was originally thrown, not caught-and-rethrown.\r\n\r\nIn this particular example, there isn't any code further up the call stack, so it doesn't matter if it's caught, ignored, or rethrown. But in the more general case, you would want code using this pattern to not catch-and-rethrow.\r\n\r\nI'll have to get writing that blog post. :)","date":"2020-05-29T15:14:57.178Z"},{"_id":"4c8e3bf0-a1d4-11ea-a35e-1590078d8ae3","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"8f2c7140-a1d2-11ea-a35e-1590078d8ae3","authorEmailEncrypted":"MsfrM2wIAGjTPa+76Fj+52JEYxlwuBoXUtCpq7h8Pnwgh+mIlPvg72JCPXY7htOsgOdoS1KoAPL3KoQycHvchzzIuGkwmsMnnHqxJBU3WXhMGc2A2PiE9AJC6I8ptsWNrB2xwNU3ILZM85MX2n+G5Tl6nw3UKL/wX4jSiagjaXi3UdD/8F7rDrxJAjRZYdRHW5sPulqTLOD/K9oEKmCarSo4z600oJiZvEU9XN1/y9xhH+srwjHCjuIHHddcHJR3bWCUwUVVm2X3VpXICA5W1P4WvfvT7Gq8330ZjGRxS6ygwds/sqSCYYkeppuau7p4sYmTebwaA044xwo2hwvC7kDWVpLYsQtfruzT6M8PAuKtWHJS3bZjxcL7Eka2WwGFB/rKD7ucCQufz738E7NrxVjAc9XyKzSfr8Gt0SlKbpN+j9RwvBLQ0i+UZZZX/KDPuTXU+u621y0dNvCHkjnE9gq3FQNvMqrnikQ4ZB/l1tWjwq7b8O6JhU7jMNxunvtuihKxl2Dk72f8OmifkBQ8Ycavhb6lkUrDrrlh0Fx4jpqdpYr/C1jvOaToZIui33nnGHQwFiHQ1RMNK8jySHE0xpJZEh3qgbcweNBGrfRpjF6TlsVWQZzd18xjR3OtulVWwk3HwnNDFdAPTo1IgO9pGe8anTWJxnb2zTswJ6UhMok=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"It's not quite the same. `throw;` will lose the additional logger context from the original throw site. So if there's a logging filter further up the stack, you would want the original exception to continue travelling and not use `throw;`.","date":"2020-05-29T17:46:17.980Z"},{"_id":"4c9a7420-a1d8-11ea-9a68-4d0fbd271741","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"6ade8530-a1d7-11ea-9a68-4d0fbd271741","authorEmailEncrypted":"Ew9m/EtAA8OZC6E2xwiDMjd4zeA4xymubh/cELIJkyMbfHxEC6EDyk2RDxhExnb01fK7Dj0dL0018yZNCFVFtFzpAmKjwWW+JDZl2wczFjQbfOomvoYV0zlWNKlyKoZobv1QU8fVcdQPrt6UH9TFLABj+GsGNm7fHcC4kvguBjbGivLk8e4xBmI2PSJ2yZo8QbNf/Yr87LkbZeQyvUkH7GiYBOBLHEWl1uz1OgE9DGyqUzvSqxFTPXcm3yunCsVdMV7p/2rwgpmaOI82sWKMd+OvCrGb2P3wBU6un2L98Nbjmco+P/Jj9Tm8CIqWhnLmJw7J5PJUHJaCB0N4sqonr2M7il7GKOI4VAlNKaNWjV1tL91WKhRTPC1ZtX/lwocM6y8Qfgp9x2VSfNwDe2nDRq5+9ChI0htNIYhvmGLj99FX75RPpikfcDV2SUMPem8A6hq5PF8oHlJIg264LXfZtZV+QbYjM51seVQhtS7/TWAkOft+8UPTqjyuWCZA44OnIzzyt67XVHx1jd6dy3TedYNX+FyQ2yWbz4ubbzFT/y6hCo48RmvB0+lbBz5snlOafPRQivULWUexQK1Jl54q+RegVXhytzalY65OPDlUIf7s9yCpHBEzek7m8vh/+OBQPHxLKPfvsWUGWDDUhyKvva9E2qC2WJUoXcuVQgtI/t4=","authorEmailMD5":"937deb1cb87b98293023deff9c9b51ad","authorName":"Rene Riedinger","authorUri":"","message":"Thx!","date":"2020-05-29T18:14:56.031Z"},{"_id":"6ade8530-a1d7-11ea-9a68-4d0fbd271741","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"934be7c0-a1d6-11ea-9a68-4d0fbd271741","authorEmailEncrypted":"m9PesqTLxthJX7jW7D2ZOjc06ZJIQ5GplzO2bYumIKDBAKb3NVgN8sWAMFjLWrTN0pbwFADpjbbZL0NsbRixVdlrh/qcO/RL2jq5GameJESZChdFWKGMY6ol5ubbGZ6pRVw/rwV03dgE4Eliv80mLUSKPxZXrWddZVrq1GNWfR0Euxtk6eZNUmLD6KmGS3SZ4iQc8dsgjC+WMnTaTEpNFflWynmS7giK7czJ4RJ7p2OyVNixV8Y2GZVSx5TgotZ8j9PhoED7Lul+MpKTdfGI5DJLE5UWQS2ndBRwkDClyeuS8HK92YZLF3YjwNxxa5lpIDREpcak3fBlZ/U8spfMRqACcUQXn96U2bnvbWp6TdBhqcbVcF1G8vIs6E6CrEq13FAC9FqbDRNLwXLtFLfiOBzoAzZBUypWrTLTIygwkYdKlTbu1GmB1ocPVg28oUWAYPNR4QdMGGT2ifJSxBs39MebHX2X3olx4bbOoNzg90sNL3toRPN5x6RHN3oElEjlScHOEddIEEtt8ZCKlQ+jMWLtQbljNeRCJGVst/Y7dacx8RKTz0ySvwRrUE/i2teiJ0x+deatJmKGAdPwp22sgH+ppSoZDDWQ+HS1z1aK2ZNB+/mPUtb6vBd4UeWix7MTxeAQWtRCHW4y47YZGKfI/JXHeAe3E0AVl/WSotzJpII=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Maybe I spoke too soon. That's the behavior I *assume* would happen. I haven't actually done any tests yet to check it.\r\n\r\nYeah, I gotta write that blog post...","date":"2020-05-29T18:08:37.269Z"},{"_id":"8f2c7140-a1d2-11ea-a35e-1590078d8ae3","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"27fcdd10-a1bf-11ea-9269-a38d9d7ed17b","authorEmailEncrypted":"hJh43F6dlvojis+7vO65RG9kfo7uXR8NTbfj8ScYNAEXwRPd3uV6GTAqZHpQtuTrj+ryMG2wZRMFOORk98pA55qzDi7DUog/2lcaeGgC6bbsM+JjNo2sWbMPpMh6rc3sq9WOduYP4zhg4cqWV0l4708C7QFQeEkKWQu75F6ggQjlizQf5//Z7GPD27D1DKz9JREdfrdFgdKTaWNL+6MGBN6I30zumHBFkDxIwxl7kuTuCQoyB/dsjuD95ZZWtI+PcSIq+IT09reu9YlvfcAWn8wshn7kVf64DJSpfW7se2aqcKACopp9kQqsLDiF8aAmb5lt7p/ol6pmkXmbtXvMF5TqMObXM40Sl2GukyVTYYY5Nereoa2c1z0qE22mIpzdINkGm050jILJb39EYmc25bwdfdRtC4Tq3EjEDNpNNWr7rTDKzShQvFYtTQFjttRLvzimbCCmbM4dNmf1ynPjzFg4ROKFLn2UyAsZORi5XviRDO6K5AmLiKb8iTbeaG4ZebtZgyvw4bsVmqYQ0gRosJSQoDLoKPdij0G+BCshIXOwqBF+2h1lzyQPZoQjnv+e25+0GjefM4BQ+fkoJ6VlVjwgigKwwioVZqKYzrKXJmUjy0ojaSR4L48Bz2lI7YnX7uJJ0qgYR4JhkDRTryT26apa6lQeCXEVevSVPAWiqNo=","authorEmailMD5":"937deb1cb87b98293023deff9c9b51ad","authorName":"Rene Riedinger","authorUri":"","message":"Thx for the fast answer!\r\nJust to get it right, don't catch or throw should be more or less the same as we don't throw a new exception but just throw it,","date":"2020-05-29T17:33:50.773Z"},{"_id":"934be7c0-a1d6-11ea-9a68-4d0fbd271741","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"4c8e3bf0-a1d4-11ea-a35e-1590078d8ae3","authorEmailEncrypted":"WhfnHH+7lKNSKVeqV4c6xGXbYW6uqoj86+UYeAEcZyDESsz7euxRIwO17wg4xkSIhw0HqA2TAbU9lBrRbJ7/DghnWibUu9KoeySfc0d9x4eEgHAIWJVGZ5Znx4aJsV+Ncp/xxMhh7rn4mtbPykvdQ+kACDClfVlr7uXYvtAi8n8aSG3KD5hdPeIpCPzEob0JX6ZT4fgUhGbn1UHnef3toQT7YHzi2UmJteO+5/KKedIS+muPxiRzQDRbw2/3MjWLpa/WPhLCCpHmht9Kr7Vu2fm5fzvtEeYojBSYLkrI9lXUFEYNH/oVnk5GhuzBuWRh+WPJGk2wJwZw+6dxTmCcVpiYpJIm4ef5MTh/wtxUG3BMt4qdcJJjUyG3jstwsijeorbAzVEtJk1KNZ+X6pyptydqZT2f3nV+Hib0X2CmU8+XxSgs755+btHgzmKTulPGsYgUwZfySgySKKAJj4RUOxWKyXlhazlJUMKLNQXv9noJxOLi505lgEAxpvEPL5fThO9x4FJ5o6RLbTNX2Q+h66dvc6AMduAXKHMwsRt+CQsfQVejp/14su23ZeXMpe/yJuWXbaShZI9x/bYUfBiM2IL2CosBYKJB4nuAV53XHa/GxAUFmGYVV/8U2OoMqczacYygUVQVFwpHt9hQ1UBmnayiu2mjsrZib7vt1DTwodQ=","authorEmailMD5":"937deb1cb87b98293023deff9c9b51ad","authorName":"Rene Riedinger","authorUri":"","message":"I didn't know that, do you have some additional info/material about the differences you mentioned, I would like to read more details about that. Br","date":"2020-05-29T18:02:35.730Z"},{"_id":"e95d3120-a1b6-11ea-a362-318b8ed51204","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"82625a10-a10a-11ea-adbd-9bebfa4e0427","authorEmailEncrypted":"EFOyQKQncKHk74Zpyktgy4R8VsBYrZ1035IF7lJ6++YE1UZvqaFgtC1vg0rhntUlaoASDHmZQgWRqv+2Ne/gvqgX4E2RQKtOb8OAXx1EUMujlrGSjgrk7KqKiGIFagctErC48TzL2vw4QsOyVu0mW1IsOT2WFbu+gr8p3jc72Ww2DUtnOlvFznKpABkoWLn8vDfWRkA18DhlYqrxOujxHRgOu+OGl6SLlQMk0evgkecsai9VWx4eT9N5/j16fswfG1rL/odx4J+UO8eKU9+I8UsjTDrLbiJQoKIuJym7e0x1R179bWr31Dynk70sp6Ay0NKDc4mFQKaG+YRGMOAXDo7Kfv9G+GPvFgpku919SZZtC1ZwpTef/3Chs7a9qT+R6j0ZvpvrADPVMpeHTH/f5PS/rUJsz/HRT4dfxIceYiAV3oQYzyxOu7rnMSGJZ2X5lr+BYhgEhfozZzmOetN8Ti3Ejgmh9+3ZWD7LBtn3OAr1FZgXczoQvKDWfim8xkihzepNxDsO+RmbHFasgnIY4wUYFNCkwhpLxx4gR6c5yucoUUsHa9lRLldl8ZZxSAUvan5rlEOvtvrQ0uymJMGaLJtcYN5TJYoXpTsdVocWkK6ve9O/yT/Xd8kGGx4DYlZQ2yv+NMZAjMaL7FYesPZctwT4yk+2zEDwgDdejy12p4s=","authorEmailMD5":"937deb1cb87b98293023deff9c9b51ad","authorName":"Rene","authorUri":"","message":"But it will never execute the catch and therefore throw is never called, is this what you want? I would expect to log the exception and throw the exception. Br","date":"2020-05-29T14:15:56.167Z"},{"_id":"cb1df5e0-abda-11ea-9057-3d8b9f1d2c75","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"82625a10-a10a-11ea-adbd-9bebfa4e0427","authorEmailEncrypted":"dbYHPie03U6rmfmzogKtFxkPjSV5kVDK8nfn0q02s72209pYX3qXccfKDkdtSJS6THFV3cOsavzjeOMo3fv1nQ81BUMWl9aD96JpVWZ9MkkDGaibMAAHsSMaevRaDA4zBHTlWjCTIn0B5EtGKS7h9K1n9Kan9UiPZhNuFJWrC03eKPxhhN+E09c5ETxDzAJV7ggzriAPkTzfvmpapaweTedEWMrMRIzx7L68IJjT4eq4xPbVbF67yccWCRbxN2PgLj7bYKREsgsejzdv4aRwMQxgmQp9qVo5lvipG+proGPeQfWeAy9Ftv21FoJJwyrbezf2SuCpc/VX+Zc7MN5ZoimQwg7qeVBkLZTuhrcJSrW/LWFho1GgQ1tlP153o/IA+KgY/4Ldn4/bJk4wCevJKMQ7m103s8ZPLE39QsnqwvIYg3xQrcrtsBl8MMKDb7LfE+ck5kUI+QOfwPmEcSloDcMF00dq8Jt6tU+4UUo2gxKYe9oNGwwA/gZz28nRFF+zgcqjAEI8zRr4w0DEbz1zGoVkzn0V5FyZN2xGMvVXe4Ffg9twtwdpUMSQUmaqVYeg7w6EjNRhXgoZ6SAoaP6C7fNcf8AoaD0pDZLzHBvmPOkx93D3tOI1nSnrapPCmck2TNE8Bynqy7ckWuZwzYSyPGk5buCDik9EK42n/PLk4Ms=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Blog post is up now: https://blog.stephencleary.com/2020/06/a-new-pattern-for-exception-logging.html","date":"2020-06-11T11:57:58.890Z"},{"_id":"090693a0-c128-11ea-a7b2-374ac32bdc6f","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"","authorEmailEncrypted":"cp6MQniZg49W0ovZLw/yOphduexORzsTnvrJQDAEBUP6DXpJyoaTYK5DLWWjubDQ1Gh5jshafYOOOQfCczPTevxQlHg8MCJm2cx4EyQ7VeYVFp7euMTJZ/4wvB1IZ4xZi/Sr4pbNNJITGFzCRv/B8DlajF0XNpDCTHpkkw6vWynyYyHfQhaGfjNoNenGzJ3UxQWcoOMA+ui0ZePHLyaqIPaC0xNd3p7ZGgMDlOU7X145XlcIwnY7pOuVGBDWBJY1ObYv4AnZEpEq8pZxdEpoCFDV6v3VwqNvufKpsm16bdfOaHhZEwoj5rWalaquhT0ldwL+ybtob2EiJuPsLaAKYXdm3h+C7+ri0+WKTerc1mT/X8w9VLDhyBofNcY0e8eXu1bh1n+5l8syC6bRxcJF7tVhuS2L86lcav9gu6tgCZvhsxhqKOGKmJWZhEUlItN3aT6T8IGVM0cJbZyw15TMrESS2Ud40pSn553fvyGBdQzVbCnKv7CD3kCGg/km+/cKZl707ntB+X5hc4C2fwfVqdsgVFn4w3TRWTuluvKDuIaL9U6iAKxnlQDl3iXWODlsuatb8wM4uCfjhvB/48zhkn410cl1DsOZnfjE5vkEtBmORooT7ysGduc+wBgG6HsU9bJOTssAYejJKELZT5hygHZOw1yOuYChsO9pKqjwSGY=","authorEmailMD5":"67cca6565ce823a15b01bf82b213b967","authorName":"Enrico Massone","authorUri":"","message":"Hi Stephen,\r\n\r\nthanks for the great material provided in this blog. \r\n\r\nJust a curiosity about the top level exception handling  pattern that you suggest in this blog post. \r\n\r\nI noticed that you are basically catching all the possible exceptions raised by the inner implementation of the background service. \r\n\r\nConsidering that the background service should be designed to listen to cancellation requests (by propagating to the called methods the passed in cancellation token) and considering also that in .NET the cancellation pattern is exception based, wouldn't be better to catch all the exceptions but OperationCanceledException ? \r\n\r\nThe OperationCanceledException does not represent a real error inside the business of your background worker, instead it is an exception raised \"by design\" when the host requires the cancellation of the running background service by calling Cancel() on the provided cancellation token. \r\n\r\nFor this reason we should probably ignore OperationCanceledException in our top level error handling strategy.\r\n\r\nWhat do you think about this ?\r\n\r\nThanks !\r\n\r\nEnrico","date":"2020-07-08T14:33:48.524Z"},{"_id":"13a7b7c0-c129-11ea-a7b2-374ac32bdc6f","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"","authorEmailEncrypted":"VDHJq+kD5vNgxwJjuFGg9mvBMXtIVW2UKgUDyKFIobGtxo+Bk9g5Y8/x+sgXSyEJ1+O5V3fsbjn6NX0c4XcgPK/2JAWPUA8i/GutBuEQ+Otrvv6S/qDS7Y0CfIo/Q2Cymz8FSJbJY7lAXM1jfz+MbcL4RV/bkoz/u9yBgAL0yFrWFLdI98OKmYklHLWgxFyxGALs7rZCOe7rhCwMUekg19vRXjKg5JSxJNtslBuydlVCAf3fhcGpWfYktOy1IoKtD257ZRK8QEf1q2EpEf0AtX+BnzYSQkTHPhgAxUU3ykg7+C0g78akU//dJBiLNIYHZK893V3DpT+V77HVpwb7ZJ6af0wWyxnqi4+M9KIhHM7BDF4xSwUpNUAD0Www9BZnyYZl7rf7A6AIfgoJH2r2qlMw5GTaFQs4c3fU1nwRztDRKvIzGEnVThRB1aUNhO/IFnX8/Ti65nA8DItVWrye/Cq39a+Nav0/ndn/KZEjqmWtm673wfXdQJoMvhgriz+jVSpDeD2BZim+r1BsGIv+r114W+78TYIhtJYAEtpsik252QcMFbeZzWeqwOdC7fK1Iuvl8F3YRa206iwSBEG+KoVBZ1wmaobg8x8BsqX4DfUB4NMSSYPDEwKrrue0v+641MJDpgghv68v5UeGG/vKe7SldPua8YYR0DQd3iIBTOE=","authorEmailMD5":"67cca6565ce823a15b01bf82b213b967","authorName":"Enrico Massone","authorUri":"","message":"Hi Stephen and thanks for the great material in this blog. \r\n\r\nJust an observation on the proposed pattern for top level error handling inside of background services. \r\n\r\nI noticed that you are basically catching (well not really catching because you are using the False exception filter) all the possible exception types. \r\n\r\nConsidering that the `ExecuteAsync` method should be designed in order to listen to cancellation requests and considering also that in .NET the cancellation pattern is based on the `OperationCanceledException`, wouldn't be better to exclude exceptions of type `OperationCanceledException` from your logic ?\r\n\r\nThe point is that exceptions of type `OperationCanceledException` don't represent \"real\" errors, instead they are raised in order to honor the cancellation request coming from outside (via the passed in cancellation token parameter). So, in my opinion, we should listen to all exception types **but** `OperationCanceledException`. \r\n\r\nWhat do you think about this ?\r\n\r\nRegards.\r\n\r\nEnrico","date":"2020-07-08T14:41:15.814Z"},{"_id":"21737270-c12b-11ea-a7b2-374ac32bdc6f","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"23aa1e00-c12a-11ea-a7b2-374ac32bdc6f","authorEmailEncrypted":"EJY+HRja8QiBQZ24RdlZcOnffEWyhGWGF0gcgPicuzGcY+i/cLOfPAdXqIYGiPGBbyo20U7qNj1pl2B8zKKbLbd6OUmI6IHgyP0LNbvbc1XiN1OC9yAYCY2M4nXQbgiQjuZqROZ2IuFwqhFS6wvuONti8m2hUAgaeOjdzm2T68CtLmoS9NFAs5fmoFgggpMYThN/67R80ijFOZXUP/HesJR+Jt3EBU1fnR29AHd6IglL3cJFijViMNOLfmypuldAGF3Qk6J7+XdOEyyrjU/HMUrJwB1dGVc2pUWc03NLyNmt/C6qALW6oOHllx6gls2MtYaHSnl1DJeJLcbsPjIThO8g89fx/qWLgYUWijKQvaRsEJ1vOAXAonjmdTCzxfP/ipN108XwJgQrXh+bbd7awJnWhuXG2YihMCZM80uuDCz4MFFGHP49794dDsUVOgCrWSWQkkY9Yy2aA3Qp/Ew464pFJUMtkTUxW0hOkGznNl7dKurTZFPnSB7h6oas11dBzmUHKsyGSaOnlZsuTG8zwL3ZE9BzLTq8cC82E80VN+DP/4zA8onZtOxW0IHpqSaWPwRp+gScb2PBd8srVqFWlerf9huz1RLs1t2DLsCDrdQ6fHmsu/jIKMr1PWHuRMx3bVavIAzkviiwhFOqykJrgAYcZG7RGkOmLq6bbrDPx88=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Yes, I would either use `ThrowIfCancellationRequested` or just pass the token down to whatever APIs I'm calling. I disagree with the MS template on that point.","date":"2020-07-08T14:55:57.897Z"},{"_id":"23aa1e00-c12a-11ea-a7b2-374ac32bdc6f","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"c5fb1300-c128-11ea-a7b2-374ac32bdc6f","authorEmailEncrypted":"Fqf6QvLocHj0PrVYzi+3Kz/Dh+CH+4cY1KgrZ4rLM4C5pfARF5GkfYWXddKgoTiHhwof/WbLTcpLtrFDnLX3W7Q76qSvO6byp7jQgl8nXD1QpQrXUrhF26X8wu4GblXgd1HUmCkU7BDnSCIKLeuvVD3ZZSTUlLfaN5gqJE/bHAATqqOftlqnUaz5fjhiArWOO2ikFiSniZSfjQoH0O3iswfXT9ii+GtOnV089rVHuXiq87WFESKCB57CXkchhTJPy8CwyuSmidPfpBpKCLqvd5P8oKBrXtleyLSRIxj5jxkaFP/e4vvzvHTAg2TZuRrlPEMBhsuvh8VttHDNfQCb774svp/QuGCeptzaD3eSQ3Zjj9FiIrgHx0uxpNMe2p2Auv7T1xqE6X8NNxbxDUn3N7ksx4ffE/uuiglPR7RYd5oFmetJJ1+GypAh+N19Ou8ydoV8/L8FJ1u8ZI4VG5lCGHSZtsCqo3IySW7lyuM08Zc6PgnZ49EUlZIeRL3qDP64s2i3c12rzIb7GLsSqOkjlcF2F2NbLHKusY7XNrvhWL/tIJ6GNCFCpz+uDa6vxybYX0roNTL2Jq5E5oebWeozcEpEhdLkwNw54Ta+vX8NFROa/G63hSukHZpJMRmNZdGJlwdHr4pgx1POzYnvVDgOIwRa5J6zufCXsD60vRbMnXE=","authorEmailMD5":"67cca6565ce823a15b01bf82b213b967","authorName":"Enrico Massone","authorUri":"","message":"Thanks for the quick reply :)\r\n\r\nWe are working extensively on .NET core 3.1 worker services and we are going to use your implementation as our default base class for background services. \r\n\r\nJust another point about cancellation and background services. If you look at the Microsoft template for worker service, there is something like the following: \r\n\r\n```\r\nwhile(!cancellationToken.IsCancellationRequested) \r\n{\r\n  // do stuff with the sample weather API\r\n}\r\n```\r\n\r\nBased on your concurrency cookbook using the cancellation token this way is an anti pattern. \r\n\r\nWouldn't be better doing that like this: \r\n\r\n```\r\nwhile(true) \r\n{\r\n  cancellationToken.ThrowIfCancellationRequested();\r\n  // do stuff with the sample weather API\r\n}\r\n```","date":"2020-07-08T14:48:52.114Z"},{"_id":"c5fb1300-c128-11ea-a7b2-374ac32bdc6f","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"090693a0-c128-11ea-a7b2-374ac32bdc6f","authorEmailEncrypted":"TA8VtNYsJffDTw+Vo2PoWVO1QLWiOlsVCNecPK4pwRbyn8JAyF+WAbioNYvfJfWTqeb6T7kqZXmOR7atCN7/6I0H1ZB09AJGJJeEBQHEFpQ0DQj2DQjxjq7eKbhebnTATkWZ6wyPGp7Y2BOavlA4evjA2djb8dBjODtM99RCbPaJePBswLMjFQas11E1uA/V7Sjse7KD0fldDwKj3LRp9A9megsewAz1H/8xFmyobmWnf3oWp/IdXqI9W966UNmDFzzJCOT37rf3m0ngGWn51DTd7/scfUk2G3SixHEAku3G/MUzdxt6PLcntGcXKWPSmMwVzkTD6qcIPw2scV2gO+6k7kEYNYEnPvMk2Whu5Ka5hL1Xq9//hiUS/oCPfFKCrzjY6jlKVOJnamRo8ovOiMo/z4CBmAmp61/r/3Xnmxx7BAnTQ1ORvYfy+CTk63cJRrdCY/JpMAyzhsPSxUMJnaYn7IePgoJoH4g/SdCBK0V6am+HdQW/Ou22ZYEn4+RCVpeCgpGXHo/xnTuB5YeioLDv5cVnmR+LnU7JX6HNnpNLCh6UzlTfVntGd+89ZCaj+TixFi0aHv161zrikbw1Is2uWNzS1lbxpFutzi1r+4pFr2+bLleJSg3oGXKXQzsvd55nCWcCaedWwmahXjDs6uyCdwK6MCiu/SUz941UATc=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Yes, I agree with that. The top-level exception handling should ignore `OperationCanceledException`s, at least if `stoppingToken.IsCancellationRequested`.","date":"2020-07-08T14:39:05.460Z"},{"_id":"0e70b6c0-4ca7-11ec-8d57-4f355a9dc4f8","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"","authorEmailEncrypted":"qsMvAXsYqnziToBIXvDFEeyyJjKPo8dA1PAKILQWopF+ujRKPvTr0kujYCBCoTYr207u9yDkvdp4xiGtGAxKNl4ZqSIFhViDFWToK4P4AgVCIsZ2HESB1Qj3wD5/tWw5+AdgCsJOjKPyy56R2u2EDZj61iN1bHHV68IgoRAfAu5aVWaEASKalkM1bwISddPAXD17C+ZVU5+67AjDS2KkqwZMFDwkGyErjRn/vHTjeWdCCVtxbDyoWeNp4wVJfIGB3tB3+KUKXtQytCrlzqBRnfqjVwBViumaI0QSRDNsIix7+MDVfIPWVJE5hGxLPVfHY+1OnzLuC2jO9WV6RFW89I8kXuI8vGWMiLTJDuL5To2qUIfvvHal4WxG2YSfCl7PVr+lTrkh/TnqWXY6g1frnmhctDUSPVlAxIgqkrckDeMz/H6vBmVt3Aj9ENpKHu0s2w4+vaPvo8iJE/312S+ZbQEUFCDqdzeiNaqEsE54SLD20WcNnlip/0wdjnM+eors2R5R501E6gTXYG/lQ1+J6EqO38DFUH8egNm0vMyIhELs8wTlYxK4Y2fwQE+SCnTC67LECUoIyCoZMGK4evNFeK0uXUzkiqzxnZNNCAr2no9ib19yWnnHVgJ0KRxvPzeFT53te91fSi+2lVa8lv1y+d74ptLhc8k0oq2BQ18X+Nw=","authorEmailMD5":"c0a0a6d4e1cd8e05a9a630d23d40d2c3","authorName":"Mario","authorUri":"","message":"Hello, can't you call another method in the ExecuteAsync with the logic including a classic try/ catch ?","date":"2021-11-23T21:48:12.989Z"},{"_id":"b3ca42d0-66ba-11ec-8be4-49f74e847e2e","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"0e70b6c0-4ca7-11ec-8d57-4f355a9dc4f8","authorEmailEncrypted":"mGo5evHEq/A3rqJbpbovAydFuEYF0UWySN7nAfE1lTsZNzcNsGfQuUX6piYLSatW4Zg4Uawx7h2f6RTWTxUlGQThMpTcDL7utDOHUW5mml8peRgA44v2BR+GGhVUhyju9gwKhouGOzSD8IDBYbNQLrMGSlL5tt3LrWidy68Y3ntQ3eO4o4RV4FbVnYomGZjfj6dpbbNra6c8n2TaRXv1xiLseh/MAuhfAKpftLqeqKxEUOn5+oNCDHfNS/NpvpIKoDuhJCbh/7RRG9avLqOblwP4fdUVbkAJNOXDFYZ3mFV1cWqbLYJfkynfMtkN/dkHdvDlEkt6uzzTS+nMfZznFPAk7fDhEA9LHlHSfzNqWYrAaVEMsOLbZw8KrKPe9JJAaCYbAyPPRa15pNxCmxQRnuNIdKHOjSOFSa11XT/aYmZ6IFIsU4gaB7d4kSGaJUxU+jfijfQ5o+97ppCATqYNqWmKoU4lbrpaN3N1NrO58HCEy918xEKGa1nlqw4uGeE6I0y5DBPqhUY2iYbdksMriw8EPecYI1TuhVf1OSq9etSpBurTr5giQ38z2dMq2UHaXg7deufZC2Q1RybPSDcJGke2GWzpLGCrImrqbeEY4ELCa09ZfJWPXQg1tv8jVdNk1oLDXZozGNBWlSBDDRYZRbfVEfvrVqA+1BH8bprJ9/k=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Sorry, I suspect I'm not really understanding the question. Yes, you can call another method in `ExecuteAsync`; it could go where the `// Implementation` comment is.","date":"2021-12-27T02:14:20.930Z"},{"_id":"ea4c08b0-7def-11ec-a1fe-1bfcf9705033","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"Robson William","authorUri":"","message":"Excellent post, thank you!","date":"2022-01-25T15:03:13.069Z"},{"_id":"80fd2930-f022-4268-bce7-62e29d2952d0","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"b17d6302-4979-4c7f-a85c-ebecfa47c0c8","authorEmailEncrypted":"v7WmDFByynlzR7htTCel9RIa1cmJC5sPRYVvwuEoh+41POjO74H/zt6+O4zFk8FXF8gEOwRLzxzqEBelESqI7ElZjd78MZdU0GMUB3COQy8QapWG6xjDjLoCET1SvRO/KwhrpOCj/SL0zWqZyY0s/00ksjpo3umH5ifGufxkmRnIhoxkhdc2o4pKiY/KdjjdDYAHo/6Sk5NxsoHKcb80P64v08LV41Bry0TnBry/s7ekkf9mhywsATfXDgPOu2RZ+jLSIk1wXwAgcCIgvxfjtyvIP8agcONBY/6Qe86Alsyboa0i/WkauEWtQEKx2UTqDaSv+zYSx8b3S/be/o7oAa+UGQF2u8BcDB8nA27o6slgECiIDfRv6Qvlk+42KHMeg2JEQkMe/bP0syta/hKjyqwDlJoi0WyOhFm/wv7r9KlcsmlmQvsNCvO07UYy4SY4jj/MIAEmLjGQWm/AjJSdXobHcrpi/NqHqDWjyAdcOqocZEmJ/AGcndN7OJQY5FgZIw5rhvECGltK2+3YuSUGIpJX470jEUtbLeiUlEyQyqqGO0uBug2MSfVqRdnFZAFSta4n2PqbZyBz1ZdWPVsVorVftEY3hZcNpUKx6vIA6CzVkGUYwEfwgGJjy26o5r26VqiBADXa7tkIUc3ZbKjyGMEne7ih6AB52iTkVx7Uwkk=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Yes, that is a clean approach for better logs.","date":"2023-10-04T08:40:17.8332802Z"},{"_id":"b17d6302-4979-4c7f-a85c-ebecfa47c0c8","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"Mike","authorUri":"","message":"Thanks for the excellent article, yet again!\n\nThe exception handler will catch all exceptions, including `OperationCanceledException` which is thrown when the app receives a `SIGINT` (CTRL+C) and which is thus valid. So when stopping the app, it will log \"Fatal error\" which is incorrect.\n\nA better approach may be to exclude that exception:\n\n```cs\ncatch (OperationCanceledException) when (stoppingToken.IsCancellationRequested)\n{\n  _logger.LogInformation(\"Application shutdown requested, stopping service...\");\n  return;\n}\ncatch (Exception ex) when (False(() => _logger.LogCritical(ex, \"Fatal error\")))\n{\n  throw;\n}\n```\n\nWhat do you think?","date":"2023-10-04T07:04:31.2705154Z"},{"_id":"0a2c3813-81af-4d9b-8798-3a452f9b5631","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"d2bb3d55-fbd4-46c5-a527-d4b240ad6dfc","authorEmailEncrypted":"tyzkpqT8KSMaul2CFV9CJVB4RCUZkU2NLyxEG4IImV18Q2XXF8LvjmfWcXHO6twBsxQZJGlnvB/d6G6pSx+YaNndQY7A1203vPkG4lXZPC6X2ApkQVqVBcEwGYmK/s9HkAWS80auPV34ZtmAW5/Em47mkfEfw3dPSoL+U2XZoJKdbwPof2VDkwAolvjWTDHgviSh3vUm5nq2hPNq7QQR6qvuWIzGwQayAGPdyzl8RR+QhifMc7Y9vmwSY4Ci8IOBsV/ja7z3fD7ZBZPjUpxVx8FaXBr1h+4RbtXz18PdrUNRMqedhQrdV/OfTxHTEIB5TrD0ir9QC+soSwsTZf0J+cseReB5DU1EnnF/jpZkIHJHKMPO5imBncMSW7VtBwIB8Qc3akVZafosltI4nNjTNBNVW13eBLEBXzdWySMdpd1/cYj6APuDM37jPBNP0ah5DqfsdFpI+H8OZA6u3mJkT3dxbZ0EUXWQX1y+a0aCM32INdo0YQhKgAlQ22XwopT8X2jptbGY869oOk+qEHFFiity4OxwL+yUJpXW0+/DAMyMiyDkTYshjB8rK0TLnVFBgecB1op9nsYHKV0MS1MqHmr9HYdvJF15gtFUZX50fX51p1aUGe0nX/rvboJM2wc1chbyC1d+1fm4NYpsMk4PBg45iEVLWZHTUz9IRK74yfU=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"In .NET 8, exceptions should cause a log message. IIRC by default services will log to the Application Event Log, but if your startup code is removing existing loggers then that may prevent logging.\n\nAnother possibility is that it might not actually be an exception; the default behavior for the .NET host is to just continue running if any of its background services stop running: https://blog.stephencleary.com/2020/06/backgroundservice-gotcha-application-lifetime.html - in this case the service will stop working but still show as Running in SCM.\n\nIf you're seeing the service actually stop (i.e., it's stopped in SCM) and the problem is that it's stopping due to an error _and not restarting,_ then ensure you have \"Enable actions for stops with errors\" checked; see https://blog.stephencleary.com/2020/06/servicebase-gotcha-recovery-actions.html","date":"2025-02-10T14:26:15.2365573Z"},{"_id":"371d0b10-ab31-4e8c-85bd-ccf55a3c99ec","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"","authorEmailEncrypted":"n79ANSS0UMrEVFwNvL7a+mTp/ENlEuBTExtxP7dRZU5lbgT81XdeUASiyHdgNEtTQdP63P55eoHYmS2ZCc1mbf5Q2CBZfeKvw7yB2BCkgtwchMeYKYEhVS1ragFoW8JhuRaE4hsVKcHyhe1CYhoOX2FRAwAYhqM39MWSwNP701pFDcHeywVm25vdOl7cYM3JSB6JvV2bEmIn0/cgmfpiGkvhRc2syNqtOSNVlhbf3f0vSWysPw4Y0zTp44GKNMXyekgt/fEI1+SEt345SQSP5CeXOx0+8YNCmMCxCdv6WHLUozukf6V3RNk6tZ6R6csdqy6d3QvSZQPuXoqRH30enK8TZcV3zhJX0mAqqjWCJqI//SgAo4aiDhuvWUG64v1PvQ5S4Vo45TUH5Rs98lZ1upNnUOajvmWVRtGkdqO46DbcMiWgqJbBTBWDoaJCRc0UPD/Hwd2sDfBFofs+dknGyQJY2stg50N5ZeTN7g5bL0TKHWNk2fuIhBzfphEro9Nc1aQLtSjI1DCuNi/ZnFnselL/nmre3HCNh9HdrQW01gUmOXH749bjSFACVeyXsqXky5n67SIoBEGR1f9THIUUt+q52OZJw0klTC8aN6oXdgXnedBI1qny2/xj2g/4jBHD3ji3ZomXThpLXvXdkx7cQeh+A5psNh5VVfiX9USRTc0=","authorEmailMD5":"4e874e424ad408b2893f4e728449f1e9","authorName":"Nick","authorUri":"","message":"I've got this exact problem, I've got a background service that seems to randomly stop without any error message being logged. I came across this blog post while trying to find a solution, but I saw at the top it was fixed in .NET 6. I'm running this in .NET 8, is there any other reason why this might be happening?","date":"2025-02-10T09:43:49.6452077Z"},{"_id":"d2bb3d55-fbd4-46c5-a527-d4b240ad6dfc","postId":"2020_05_backgroundservice-gotcha-silent-failure-2c4bcdc5-c4ef-341b-90f5-0330b729fdcd","postUri":"https://blog.stephencleary.com/2020/05/backgroundservice-gotcha-silent-failure.html","replyTo":"371d0b10-ab31-4e8c-85bd-ccf55a3c99ec","authorEmailEncrypted":"qRS1dkAbGENs03scNStLuYxs7Aic5F0JQS+Yt26BRL0LSqDJTeNQ7EyVJJwLcnrqpghHc4p4FHiKDBh8294YbZcPjVZLsTZi3+FNUWZfKl5T+VOFNeoN1Qt57NYjp8fkiZsr4q3/Q6H6/lzgOd5IUXUselzTUcS7pExg+dS/TnlxldcK4gSuJ4zk6c6edFawo7tz7O5Z5KbR/rRMImWe6Phn5WaM1TwpzGyD4c0Xyg+jF/pYRwndaH6t5OkAZUr/V9F/wU9wowJLqUmyLP8AszQ0LvV/48qSMkgQWDkUFbUOKIqjMbOi/RJbtGwkNtmdusErd60zMSutdbY7YNz9o2GdI3VucX6JwrKzjJyOBrdiuJLYdCoYmAVgmaBEfjYu2VgdZ/4mWHVnO8EBSQ0u+xnJQizDHqFlAIF+UJCNfzNGJTBJ2jpUC/ITPSEme/kcp0wQlVOB6VwJUcQTdw92CjKckZ7awY6mTf7amh7BnRNNi7QGpkr7sF3T68D6XeQ7TRThPKKuT73yLu85EQr8/Cs3A7T19rh8HgKUtOrvGNxP2R2baDvEBwcTYRghd/jdmqeBlriXejVFJepk9VvKa3/t4PV2PTuT7DzRVwSlcQTD6OFNphXkU0knRURcMMWKkHvw8EBHb7lQNgXE4ebuPsmP63deQHi2+b3Mjh/L83E=","authorEmailMD5":"4e874e424ad408b2893f4e728449f1e9","authorName":"Nick","authorUri":"","message":"The service I'm trying to implement needs to be running long-term, for months or years, so I'm trying to set it up so it can recover automatically instead of having to be restarted manually.","date":"2025-02-10T09:51:58.4528493Z"}]