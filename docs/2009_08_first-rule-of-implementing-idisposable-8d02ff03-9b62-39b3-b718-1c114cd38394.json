[{"_id":"2742ebfb-558b-3fd2-b73f-92c1a48939d4","authorName":"William Wegerson","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.omegacoder.com/","authorUserId":"","authorFallbackAvatar":"","message":"Excellent article...you should back up your assertion from the same conclusion stated by the MSDN docs: [Implementing a Dispose Method](http://msdn.microsoft.com/en-us/library/fs2xkftw.aspx).","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2010-02-25T20:49:28Z","timestamp":1267130968},{"_id":"4699222a-10eb-3043-8632-39ed136c21e4","authorName":"William Wegerson","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.omegacoder.com/","authorUserId":"","authorFallbackAvatar":"","message":"Oh...I would add one other rule:  \r\n\r\nImplement IDisposable if you have (managed) events which need to be unsubscribed too. Otherwise the managed object will become pinned in memory due to the subscribed event(s).","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2010-03-01T21:27:31Z","timestamp":1267478851},{"_id":"5fe64ce3-b81e-350b-8d76-70f3da874932","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"There isn't a clear consensus at this point regarding event subscriptions. There are three different approaches that I've seen:  \r\n1) The class providing the event treats its event subscriptions as managed resources, unsubscribing all of its subscribers when it is disposed. [This is William's recommendation above].  \r\n2) The class receiving the event treats its event subscriptions as managed resources, unsubscribing from its providers when it is disposed. This pattern is commonly found in MVVM projects, and is a little trickier to implement.  \r\n3) The event subscription itself is considered a managed resource, initially owned by whatever component created the event subscription. This more closely follows the pattern used by the Rx framework.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2010-03-02T21:03:45Z","timestamp":1267563825},{"_id":"4105a5e4-1b67-351e-912b-00034e41b01c","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"What if in your example the list holds thousands of custom types. Say ErrorList class goes out of scope. But because GC may not start reclaiming memory, there are chances of memory leak.   \r\nHow to handle such scenario?   \r\nCan we not write dispose to clear the list when ErrorList scope is over.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2010-03-30T14:42:36Z","timestamp":1269960156},{"_id":"c241997c-6cf3-38c7-bea6-051f271d9a19","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"@Anonymous: as long as the custom types are not disposable, then there is no benefit to implementing IDisposable and clearing the list in Dispose.  \r\n\r\nThere is no chance of a memory leak; the garbage collector will work just fine.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2010-03-30T18:40:10Z","timestamp":1269974410},{"_id":"823a3c91-e558-3778-aa76-44b9e9973c32","authorName":"Josh Sutterfield","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/11126806767512709424","authorUserId":"","authorFallbackAvatar":"","message":"I'm not sure about this language that equates an IDisposable with \"managed\". You came to the conclusion that the class had no managed and no unmanaged resources... what does it have then? I know MSDN refers to IDisposable members as \"managed\" resources in covering the Dispose(bool disposing) pattern, but this is inaccurate. IDisposable members MAY live in managed memory but all we know about them is they have further *unmanaged* resources so they need Dispose() themselves.  \r\n\r\nA string and a List are managed resources, they live in managed memory and are collected by GC. ","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2012-10-10T20:25:23Z","timestamp":1349900723},{"_id":"62f03f0a-29f9-3499-947b-3ffe578c47ba","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I agree that the language is not ideal, but one must make a distinction between IDisposables that have unmanaged resources and IDisposables that only have other IDisposables. What would you recommend?","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2012-10-11T00:18:34Z","timestamp":1349914714},{"_id":"0254514f-ce53-3765-840b-8c4fa3f00ce0","authorName":"Unknown","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/15132731739795155482","authorUserId":"","authorFallbackAvatar":"","message":"How do you tell when resources are involved in the class you're working with?  \r\n\r\nIs it fair to say they all involve access of a device of some kind (a network socket, file descriptor, ADO connection, etc.)? Or is there a more reliable guide rule?","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T22:55:24Z","timestamp":1371855324},{"_id":"370e088b-6d81-3b0f-a007-b798f6752350","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"When I use the term \"managed resources\", I mean \"managed types that implement IDisposable\". So String/List/Dictionary are not managed resources. \"Unmanaged resources\" are types that represent resources outside of the .NET runtime; usually, this is just a single IntPtr, but it could be more complex (e.g., a pair of IntPtrs, or an IntPtr with an int).  \r\n\r\nTo support the literal meaning of \"RAII\" (resource acquisition is initialization), you just have to follow the IDisposable rules on this blog. If you want to use the RAII pattern to do something *else* (e.g., take some action during Dispose other than actually freeing resources), then you can use IDisposable. These blog posts only cover using IDisposable for resource disposal; you can use IDisposable for something else if you want, too.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T18:22:18Z","timestamp":1371838938},{"_id":"435017d3-5032-3d06-81be-25c45c738b16","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If unmanaged resources are properly wrapped in a class with a finalizer ([http://blog.stephencleary.com/2009/08/third-rule-of-implementing-idisposable.html](http://blog.stephencleary.com/2009/08/third-rule-of-implementing-idisposable.html)), then all resources will be eventually released, even if you never use \"using\". (However, I do recommend using \"using\" for every type that implements IDisposable, unless you know that it won't have an effect).  \r\n\r\nIf you don't have any resources (e.g., just String/List/Dictionary), then you don't need to implement IDisposable at all. That's the whole point of this blog post.  \r\n\r\nRegarding DbConnection, it is true that this class (somewhat) violates the IDisposable contract. However, it shouldn't affect you at all. So the best way to \"handle\" that scenario is to ignore it.  \r\n\r\nNote that when a program crashes or is aborted, it does not need to do any cleanup at all. The OS will take care of that.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T21:36:31Z","timestamp":1371850591},{"_id":"6cf17a36-3698-3af9-9e25-3e64270162e9","authorName":"Unknown","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/15132731739795155482","authorUserId":"","authorFallbackAvatar":"","message":"Thanks for clarifying. I still like to use \"using\" wrappers as well wherever possible for objects that claim resources if I have any suspicion at all an uncaught exception might be thrown midway through or that the program might crash, since I can then be sure the resources will be released regardless. Are you saying that's unnecessary as long as I follow these rules?","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T20:39:42Z","timestamp":1371847182},{"_id":"8666a0a7-10c9-35e6-b531-113c39cdca43","authorName":"Unknown","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/15132731739795155482","authorUserId":"","authorFallbackAvatar":"","message":"I'm still unclear about how you know when you have unmanaged resources. If a class doesn't implement IDisposable, you might need to implement IDisposable -- or you might have managed resources like String or List that don't implement IDisposable but are managed nonetheless. So if you have one of these you're not sure about, but which has no IDisposable implementation (like, say, Dictionary), how do you tell which situation applies and whether you need an IDisposable implementation (and/or a finalizer)?","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T17:49:16Z","timestamp":1371836956},{"_id":"8e215574-8cff-33b6-9fd4-437e5f81c844","authorName":"Unknown","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/15132731739795155482","authorUserId":"","authorFallbackAvatar":"","message":"This comment has been removed by the author.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T20:38:13Z","timestamp":1371847093},{"_id":"b6957258-05f5-3ed1-a611-d359dd965335","authorName":"Unknown","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/15132731739795155482","authorUserId":"","authorFallbackAvatar":"","message":"Also... SqlConnection objects are managed and implement IDisposable, but I can't be sure the connections will close as part of the cleanup, if they happen to be left open when the program is aborted. What's the best way to handle this scenario?","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T20:41:33Z","timestamp":1371847293},{"_id":"d199d5bb-0d7d-3b0f-a3a1-711065084da9","authorName":"Unknown","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/15132731739795155482","authorUserId":"","authorFallbackAvatar":"","message":"Also... if you want to do an RAII pattern like  \r\n\r\n using(Foo foo = new Foo() {  \r\n [...]  \r\n }  \r\n\r\nVS2010's compiler tells me your Foo class *must* be implicitly convertible to System.IDisposable and must therefore implement it, not so?","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T17:53:32Z","timestamp":1371837212},{"_id":"f7c8673b-b4b2-33be-91b6-6c7f26d14edd","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If you own unmanaged resources, you'll know it because you'll be doing P/Invoke to manipulate those resources.  \r\n\r\nIf you own managed resources, you'll know it because the type will implement IDisposable.  \r\n\r\nPerhaps you could read this again: [http://blog.stephencleary.com/2009/08/how-to-implement-idisposable-and.html](http://blog.stephencleary.com/2009/08/how-to-implement-idisposable-and.html) - every question you've asked (except SqlConnection) I've already answered in my posts. If you really want all the details you can also check out [http://blog.stephencleary.com/search/label/IDisposable%2FFinalizers](http://blog.stephencleary.com/search/label/IDisposable%2FFinalizers)","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-06-21T23:50:43Z","timestamp":1371858643},{"_id":"f974e71e-32ff-35e4-af1f-14866399a965","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Very good article, exactly what I was looking for. Thanks for enlighting me !","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2013-10-25T16:01:41Z","timestamp":1382716901},{"_id":"640e818c-a7c4-39b4-acb1-0281a495f637","authorName":"John","authorEmailEncrypted":"EHq8zb7yf4tSoB1LRdfGgtWervzR/bRqQ//YMj4WlEzG95khFRWwkS7gzVOcB9iynhPALZaXqxGyFXL35nCrURg4rbDyGV+/jmQM/UAHVIOnQt7kjKbgph5OuOIw7x8X2kBmz/89sA4U5sMUQ1FHIoWl+VzBZlx6YJdH5AniLLpuJhxTMZ6Pam9CGOc7FZLMcWZs6FT3xfZOuSImyyxCxO/zYp3u52uj3yrohBpmS/mLKIMQO5WTKYKYFh0PoPh0A1rjH1xVk562HOMomjR3Hm1cGgtub0vAjyBsAQHY7/KgNzQT6jFDAenIFDD0V2ao+dHwQJaNY9iqn2z1LP75VW2XzhGLoVswww65zw6aQ//60/48wBmf8d7W9+FuG2P4gWW2xuRD1RdP+ARZprT7bzeM9vxPs3k6DVijHciu9enPSrKk1XaeigNWgWj25ROFoDEJSN4Z9IUH1ZjaXaI1y5kdEufKofDJQH+22/uQoWBxO1qJvExIQtbSm/4op7PwzPWRqU/YC3v/i3OCNSSMmYYBElJNagYxOlOjDb6CppUUW3V2Sw0HauOFM1oMCsH8XHuBq/tHxzfzXYX3Qlat8f7UopHinEGlwkLKWMYbouJqVsdJw8ZEgSAEIuatPSvjE5q/bhyX2/XwWnl87mnsyaeXRS+8GOj25tdumi51ghk=","authorEmailMD5":"a5dd637031391fc33fd237323a8b9f35","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"The class owns unmanaged resources.  \r\nThe class owns managed (IDisposable) resources.  \r\nI'm confused... Isn't it 100%? I mean.. always? :/","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2015-03-10T13:55:19Z","timestamp":1425995719},{"_id":"93a21339-dd17-3be5-b258-bf0e7782ae6a","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I'm not sure what your question is. The central point of these articles is that a class should either have IDisposable resource(s), or it should have a single unmanaged resource.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"640e818c-a7c4-39b4-acb1-0281a495f637","date":"2015-03-10T17:33:18Z","timestamp":1426008798},{"_id":"0fb93df3-480a-3ef1-ac02-aeee3fb8d870","authorName":"Mihir Kadam","authorEmailEncrypted":"NpixstE1Y8ae+tRoaLmUVO9al8iHyIzTZGLlTf164enCDZtnms76EjoiMBM/7rD+f29oBODe+PhPpKnZL5DP9R5TVtolFTi7+Q19aL/Lg7FGKuR0QIFOvU7RdkejuouI1rvhWvjtLeGFUC/IPQPFQNerJsUVfA/YLjp7O55VO5bSiGLb8imNWitOoKo2SLQWG2drqE3vwoM3dmLtFcg3EH3dt59wFCG+wCGIaVBC8H/1fWfkIy8/OmawR2rSiQ19rCD5R2aRQD96GEySht/M5lgcUGERoRdSWnyiZT8X0yxHt/GcQQRC6REgElDWWRDiE62nKjOQOqtjZffDLr9wQCXwcTRUfte5XTuEY6FRXfA9w8Al6B/H6SR4CJQUOPgfXC9FgmRKyUqPnaTCspLpIVzYYZ977GPQ9odQDKm2may6Ug/fHSrFsT7+NROaSE3CwJc4lSrrttrVOq76bc9DH+xPP5gfiOZlbPgeVpJUALyfztI+HUkZX9ZAunITcig4HMMslXOhl/6pGyhWtAUMQ8/zVT2Si0oxzIxQQ0Rj7KwhQ4ALhaQiX8u2AXP/FWnDB8Zey9MGLPnKEd7MEAHRVDsRgElv7v3UNMGgpCcrKn4G+SpB51Da8BvH8FRwkp5bjcK2fADdv1JwdxK0GQoCVO/lXkLuFgqg6nB1oN8nl54=","authorEmailMD5":"539141542396be97a6a4ba00c105381d","authorUri":"","authorUserId":"disqus:disqus_wYHp0weeTj","authorFallbackAvatar":"","message":"Hi @stephen_cleary:disqus ,  \r\nMemory leak problem can be solve by IDisposable Interface ?. My windows service is connected to data base .Some time i m getting error like Unable to allocate memory from OS. This kind of problem can be solved by IDisposable Interface?","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"","date":"2015-03-15T10:44:57Z","timestamp":1426416297},{"_id":"48216309-f565-37f1-a840-346ea0a764b1","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"No, IDisposable is used to free up other resources (like file handles and database connections). If you're running out of memory, it's likely due to holding references too long. Like a cache that doesn't ever flush.\r\n\r\nYour best option is to get a memory profiler for .NET, and see what it says. I've used a couple different profilers, and I prefer the ANTS memory profiler.","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"0fb93df3-480a-3ef1-ac02-aeee3fb8d870","date":"2015-03-15T12:21:15Z","timestamp":1426422075},{"_id":"ee485b64-09ea-3fa8-a61a-fbfc4b5f7440","authorName":"Anonymous","authorEmailEncrypted":"i6iQdixoyFE53Qq+N7Y2zsSJ3sTebGQU+Iq4+0zKtX3teiVoANBrbwhP+fRGnPOqNLEd/F2ENFlsGPGH/v5XRlANDN0oX78Awqg9yg3AQXgBMYZktW/kku0qJrC5SuU9DlK9PF0KScRfiB2F5TQACmBWGEZ9u+lRqjTQ67dGVqV6i1ewIdiDGRpdVgSVF/HijkTFQde7uzSRlGgHaYFpK0doQv5kFjGc9BS6rMlfwLscjL1JLfwfLQeXKV7065YTxmNlsSINJJqQ0nynFOG9G2+7ZeAixwezUGRdGYneXJyCZEjztiGP+mLMPTPpnr2jMi/CfcyNyqM/t2p+WlvyAVbCRhVFd1f3MFnAl1q5juFWlYHTQ1gmhz+OOjApuPpaimuLN35ZHo/jkcvMQje9fThjs40PmXFR3xaoWufwcpJCGaXHbTfaxuSM7a18FrqEQCmSzpJ/7VpfjKNIDL4n8RUVjI5FwapZ6oqXKH9xThL2ROlWNW/7PyNNiGoHNVigZgt17F0wGocLVB912RDu2Yd48CMQjR45IcB/Uh3inHwv/5VwDa44WAeHHEnSmEoF1Bvkt77K+t8sb2ftVOOPB3YSG6ieu1t0rIG1ZbfutzGxMtyWWUtzJpfWC0yqi16ZOyQRHDRyQxdGtczI8QUJlq8E/Y/qedMH1ZGrVcEoTtQ=","authorEmailMD5":"93942e96f5acd83e2e047ad8fe03114d","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"That's nice, its the same with this article  \r\n[http://www.codeproject.com/Articles/413887/Understanding-and-Implementing-IDisposable-Interfa](http://www.codeproject.com/Articles/413887/Understanding-and-Implementing-IDisposable-Interfa)","postId":"2009_08_first-rule-of-implementing-idisposable-8d02ff03-9b62-39b3-b718-1c114cd38394","replyTo":"2742ebfb-558b-3fd2-b73f-92c1a48939d4","date":"2016-06-08T13:30:28Z","timestamp":1465392628}]