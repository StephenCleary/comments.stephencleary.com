[{"_id":"dd32bfda-b064-307e-857c-bb5942492ed7","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Yes, that is what I meant. Fixed, and thank you!","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"","date":"2013-07-17T19:25:17Z","timestamp":1374089117},{"_id":"e8f2f9bf-fb94-32ed-95fe-bb5b5d4e06ab","authorName":"Robert Lee","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/14886706451628525566","authorUserId":"","authorFallbackAvatar":"","message":"\"ThreadCompletionSource is thread-safe\"  \r\n\r\nI think you meant:  \r\n\r\n\"TaskCompletionSource is thread-safe\"  \r\n\r\nright?  \r\n\r\nGreat post though!","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"","date":"2013-07-17T19:11:26Z","timestamp":1374088286},{"_id":"323d6a2b-04b5-38bf-915d-9b90b72fa527","authorName":"Tien Dinh","authorEmailEncrypted":"fdHKz/5cjxzbaQnceecw8u0PIZNQkg/sCvfnSL365yfUnrDK0G8iNMDkYPddK1baaK/JDtm04YL70GABqM+c7gXAuKKwtYTIIGvHS0jDMsJ0eTicrGpBriSWW7hwqfqyBuzn78O1lQWs92TJ8S82DKN0OoW7aUPtlwxpJriqWm3GLs+nly3Kju3rZC4RQlkx7eCNXcgYWL8uIEctwEfYEvGbfpObOkfE787Wp/od9+OBmI6OLhsrlh6r9Bz13mmI1upb0q77piF706Lj+rsy6U9UF6LFupBokC2bSnZyVg4h1uvlkhLRqzHKAnouN6jcXm9hKUXUqBcbkIA05rqvdDyLxn+RiPbUliAzhCtskNK0DlfEQ0YpEirA120D64RHpBLsNDS4qPvONLRhzMuWwcNdWhmE7nEFO0lqinsc5lraFwK5WOI6vtyj9P9VpfQ2L9fXgExbTA0aDsqJm6tkY3O657900i/X4To+sAyZRXKsnMLZiwpU1t6U9y8qRu9eLPK2a4T4D+2AnW+6FNGTa4KWPbvBAqxxceNBYkdt+cJLjgVmLP9XTgYewAqh4mTdXM/UgrC4JFbEg5JLhS2LXOaYx1yd3kMn7jFSEXtVjIK6cSOrqzeEWU3d6BpYR3Y2z2sDp9cwnb/CmNco3F4LcP/z1RTpfufP1SXftJ/r2cY=","authorEmailMD5":"7dddfcd6919e98c51de6dec1e08bcd08","authorUri":"","authorUserId":"disqus:tien_dinh","authorFallbackAvatar":"","message":"Rather than use await Task.Delay(100) as a Task creation, you can use Task.Yield()","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"","date":"2014-12-18T06:02:24Z","timestamp":1418882544},{"_id":"8cf4d5e4-6312-3096-8843-5542c8b7f891","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Neither of those should be used in real-world code. I wrote \"await Task.Delay(100)\" meaning \"your asynchronous logic goes here\".","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"323d6a2b-04b5-38bf-915d-9b90b72fa527","date":"2014-12-18T18:01:35Z","timestamp":1418925695},{"_id":"a404d5bf-c3da-342a-bfdd-d224f7f80a6a","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If you want to asynchronous wait a period of time, then you could use Task.Delay.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"cdeb4bd4-6ac3-3a1a-a881-2204e4d47e7f","date":"2015-04-21T19:15:03Z","timestamp":1429643703},{"_id":"cdeb4bd4-6ac3-3a1a-a881-2204e4d47e7f","authorName":"Omry","authorEmailEncrypted":"hraLvL6HRNZVGdka3fG1sHWutJVJYa3ALitd/UU2S1oztN1a0apPzoLFpgjx4kVMKgWTnA/t1e3zYfCZLqycL/vDju30t10weCmRQzw1xePkPFvtqNA0tJ0o6t5MtTC07Vh5iVeDUUBldHfQiVP61KBbblLJFC01s1seF8Q1/2/L6LGqAy05toCQJOP/0WdiBCijJeytaGu3NvHM9BAm0duYaRXlUe4pvDWTpErlWFBjwfpCZJsFYXeJ21g2x5M5sTi6miP94n8QN0hA1S/KxF2Oxtl6azTaGdsY95bQzMApQqeKt7eoywrtBfw1wl5x4pXg2empjIjFzP7GpoTDY77BYh9pJUXHpiZlGMtiqAQl9+3GfrgQaEUUFhMZ+5xiQD+O4ah86bQQsJvHvz4LnztecfLBetMc5un11FWSTFWIHuvmYivDw33j6UtywKToYCWPOzFNhKoyaRM8NWebetuHPE3ELs0IaLNASqxUNtulnGsgoCAKR2I4rEu807oBS6HxnNE9+H4k0dJHzfnIz5Oyy8IctkfD38BmolTzqvl6ZKHn3abPGX7Lcs1rY/6tm26/l1tmiOqU2FTMDKj60PfgqaXeDRntR6+t/lsQD1oY4yaug8Ptzq7Lf6qmb2JeJD93OctKiQgYA16FZlBfb9CM0BZeORCiSC3pL6lQjpU=","authorEmailMD5":"f629d7649631df73d0e791b854229464","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Why not to use task delay if I want to make a call every 30 sec?","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"8cf4d5e4-6312-3096-8843-5542c8b7f891","date":"2015-04-21T15:57:44Z","timestamp":1429631864},{"_id":"b77aa9fa-60e4-3cd5-8380-1bb3875f1b52","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Then do what the error message tells you to do: Mark the (calling) method with the async modifier and change its return type to Task.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"e0d8bd91-8c4b-35cc-949d-67dc2ff6da77","date":"2015-07-22T12:14:13Z","timestamp":1437567253},{"_id":"e0d8bd91-8c4b-35cc-949d-67dc2ff6da77","authorName":"Sergey","authorEmailEncrypted":"iTT74dMCiLGOnukpUxTQqsRFf0ShMpqV75XlAPT8osOkC7yyq71FYINrAyv1lQJ1J3qMX/bUS8ys6wlOO6jB3/fKi/tAGTuANrsMn55bthwXAW94Hr/8vjnHb44vzi/vYEQ0ZE0YFqWR9zSWgA64cWhFp1+GQF/mFzFfUcGpMoRQOFDCeaw10vC/1Q9V7hmAmWSf3wq/ptRE1Kzg3uDI+rUT3Csfqzi7ZbDoQ7T84KjRBq/n3GN5LNfrWBdxhRTRj1uTocy9o4ax7OULRaadMu58msNGK5SuRmFXFl0cblQSGwhZr4AGvPT9xIR2mdlX7ep9rhJrg1U4k4BHPJ17bhXiEPwysfMR4Kv7Tz44ZoSRN/qccziU86bvVlysXqM8mMms/vLTbKqwd8v0OZJAj8UbzgVK4SA2XH9G3H6Alo5fVwYPZHcalFBKf/uYIJaf4YjGIcIt5M4ElDR5ICP7OZcmmEnYtLnN+eHwBoH/wm+kO6j+RRhTImK5O8pBv9F6H8VnH4Xg1fvVJY5Etw1rNYG1YwXa02xkMRDRp3Fy4p6Yxawinoi/ggf96xmpLfo6Y1La/tLnaCq6k5s5hx8sGJJ5/8q8vFhfiuY7y1j8n0V0dHaJzl2EjOK940tmb0DoEeP49w6Im20YQAatFr9DL01tzKFm6OZv2twdVXd5UNw=","authorEmailMD5":"a55ce85d84d6207834d97b08b84dbf85","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"When I try to use MyIntegerEventAsync with \"await\" I get \"Error2The 'await' operator can only be used within an async method. Consider marking this method with the 'async' modifier and changing its return type to 'Task'.\"","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"","date":"2015-07-22T11:13:45Z","timestamp":1437563625},{"_id":"ff350dfc-5a99-3975-b0bd-0874f4a028c2","authorName":"Gilberto","authorEmailEncrypted":"DgaWo/6Kpy8P2WyiqDscS+eeaxAOZpzM4tKFUL5H4A2e7yTmWMweFc0vNImoz+FrrH+QPKXC6RoviK5hyEERZnLqmpcPia5N8vSPMSRbBAwH2WtueY9+ipY/rjPZtVCdNF3Zwm7xqUwxfZoaHd/CLAu3uMxLA5RLHizugtN3lN1iF1EcolRVrJGwSy4TNH6q9VtH7IrmXpY7wTFAlfLkDtGhwGuoRtfVhYlMOpYkQShIf9ISqLbpueswEnHvU8ndwqYcv4zmAwuF6w3wU2vt4L9aEZt1Ju3zcKcF8Vj4grOJ/g8ecnC3kzSryO4crnQdDcSsrDcw64v2xleVuUFfE9F1yTDQCpokcrwTcXkuIVjH/rNDTViChcIXy3S5YNpO2qoHiXEW3byY+vgxjlu3jJBN3Y5luvKty+HoM/3VrMyyyByhtXiT/RYL6PP2agI4NwuXIEyvcJ0nRMRKiRLeKc7DZE5cSStgftWQ+SA2Wjy/T3z6X9bALWnpPc07OPkigbpaKzDQR4RuEApDSh7vmAxnn6DyyiM41zwkgzKMAXO/NNMBoCQ9i4ULNmfr4CaZWKoZv2cBeaXCHVqvtPhJFiU+Hh80fiuLEC3SmJ6yu4EMrfPyXqYGIPTfuy8fTyk5mFOHFU8iP2l1lwE210PEEI9spLWX/MVg4fxO4BjwL7A=","authorEmailMD5":"ae536c1c0bc292aaca19574b58587ff1","authorUri":"","authorUserId":"disqus:monkeyweekend","authorFallbackAvatar":"https://disqus.com/api/users/avatars/monkeyweekend.jpg","message":"The `await Task.Run(MyThreadPoolMethod)` sample does not compile.\r\n\r\nI think it should be: `Task.Run(() => MyThreadPoolMethod());`","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"","date":"2015-10-02T02:02:55Z","timestamp":1443751375},{"_id":"2bde06ce-ce7e-342c-a45f-7908ed26a480","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"You are perfectly correct. It's fixed now. Thanks!","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"ff350dfc-5a99-3975-b0bd-0874f4a028c2","date":"2015-10-04T13:06:51Z","timestamp":1443964011},{"_id":"7b962676-a123-3664-be68-cd670a77c7a2","authorName":"Fiona","authorEmailEncrypted":"VEbCAY4fSEHPIkHAU98H91X+O3Tdx/ZXDTvI0uT4n5jM93lpMHg4CcXyTFZzeirVq7vGu0+rPOJvLgAvt2Qi6bxa7YAPjgqxt7WbvWmvLs43NdLm+deOScKAwsCj/wbuL/M0yTArn1TZujxFRPdJrvListe1BFfRm5BHpjH8plzpjO/aFAn23DBk45ua9mTz8Vnz8vxlYvnHK7baX9eLniIY7rkszk/I59/UhhdaOU1JEWJxw0y/B4ijgfITTivcNFb0tnPGnwTSQXwsUu139Xr8ajPZ5bzHi4yiTvmovIs7Vz5HK9GnBCVBQqmbi3zNKp/sjd7+SvtGui6sLSKsJgs9RW1cuygEwZ2oXz14P8i0saWt8wtVDTUfwx+hybSz7mam5kHYaql4HR7AKgcUoALyu44BpaNcBT0DDutufwzAy5CEMD8z2qj/sXuQtKPYdmd9BtzZarjQ8YUSYqh76cSa0Gr+HwxlVt1AV7UTU8uUtic37IwRXOMdd5LgWYvGfah0rXLHhx2oB1/ZJl+959m8RBj1eRhE2FWw91l7ns6sF21108DvDV/Iyi3daFQtBoc2eocos+pSq8ADn2ulIzceGkpjGkaEIyAtQ+fwJcKX0CnR42KI42CnAp2EW3CLo7+2YqFPmZ2wcrvI9tO6aOQQ+Hgb8AdFa4+8DX/xVxs=","authorEmailMD5":"2acc0293cdadcda24791c0fbd8be6c50","authorUri":"","authorUserId":"disqus:disqus_4WnuRt9ngP","authorFallbackAvatar":"","message":"\"In fact, Task.Run is just a shorthand for Task.Factory.StartNew.\" I think you have another post that is explicitly oppose to this argument.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"","date":"2015-11-24T20:16:03Z","timestamp":1448396163},{"_id":"12c76b0d-0a41-3957-81d1-2ecd3dd26539","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I believe you're referring to \"StartNew is dangerous\": [http://blog.stephencleary.com/2013/08/startnew-is-dangerous.html](http://blog.stephencleary.com/2013/08/startnew-is-dangerous.html) - which says you should use Task.Run instead.\r\n\r\nThese posts aren't contradictory; they're both saying the same thing: StartNew is a low-level, dangerous method precisely because its default options are *not* what you should use for asynchronous code. Task.Run uses the correct options.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"7b962676-a123-3664-be68-cd670a77c7a2","date":"2017-10-04T15:47:58Z","timestamp":1507132078},{"_id":"38ffb00b-cd4e-34d9-8493-dfaead61e012","authorName":"PassingBy","authorEmailEncrypted":"P9N/+G0wcrQH/kkqnlgHOUZl52aOjupTn9GyRrV7xCVJyMGWccAZHPtla6QBT/4B7VHys5OZl4rBtDsQulbuZdwJnyWNe5h1vtVFPXGuUzbVHiGQofOf/eR/hI3FVv1ALQ98t/ycZTG0DRvlciIJVH3FU8yFt3HI6xYskA64UTfUmhBx4651q7A6yuel1qdEf/c1bfbgQLGyUeGp3qf4i97zG+63Gaf4ne6kxomM+OZnutEaRzIB9dMYkX/2AJrTNTG42NtW5Doco2euv646iMTngqM14nL1aUGjlMIux9oEgJCeKqw6navIUB+IK5uaqKrt27QXJx3uAu+avnRJ+Q0RV/4l6lFIHM52L2MkOd4kMJRf1CWLd5MjW+hJT+qrTFSweYp+4e72JGmC/MMB8wHy5eM8Q655aOWSHdYQPiO+0+RXTWXfw2zpdaa+UBqZl/NEAsmb0qRy2zRJykrtOidbKBrALuo4MQRiVofMDESWLYls51QA1453Ex6IWuqM2W5GqsW9wnF9Vh1MOgxA1VPKIFCaZg0oBlAeJ/5TtqGYiNPs2F+9ueLYLBHhYBPeFNihkO35F/asFlUJ8Ajji7zSefCIIYYL+rfk1RD55dbfd1vbHV8NezfBlPrLDAtUNEEWrvo0mCRJGhu5uihz+gC3i1kAOCkDaYAERtjuIEA=","authorEmailMD5":"7303b498db923f32f44778477daadb2b","authorUri":"","authorUserId":"disqus:disqus_dyYQnhsWs6","authorFallbackAvatar":"","message":"Hello, thanks for the great article!  \r\nNow, I'm reading below article together and getting a glimpse of the difference between event-based & computing-based async operation.  \r\n[https://blog.stephencleary.com/2013/11/taskrun-etiquette-examples-dont-use.html](https://blog.stephencleary.com/2013/11/taskrun-etiquette-examples-dont-use.html)\r\n\r\nFor the 1st event-driven TCS example, I would consume the TCS.Task with TaskAwaiter<t> in a main thread which is from method calling DoStuffAsync().\r\n\r\nSo, from this, may I ask you a question?\r\n\r\nIn the other article, you said that Task.Run should be fired in a main thread for a better efficiency. When you call 'DoStuffAsync()' and get an TaskAwaiter in a main thread, on which thread does this happen? Does it still fall into a category 'Conclusion: do not use Task.Run in the implementation of the method; instead, use Task.Run to call the method.'?\r\n\r\nI'm considering below two scenarios.\r\n\r\n// Below is an event-based approach  \r\nclass Program  \r\n{  \r\n static void Main(string[] args)  \r\n {  \r\n Console.WriteLine(\"Hello\");\r\n\r\n TaskAwaiter<int> awaiter = GetInt32().GetAwaiter();  \r\n awaiter.OnCompleted(() =>  \r\n {  \r\n Console.WriteLine(string.Format(\"The result is {0}\", awaiter.GetResult()));  \r\n });\r\n\r\n Console.WriteLine(\"Start Non-blocking-calculation with TaskCompletionSource\");  \r\n Console.ReadLine();  \r\n }\r\n\r\n static Task<int> GetInt32()  \r\n {  \r\n TaskCompletionSource<int> completionSource = new TaskCompletionSource<int>();  \r\n System.Timers.Timer timer = new System.Timers.Timer(5000);  \r\n timer.Elapsed += delegate  \r\n {  \r\n timer.Dispose();  \r\n completionSource.SetResult(42);  \r\n };  \r\n timer.Start();  \r\n return completionSource.Task;  \r\n }  \r\n}\r\n\r\n// Below is computing-based approach\r\n\r\nclass Program  \r\n{  \r\n static void Main(string[] args)  \r\n {  \r\n Console.WriteLine(\"Hello\");\r\n\r\n TaskAwaiter<int> awaiter = GetInt32().GetAwaiter();  \r\n awaiter.OnCompleted(() =>  \r\n {  \r\n Console.WriteLine(string.Format(\"Result is {0}\", awaiter.GetResult()));  \r\n });  \r\n Console.WriteLine(\"Start Unblocking calculating\");\r\n\r\n Console.ReadLine();  \r\n }\r\n\r\n static Task<int> GetInt32()  \r\n {  \r\n Task<int> my_task = Task.Run(() =>  \r\n {  \r\n Thread.Sleep(5000);  \r\n return 42;  \r\n });  \r\n return my_task;  \r\n }  \r\n}","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"","date":"2018-01-07T09:31:48Z","timestamp":1515317508},{"_id":"e3298318-0f99-35f7-8caf-e7303fda18e2","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"In real world code, you shouldn't call GetAwaiter or OnCompleted; you should just use await instead (which calls these under the hood). That said, calling GetAwaiter (or OnCompleted) is an extremely fast operation, and it doesn't matter which thread they run on.\r\n\r\nThe question of \"which one should I use\" comes down to what kind of operation you're dealing with.\r\n\r\nIn your first example, you have an event firing off a Timer. This is similar to the way I/O works, or other events (including timers). This is a very natural fit for using tasks as events, so wrapping these events into a TaskCompletionSource is a natural approach.\r\n\r\nIn your second example, you have a Thread.Sleep. This is a synchronous operation (blocking its thread). So it is similar to the way CPU-bound algorithms work, or any kind of a blocking call. If you don't want to block the calling thread (e.g., the main UI thread), then a natural approach is to wrap it in Task.Run. Once they're wrapped into a task, they can be await'ed just like any other task.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"38ffb00b-cd4e-34d9-8493-dfaead61e012","date":"2018-01-07T21:12:48Z","timestamp":1515359568},{"_id":"4c0a07bb-3a2e-326d-a7c8-dfc344c14aa0","authorName":"PassingBy","authorEmailEncrypted":"GfAmZejQ48FwN0T0I97KUQ4KcnxnC1QqdVh0YQlwC2VmHsTgvmZRwklN0Z0nGZVJW6uRAODiEUWMGYOZFEGYPbx2VHgGMHIxPCSZrIdcHY6gE+UsJzwlBJABx0t9kARB7VMDne2IA7Q3vO+qwdEjwPrZxMEhRlaDp4sXUotUqU2qdhEFJtzfSpA2xoCuO3vqBBQW9B1zjTX7pxLvpvpSI9s1gBP/1KZaOXLK3/PpmYftvISxprf1zlWACS9Irv9xOZSJhznWYt7+ff68hojt0XQIkz09AxrA3rYkWKcq8Y9xY+hbfv9JoJmD9yFQ1/fAGinTDuaJp6Nb73N3qXjNOjLDd4fFAfdc97+FxAgxSnQuM+3ymFgoQSjDHqolxCHuz/Z8a+6mpdWLjIb7zuUveqnw4XXJqBL0Ev4G9t3+kTl8Hr3n+K6I5WO50+9SJ6mM/NxjH62CQjHnFQxb1fkUWMmuCvbr3cVrnh9w2F7MwcemYYr6CGnQ2sNS3RXuq38LwmfsL0Vx3fidmtxQO7bHDV8KM+6USbBggWthPM+Io25e6OLwKXusEckmEhfQluC1kF1Galq6JTdOZ1YVyGDTlNOCRm0BjOx8d0tCWhwD7V1tJfhtCcCZI/HNGcnQ7QFpljWpNbQH8njWfXLbU5JKheH8j0ofApvYaGhfKWfAW8s=","authorEmailMD5":"7303b498db923f32f44778477daadb2b","authorUri":"","authorUserId":"disqus:disqus_dyYQnhsWs6","authorFallbackAvatar":"","message":"Sorry if I made things complicated making you to spend more time on this.\r\n\r\n1. Target platform; .NET framework on both Windows or ASP.NET. But the reason I wrote 'Quote 2' from one of your posts is to back-up the 'Quote 1' ==> Implementing 'Task.Run' in the other method is not a good idea.\r\n\r\n2. What I want to do is not a specific operation, but to understand which one is better from below two operations  \r\n A. In the main thread, a CPU-bound method is called. The method implements Task.Run. The result is displayed by Console.WriteLine inside method itself ==> You said, this is not a good idea\r\n\r\n B. In the main thread, a CPU-bound method is called. The method implements Task.Run. The result is returned to the main thread via TaskAwaiter and displayed by ConsoleWriteLine via OnCompleted event ==> Demonstrated in this post. You said, this is extremely fast.\r\n\r\nSo, I'm comparing these two cases. I expected one of below answers from you.  \r\n A. For Windows .NET case, both methods are okay and extremely fast. But for the ASP.NET, 'Method B' above is much efficient.\r\n\r\n B. Implementation of 'TaskAwaiter' on low level is different from just implementing Task.Run in the method. So using 'TaskAwaiter' in main thread + 'Task.Run' in method is much efficient than just using 'Task.Run' in method.\r\n\r\n C. Actually, both of them are same. There's no gain in using TaskAwaiter. But this is a syntax sugar.\r\n\r\nThanks again.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"df9de61e-665b-3def-9d4c-24e5daa3a1b7","date":"2018-01-08T07:22:07Z","timestamp":1515396127},{"_id":"df9de61e-665b-3def-9d4c-24e5daa3a1b7","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Sorry, I'm not clear on what you're asking. What's your environment, and what is the operation you're trying to do?","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"f60362c8-1cc9-3052-b73e-523bd698c962","date":"2018-01-08T05:17:10Z","timestamp":1515388630},{"_id":"e2ec4bf2-f704-3137-b8d3-673b28b86de7","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"TaskCompletionSource and Task.Run are used to solve two different problems; they're not interchangeable.\r\n\r\nThe shorthand guidelines are:\r\n\r\n1) If your operation is asynchronous and completed with an event, then use TaskCompletionSource. All the rest of these guidelines assume the operation is synchronous.  \r\n2) On ASP.NET, never use Task.Run just to jump threads. It just makes your code less efficient for no benefit. If your Windows app is a service-style app (Console, Win32 service), then the same guideline applies to it as well.  \r\n3) If your Windows app is a UI app, and you want to move the operation off the UI thread, then use Task.Run.\r\n\r\nJust ignore TaskAwaiter. It doesn't change anything or help in any way, and I think it's just making this more confusing.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"4c0a07bb-3a2e-326d-a7c8-dfc344c14aa0","date":"2018-01-08T13:30:35Z","timestamp":1515418235},{"_id":"f60362c8-1cc9-3052-b73e-523bd698c962","authorName":"PassingBy","authorEmailEncrypted":"j4A9F130k3CniEMg4CTorEZ4M0uzd+2X1cu/45GOE/XereTAP9StTD4Gk8jRsiV2Z2Ky6EChRjskKB9XcuPU8I1IhR1qbqzMC7ge1oKsVSAMU1rrC9BywePqKjs/zB/l31yLBMBUuYf4+qGq5eJVIN+6cz4XGayQyYQbhnR/YfB+eaTC2zbUJrMohq9gl0bIJvFfLZbX400WWblnugbjHjK3wh3rBTriQ0gknPwCxN6D6B3QwE3HRveHkMD1GnrH5di2eR+NHdUuKIrzQKKrss+A6Fl05B5j8sJudAogZ721ZqPQUBxo1QFVq/7Dhe8HBH8yTEO4lWMF+4lIRfsM+3eGXQDjW98/53CPWqOG3IkIi8YLpDrCS6h8yUtFxb/crQF/Gfh5jnbTSRQhnIfKwoijsA6zUsDVY+11qpzhDV85V3dgBzfz8iSxVGjY7LvxJkNMAceXqlcZ/4sGiF37yoonjI+3isbX33HahcV7DFqkwYUEeyVsviaGfSFI+kxpYg2IhX+JOa+cKNeMAHehRnPXAlObsOdq2Uoz19omIQ3NrlmgD9WH/iHRD96yPpbvWMAbwPaf8Goql2SgPt3dXDXnPJbFNdsr5ONieycjtqhZzUxLtHE9fqxKj3xC4glUP9VbCznJnQEB/QZsc7QCHLtJZPZ2kG5E8MIEqB6UQeM=","authorEmailMD5":"7303b498db923f32f44778477daadb2b","authorUri":"","authorUserId":"disqus:disqus_dyYQnhsWs6","authorFallbackAvatar":"","message":"Thanks for the fast reply. I appreciate it.  \r\nAnd you said that GetAwaiter and OnCompleted are extremely fast operation. Can I consider this that it is free from your old statement\r\n\r\n-------------Quote 1------------  \r\n'Conclusion: do not use Task.Run in the implementation of the method; instead, use Task.Run to call the method.'?   \r\n-----------------------------------\r\n\r\nFrom your article again.  \r\n-------------Quote 2------------  \r\nThe request starts processing on an ASP.NET thread.  \r\nTask.Run starts a task on the thread pool to do the calculations. The ASP.NET thread pool has to deal with (unexpectedly) losing one of its threads for the duration of this request.  \r\nThe original request thread is returned to the ASP.NET thread pool.  \r\nWhen the calculation is complete, that thread completes the request and is returned to the ASP.NET thread pool. The ASP.NET thread pool has to deal with (unexpectedly) getting another thread.  \r\n-----------------------------------\r\n\r\nThat is, because I still see that for the second example, Task.Run is running in a static method which is called from main thread. And one more time, you said that GetAwaiter in main thread is extremely fast.\r\n\r\nIf not, I would just let the method be 'synchronous' for the computing-bound algorihm and implement the aync in a main thread with a Task.Run as you said in the other article.\r\n\r\nBy the way, thanks to your concise post, I got a new insight to concurrency. Thanks again and have a nice day.\r\n\r\nPS. Sorry if you got a multiple set of notification because of my edit.","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"e3298318-0f99-35f7-8caf-e7303fda18e2","date":"2018-01-08T00:46:12Z","timestamp":1515372372},{"_id":"b55b1a25-6f91-3712-82b8-c454951bd484","authorName":"PassingBy","authorEmailEncrypted":"XaQZVcNJ2rXzeKI948n7dm99FLxrDIYrdKR6jX7W1ciPPL95mEtO1PJo/gU4XQ48uL/0DNn+aWziJ9WDyn959D+Gzd0SaUQYCvJurrdvc1CHa/33tKbI5jyuAmH0gzU40lJib4ECs3XG/5dYTO1oO6HVAqMdvQXR0rlJeIVcOgNqOfpRbRIGG61OrGAQbnfkp9xLA9pRGn+L9Dj5pPEoYyig1zMNlSEJPnvuRiV5gUG8oS0+pCaeoc/61Gt+cy/g5mjdn3rYEw8KaCCPflYAZ7ll/Flh1AjHzuCz78tNHbzL4sa+TnFg/wxzcKDYm5XQs9AAIPsc4F/q32fmpi1XDP/llemXQJqn3nFhGbnqvaAz8XrLhyUuZr2jPbsvHIaXxXRAb6xkJjL3/pdQfnJS4HpF/+pbsBXvKpsHcvTQnPFjrL+FqAhnWGA4WLttmFGwPbuDBhpu9lCBXN+sxoYxMaAR6QgcYt1FkNPpB6jphMPOt6ZTqUvZ7B2kfcFxT7bek0UgceKLR/j1p6TNVOoB/Q0TJVItzrhlfMqfAhfafM/KvmNwXwRObHkpKTk7pNN9M03SiqhmzIwtbbQIXQC+AoSDSf1fFGysfdrtbnmpJPQA7sYxspMbhEigGejK21652HtyG4VxEeuXN1v+5JRnVAe3lUeyboJUqxEYfYSsSsY=","authorEmailMD5":"7303b498db923f32f44778477daadb2b","authorUri":"","authorUserId":"disqus:disqus_dyYQnhsWs6","authorFallbackAvatar":"","message":"Thanks for the reply in a such a detail. Happy new year!","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","replyTo":"e2ec4bf2-f704-3137-b8d3-673b28b86de7","date":"2018-01-09T09:52:27Z","timestamp":1515491547},{"_id":"b1720950-d7c5-11e8-a9f1-05b1ca7b5c0d","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","postUri":"https://blog.stephencleary.com/2012/02/creating-tasks.html","replyTo":"ec169370-d778-11e8-bab7-c13a4d2e1003","authorEmailEncrypted":"Kr1z7YdXYJG+2+KndWDS1qisvcgmavKHDiA2tu/W5glHXYoFRK+UgIC7/dcn/cDS6EBGXyEh8L+1a6Aw2CoENn1auwU+clyNrwhqrlKg0CoUnJgqgcHtvsKcGeC7PLT82JpLgCeYmmuS4k2FK5+r10RykwNnqBttGXgCxntiEcRa31jEpZ0mPw3bC4c3vgdZAeaGU8+Ahgs+8u/BuFmKSIy2jbTEE9iNYxzFuBAeuU56Y3jpOst0JRZ2GGDgRYpk+HdpsHFnWuuaSupfDfoq8rNcfvDs8ccnnwZ/mN+rLId8G6NVXZAgzC9f9xoLhpIP7AmzwhDI2a7ILkmHS6g+nNIjwCPDnUUWcbLQSPfejjFnSwkPHOy5RWiuavmZYpFeLNEYCDEvPJwzgBBcUf19qIL11L+Pw6NJXRzRWLIiy7VCmyNB6K7FoaACDkFNaXUy5K5WFSOoZWEsR2GnUMaIJAtLj/kP/mHfC5TMsZJYmjuYzLTVoJDWL8E3ovbJAJonqS1ZriIo6bqDZOaVGuIKJl+sO964tk/C6p4rzNtaJBs/UhU0KBBBg9nMeJzkc9acUZAL/PS8e5JhnK3jAuAbKu0tdwC5efIE3r+HqfJ8IG6nXh9d543fVgVRz0/+NyeVf+6y3/KBs2LUrxXHAJOnJZCk27oHxPrrzo3BWq4KNa4=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Oh, yes. Returning tasks that may not complete is very dangerous. You want to be sure to always complete tasks eventually.\r\n\r\nhttps://blogs.msdn.microsoft.com/pfxteam/2011/10/02/dont-forget-to-complete-your-tasks/\r\n\r\nI'm trying to think of any exceptions to this rule, but nothing is coming to mind. So I'm going to say you should *always* complete your tasks.","date":"2018-10-24T19:47:52.732Z"},{"_id":"ec169370-d778-11e8-bab7-c13a4d2e1003","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","postUri":"https://blog.stephencleary.com/2012/02/creating-tasks.html","replyTo":"","authorEmailEncrypted":"XYN53nd4b/qi0JXRnaBv8GLjLf4wzmdj26hAgPLdY+x30z58EHRb2TFhBHdBEbVdkDtXZchOPVToNtJTbfht26xnM/aqkZ23VZL5DqQTJao7iQ4SvuH+9TXnR9WxMQS4YYpl7KLBKeEO8W8DndgC6r8bIq2Ew3aOjuURiD8YTqgeGzxh7yrLr6yoTxB4ZgNqTRawUUTwZNBb7ypeh60JEQUH/DjUqavKsCtexbjJdJxKFDV653Djq8NK9Piv/yKxY0gPmRqq+iK1XtjzMcuVE4P/uwsanDgH2lnDBJF9QIxICmAEFGg5zW/dtzi35VC5fvKa+zhKKc4f0RmKDtis4hyeABT5vsIRmIOwm5p2LDoecxvf0jjQNUC51qix6Y3K63V1oMiJIqQt3zpetuNz1lqmhbUgpJkjDlhib86Jl4ReC/f/0eTW0MqQ3FhunEt0sko1QK+awX6b4ta/zgacz7NGP5g4bJuaxMpaTBkVntNLwYonc3H91MMdLJMCAXUIy5mREJeaoopVLioRc0Z94dpJaIOuc6DZN2yq+bw8jqmOi/fzyJq1+RqxwGjftjQa4PxYdTQB833FjjPBWt3PcOQto1f6CM7rjGEhLqi5ajrQGOBaPOoS/C9KGSUuxZ35Iufub4EgQjndBP1TMx6+S8h8uRCCmKnNQ9HeZ/r5G5s=","authorEmailMD5":"762b970ebdc90f1ee67c7be43eea3578","authorName":"Alexander Reyes Gaspar","authorUri":"","message":"What happens if you don't set result on TaskCompletionSource but you return the Task? Is there any complications here?\r\n\r\nEx:\r\n<code>\r\npublic static Task<string> GetInput(string input)\r\n{\r\n            var tcs = new TaskCompletionSource<string>();\r\n            if (!string.IsNullOrEmpty(input))\r\n                tcs.TrySetResult(input); \r\n\r\n            return tcs.Task;\r\n}\r\n</code>","date":"2018-10-24T10:38:19.647Z"},{"_id":"26fe1b10-d8ce-11e8-9ea4-a996cd0c12ea","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","postUri":"https://blog.stephencleary.com/2012/02/creating-tasks.html","replyTo":"","authorEmailEncrypted":"RZMg4n9y/x7jT7q8x3RZUPkNd1qAXrGAeNTKBSKRvFuWEH3NUbD+viD8dA2EpDRJyNw7W0psetuc6HsGrPqJNFoXI9dTzo9M7TvHrqaR8xLz5llD4yQMwjRfWqq7EcTilOgMEY4YyaEWvbqXJR0mmLctLuOgDiAPGOsmicJRnV+5Zra/9DL0MsJncz+djhVOS1aw/ijm4Oiw7MeQzxGRUjxc6EcE8d/fii6LLIhgal9hBsH3exEjYJgPjbzsSyH5R2ctA2CMGW5PkYnqbVnUw5Knnl02OO44iDtCl7mxX8RE/A62GO7p5xqGJP6D6C317YeV691Sadw+b4g8Ak5e61du/ATGQq4pTDwQeAych+SFukyxHRwNs+U4QEUURlGgw5BOJQrmXAxLc1E33SwNPu1t+k0CtGyhCzn2sjlAV1l12+imPZDmu7N/eWdU1eZ30ocbM8Ajn7/9BqUpaI12Sy83e/IzlOu1bLAj+qxzZv7BhVdHM6sykJhdQbrbCNydDQwPn+2dZ1rWov2OfXIGkzUVFZ4k+U6upVyFVfi9CbrnB1y7oZ2GPXaJxxWVJh+xe9W/hX96jWXp2UX8koROmVw1IUSPThHhTIEn7JhuRpPTu5LZFvIfMUd11MRQCOVMUXueQ4vef4UK+ApNsQuTUVIhq0iv+nSqtazaP7ZHzok=","authorEmailMD5":"762b970ebdc90f1ee67c7be43eea3578","authorName":"Alexander Reyes Gaspar","authorUri":"","message":"Ohhh. Thank you. I was trying to apply it on an awaitable dialog. If the user cancels the dialog, the task would not set a result but returns the task. So when the task return to the caller, if the result is not set. It wouldn't continue on the next code. Can you recommend me the best practice on this?","date":"2018-10-26T03:20:56.908Z"},{"_id":"885710b0-d8ce-11e8-9ea4-a996cd0c12ea","postId":"2012_02_creating-tasks-1fddee42-566c-340d-b868-e60118f33285","postUri":"https://blog.stephencleary.com/2012/02/creating-tasks.html","replyTo":"","authorEmailEncrypted":"YHdd9DmuI9awmjwEE9GJtOYicmmJPtosVFYr5RIMIOevYPConlOG75JttV4Q0EB7tJ9452Ykg//cstpNvY9D0o81bsC3nVejKGVXqdDVeBcSS/ohQXJNgamB5Y+9GD7IzKWReFfe7h/4QNk3cJvS1GNQqvEBDOs+tbbbjxlOCSKK8Yee86C9jJ1XeQvsFJyI2DJOafimc8OmFJRinL3Q8ZCyzUKA4/px5FEIseAR0oYMrE+kL2I9NvxyFbV02Jyx0hO2xRlvgrPG0TkhAG52VNH4rYN3Mj5TySvGxf8iSxbK9xc03yV++QrOQvso6spQr7NP7IN6o1Cp7wx9hte0AvO+l/yTq8XP4gK5XvdhOdJosSkJG5ovulXvkWZVdqgeBxdrbP2R44Akb3MfwaxcsIRl1dPIZw11tGtSzrpX53KpbeYGN0Q4QUFxlazuqxIyLqtpWG+m5M65KsNaSnlaauX44UPXEvTy+KrMU7o0IVLMxgjKtLV6yolGQuT83sGLrW+kbwkrSqDQezTxPKGEQU3aaYmY3myS7hzJphINNqO+7zSH41yI8slte89zOV6jCWVO0gdIHIQxg1hdxp+gvRaZ5CVUqaepcKhiFU0BRfv+F4bEhG+tr2F5sWgbu/4/DydadMqa5EYARN2OGRBdZeYo6TUOQfatsEvpzsakngA=","authorEmailMD5":"762b970ebdc90f1ee67c7be43eea3578","authorName":"Alexander Reyes Gaspar","authorUri":"","message":"Ohhh. Thank you. I was trying to apply it on an awaitable dialog. If the user cancels the dialog, the task would not set a result but returns the task. So when the task return to the caller, if the result is not set. It wouldn't continue on the next code. Can you recommend me the best practice on this?","date":"2018-10-26T03:23:40.142Z"}]