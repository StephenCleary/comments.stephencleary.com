[{"_id":"9323c408-5fcb-3aec-86ab-8d3e91458508","authorName":"CommonSense","authorEmailEncrypted":"H29VhBzukfaBw36zhFP7IZzn+HCqxahs8/JH2jp66vLDz74tj5eH0GP8FYu4CIAWsxKaKC+c+ifav5qxeUyMrtNKAYoDDdx4e6dnEgz4Eu/QCaidRE3AcWYWT/QRC6A2grhEHxREe6BD4ilGeEQf7SkchoBow8A2B5nPX9h5UWUlYddYqdZgZ0gyD0HqiHpqXmYfPak2crecJ9ump60ZoebnCmW6ej1VsI7WjBGvomaeXl0ia/ivAa7Q+F/Ci3vy3buhTeupZmwnxt8npN+XJ8qdZmQhjDIEHB5m5B/6m2S2b+38PT4qCn/lt20inELsvoHRtjv52xg8kpB9a3vrKO8PqJRxiCMf2wWM6fuXDVPxJAcJ35i+4hXxssuUAOHgqVti3MtJuqyDefr6Lpznyk8Ql3gVAUysfQWg3AUcQDL4FcncE+zO0Ki84YDm5hENbui5StxUhb8PgRNHQoG2iXfxvM3B0nMnOD5qqI4TftsdOKza6tu7D9/ZCrj8OgmH07J/xfrXkhTTjPCWbK64zxZW5rh/la47QrHPUOCgr3AToO9mqRiJELmx3fpcjThs3eCCUPSSBwR+rWUHvdqKs8h3hQmjsFdZt4mdGzbkN3+B7Gsi7PaEEfxZIpe85oJIzuL3BlVqcvRnnUbwkeSUsj1LL7ydRsy6r5m3uQoNe5w=","authorEmailMD5":"18e162b93d134ed78478bd0c340dd1a5","authorUri":"","authorUserId":"disqus:InspiringCommonSense","authorFallbackAvatar":"https://disqus.com/api/users/avatars/InspiringCommonSense.jpg","message":"Hi Stephen,\r\n\r\nSo, let say I have started two running tasks, and use ContinueWhenAll on these two running tasks to aggregate the result. Then, I wish to start new tasks to process these results.\r\n\r\nIn essence, I am wondering if I can attach pending running tasks after ContinueWhenAll is completed. I tried it but it can only work when I wait on ContinueWhenAll. But, this locks up the program. Do you know a better way ?","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","replyTo":"","date":"2016-01-05T17:46:20Z","timestamp":1452015980},{"_id":"61f6ede6-ef35-3e05-ac1f-58561306966c","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"A \"continuation\" is just a task that is started automatically based on some condition. So, it doesn't make sense to \"attach\" an already-running task as a continuation.\r\n\r\nSince continuations are tasks, you can just have the ContinueWhenAll continuation do both things: aggregate the results and process the results.","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","replyTo":"9323c408-5fcb-3aec-86ab-8d3e91458508","date":"2016-01-06T12:06:00Z","timestamp":1452081960},{"_id":"9963e709-7ea6-3c18-b09f-3d39b054d8f6","authorName":"CommonSense","authorEmailEncrypted":"AkQyEC852lrbDRAQylto8PZeGjEX3FIIQ3NB5ZOENES5fpxo2SvdfYm+YH5elYV6GPNBx3L71UKzGmya376NEq2sVw8bMDBcfuRX3LCo2JiPH5KFh+dMte3tU9fyD4KyjBsUqbADjItaGaNZf80ws41kSKv9MyGueJneqBmFKZqzbiRSY9j8fB5eTH447wKLZrLrQeQIIpcbQqG+RDYosVdMrIToxSiOYvE1IZu5iC2wT27FTRnD+n74V2oNu3jwshm6B05xqwIRDOa7aeZvLh7YIgz2Jbue22Sk4Vg02JXYzj+q6jCyqWPvkFnvuUbfAh2dGEioHDtSEC8Hex5fz2BczXety3LXdQCoVmB3f3TWJ1R9TJcK5FBhcqUaApCbGrojakVcHETpSHbtSXQWod4WJ2pzn3quTr8L8kWXmcWTEEu1GHvi4Vg6ddwX+xyxcpgRKdcGL+SraX7JB14hmcyPakE+5lBA4CZPptnNGoJEKaFbGFnE3nkoQG51KNYvVHkiBC0HtI/PylxiSO5QuSbpm612ddouCFoQ3FbXDQH5+OMZhxx6u+e9He0kTWjefFzvN2vhtEjm1BQ3/xlQu5JbEZo48EshMC8q9ZnyDvpR/73KKSElsMJKhcl8uacT5plLSei7Z0BojknRHlh8pXnfvVDArD/Zpj/0DJyBCwI=","authorEmailMD5":"18e162b93d134ed78478bd0c340dd1a5","authorUri":"","authorUserId":"disqus:InspiringCommonSense","authorFallbackAvatar":"https://disqus.com/api/users/avatars/InspiringCommonSense.jpg","message":"Yes, I agreed. But the twist is that I am hoping to spawn off multiple task to process the results.\r\n\r\nI have posted a question on stackoverflow -\r\n\r\n([http://stackoverflow.com/questions/34619062/chaining-tasks-with-continuation-and-run-parallel-task-afterward](http://stackoverflow.com/questions/34619062/chaining-tasks-with-continuation-and-run-parallel-task-afterward))\r\n\r\n. But, I have yet come across a viable solution. It's rare to meet an expert on this subject, so I am curious on what you think I should do.\r\n\r\nThank you.","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","replyTo":"61f6ede6-ef35-3e05-ac1f-58561306966c","date":"2016-01-06T16:00:28Z","timestamp":1452096028},{"_id":"0f5dcb86-f8a2-3fcb-9673-3cef27edd19e","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"No, I would not use ContinueWith here.\r\n\r\nYour existing code swallows exceptions - which I do not generally do. Also, there's a Task.Run wrapper around an async method, which is quite odd and merits investigation. But if you want to keep both these behaviors, you could do:\r\n\r\npublic override void DoViewReadyCommand()  \r\n{  \r\nbase.DoViewReadyCommand();\r\n\r\nDoViewReadyCommandAsync();  \r\n}\r\n\r\nprivate async Task DoViewReadyCommandAsync()  \r\n{  \r\nvar result = await Task.Run(async () =>  \r\n{  \r\nvar accountManager = ManagerLocator.GetAccountsManager();  \r\nreturn await accountManager.GetEmailAccountsAsync();  \r\n});  \r\nSetRegisteredEmailAccountViewModels(result);  \r\n}\r\n\r\nOn a side note, why not use async void for DoViewReadyCommand?","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","replyTo":"e8221b81-1862-3b8a-916e-165b2d478b50","date":"2017-03-17T16:40:45Z","timestamp":1489768845},{"_id":"e8221b81-1862-3b8a-916e-165b2d478b50","authorName":"Stamatis Mavrikis","authorEmailEncrypted":"or/2Ul2Q0T+7Abwc4UVlOUGXRRwZlVBebxxzxpGrIaD6nYQsZ5PvEbkKfPImBWJoPjh1D+U2lOugMpmh0TilLWvN7yaw4GUcCfbjTvesAscSkHF/d9m7uKozithka3JCaUgZmYrxuHcALAin/LpcUTHuG9bqzQUIuffrhHG/4oJIdNoYJzqjrK1ZK7uV8knKC/DqdUekQlmtCSjcUXoD+M/ryTxmBUMghc2SdO2pBdirIoXm9sIckzxxcT8Ef0pXgn4xKYgeY5Fa8rIB4W2avrXr9jr7OhaTAS7pf8UlL9Z2O/KJaRZZVtvHwza/r1hQuEtFUbstSR76wxWcCqkZJ+4kf439dNlxdYi3mV3c15fl0ZTipcPIdFimq4bqv/AKKtNLvxRXSFSySWODBHQE4a5lloneUoOo7mO7gCSF34DVbBeH/yrx6Kc0fvLXWzh9DYSxTV5uN6M8DZIrg36e1fNyun9jpSR2bfbRTvB6qXxWG+jrT3pLDJU8T9qzK5VXUyZeXf6T0ZRIEf9+kl7sgl+r/azdMhqQqJKPA2fviUkWEdH++0yp1YCPH8RiGlRj4Xfq742SZ+YFrfUya0cMbOrtOjzQ8NnfFlldsXP50N5MIGWnnUglBXq7doXJIPPDZsK8lqECUlYH5iFynLRE6A9y3tpJnAQ5jfFwhw3qoZs=","authorEmailMD5":"adff651da65bdcee45b0be31824f43b5","authorUri":"","authorUserId":"disqus:stamatismavrikis","authorFallbackAvatar":"","message":"Hi Stephen,   \r\n I am working on a Xamarin application. Inside a viewmodel:  \r\n```  \r\npublic override void DoViewReadyCommand()  \r\n {  \r\n base.DoViewReadyCommand();\r\n\r\n Task.Run(async () =>  \r\n {  \r\n var accountManager = ManagerLocator.GetAccountsManager();  \r\n return await accountManager.GetEmailAccountsAsync();  \r\n }).ContinueWith((t) => SetRegisteredEmailAccountViewModels(t.Result),   \r\n CancellationToken.None,   \r\n TaskContinuationOptions.OnlyOnRanToCompletion,   \r\n TaskScheduler.FromCurrentSynchronizationContext());  \r\n}  \r\n```  \r\nIs here the use of a the continuation task valid?   \r\nYou do not recommend using ContinueWith. Is there any way, without declaring the DoViewReadyCommand to async void nor using ContinueWith, to implement the same logic?","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","replyTo":"","date":"2017-03-17T15:51:11Z","timestamp":1489765871},{"_id":"cf63fca9-156a-3400-844b-853f143392ef","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Yes. Avoid async void, certainly, but there are even worse things - like ContinueWith. :)\r\n\r\nIf you're concerned about testing, you could use a pattern where the async void method just calls (and awaits) an async Task method. The async Task method is, of course, testable.","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","replyTo":"fc41b1c0-40be-3c53-98f3-50d140db5f32","date":"2017-03-18T22:32:28Z","timestamp":1489876348},{"_id":"fc41b1c0-40be-3c53-98f3-50d140db5f32","authorName":"Stamatis Mavrikis","authorEmailEncrypted":"QRqPG5NpiRlvvA01Cyn8tzCWZWGdGM0dy6jh9kkLjbezwT25HYir/WVmaVO0PnuPTABBsBDOJVOLV9bt3MxpEoYBu8O8K92e92bgyy8XzzqgnEYc0RrpdDawmK8ScZWsh4uc/EMuAOyAcTG2UZ9m5hH47B/py5EKC8Zqqqn5y4f2DcvewLiWvBTyENuhnE+gZvUHwFYQKYL9sIs7za1O7zrhsmOkN0b3isdf0SQfg9EK+XqkWroH4mY4c3HKRc8h2HR1f1TndRjP4WCIB9ru5NnVPPR82xDgtAwlpvrRug8yjoyXvPOZGSCOx3TT0xreoh15Ee4pt9AP46UjHNNbYgsHGuc24wC1dHyXqcpq8Wj+fFRIUQKWK8g1sfLsZO4hXstv0VLrooeli5zmRVLee7HaRQ9b2rvTJURpCvCjql3RpuPhvRi5jAdFDqfmCRAOwcZh1ecThidjywv/Tct0EFEdMr2QzIjhXe3CxGBGc3FGnjAkLNJmHtfxHR4k3sqsDG2+gB6ml7J6f+8QkQd/cldOyh/SdA/SZYdCaLJgTdJ4k60upJRHYEFHKmD3L8qKxf5e+U+Pc6PJJVSS2niF0T19sv+Fw9achcxOUtAKUs5hoFGd5fZAAz0f3U9uXWMqDhbps/NH3DOUwRpR0cNLUxKorvZoq8MrY9qdj1bH500=","authorEmailMD5":"adff651da65bdcee45b0be31824f43b5","authorUri":"","authorUserId":"disqus:stamatismavrikis","authorFallbackAvatar":"","message":"I wanted to avoid to use async void because of all the disadvantages that it has. I thought it would be more clear using the ContinueWith creating first a task that brings the data from the db and the continues with another task that runs in the SyncronizationContext to populate the data in the view. But as you said this way also swallows the exceptions. And as I can see it will have the same difficulty to be unit tested as using async void.","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","replyTo":"0f5dcb86-f8a2-3fcb-9673-3cef27edd19e","date":"2017-03-18T19:17:28Z","timestamp":1489864648}]