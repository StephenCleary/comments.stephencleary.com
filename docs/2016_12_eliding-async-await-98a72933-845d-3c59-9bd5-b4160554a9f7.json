[{"_id":"3f2eaa86-8cf0-3b0a-8be4-906527397a34","authorName":"Stephen Cleary","authorEmailEncrypted":"OFWfqRs3RzV9v9o/G3CdS6qNSsraDX07zxhGYJAGNZVdQ/04+R5mXWfhAAbnup0OA08DrgAZt7mH9wSNajFz9ILPJzB4DSs8X63jj8vaozOhKbLl1ZNJGz9cXJKNPkvsAfp9mlBMhniWd+1IafM6hbaO0+EgVerWD5O1ezhdB9Qx57LP1G9+A/3eK1rOf/3kg5H0rog1Xc3PvIdgTdEyJLCgVTbfH2I4c7aISvIkvaRzgtDQnQQF2nYineFPWGwUU1HtyDtPirOKyOt3+9VTGWFQFuX7hYs2uKO5Bc0plhzuSVQI9SeEFhONoZgYTJc5YXGm0fmplPWDKrXxzyVUmmkw4peVDfrelVkjT7mw2/qMmcNoqgNj33Ud8Z3OAlg+k+O3zWNwE/WKfgIEhwG8ysLXceFemCGIinL2XdCNBAyGnQiVUmhhz2mpq3CgK04SJ2zdecy3cOLgceiO7TSJct8qlRoBGApPofHbf4FbbAj42mSU5uGBBNFAgOc1WD7OU/m/ZXu4adb4MSjb3N9liPUV/rklsUKztmZHEY5kj9GtfwfkF7miWUSyb5esTb7XxmKxR6gxG2qzuNcAcWmWoM9zybm0fjWd3/q57UxO97HdGJiMxUZy91nhsyUMg/XUGDIFAmBWbzbh+8LE4iNQ2p+2sdsuTx92EIb5wVTg5Y0=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"Yes, the original draft did have a section on boneheaded exceptions, but I cut it for length reasons.\r\n\r\nBoneheaded precondition exceptions can either be placed on the returned task or thrown directly. There's plenty of code out there that follows either approach (or both!). And for boneheaded exceptions, it doesn't really matter. For all other exceptions, the only reasonable approach is to place them on the returned task.\r\n\r\nWhether to eagerly throw precondition exceptions depends on your perspective, particularly this:\r\n\r\n> the work represented by the task never gets underway, so I don't really expect the method to return me a task.\r\n\r\nThe work *is* the method itself - that's what the task represents. So, if preconditions are run \"before\" the method (logically, not literally), then yes, it makes sense to want the exception thrown directly. But if preconditions are run at the beginning of the method, then it makes sense to fault the task. Jon Skeet is in the throw-directly camp, but I think it doesn't really matter - either way, precondition violations are boneheaded exceptions and thus shouldn't be caught anyway.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"854b548c-7547-30a3-902a-7a994c520380","date":"2016-12-02T11:11:15Z","timestamp":1480677075,"authorUserId":"disqus:stephen_cleary"},{"_id":"854b548c-7547-30a3-902a-7a994c520380","authorName":"Ian Griffiths","authorEmailEncrypted":"nqz5sBoSrxUEtcvIeYETCeE5n24ne6m5cGzK6QUTArbEynsm/BYKdXiA9vFfiGI+JA94V0YUgByQTfjOiTRS8K55Qto2ufGtIn2l5Aihv3rsUAgxgV/+kW/fVg7k0z/UbURVGM1CgNf8bSAaS+hi06mVpeWo9FfL3zua74WmRcgG1tQ77dzEYXf3FaRDpm/KiRe066hCgGLZCY1QsM58ffg1dOIXwTeYr2HFlDL7V815hIoqJo2TWwHRszCveFYD1pV1SK1e521PkUaRQ2QNT8EY0izkGvsbgbAlAjdoRsawfqzcDv6g5JkbJRC5qR0yDHuoeRA0NdmLcOCvJ0NZ/UMKxhFGptRTUwdh+EaggFIRK529Quw6lra+TP4KvB65szdYHk5axPmFMJ85bpEjsHXKeXbW3qAoGJyBNDgY3m3NuLAop7NQ0yB/Ru37HXlWd/6B1FU2JkT1RAGmW6XxTGdSqTOLlraeKpLA8mtp7BaJEO/KtW1wPw+5APWyIAPnnq8SVDl5NNmPXE5DXs7MpoqC2IyVtGD1VGs1aUZTYkNCi7L8zWeUWsMazzx9ge4+JU8MBhI/+bchSv0Eu7hJhfH4gp3YpGd2AIYVsG6yz75nyt4NQTTKXGYbsGzlWGqYmhXUrhWhP1Vy27cqNUSvcFbWQKb7W/SoS7cy2otzHhQ=","authorEmailMD5":"8c4da9b88e4f0c290c8441d06d37dfba","message":"You say \"The expected asynchronous semantics are that exceptions are placed on the returned task.\" This surprised me - I would expect it to depend on the nature of the exception. In particular, if the exceptions relate to input validation (e.g., ArgumentNullException) then to me it feels odd to put that in the task. If the input is self-evidently bogus, you're never even going to start work, so although, as you say, \"the returned task represents the execution of the method\" I'd say that if you're throwing what Eric Lippert describes as a \"boneheaded\" exception, the work represented by the task never gets underway, so I don't really expect the method to return me a task.  \r\nIs your description of the \"expected\" semantics based on a design guide that I should be reading?","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2016-12-02T06:50:00Z","timestamp":1480661400,"authorUserId":"disqus:ian_griffiths"},{"_id":"ea70a543-96f8-30f7-aa39-0ea46d6fc3ed","authorName":"Thomas Levesque","authorEmailEncrypted":"MKOXYJ5WT5wWWW3eG/Gi4qyRdDAWp8XjQbkPlaiI3dmj/PwLJmay0BAmQmr9DmRYQJB7MejIFj+skL5tErXeHaeG30XnkIGVe4/I1MSvG4BAS0TrUhoodWAQHaWQ1xbvNjeQpFAmTagaSS5kXcwtcaQ8BUXLJf4YHsNu5HrJVVQ1g1+048y33c6LQvOmdmCXYQIdxc5VBiSPanNiV2dde0VjhFINhFdCtBg3ZKX0zHRM8/EcKT305slPA+yCxKveXEwvThqD9YsphuzWbZHAd8gTK5hrvd43IlpvCL3Y6Y2ogVco5kxzZZTRr2c/2VNCFdjKy04Av0X/kUH/OjyIqA7yMYEk8VwMkfiXmRdqxA+sbe+GEvyg+oyPL/vh/on3KriPoUjUjCP2hUgUwYq6juVJcC/IzQuzMzNKmxRbbkV7BfqeS1OWnA8KhCKxVGITsVyRQQETFn8jnXIJwPoGSaNOyMYwEKPNxU1hA4W8cMMJorg6pRU9EcQHTehrBxuucckAwCpIHKDDNzHl6AOzkqUQOH1IOHqvCiZQ4qs9XeZD5rBmdndlmN2kYLUT8fDXFSJ+IBk1gLD149wJuXD0s1Psf/22xUCjRwIbVRF2jFkfSpd/m2Vuvta96WV2SPguAXUJpG0w5xvWbAsyU0rKyRjg9P2lDO/csG1syKSrWwE=","authorEmailMD5":"f4acdb91aba11ddf8f03d4b12453f3d5","message":"I realized just yesterday another reason to not elide the keywords: the exception stack trace. Async stack traces are already pretty difficult to read as it is, with a lot of noise from \"System.Runtime.CompilerServices.TaskAwaiter\" and generated names from rewritten async methods, but when you elide async/await in an intermediate method, this method doesn't appear in the stack at all! This makes it pretty hard to make sense of logged exceptions.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2016-12-02T13:26:06Z","timestamp":1480685166,"authorUserId":"disqus:thomaslevesque"},{"_id":"252e2add-e7d0-30b3-89bf-0f0340d55ecc","authorName":"Daniel Marbach","authorEmailEncrypted":"YpG/WcppeuOWtvBoRxWzwDVTamQAAb1PPferKmxSSjb3nMAUiwn4LWlDAz/0/Rc3XltcF0g/0SJtK9jT5JEgdgRwswLHB97sdBnXoWlXBoWqWYdOyBXIKlOgkrQa6LuaDZ5hzQhiO59WIBykAE16LwlB4cE8HTSQhH0Raj4XCxL68d18xq/Sdg4gLkj8XVJUnG4X2gNqqlDd6PQ67cgHqsUFsXPs8Ean4uil5dAd11watKNy6AbAT5ZyPZ86uF+Yo5hIP4cDx47uHtqDRGKPNEbmPnnjs+dpX4d61GYbdPv8BRSDS/a+q1dpQK68RekuUkIKljl7NANTSgvIu4oLfRZ9UCbjSU3/AxGlru01dp83ojASg1FKlLI2LcNzGgxZE5Dh5McZLORszXWPp7CBWUQN/z2y5CTnrPbSNrrsTAGO4rTeTNEb3mb74MzwiBL2PFRYYLc6K7qlC7d8MHO7wUYyhmTRb9BXTdrqVNqJJ0UI+y5Az7wgD/XYGoNtm2p5kENA6Z6FBUid7JvYAaFrbC2X9bnZU8hBGV9DvxaizjSuF8wxeScHORjsnLz1RT0x+Rc2vzwdQZQu1hgrrEEazuQ4JbUUt3RV/BBB0cEQK9vH98WKvNNUeFuTdrw7s7Cjs7ZTBqrJodpz8JjmSWgWqfo4Z1gT/071vg6BVIZU2zc=","authorEmailMD5":"d0fb7ccf44b1c77d123981e29f4c483f","message":"Another great write-up. In my webinars around NServiceBus v6 wich is async from top to bottom I explained another cause why you should always first go with the keywords and then optimize if necessary. The case is when you upgrade existing message handlers you will not forget the await statements when you first mark the handler method async. The compiler guides you then through the process. After you've done that you can look at the code and decide whether it is worth optimizing or not.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2016-12-03T12:31:12Z","timestamp":1480768272,"authorUserId":"disqus:danielmarbach"},{"_id":"5a8f7c36-cd7a-3f40-8e3f-c84e0f1d8a0f","authorName":"Jason Bock","authorEmailEncrypted":"BdcZVzZUPiZoh8JpHRHEsNusqjv/L8HEouKbGXJii6TWXrrSsmCIiWZXDiHACRYDOo2KHPCBhWaMkhQCAn5rRLgQlBnCosKAMFYcf8j3zoEwj/ht6afL/67xqbXb7vkwkDwCJhIBEnQEfirTiksDseROcnHqZP3rK4qjr6EaGkG3K1CO9XXb30zGPtpGQtj+jxTu3d77b2IENucLgobwiHcrznTr2RDRlbErhPm0vUVzC46BPM3NsYNxT9mPYYOyuhmJVEBjEzngWzyojKjyxyeeJ+PD9l3ee6VPG5GT2oWind1icGIgNgnJE9l0kieeIhJC+dSGkZB5b9PiMTOVxHYktMBeQDwt53++n6pIqdoh9k2gUznV4lZgahrpUI7N+gIsr4q4Q0w8wjafJMW66knn2Ex8BHu7LEPTJHn4gaB47M/wec1uihoTwVXINIhxSNJGg7VR8pVyTmT8UT64JmLsFv5Cj4cN+vvW2aGP96/pOjJzv+QMZwdkE5fKWApSKB5VKc8opQr7C8eRkIyPhOuJrDnwQXMo5ALfuYhxo2L40yKy3k8JzPIaDjK2YBqLIF9mntdN1oiGKD9INjVwMsJG3HD1QYkisBGNiXlPyfHX9I4BlU0NfcodQRelpTmXS2w8UFXVbbqB9/494D5+0tI3lqJLPEFDlYvx8SU6TN4=","authorEmailMD5":"078b61f4e6f93716b54bb5fb434c8a60","message":"I kind of cringe when you show disposing HttpClient as it's something one should generally not do:\r\n\r\n[http://stackoverflow.com/qu...](http://stackoverflow.com/questions/15705092/do-httpclient-and-httpclienthandler-have-to-be-disposed \"http://stackoverflow.com/questions/15705092/do-httpclient-and-httpclienthandler-have-to-be-disposed\")","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2016-12-16T13:47:15Z","timestamp":1481896035,"authorUserId":"disqus:jason_bock"},{"_id":"78a86ac4-941f-35f6-b361-f4620166e04e","authorName":"Ian Griffiths","authorEmailEncrypted":"rAbNLJcLqNoQJg3hUJ1+Yn9xwI//DtolCAT7Q6IRJ64boVSphYfsEUMVCpQJ05WN532xpsc7uNxMMDTKu5uNX7y8Bmy+rL6WXFfkRp68JXzd23/d1ksFUrjqk/JpLpNeyswtTrSgMHS1jr75f1gcZ7cesAexMhSNqozhI/FJz6rqsTw5h4/bIO8rvigiJPrKeT1iuG/V3llClChhcLaSG7m0IEANRdSfagZYE7KLKAnw2D4J5yC7M39wEhiy6Fbwe7Im1E5e+1UpRaHK62tPvcxX2wKLX+uYoUaO4Dy+nGvX1Sf9xi5+NIGCvObR1393mZ5mmpdnvgshmhodeOdSHuq0NFyStFFUyi6RC6xF3xiZIHxFeMNtQLvoWggaTNtX39yrbMumoW6BoPfp84achF9RdrdJiAy3XL0FjpUSVIbPGIBi3JqDU0XQk8V88Axe5tWjzOIBetNYryyf/El+fvZJ8PxuzzLltzdKcgW7EoLYZKkPsqY0zXEr+nn5Mm8/008BPi9i9oIsfXGSR4flu6L8qHo8JTrAquJ+bFJ0oBx3m+HO+DalotHy+euhpwyTNJgB8wIDFIQFEGiHQ4qF2ocpakCn0QBaNlDVk2A8Fm77ANcFZ14tH5L+2bO/yvW9mCnJT0jpb9c9g6KWITqvTY7KIvHeBvvYAKoSAyZpqFQ=","authorEmailMD5":"8c4da9b88e4f0c290c8441d06d37dfba","message":"\"The work *is* the method itself - that's what the task represents\"\r\n\r\nI think this is where we disagree. My view has always been that the task represents some work to be done.\r\n\r\nMaybe it's my background in kernel mode device drivers (where everything is async) but the most straightforward view of any async operation to me is some work you've asked to be performed that will take a while to complete. When IO is involved, that very often means that the bulk of the work won't be done by the CPU - it'll be handled by some peripheral. At this point, saying that the task is the *method* seems way off base.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"3f2eaa86-8cf0-3b0a-8be4-906527397a34","date":"2016-12-16T15:11:01Z","timestamp":1481901061,"authorUserId":"disqus:ian_griffiths"},{"_id":"7cd1c7ee-237f-3364-8434-1bc64a2f0b8c","authorName":"Stephen Cleary","authorEmailEncrypted":"VRd8RvdwwTmzrfsr9YDyOCKOXeqao/nokYap8nN9vgtEnbv3G0uGyvtpCAlXXsgQ9o5xeA2zGaq1h5x6vq78imaXVCZRv5SBqYd7eGFeFQXtPMUcDspVe9tiqGbl63Nm8WyCZUgFyGD+ayTT+vJ2P0dEGdWb8RonQaHZJIvWj3ADl+9+t1MrSMiyS/wvBVNmNpO92RH+UYkdBjhUH9aOahj70AOECFq5ZozmHrHeEwrldTT/K+e437TWbLu/pziOfzGmNIs5ms7ZcNuzOs02TmyJ7F3A5mFcKbIlThdXzXgqGsTrY8IrTu7s2nsDUHNgELvyEa+bbyW0/kz5NwM88ukliZCdpQjpWF5bw84qx+n7PO5pTTR9FXM30JIYaOpEdV8GUWCbMlF/1ypQzmccnUlt0DHhWpLw9/VxMj+6pdnF/oXyo7G8Yv6R1Eug9pLc6tQzw7+T7T+JUTMIaqIL0HK+M6ROIbjAIPoGHORpoUK0U8p9364vqvbQ6fCW8YoI3f9kXud6BZmSqk8+7OXhYRBRXhXUbo653a6xTgmP5VYMCe+I+jbelwAH2qt0F/QxZsDJFY3hjpNrzXnLUMwXE8QLFcN2Z5o6cmnPt7y+2YI/sMW/4AmN7jFT+hM0KcDyISwvyT+Fr2nDRof2TAruoNllLkt6WvSunBwZ7a9HhVs=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"Yes, both views of Task are completely valid and useful.\r\n\r\nOn the one hand, Task certainly is a modern OVERLAPPED abstraction. It represents some work, often I/O-bound, which can be done by something off-CPU, and the Task will be notified when that work completes. That's a completely valid interpretation of Task, and one that is directly applicable when looking at tasks sourced from TaskFactory.FromAsync.\r\n\r\nHowever, there's another interpretation of Task that is equally valid, particularly for tasks returned from methods. When you have an async method, the async state machine creates your Task and controls it for you. As long as the method awaits an (incomplete) awaitable, the task is not completed. When the method finishes, the task is completed. If the method returns a value, then that becomes the tasks's result. If the method throws an exception, then the task is faulted with that exception. In this way, a Task represents the execution of the method.\r\n\r\nBoth interpretations of Task are correct, and both valuable in different contexts. It is the latter version, however, that most end-users are more familiar with. The vast majority of async users have that view, and really have no idea how tasks \"really work\" at the lowest level - they only compose existing tasks into higher-level operations using async/await. All their experience with creating tasks is done via the async state machine. And the expectation from that mindset is that if an API method returns a task, then that task represents the execution of that method (and thus, they expect exceptions to be placed on the task).","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"78a86ac4-941f-35f6-b361-f4620166e04e","date":"2016-12-17T14:10:58Z","timestamp":1481983858,"authorUserId":"disqus:stephen_cleary"},{"_id":"ed014c86-172e-3ebe-a17f-92831fe37f2a","authorName":"Stephen Cleary","authorEmailEncrypted":"JHpfHXeGEAabg4KLNrMWJq30KUc4caoPX1HLtir7RkTygd5k/Tt2T5Gqc1n7HQ7n+y+Rn7zs7lawfxQqWKQ2KmnhVtTI5BC1ubc4exDjmrsT5jFUoYEIU5Y3xs/Y+UVfKLq7ZJAhZ+OX6gYJ1/Q0zIvrhvroEafgj0+O7DCUoNUbz7tB3BjYT2djI2jJsqWs7YWavIXFjc3nF7Gvxe9Tnfn80uXK6qi5Zo7LjjFu45/m8ErlHTzFaFOFD6OeRmLbZQrXtgvlNChoahXvRlw4vIGQ9Wv5HuTh1UytXccAO7g1Xi/+sGmBYB5RuhVRKvN6N8LNQ82phFpv6s/kYPyQJahM7y1jEwiBaKI2jJUYCjbLKmgClffXnUChJ479xd9DeR1QVsTn599f1KHdYYtXKtjN3qD7Yv56jgrlwvb7Lj38QwOMlxhdv8YeXZzVk87qoX5hcXh0F4qAqHovDlCiZDkRkCiWrsqdVQT1aUrvjAzzuvIssWQPGTaFL32gSMs8i1ozM85vyTzkcZxh+jjrKNZ2ennWTO5nsq++iGjgFVBeuDfvZsYwyhsDwet/5s/ZoWqlgLntd4MCUsThin7dIQcsxpX0v2MWTxZBMwj7vqlxmmBHAvVaI5rRViPjzaJmMagM4g3f82FDbuXm09rLHKHAVsyCSJF695K3Dk6BlAs=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"But: [http://byterot.blogspot.co....](http://byterot.blogspot.co.uk/2016/07/singleton-httpclient-dns.html \"http://byterot.blogspot.co.uk/2016/07/singleton-httpclient-dns.html\")\r\n\r\nHowever, I do agree that HttpClient should generally be shared and not disposed; I'll update this post in a bit.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"5a8f7c36-cd7a-3f40-8e3f-c84e0f1d8a0f","date":"2016-12-17T13:50:46Z","timestamp":1481982646,"authorUserId":"disqus:stephen_cleary"},{"_id":"07eaeb3a-ef4c-31cb-a3ed-63c07da8c3f5","authorName":"Thomas Levesque","authorEmailEncrypted":"M26p6c1534D0feYqsOt4JbI5k4DNbrY8kgi6/jERs9AdBR7aak4UZpc9enB3mzWVKQswEk9QmRf9ZlFzfxz3sQrSMvuREgAHWoKx4FD8tZZ7I/ULm0w6wttHVsIxgx7fN8WI96YnsmFWLCYNQMw9g4aYvG6e6z1HsRvtoaSMWk8RS6QYsDFbG2TaHXVDayhnXZNsWgbLG4g6x9jMduKrG4P8Y9kvwQBKzfcZs7WrryGPOQG2VNmmw1JRn7RZlym13Bk90+Xubpin0nznsiMEyy1oSPPQ+221N+YJUiOcGyhCosEDtcNrBjT/7T5BQqSlN6EQQSp3fDyNLsWCHgT0imnKjtThuD2uOdYeBxDNd1Zfwl/o5j1YfxXPbIRsOM2rb2V61hAnxQ2T1WyUG4qniPg6+Rkx4GaqmUI/5jC3CUvVvNYY4lcOGscEoZH1jP1KLD4eY6MXL2PkNqRkjzHFnuVAkLegzHVxP/3Oc2vFeshOXUtI82pmhkHIkNLeHM9CvTIxm7f3ixp4rkS21rhPUYeaFAIlFZNqJqP9IOhZ47qyF+L7iSRgxZuN+F0AcY/Oytu/CSNSptUWEhl/JsV2B86OpCefT5VD7gqDUxbL/bIb9UR4ciHdI/Vd/hv/Yg12IApIXbKx+T/+uCJ+xwrmjaIRcgyEZ9qBsdjB40+zn3c=","authorEmailMD5":"f4acdb91aba11ddf8f03d4b12453f3d5","message":"I'll need to check again, but I'm pretty sure I had eliminated inlining as a possible cause.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"f954c4c5-81f3-323f-85d0-944bf0974c6a","date":"2016-12-18T15:29:41Z","timestamp":1482074981,"authorUserId":"disqus:thomaslevesque"},{"_id":"574658c3-dcf2-3c77-b68d-332976ee6abe","authorName":"abatishchev","authorEmailEncrypted":"PQX0gihKl+dN7z12/Usu9LJLJApuuz05+ajzoRR6uhf2aQXTLYWXK6Kl5g0r5wzhkjS0X01zv0VKYT+oq+a2W65j1A+YP27BOcx79upaatgFQAGVZsRTfAXmnrtCOui04hUzDHt+u/+0uY6BxYVQh86aA6KCrk9t5/GQ+GRGorlwrJjkvUZFuSqBUNR2BJYkN0k3gTeKl7SqjAUgJKpD0ETAR5PVx7xL8EvVMgh3mHNfuF1loa1HGPkofr0jdIJNeNKLXOqMwWGmOaRdD9p3Crj28LDh7Q2MDefJNfSM1EjcWkio6JfSOB1nWkwrFv5VZyeMMMWi/zBLI+3//ydnHuqi0Hjf/dYNAVYmTXG+tMll4i1sOEDAA1nk9YSR9rO14Wec1ghf9wO41jb+eXNuZ0oedIU7OwwIroikcm7JUJgOmccLVRew9BNdDnt4Rlr3kDR9rB1VUYPQxghlRb9x67tmBvGvZzOUlINQ2lnzyZE8Of0lwr6BwhuHKMGOBcn85VMAOWwby/bhg/4BKV3PKQZLalLhY0+0efovhZnYrKycm6eOe1S766GhlqfDsXtQWBlZ1GsF5s1iRbVHSNu5O+0CZPxKHrBZMf/u/X6SWe34x69saBVCdCUEpWxovxyIrCgzZvUyydw027ygrJ80XCfWf1m/FoHpJ6JJAcfiVKs=","authorEmailMD5":"b9da2ca6abf3a1e28fb470f2b3ae2c34","message":"Isn't this because type Task represents both an async I/O and a promise (via ctor accepting a delegate)? Some may argue that this was a bad design decision introduced a lot of confusion.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"7cd1c7ee-237f-3364-8434-1bc64a2f0b8c","date":"2016-12-18T20:49:01Z","timestamp":1482094141,"authorUserId":"disqus:abatishchev"},{"_id":"671afa75-d237-33fe-bee0-76d6f032044f","authorName":"abatishchev","authorEmailEncrypted":"fqXoVCRx5d6buIkVbOcjnE6CwUQM0uFHzKr4bma5hnnOzfgKvKsPaIHEXmBocfTGKt38V4OFc/F7mMjNZz+PXOo8jnyddx/G7AQdQYWcL0Wu4DMSV4KCfltUsZVvGuUPCTc7Pide1+v3Sk9li5kCuzpK62ZbCHpIEQLaWya1PS3IlKem9bbo/zn6DDxNx375jJqH7hCU/In9oWtHKd38J2Ub/iGDahAK3PhJ4Xqu6hli1avYDapZG8iZbkgAuJ9v4RJlimR1NHfsimpFByc8V1XzBw+yCluKvsLxcZl4+SFePg/1ANAPXJZkP4ipY4q/gKvyeFszUZhpmElvTDPhz6Lt4bzvuQ9QiQufGfb5d0ve5jjDjZpkuD2bHo2YBClPRsVZuvCf97SyzpLecQf1K1ziTpOBGLwq2kv4+Uw8qQjpC75A0UPa5dGeITKvv1gJPXBCQO8L4ZYbSe7T2dzkamk+y7x3zoBBWJktzOu5jQtZ86qM30aoMXaaxe0KjrAb6vrQJ1kNzbTYTaZONWHqJpu4LHTRyg9+8jWOWyXkr4/annJMVFWhgXsu5ukQh1egSpmrMYqt6+xlcEwlORA6bR5l4LgcezyC4A1W/GioNrCOvxrKNjZ2bIMtfQp7+dhWBB6TOPo2B8r0wBIg7Qq7Gc1RTltbTcjup56K8MbsY8U=","authorEmailMD5":"b9da2ca6abf3a1e28fb470f2b3ae2c34","message":"I doubt it's related to inlining","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"07eaeb3a-ef4c-31cb-a3ed-63c07da8c3f5","date":"2016-12-18T20:38:41Z","timestamp":1482093521,"authorUserId":"disqus:abatishchev"},{"_id":"d7a3b38e-37f9-372b-b4b4-211eaa3b154b","authorName":"abatishchev","authorEmailEncrypted":"R81scV1l5v9nAMcKPzWxpHRhVPMBVXrpxJ3eddkncGBt6mWMTqKViqfzFsTLcugvU6geAWMwGWpfIAGNRzPsSunXQ8qZEf7trCEO5dgzwaXP3W8y8poM8br5uMzfByIIkBstUZDTtMehvHu+MNrDrSzzU2VhbZcCHefZJC3xykNspTqw2QxGxTbSjmyCVmt01cihJKeK7SA1h2QTLP6zL2IlNlWb2tYngLI8Das/niQ9hmWaCzPQmJIAa3I3BZKCSQBMSQt37en03JUmLr8zaipAP/VBZCGbO58gQ9ac9JRvd/9LNStAk5Evr992F6hNPIMhzGZKmUW53MANw0nCFFaUUmNdkqi2iXDtCI+7jJcn8aQsjwKIJN8g5bHzGx3HkH7q9VXMB1oRV1xuV8Lfc381ArUbtz76vM07CtsehJd+TS67f7v7lADEeQOJM9M1J8xiCUp6td+qSE7zRTrn/ggIbXx4kpG5B1XhIa+EamvfhgP4VnTyPiCGczMKQdtWF5C3EpL43yvEb6n1hYKrUM9UDJ97Qc4RlzneYWH4Gs8CYo1Qx6yJY1rWDzRX/xO4BqPAUZ20RZUDXimAMUQd9WnX9znWQQNvQjHBvws2Ap1bmcKQ91or6wW3HwXbT6om+BBCbP5fW3ZG4QVS2P3Qz65hdV6xrZPN5SHHxL9QmfM=","authorEmailMD5":"b9da2ca6abf3a1e28fb470f2b3ae2c34","message":"One should not share it since HTTP headers are instance bound but also not dispose it either. I was getting weird exceptions from time to time in various projects untill completely stopped disposing it. Was never stroke back by this decision.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"ed014c86-172e-3ebe-a17f-92831fe37f2a","date":"2016-12-18T20:41:18Z","timestamp":1482093678,"authorUserId":"disqus:abatishchev"},{"_id":"f954c4c5-81f3-323f-85d0-944bf0974c6a","authorName":"Ben Adams","authorEmailEncrypted":"qVYf64Pn9ChskeSrJcpou2a1j2V8hoN/sa8DNQX7wtehPws1+WcZn8RljGIkHXZzwr1ZdJEpNXp53pYGBoDfrUkTbL2MqrRR7+qbyNpUjHOxkdQmF7O7TBRrEogHlWCNr/5Ct/u3DAi3zuKkg2b7fPrG7W0RXdVPURCbHvWXr9ZI5TMgaUxLt+vsaSzNVpbXsclc8x8UzV5JZIhxLUj+5RNm1OdeardK+5lT9op6zlb6puobrysvxsMk8uhh84PiP8Rd3SPLuo+lIlLLhXNnM1tu3xIumYww+lxSrqSVu4Y+UZK4HNiopaDdNFZLGkRkCRhxg5kGbdQMZJTFdvZXE/wU6bzaZkMRTYq7emUKYlcx/GSq7F6HqSnUBFE2GyJkSk1imilGAud8i2Hvetzow4Qf8Z4CtsJ6gOmJ0iTDGmupS8/+SiebL5aKBGgz/fR55SHop2GV7j0asF9n4GqsZzN9qO7c5DvxyxWr47G/Um1lTukddORsd9Bo5frB9NJdEh07AYFR2prd9do1/ZlLos+2kY2bLOgA5eSs9ytLrlDtkomWxDuW6gXLheuD/6Eqsz/R8n6m4EegCsp8QifMwTIBsbpcFsMO2mdcqwRksfw9rN2xdbapnMi/0hZAX1ceF7SkDi8aRUb89womV1wWfdk1/xIk8+2czM32OfWYdX0=","authorEmailMD5":"38980d692c0ec5158fb2298a6a6be8f1","message":"That's due to normal inlining rather than async/await; so the sync pass-though is light enough to be inlined and the call cost evaporates","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"ea70a543-96f8-30f7-aa39-0ea46d6fc3ed","date":"2016-12-18T14:19:37Z","timestamp":1482070777,"authorUserId":"disqus:disqus_VELdEhJlF2"},{"_id":"48768b3c-8421-3700-8e98-7285662c1f9e","authorName":"Stephen Cleary","authorEmailEncrypted":"XnWI8kDLjWXMgRAhBpqc4Oz9EFo9Z18QqyLbU6W6/SQeChWEiaoc2xsUkj1+4xEvgyElXDEkQ91w+Vj+6WFjtvZZv2R52ZR5X4yzwTOngoRu3x9QBV50yYg/e2HyevyWXimYZUnjvczdBPj7gDCSjWm6nZGTTYBkRZRpq3QKxEUEopugDXC1CrMo2HdLpTA5avMl66KP8cCkZWS4BxxVSjG38Q/g+soKLwU+15ysTMima9NpkrV3FkQwIBgvQDtVS8Lw9hKkxOMgqEY4tTl3INV01Mhs0MT9pFzsj+ptri50eyB7pB7tOIn0kLcTNrE843+ZNFeCB1F/vh6FZ2X6wDy8tLjU4IiaLKWuVuigqQtGOlW9qoinvOis144dwL+w7GfLKWLjoU+JQGuJdIemQAFyMe7SWrtyI423zOo7OlV492qHOM0rAN/pOdJr1xHHUs5XSBZe/pR/LQqrlbGjLSYQfM7IVZwLy4TR2sqmafFpXYIPsGXO3QW1Jmz1q91mD56Ik+nGbWLGPjiLjQ/KXkWBZPiXhcUCNPodMmsWBzVGtOlN6xyPK7ndvapXGdsdgIwiQAeFRWuXZXODudMOQN+ZaIpsRtbqyCdt7iVEmoweGG5hnQhteXGDVTlNE/1/jHFW4p0G+wck3Qut5RpW7YR8lNFS91lTHucf7ns7Lcw=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"To me, a promise is more related to async I/O rather than the delegate-based tasks. There are two kinds of tasks, what I call Delegate Tasks and Promise Tasks, and that has caused some confusion. But in this discussion, we're talking about two different ways of thinking about Promise Tasks.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"574658c3-dcf2-3c77-b68d-332976ee6abe","date":"2016-12-19T02:05:48Z","timestamp":1482113148,"authorUserId":"disqus:stephen_cleary"},{"_id":"e063954c-70ef-3100-adb1-f7c3d4336ae1","authorName":"Thomas Levesque","authorEmailEncrypted":"BYp1qmmjuTU/3Kn4EkTs21A8VITcSg84fsnGvdW+byeLP19/EabJzKSuzN4AX4RFTNxnZvi41KP6mdgQa35OcruDce8KmRDXSaFz5ZawUiRY83Qk4qSkdtOsGkQwbU/T3BAY89S8J7ETibEzWdVWLgHlbdF8YkuEQp7vC6d0+M6xZiQHL7vGHudWp7zcLfIMf5vg0NQrR/4rO6bHkdAbFglA2bn+J4+Y0Lglh100/nmfRQj3PkAxHLY56ATPI0aMIsy5DhXYi8eEhIrNOOjo5K0ckTGoMcZJsGacEZyzee0/oMW9EizTzP0FOXpzYaf/vXhFURiKhad05FUVCofUzqxcWgJRl13lTsVgs1ze25ZopHI7RRNsvYyuVxDFTWQaT749dZ2gShROuvuYsbLaZjeqMOLc4008ApjqGctqAGhH6xsKru9oGrsv07D4zrN1KHYPLnHopHa/fA7ISk6NlxqL5uMkFlztpw5B89odVB0yNnTQARNyBdyRt0FhGAqQ81X/3qV/vdkbcuuIB6XBsGaf3QGEyMh/1GOjuXXn5OnmxdckqOou3hld1fAS3gYHrsL2TgwAeSY8Pq6cXp+iV5f1sONsMfkB+Gq6UzqqL6xO3jQWAyJI4ZCtpdnz2WTCga8CmrpP+YHsxProrN/4Fo0itXN+R6/TN5UCYJLr7q0=","authorEmailMD5":"f4acdb91aba11ddf8f03d4b12453f3d5","message":"Just checked with [MethodImpl(MethodImplOptions.NoInlining)], got the same result.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"f954c4c5-81f3-323f-85d0-944bf0974c6a","date":"2016-12-19T15:15:29Z","timestamp":1482160529,"authorUserId":"disqus:thomaslevesque"},{"_id":"9aee43d1-260c-3ef2-b381-0f5a6575ea6a","authorName":"Mike-EEE","authorEmailEncrypted":"arQOoVcS/qtDjVHeFAd4iQv2dpA5EbUTEazj9okVE4p7HkFVkeegXW0YNm/3uRLCsAb03IdO6kI0ZWbrbqE5BG7VQGHEl5f2JwiiTHVPwXMxj+H+7mO3DlV6LK0/8jvyMildZLYnqSZaIgHam/IfH4/CoQ7IEL0TzjgbVwvMYab0NKLg7EtzJbDnZvRJV3dtsguz/CR5An0NLt15+YE9OPJ7gjzbsurYeRpuWMz2UhHlF4jSfJNhuDBNXqqGm0c/l1+P6UzGxqYjDbTUwhd73eRHQL4N4Mr/pjUZ8ax7bxUhWai++tmRMEqBPfYUqqZQexF17OJN+h9REV+gKBYxhk9HjgtSXWpBM6ndJ9XuM7Z60h+PyeY5IbTcPmSeJIqIbLQDtE9Su4FDrraa3f5xGX9RGdZimML2Q/DXw2l78P4XLS+Ur1PnMRunZD4aDAc0rkF1W47qyVL9dAF9IXQG1EKM2SnslZGW5GwL/6MYVwOXaxIJwaEiUukLIb0OdYWTygSOzD5zFXf6RZuFRrOuOMfYjnQEJps/OtNSUEcuJzflqgDh5peL/fB/YdcVGg3fudEQBn/DTQNVEjIip9ldwi3EJYjiNyXkw3PWwHQNaRAuOPaMWhjS6K3Dt0+iXErhO9HhN0+XRp+nRQeGq0asrwLOJeslfQ69cOr6R3WpbKk=","authorEmailMD5":"c7ce3b7185ea065d529fa4447263ac60","message":"God. Async. :P ALL THE DESCRIBE!!! ALL THE CODE!!! ALL THE HORROR!!! I've added this article to the growing list of constant explanations of TPL and its dubious considerations here:  \r\n[https://visualstudio.uservo...](https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/9126493-improve-asynchronous-programming-model \"https://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/9126493-improve-asynchronous-programming-model\")\r\n\r\nBut thank you for attempting to simplify it for us mortals. This article made The Week in .NET :)  \r\n[https://blogs.msdn.microsof...](https://blogs.msdn.microsoft.com/dotnet/2016/12/20/the-week-in-net-net-core-triage-on-on-net-sharex/ \"https://blogs.msdn.microsoft.com/dotnet/2016/12/20/the-week-in-net-net-core-triage-on-on-net-sharex/\")","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2016-12-21T02:59:35Z","timestamp":1482289175,"authorUserId":"disqus:Mike_EEE"},{"_id":"182bb037-afb2-30fe-9022-d544d0a3191f","authorName":"Jean-Michel Deruty","authorEmailEncrypted":"oUpTn2X32a70Ka/TLg9Fth/DrmzWIEvwfov5OKeS+oF/7eWK3RcGvHKC0Qh0rjEyYmz0PE1rkyUMBJQTezD0i7fKOd6aCuxwpJUyUbdnLF8SUT9NORyRDM/eKtQysAYToj4yYrAi/BabDPkGXRhWZYB1cLuqMu+j+taIOhXdlXQJoWrhRi9rnmL7iGxFETj2Wuqnv3NdXUT19o/FQfWkNe38REFxLZtkOSNMP6JI68Xp/SVdd02oA51XJ4f0pnPXwzZ6jhE+WhI8tNoOjp6cY20v8gfjvlH9gUKPe5fMJiKm4IJ862TOYJxH3YtWTfcD2+pcs12UPdAI6o3Yxmnc76qnjq0xgCwlTpozP97JcfDANcFEMPgrD/3bFLZj5txpGXdrGSj7Mc060Tfwp6a2PIyQHGpHBMVbKgAEvzJBP09Y98P4lmOizcnlrJLGKuNw3JZ/tXTf3/upsP72fASfLjircR4944I+of/yB1A74WpqGhE2zwGY9zShd7cKYYjc9yyFDhtytF5+fjXtFNQuIGOCxh9VzDsV2fTY/eYTzg+69SfwEg6gxFiewauswPh1kAOfcf2RA+3pNB64NRS5H+CedvfJqvibRuHSpmCNOvWWsAoFL69kKjULBTLDYm89YmddySVMDQuGA8f+DMeblwM0W1yHDtgFKJI25eBWyGE=","authorEmailMD5":"0abe631abd8f8496107e01ea7fcf95e7","message":"It's not related to inlining at all. When eliding, you directly return the task to the caller, so the logic of the method returning the task is executed before (or in parallel to) the task itself. When you throw your exception, the stack doesn't contain the eliding method at all, as it doesn't await the task completion.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"f954c4c5-81f3-323f-85d0-944bf0974c6a","date":"2017-01-06T11:39:51Z","timestamp":1483702791,"authorUserId":"disqus:jeanmichelderuty"},{"_id":"2782067b-7945-3011-9fae-a2fcef0b086a","authorName":"funky","authorEmailEncrypted":"Ir9ZYngwai2RB4W4kHYRHcJ3vI8RS+P2v3oCLzQ81Liqzz2DHV4WzxxebdTWIygzzwUovP2+MqxvQF4i/vhWF3itmv9f3NSJOADGTEy5BkIXrD+csWPbmqrKDJm4pw+SXfiQ3RjprssNCs/BHpDMoRTK6+W4cxFBt/btWGNE5eJkO8MLpj6qVrAzixNdmnCDPpuOamV9nquZFokm34hT86E3AA147H4QT3FO1FoWOgLYfQ810PiAlcI9jskhMI+kStNIOrxtb+91Aoodz/K0dBburs+fDvzPgtAfHxQy+HdWvpC7afaaStsgzCu2lWUM2c4qGn0By2dmW7Cambo9AUN2jPlSLwTZW+u5xjMHcmrKq0fATOZwnWiB7ncKJhnrTvYN7px0OO6vWWQMdTYbh3YL+QdybCuY8+e23Ya9y6w6A77RTCuHwGz55N4EecNTb49Z/jxBVvl18mQ0KL0aNna7GbTldKfpXqNI2vhjpDW9soA7jMI37vTbux7vn1O7C05vhRRmvYpOoxU7IW4fmTqlj44Ycae8HHpIwPQkcsQi8qjUmn03RQ4GqB7A+zSX9xUnGywTbQXDogAUpuyLNl+BwKCb6pJCuf8vBooHSkQKFWCzTywUch76ZcnLHXZk2kr5zLW/uaXPsmG0IDznPaI6EipNNwTWEvUlfB/v5zU=","authorEmailMD5":"e00a7232adc5934c03fcce176329e3a9","message":"Typo: \" task that that was returned \"","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2017-01-17T10:49:18Z","timestamp":1484650158,"authorUserId":"disqus:disqus_XJ1C82wFWz"},{"_id":"b7eaf32a-3b40-3de4-bace-bfe702f295d4","authorName":"Stephen Cleary","authorEmailEncrypted":"BBLc7vDYwVQ6+bSG89JbJWAJxN6PinJgHRpOeYI2I233eVfcvLXkt71rVgkJ7P07WkgWEteQmA3suglJuuEv2MX7dFG8yFnNVZPd7yWZcqn+n3Tnb1Yak9rna4v9Zy3pZAeY9bDor5iALmXV3Oaeu6YnVi6kCZJHKyqujHq6C6xUEbdKtxkZDn9XOP0HWYibyOStZVmu5w0YH2ypKRSWHDq0Br7GGHzHyY110MN/08idTdjcqhUCIDQYZP3M5JHhP9yJ7px9MiXUvLycT2E3Ku21EojumUIWW1ZVY9OrNslD8V/rXrSqfLkSZ+adnbz+SGTP3xdC8qMORq3PIATLw9w0aVvd2I6BfLsE+lDexJFk2QBUv6m4wU5/hfUvoCNZ0NBUvpXbvfJxan1Zd2ThbyhkPgpCLIEMehfWEvDQOFRECmivFBVh7Hkr9g2//nffXAh0AcukGAf+C+4r5gfFHAz8//ovkakhekoR/mXNa5+DiNGJlg5buGBqlNke3P+ui5pVcalJX9ap4aScTt4akL5oKTQOr5NMYEFKA3P0rvv+tIrOQimb8V5nk6ADqIITB1Iyv7yAp/vioa0ir1LRZ8aL32cqCFpKwzTgcaGoFImuQkq0yEcTFB4AqsrGeiVEp4/ARKJHvvjbN/6H03aByAmCo27Ort+1KcIHOIdzMKk=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"Fixed, thanks!","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"2782067b-7945-3011-9fae-a2fcef0b086a","date":"2017-01-17T14:42:40Z","timestamp":1484664160,"authorUserId":"disqus:stephen_cleary"},{"_id":"69efb794-eb63-31fe-ae5c-de009417c472","authorName":"Ramon de Klein","authorEmailEncrypted":"WulpLb3tWVri87XEACxFj6R0GTVwI/q5k1Y0qHRdWiW72TMCsmbjIQZzqsQ77UhpPd5LQ3w+MlGy64FUqdSBuGPMwl1A1Dokk/ufiy3XXohq+Rjd+R+Fa4i5lp0mYFra1Hg8WX+YSFKZCVTHDPu7Mqx5ndMuMvFYIE7UTDKRahvNlPa90evNMJcKHW50a0nf/GRg7VdpikB7egm3wo78wEmpQHF2knZUs7xEfDgh3b4B3M8S257ggBI7CQ9f2P5bLkrzWXnqGegVzUVp5hb+fzcEa+zgeYxJ/KGRuCg5QbbmXkZPUTAPZhyfZOe23MjvRZLW1mbJbKmLfykRe1t7d/YlsNfmMYdmJELuz5r6rZouiqlaTVLZ22p3mmaJso9PMLLB+gvnQGddskSSYqGfxDkuzX7X2nEVa9JUdRf4GHcQR9r8kjzDeTmqppEBf/4VPQ73O5qLKPFmj0gBpr0uligyR/xOVnIsI3GyD7fN+rp96COfLRA55u+hKv2B39IuRETGEqs3Q1mVrynxYeY3iMXQgKS9HaDjGq9RHHI+/fwTozOxngjDzK+1/sozbAOZQrRducyWzSWZefvKGDFU6HsxDuZv4riyXlR3mXE+LYVcGSuGSJNdLrxMlJTdDdKJjs91gI70K2PRF9tFR6+mV10B7d0sNojp6ndiuuIBSZ4=","authorEmailMD5":"cc4787d42130bb9cc4070f11470139c4","message":"I have seen a lot of async/await posts and discussions by you. Then you are probably aware of deadlocks when mixing async and synchronous code. I have created a library to help detect these issues. When I look at your passion about async/await, I would be very interested in your opinion about it. Of course, it's open-source and you can find it at [https://github.com/ramondek...](https://github.com/ramondeklein/deadlockdetection \"https://github.com/ramondeklein/deadlockdetection\"). Hope to hear from you...","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2017-01-19T20:44:26Z","timestamp":1484858666,"authorUserId":"disqus:ramondeklein"},{"_id":"47eaa8bd-f32d-3cfb-b822-31dc02dccbcf","authorName":"Stephen Cleary","authorEmailEncrypted":"RI7w0OzGZIV1KKTnk9CBQVLf8U6GTqPesESxnlWEyGamS1VJGfgsD26zxBgz2XzPRX+a25x+Hf2vUh4qan5jEoC+Lyt2cYYY0juSzjMxl3Xmkz3gq597YHk27aTMRLWWGRR5MYUotQmDdrdUKnBR3SVsNK3L0OtR6XH4Cs86KW1eYvVQI7PjEU84j6SIdh1IwSpI1zTtWEPmcUG2OXU8Bl34CNsJIScDrF8fANC5EmWeNE7Nb/b9mxOK+3ihq7WR9wWm4fVD03gl1gfS4ILPnjZp0iLkOb0rLNvqKJhuhvvDajwjXfdD98q3tS5FtPIUBVjqOiSpMgvoU1xjo4zQyEv5OrlSAg4GQltlRKY+5lKp31HNcg69RkZQmUwGnnB6KiJ5aXeGUlFG8xy0y+B9J1ne7kPedE+IiiemjbOwgldMQVo+fcptHOWz6v4aOu9j+SUYUcjWvsaXZ4vVPAxUAZA47QnMXICGkg8eO5avNzu3AD1ctEQtgA672sjOV2G/LcFzshQzcMg8j9ychIBx79YKe/YbXvh91WDxavEcgKvLkf4VxFgo1gj1rEsI7s8UyqBSsZgJgrSCRw2aILgrkb5Q0Ux5y6uGMNpVf1/nY9LJXn1PRcbC55T/HBbN8daLr9B9a8qkb5ZdSeJQK5n+BR4yxnS0Frz7Ox1Sfqsk+T8=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"I took a look at it, and it looks OK. A custom SyncCtx is the only reasonable approach, but it can cause some subtle problems. E.g., there are several (old-school, not Core) ASP.NET APIs that assume SynchronizationContext.Current is AspNetSynchronizationContext, and if it isn't, they silently fail. Which is not so cool. There isn't really anything you can do about that, though.\r\n\r\nI'd like to see this paired with a Roslyn-based compile-time analyzer for deadlock detection.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"69efb794-eb63-31fe-ae5c-de009417c472","date":"2017-01-20T15:16:04Z","timestamp":1484925364,"authorUserId":"disqus:stephen_cleary"},{"_id":"594e37d7-3ae7-39cd-bccb-4b20203763b5","authorName":"Ramon de Klein","authorEmailEncrypted":"gDZr2VldNhN+tZ/JVnDN7zPbq5TTX6UMBRB+PtuLY/i9T/c7cjho2Vi/O0FBgyT3bRLjJvXTHO44IC1JzDZlw60tlXrf8tS2sqa7ymHUzfXpkx1rSPg4iTnq+JRyoifrx8uy9T1zamtEXGjyk2Wo3GdXTR+b212piZF21Z6s4TG3ShfZ6qVbwDZiaD3zBm3t46YW0p8XC5UHjoCsq/EmcQXvV94xHiuhJVY7eS7HYpAX77pBceUFa3fwinXA1O9TGX/dMSKPxMLnSI6sk5yoSJnexcD7e9vb6h3KnJzv2+Iir4cPPpLqKGJEOUYvaAVYyJr0ek9xKKl0PrbOt7IObzaFDYwiK32IWF7nKI/o6nv/aNHb8s6NeCVn+jsWHAJqB51f96Eb2/W52BNj6MSmldziC8WvrLpXcrmdzX8i0hukEDxpjN/uzilF6dTw1sPPLEcCPOyhm/8FQbgGL967pRkqinIpfZlnKBl1jeMu5Gxs+ESICJgftWEAoj1Gkdr9i8zEb2Y9L+W1zjYydsqwRX3TCMC/rliVbPMEOy0V6oYv+BM5RFOfCxgPsYJr2F++wvpWeeKJ7CmDgyPuXouHCJuTb7/SA0HsYSlJjoRqN2eMXYts8i0ASBlRf6d07KIotH3DrBuslhfon7qBShxfoZJMCPyHENS8C3wgjqaAUgw=","authorEmailMD5":"cc4787d42130bb9cc4070f11470139c4","message":"Thanks for you feedback, but I am not into Roslyn that much. Also thanks a lot for your numerous posts about async behavior in .NET. It helped a lot!","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"47eaa8bd-f32d-3cfb-b822-31dc02dccbcf","date":"2017-05-06T19:28:20Z","timestamp":1494098900,"authorUserId":"disqus:ramondeklein"},{"_id":"89216780-28aa-302a-99b2-90af42f1872d","authorName":"Alexander Høst","authorEmailEncrypted":"Hh3m0ZVN0M5QRw3lpDX184oh2uXNIsWCpdbJvx1eKybrbnaeHWacKsxr8a3S+8zKTDlGOMVC+WnlPh9IK+UisPkyEaRJnNZf+ijvAHV5aeCr/bLaZ/to5uQEGAPfAQshATwP09NoEZ2PQ+PSUklK/ZFTQdMkeaxi9L9IBBs5YGWGi2vxMWbPUT8AquDHQ8eydG/5CroeYsMyTYcEocbBpCBPiQ7mS4xxu01PmCY/ydP4F+e/yE4EIwUWxnoEGe/V24e+7Mwo9SeaaNMX1x3i7Hhh4eETWztwr0epU9XDe3MnO1FcMWsyX7HGZ4Te9mMdnCww51DURn6mf/xNmk0Rjb+mQoM9m7dZmTBjZJlqkFGP5d+C3JNMgTWxOqgo6hAs6hzcPfJFRxDm0bYWYxNTemwWlVMPP3bHDgIQdyHvdsoBNdDBSd0J7pv/kuF4DBWnj5bea6XA1dYM+oh//d6yxbr0aZWTg5EhFx793GavcNAQJ187nVoz4pYq3aGPkPAfEG4zhcnHbSwS29/9BHQzMttEUxaWedfvr9ptv9cBwcaWQwt2+7vEV9O8JbRzrpZyogdZ8vgOlJKschtc6D/2RIMhcNJSrtMhmzAxg4m8qD7F2N6eYXM9kavYKuNKdG0K7cfbuEd9mcfamb4KH+CXCm+vbjGRYlE/MpUoiJ57BlY=","authorEmailMD5":"a179643fe18464a8499ecf75a59603fc","message":"Perhaps this is an edge case, but would it not make sense to elide the keywords where the only content of the method is a trivial one-liner return that we can be reasonably certain will never throw? Say, \"return Task.FromResult(true);\"? This is barring \"some yahoo\" changing the implementation of Task.FromResult() in the future, of course.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2017-05-07T18:21:26Z","timestamp":1494181286,"authorUserId":"disqus:alexanderhst"},{"_id":"aa40203a-1f6b-3ddb-8bcb-62633022ddb1","authorName":"Stephen Cleary","authorEmailEncrypted":"BdiMmndmQffnmgv1ZIW2tlyPBEFbO2dyHmoA7P1BIG4MN91EDB8zcXHbTu4hUZsJbglMnt6rnSukAbTYu5P0LkkrW8aiEh3D9MjuIVUZz1pxC+u8dFnOXB4acXbOd/XIeL3rH/a7Y0Jv1oTy+Tjb6fUWUZN3xFP9QMPxBC7e09UMKxKkSF+0kGzuS20YynOewpVeUnRT9acR2iNjwPizcCV5OC1k6o5J/0yGjkUYBJy6YopcTDdeNAlh9RB4tF7y5BMNyt0Sjuz7FUonjarhR4tMT4oBNgOOQAn4260B1P7odNKqHAruGky7NslBF3seHfs8eEoHtXrIiEqMIi7KLQMN3HjVPbYHeIBmqxhAcPsgR5jWhWnfjT9DPEt2x8X4UMAzZpLefMnIaJ2ZS4Z42BTSnbOd059wzJCg3EXQQO5VcyrwAmfEBQshN9IXxce3IHY4qe7aBC3pZm1L+5+XPi4oz8BrJ6u8QQnIDkoWTvncsuJawEpg6dTto9JZHrllNyIzyTb+MTQdiK2ZVKvMlbqsWp+YChIKC24Z+5tVNwe1soasObiF/DPZO+o+Z/4HZWAxeHTjDHKuL85voNMhP60RWdI0gTjft+3YoArb89BVgzWMP690FROepuBxWSz3152DheM9oXDB3fOFuGr4sGsrzIvjY06C5iypnDMlR0U=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"Oh, sure, I would elide the keywords for a stub implementation like that.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"89216780-28aa-302a-99b2-90af42f1872d","date":"2017-05-08T13:32:52Z","timestamp":1494250372,"authorUserId":"disqus:stephen_cleary"},{"_id":"04c25ab0-622e-3762-b97f-5708cc40564c","authorName":"Austin Salgat","authorEmailEncrypted":"jYPsHty2EyCOyYHmZ9KVIy1FWpGl/g9iBD+8Bdyc8R9amUZxBcqBR4mpMg+HJ7YXiJR8cXLNuhx7GPdwkMtI9N7v0gv5w+hcUUORVeopQVoRPqZ2zsRrJdAdcceFoya9fcBzO9JBJPM1RLoer03lOYW9NR/qS98FrdY4DUIHpSeqp38KGQewawwmLmz8r78xvZhgXB1l1fIKKNrjW31Od+6Nx15WZW42TLKKzY3VY+ZQZtdZyPDe3oI513QfWKf/oGcAqgNNp3nThGOWrHrfanjVi7Zh34WlKLxa1vYjZZZnrKfnlBCGeM8QNtIu+xmyQf9SxTeW9+ytjT94spCigi0KnWdN+Ep4CL/Gix/uELmcquR0Pj3LFzWsc0s58O9hMbTe5Bbo2VL7bFoQ+GsvfMqfSX/ao5SYucwhP/I1MqvA8Qkfrv+YcrAFLZS6E0D0grGf1z/ciDWpY4gw5UIG6Aw9aTMrvE0cKv5OI6s6vxUX6IJsQIu+g318BHFBdu85GQmwFcbM4C2PYKvesNfn9uYdo4qFDLvARa/w/hQKepLMCKx9JqiRLxiGKie7neSRQzdFMCDxKX+vS3OHT2MTNTQ+U/7lN9hxJ8eruQX4X2BAIid6A03BnnP6/R16k2yJxgqDcIAHlS6yB/Yo0zzlPfc1X7MnjqsaOVP65Ra1czs=","authorEmailMD5":"2e0681faba8eeefa837e950bbd004043","message":"Haha yeah, there are several issues with HttpClient that are frustrating, including how HttpContent is automatically disposed. I'm not surprised.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"c68ecf8b-eeb3-3cbe-8ef3-cea1d8a6d825","date":"2017-07-12T17:18:08Z","timestamp":1499879888,"authorUserId":"disqus:austinsalgat"},{"_id":"a432e6d1-7e27-39f5-8bbf-3f0bdd167701","authorName":"Austin Salgat","authorEmailEncrypted":"aQChLG7ZBg7aGEyNuwJllZX2d2Js5A2CF+2XnnCaeXSdHTRZF3hW9b5oDtEfCBxeTlJ4EqB+k8QE2rDzlLKr9EMO1vGiFXTiralXu0JSwDqS4WS4ll2JGjC1Hf+IXZLagM2or8DaWcuiBPnujQPFKz62Six5Z5U7h2iebds4AHSrLceWHO83ULYRwBW3/eQIdngSBXytdaDagoBPHYvnXrlUXbncWoDX9s6Rgwz0boij95OUWRLwMfOSa7vRFmEqjJy8tnPtIffEkj9xfk1azyuhHsHHV9NCFspw8ToXbi6vPRLl/WRT3e+4ZPUT3R+7/lCnrThScyG8lCrUOZqKIDd5wBL7JTimZT4cIOs1YMgTDOEuo2cGheseNshgP94bveofdlA9Sxe3lTYY7Cl7MuxT6fHRfs5bvDj3/lqm5KcEWSiq61DH9o7tnCnKJgelTjt2mtJ8y16WupxdehfA3RZAxf9S1M8zS+pkDqpVZqO7aSs08LiqY3qQkepefQZ3Vrc5JMRpEk6n0mHSCAdPyWf6Gc2Yv8EvFo1DU2Z8cabCpLswcCjGLbOAN9d393t1FmVgkA2c86Y1gDfcKn1tSu/rHSYmmRvxTzBtlgugOxkoT8iYX8BfKuMRo/o+bsb+G6W5w2ICN7PHuJDaT0wGFdTMc7j9AcP/FHx0ug7Q8AI=","authorEmailMD5":"2e0681faba8eeefa837e950bbd004043","message":"HttpContent and HttpRequestMessage support header values, you just have to make sure you only directly update the HttpClient with default headers used by all users of the singleton.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"d7a3b38e-37f9-372b-b4b4-211eaa3b154b","date":"2017-07-12T16:44:56Z","timestamp":1499877896,"authorUserId":"disqus:austinsalgat"},{"_id":"c68ecf8b-eeb3-3cbe-8ef3-cea1d8a6d825","authorName":"abatishchev","authorEmailEncrypted":"cbZaY3rXme2wVM1NRJPwsdvsXMEa4LIs01TggTERhEela5EPdyakM7p8VMwrXd5cgHANVFYsf6c7FSiq/HkE9aGdQHgcdnLxv++V7RLNMrmw+RvQR26f6Zdhpdiql8+gyeBtuYjapmqgJElcuteDJWyi/rYU6vakFHNsHyG60JBDNJU00Dk7R1vJk5YlYlatxlOa8+0JDBGyZnKJw55hcaiKIFdLMkGhrlAIzFMkhmD1s1S5jNW22ri3D2GN8hart7itkW2ktD+8QOPkcALphAyJMsTqY6+dWrxzoECDAd22pAZY6ENDj/qehTF+jlggO6kbnhG9AKEtCyKIunTTO+9VXgJJloShj7tV9FmYFcJva+ECTFw9zqtHl6FN12h2Qfd7VQbqsUb5E9YUiiQ5mLwZBAj5EEVE2Gthox5B1h0yzTZObLbOaPzANI0WV3G26UxnUWaw3zsxsXHqaXW7+N/DZo5qpaDLrOJHmJO2c6bDn1EkE7MQ8rsUijZgc4j5KjdYkGTsRwozpX7m0Exzun+E/YayOFW2hjJt3ZiNoGg50o1xEJd2mN2dBB7vycf9C2uZf6/iqC9crZ/bGpn1apojpZAOB7PPGE1YObJJHb6dlEcrNNznzhR45AP0npHpwKHaRP2Is+izN8/o6V45XqR07fOuarIgoP+8LW0o6w4=","authorEmailMD5":"b9da2ca6abf3a1e28fb470f2b3ae2c34","message":"This been discussed on GitHub at the DotNet repo. SendAsync() indeed supports but regular HttpMethodAsync methods don't. Huge design flaw in my perspective.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"a432e6d1-7e27-39f5-8bbf-3f0bdd167701","date":"2017-07-12T17:04:55Z","timestamp":1499879095,"authorUserId":"disqus:abatishchev"},{"_id":"33b09173-1e3e-3778-8f82-e7134cc57fbb","authorName":"Benjamin Holland","authorEmailEncrypted":"ePVYCVO2w34kWSvsEx+KhznkvCKnXkb8epuvq4kskEVN+1Blzdj1f0ohKyycb5hcQw9xZrCN9W4eYFbD7+na2hzNf6zcH2nzgePm0Oxkq6/fxDdx6KyY/O5lm57u2J4jh/7+6KpMaSpd1dRoTSe3raczo7iIz6GbBEWNpn7f1qyvPHQ9/ey4YvSZb1VSHdqQCPXoZ/0NITyG1KoBrkKMoiQZBTiqAvVfHMPatY4F0ZVittAQOSRxUf8DNzYwElsI9liPL/k4wTASB9tO3BTxaJYBKanlOikCoTR9A60kjgT26B42cy616iXhVzCGcwqv+4acUvbhnCGccBwGyhQ63VYoBu0E4Tamyx9bjTf0B0uRqFcemrjo4H277Xi6YoH7YB/7V0e/a+j6ImiQ6sTBRg6cEloh0P/Kvwpn2Y0PG9JsZccjawIewBRURa5VFyGKLxslFJ1RUTbbhcmT363LcQtC1yMQ+eVPJAg6YBIk3Ib/EhcjRb16XSE8WdfN7xnLjbAKTxmtsDSkIHZ8ubm8XDJOJlRgt60U55rjzzL0n4IWbrBLru23Li8ltD5qTmtYPC4R3LpDyffxw56Qu1NAyGLLG4uJhvyf2LcvOHvanfGVMhjlbm7NKPuSDsOVIBablTB8gd0bC3LRS4byt9z3yks4WJyyLkqa/ZJ2qJGyoxc=","authorEmailMD5":"ec08164333e909baef436d182e7d8c0d","message":"Reading through these again as a refresher.\r\n\r\n\"Task certainly is a modern OVERLAPPED...\"\r\n\r\nThis is extremely true, and it's also ironic, given how little interaction there is between .NET Overlapped support and the TPL :P","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"7cd1c7ee-237f-3364-8434-1bc64a2f0b8c","date":"2017-08-16T18:35:44Z","timestamp":1502908544,"authorUserId":"disqus:disqus_ClNCtMIgGo"},{"_id":"ac261a71-e24a-3102-af3a-1a6102249239","authorName":"Joseph Louis Lagrange","authorEmailEncrypted":"QjAdzxowZlRCFMjbrppIpzjEGmy9A+zxdMoSGApnZ26ZNUBP3Brb6Pd0HUJxNbWO0KLz68vGrz4/5GJ5AyE0cS8JojmfqcIzMjuWC6mlJEA4+R+HSEIBEdSkjuCHEgKJirybGZ0/7ffRD7MX1zSNP7xwPKqqeI+w1X+rYTbMVzqPNodruxjog3zSqW1sa+eSaxWpqxs5DdwaxbqdcEs2LClBpOUOaJccxRtuzckL3rhyEdsm1VeC+S0yV8fhipzGgtUEcz3fyHKrzjoWutTj4BImlK4+btWOEvpwW0xr4OLVOiiib0pJcRlyHkzTo5IBgBAYet3YVea60dNgXuKXP+Z/HWMwMnrrHMPB0puHfpaQJKwvs075pxMtx6hStqJ8cv6zZc6YJXVS12sHnzr9DwgbDy0mEXjgx3zNCSlUxOO1YBEfI8tdE9IWY5v08aO6xFJhv+QHv6kuKJT4zkgqU4Xq+ydMAxzlR9DWbiLpTZ9dY53QV8hT0p+XQboVNKdAGCH26/UXGrAwtVmW4HE8X5kjRn+DcFCdk4WgrWxxj2oxIZXgV7JPSKK0m3CW3lMeFxVXtGzKBQMAiTk9Nmg7QAHcuk0JuDG6ZuwsOaxAdAbfN7LUtabnMvQDyLxh5r3oF4Mh0VIYCFm+en7SIO2A3geKU6F0RYDf95CxHPyzWxM=","authorEmailMD5":"7e6002f0e0c986706f0d834f7db3c134","message":"Assume there is a class library MyService with a static hybrid asynchronous method HybridWorkAsync. The \"hybrid\" means that the HybridWorkAsync contains both CpuBoundWork(); and await IoBoundWorkAsync(); statements.  \r\nNote that the etiquette you explained in another post, the CpuBoundWork() must be not wrapped with Task.Run as await Task.Run(()=>CpuBoundWork()) in the class library (implementation). Later, UI-based consumers have to invoke MyService.HybridWorkAsync with Task.Run as\r\n\r\nawait Task.Run(()=>MyService.HybridWorkAsync());\r\n\r\nto maintain their UI responsiveness.\r\n\r\nHowever in this post, you \"suggest\" us not to elide async.   \r\nIt is confusing to me because I have two choices when invoking MyService.HybridWorkAsync in a UI-based consumer.\r\n\r\nawait Task.Run(()=>MyService.HybridWorkAsync());\r\n\r\nor\r\n\r\nawait Task.Run(async ()=>await MyService.HybridWorkAsync());\r\n\r\nPlease kindly let me know which one I have to use. Thank you.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2017-11-21T09:39:07Z","timestamp":1511257147,"authorUserId":"disqus:joseph_louis_lagrange"},{"_id":"0aedcd23-15f2-390b-b644-3a09aab85f63","authorName":"Stephen Cleary","authorEmailEncrypted":"QlYCllGG9nxrdU0h3HLVP3/rMXCyl2zBTAxtYk6cGGBDyRmmSD+gnQ9mWdUQRZT/p+aTPcV5GmlbDiZqxbQAN7DAFaD83Q04+6m7BTLclFuCM0727rRC54SkJR0crWVY4sB5VBcMx0itpk5H9T17vW1oNb/vFK3NJ77M/vU70MzBkpRrpNQ5ymWdgdudeQNauKrx8v4lzPfa2YMJ7Qvw+iDgK/GT4KRhBo4pSycegBduvzOyLyeu68CzgYLz8pWuYMkr8OpLI+c476vqvzYRB6z1kvmznZe5AIruJIrYhmKZkPW6iXTcXvg3DMegGYN7s5UaMclbsKvJBQ7SVC4NEeQ+KCDZyH5Fb44h5WHGDN057s0sVf4SZvKc9YL3OSyAAZGGplmTLe9cETgtU2+6ZCi5MqfZUaa2ihY2aSdKTQ32SIPgCSYBmWni0SCiXsKz8zzaMjPZGgIxRCXKTpmCtJ+6RPocwuI7VCyiBJEu4OKYIM0bW4VtjbD5Di885iuslOg74D5PqMyRoLIWBN7nnoYyOuFvVZGUvdHECjZnpQsFmvlbd+hXe1/tNMNyk/7s+Nn3+0Q5S8mXKPghChqiL64sowKq8ZANWE6dGR7sAGJy99PGZ2I4bFD+52pLeZpZSTUBg8B8XRPYVMcxKv/AxVtWWKZebOSKroJj108NLKk=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"You should elide async/await inside the Task.Run, since the lambda is trivial (it just calls another method).","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"ac261a71-e24a-3102-af3a-1a6102249239","date":"2017-11-28T13:30:51Z","timestamp":1511875851,"authorUserId":"disqus:stephen_cleary"},{"_id":"bf1e046b-279b-3508-91c9-eb7a196a31c3","authorName":"Hamlet Hakobyan","authorEmailEncrypted":"PiqRazq5kb0tb86gq49M+Z5lX9rYF3SgMtUUGBk7T0BgG4YGaA05PBInGBEqf4HnTdDxP+Kgb/0IxiWSNsJQAwmNJBA/W3UdDNNkS457C2Z1NHYziXYXcDWyQNcA8lu9bFpZlqiWXa0sx2AaTiqcukprTJe4lnyF7Gzkc2ckPM46CVVx4eJf9PT+gkdo1kzeoUutlBN0jFy3lSyrxk+9wppv3dZSjKHc2HKfd5vEFuJBwq7+Y5g65cJMn2agAmnVJKCufmrHf2XWGu7mw8/ajvfjOwvd0ZkT0CvuO59yMQoScRyslZYtF8Bl/F+lhCmnIhzAlKyydxQP6jGIuLZS0fNloL7ufb+iAgOlTNfMwoBph0aPCn2bG+x2Ra6GE90CoFRCTiCQxn9XsymqORapAbXQEvSay9ClKDQ4MkZpJKLpUqC1L3hcZExB9yrKJuFpefdVMF0+lmP23u+ezz24l0MlSDMRDi07J58p+o78txTDXKgJF4mbckHbpP26Zm6M6mjVjMG5G2pd/BB623al27+E17j61gPmgPj9g5D8yVJ0h2QbPRoctcyqSsWH552/dvheUuZakhGczJCJGLWCCYYXQg3QyV4Vr70WlbqIawb4KgoJ2RsuUA/blh09k1f+dR0P5DDlWhEumGATXk3qLyyWQoJOxAZAT+h9CmLHr9Q=","authorEmailMD5":"185a3c9b12588493dd3361fe0ca977b2","message":"Hi,  \r\nAs usual, great explanation, God bless you!  \r\nIn the last snippet of \"Exceptions\" section IMO you've muddled together comments by its places.\r\n\r\nRegards","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2017-12-06T21:16:23Z","timestamp":1512594983,"authorUserId":"disqus:hamlethakobyan"},{"_id":"1b968f79-3b6d-3cb7-98d9-985e29c78fe6","authorName":"Stephen Cleary","authorEmailEncrypted":"fjfL3HaFV5/28cWJwpUDGuZpLkWESbsxc3SrdhH2IBEF+39OGCayEvZUSJx+2qcysmP67ieP3XDORlYcTMjO6lK6meeBWR3hd5WLbsiddhi06DygKRS+cRw94NegY/DjJ0fxnnKGK6j+wXJHnGi3wV7XigFRU6vr7mE0g0HKJ5uhd3Yng3HmBA07nNB5bNQK3Mx/r3aGzX4EKx/gYlRJcTp5UYanPBqbPMLkq645efUveqCt6Tz+Q7DzoVk1LbxxaC0+q5pHHEpSq5srE4UwdrdUKJezs7WkLvtwlejXSi9KRO455DNSDWvAqh3UjUouZNWr++EyigNH6nUlb2IIDo83MfM1M1glLEK9TKSpQfe5Ebwz64WhzvjtJcOQZ5THumCG9D++aoSfEnkj+aZOwPffXjisXABlBSuw1/Wj3r5T4+D3QRpYOFrTZsf90I2J4gLX6OyjKlPhwDj2HePJlgzq7PZ1Jaj6F1sTnkmFWHmvLeWBrjIl0nka2hU7J9f4GtALbGj4xc+ilna7ecKL+GZ5BNsuOqg+5QvKGV42+nIWXWgu/eoBP45DACKNugqJyxrEtzzH+Pi12QjA+GRZeCP2h9yE0Iru4keBrOE3nCCFsf9QvHEX5w0WSWuoRZZxqmUESMpHNrDb0i2Gxr+O2QdEJN6EXZXarNT4NSoYggA=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"Do you mean the comment that wraps around?","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"bf1e046b-279b-3508-91c9-eb7a196a31c3","date":"2017-12-07T21:41:55Z","timestamp":1512682915,"authorUserId":"disqus:stephen_cleary"},{"_id":"10228738-52fd-3bc3-a9f6-10b239a034e3","authorName":"Hamlet Hakobyan","authorEmailEncrypted":"Md1G3whh2acNdLbmLaBzgU6LEyeCE6A9MdI6lBtwPkXp1DvVh9XGTfDOcp5CvAN7YbS7X0KwYfctITB1W+pU4FDtMo0Wt41uV1/L80CA3B12qt5KH7nNRjjKFN57q76csXNbUTtiOu1gKxlxmkaHfdbhw0+vT350o9ndx0S9fKE2G31xcp6BsOadpmw77J3TzxavA4vEIMfTGSxobqNyb9DVLb8p72NdSx41RpAVm1YlampxZXelWaK1TSqy6C7DHTPqD/RL91FQ644ge+5gbyu3+2Dpc9RRB3uHhshQ/M/BzjWq+5igslWYJLtEtGIjbLltiN/0hW2GpZ6WeUBQYHOMakaN5KSfBPXQxRXmkPMw2SkZBLNyPZ5m9wnls16iHlH393eId2zZGXXEtlmbsEiagGwHV8SISMFvlAJ2HuRje/TtAW2Xqv/G3ZN8B6ffo1g9CJPoOdlp3uPAW/vPNU8enqdGcBPUimf5qL2LkleAA+Oy4jYyqUtqxIgs6AkEPnHkQeTIdQWFvjWZkKICzP4lSFlj7x47tRlt/JlHv34K/DQ02191twviX81ptfUQkE+341YervQG+229skGe/57BO0OtY2E2m6Q7suv/NivQX4nJcYBJiBdu32yg7mYoidFErvSzWYyZVsxhOqKdAUSN/LRVyuTNzZV6IKKEtnQ=","authorEmailMD5":"185a3c9b12588493dd3361fe0ca977b2","message":"var task = GetWithKeywordsAsync();  \r\nvar result = await task; // Exception thrown here\r\n\r\nvar task = GetElidingKeywordsAsync(); // Exception thrown here  \r\nvar result = await task;\r\n\r\nI think in the first snippet exception will be thrown on method call and in second on awaiting to task.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"1b968f79-3b6d-3cb7-98d9-985e29c78fe6","date":"2017-12-08T18:31:38Z","timestamp":1512757898,"authorUserId":"disqus:hamlethakobyan"},{"_id":"d631495c-5c19-3a9b-a477-a5fec598ae4a","authorName":"Stephen Cleary","authorEmailEncrypted":"hCXcSkXEACv88bsM3zB8Z/zGAoWORw5qCYDYS2GUSZCI195DnYELEbmiq6/TMwbtSI92b/yPBmxVmoWNcpcd1hf9LbxPv4HMCRVeqqhPzCc7AZl7vg4kyh74KQH0SNdqIm+nL+uTKbVuO+B2ZVxKR5qYGva56vY9Q2k5Yow7eVCqsG1tlXIXiIlepYny5Ml0aK3xIw6NvxUDIQu4YclRi+OWuTC8DjzgZxMkqAhAvdluMcYK6ma6UfM9Nm6KxW4oYLzaEx7vcUWgRuZrHEfoPp/GOqOunmbSmMZ2Buaf+oyqkL5sRCaILNrEi1mswFkqtZP1/IK8n9wX5ayIdmsaM7IMtu9yDK/WF/NB9hXeTChy2uhZenkrFU75K0zWD+5/CuFmUlnPDO5Dic5alfzOOKCHZYS1hFcL8FeC7NA/zhJ2S7XkOenZuFWKgyyWzUBu1BhxjV9lGSAZm4wklc82OQ4xfNvPkLgggPBTPWL2HvMYMfnKHhClj2Tc/IimsmAWgKGKzTG4s/xxKDLccFt/SCEFJFYbziohBf43wvvPLHzKarJFYjYGp5wcW2bADyU2ajQ33M8NW/pCYP9FWwSobnt/2hKkilvFcV0ZdS6vZxPIFpAXwn8mrfaFPoRG6DRsinAK2MLgSpk4PnIMWEwDAjf/kzkRBCNubJusSBM1Cv4=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"No; the comments are correct. The async keyword establishes the state machine, which catches the exception and places it on the returned task, so the exception is thrown when the task is await'ed. Without the async keyword, there's no state machine, so the exception is thrown immediately when the method is called.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"10228738-52fd-3bc3-a9f6-10b239a034e3","date":"2017-12-11T00:30:02Z","timestamp":1512952202,"authorUserId":"disqus:stephen_cleary"},{"_id":"331f5757-6a7d-3073-9675-2bbd619e8569","authorName":"Hamlet Hakobyan","authorEmailEncrypted":"n7yoZ2tVpHjn+MOg4Vmhv6r0cvN5Rl30EX620yLPEa6qO87J+5KroYt8vY/4iap3H7sgN9qW9vJbz/TpKR185+Tw9mFGQ/d3ZP/iEDlRU480BeKKZiVOmMwLmsJULj/J2rKYRwKw6kEzcLWfW6Bqq2t4z+1QtBeIQzackuF4fpNDKp4z724A08DIFDLgGCKgdUC+u7g7D2QpfFD/IijjHvuc6NsYH1OgQO1WhDSNQ34TYcZfJ7i8f8Z4SGg0cRnoM106JTcop42BH+fgX+oC9Xn+lGmZqHgPqOkQgqr1aeSmXITgbBy63hyPZse3R0exEwGzF2XtsRbP7i3BgnTluJ5TmMnYsKjv4R6MIzlOu3guJoiB8yNTsNUTmllSdlKJugJxCaKgsr5xxq/K4jYhJPNiIkHxZQr5bAUJNUvgnsPa1+4K09IEc0uPpVxNR7AfrdY03hcOz+YGAmuCDx5xsTij0HyffUjZP6k3S6d/42CNNbG0Renep/2t04RtziGdzisguDtEiFVectUgtnmZZeNgh68hPkcEvzvHjb5b25RIgPg+/vcEOAp8b1xmTDfiZCesrqUiZlWPGbcsXoJPlfLHGdhBYPgU35yf1ErFMP1qLpCE18bkhTYwCUOfDZUPMDMDcMui+50Hkoqw5UYseTXVwg+Ii2l/+HZIPqV32jc=","authorEmailMD5":"185a3c9b12588493dd3361fe0ca977b2","message":"Ok, I caught it. You mean that the method which returns url string throws an exception not the DownloadStringAsync.  \r\nThe examples mislead my.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"d631495c-5c19-3a9b-a477-a5fec598ae4a","date":"2017-12-13T12:06:14Z","timestamp":1513166774,"authorUserId":"disqus:hamlethakobyan"},{"_id":"af4574b9-718c-3bb5-9506-5ee0af8c193a","authorName":"Joseph Louis Lagrange","authorEmailEncrypted":"tkMoYjcbLzLH9/jR1Jno9QT+fo0+r5z4ZxzI44my5dF1vUcYohuiaz8fxYyFj2RttgI3Q1zS9XQf72T3gWGqRRQR4N83RIhAuRnRMm2coZ1By11a+LJ7xEPUQ4KaJgtPOyfkMMwm0YDIbbkvPcfp51aeeAy0aCJSqAO9ifD519zaZsp4vbdDS/Lt3AyoQntDrM3PdFqHtdLgXv8RM2DjTInF4kqFJfNKBG8azy7Z9Y5eVOOYoS10wZTP9OYH5L3fy2Brkv6SecPdgIXmDOXT2DgBnSXDifKswT/vxrEwPeNcHf9c13jjYnx6r/uxdxlTOd2x0TP2wzqE/X+zz1eB+Qj3/uZPmS8KEcd1/ZHLe67ZkWgDUdSAHM0uBk64LtUfeFXkYaBPH/PhksMeMYT8JQ8X/m2eHyc7zZ5aHzm/9UpREW+IDhnxNejBZ6K5RHq5+IN8mPfjTCNjwDJwmIqtX9pgwu+QmXkYegm97Y8sgUjdYHMvPnWdEVNXDrwub5J7kouZoT6azvGsPAfCNg4gKFEnM/7J+0lFCrFkEa29NIwdX1n2nrc5PGK25CBLQC1mJQWU9xlpE73nRNxjlvWR2LwEx09aKHkSqN90ejdEGaea/6yf5L8ff17PKVfy4N8Gc1UvC9iMIHEf9z2ApWa7D8XxqeRtkwozlQgggokGSq8=","authorEmailMD5":"7e6002f0e0c986706f0d834f7db3c134","message":"Thank you for replying. I have one more question. How about a method that returns Task.FromResult? Is eliding a bad practice here?","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"0aedcd23-15f2-390b-b644-3a09aab85f63","date":"2018-01-10T22:01:22Z","timestamp":1515621682,"authorUserId":"disqus:joseph_louis_lagrange"},{"_id":"17b2875b-81e4-3963-acf5-81e0a2016538","authorName":"Stephen Cleary","authorEmailEncrypted":"SsEslXo6NZHJqiyPyBwx2dytd8gaYcde+MXJA+/CF9Sn3QN+8c3b/qIfctZ4kGscFlytrVadBfCGS9cn8ITQCoosJ4qyOd+OKltZOm+Rq7UZp1xUF5pCZrPHBHmsiTIEOsQ3/qM+EwoNBb1n/znSv05gAjGApOsX86+3w3mHSR9VSegf2EWIl60n6VqSWdmXyYA7md3kWN8NkKu/+3/P2ID5ia6wKZGesfzmLDCHl7L43wVqJbz5foV36hl621/gO8wDxVgJJQ69vlbVXwOp0FLyxLjqmImJVj8hFlL5MVjknx3dhjDRkzRa0sfvwZexBd0EZFcRhQ7I2YGhYIhm5o3hhJHa7P/vNUbJnxeqA3yjSfzsdknw49BOeY6Px4+kioeN98Xq7mbRpNtm9PIySaygRfbSgc5kDbYCLZJ/cQt3RiHARf3i0pHgt/+ZGEY2gjOPTPyxDs35ibOtqgQqcAa6wABrQOyB6pC2JGZIvLxse9xPj8gEsPwF0eLBM4yyeIN4j7BzvW9CuOhPuQo9RIUxW3wTMyBBpFMgJ80ZJRoKKSb+ZkOvDoMr9aEFcDuOPu0x+zP2B7NBNP+hATKmOA9vq7uD1y4ivNHmNFPnSXWeaS0HbyufMK43yx0Utb1qiINpqrPPsprNbIPri17BbyKnitTahwwT+GGYRNS99Xk=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"No; in this case I don't even consider it \"eliding\". Since the method has a Task from FromResult, it's just superfluous to unwrap it with await and then wrap it back into a task with async.","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"af4574b9-718c-3bb5-9506-5ee0af8c193a","date":"2018-01-11T02:05:44Z","timestamp":1515636344,"authorUserId":"disqus:stephen_cleary"},{"_id":"78bb3f69-4cc2-3df3-96e4-2dd7b883ded2","authorName":"Kiran Challa","authorEmailEncrypted":"","authorEmailMD5":"","message":"Excellent article!","postId":"2016_12_eliding-async-await-98a72933-845d-3c59-9bd5-b4160554a9f7","replyTo":"","date":"2018-05-21T23:36:57Z","timestamp":1526945817,"authorUserId":"disqus:kiranchalla"}]