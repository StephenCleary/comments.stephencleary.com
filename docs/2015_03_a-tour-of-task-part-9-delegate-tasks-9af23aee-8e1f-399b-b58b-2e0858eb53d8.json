[{"_id":"7f65f0d6-b539-3045-959c-7d3c00bedeca","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Different teams within Microsoft have been adopting async/await at different rates. They are all moving in the right direction, though! :)\r\n\r\nThe current version of ASP.NET (4.5) has embraced async/await as much as possible given their severe backwards-compatibility constraints. They did a pretty good job but there are some rough corners (like no support for async filters or child actions in MVC). ASP.NET vNext (5) is going async all the way.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"fff5b1be-731e-3cff-8cec-193525862719","date":"2015-03-05T13:23:44Z","timestamp":1425561824},{"_id":"9af56d80-d3e1-39ec-9d8c-1d595b273adb","authorName":"Riko","authorEmailEncrypted":"e+SvbTzGYxVgwSnBqtjVZ2G3v5qtL7K7bceJNYIxkqxB2blCKt4nnLEIxzN9PdDNWImqaY3cxUHFQW6xsgcyDMXbCQhHEEalj4k2FbswfuwOV7wzk/0stGF6jQ50DUwCp/KkQkVJMTibqsyQzlHP8ysAwttIEtaOmFtZ8qt7wnQ15kWI/poD+IEhgiDth/+PNjN/eATuWqSP3kxW15727U757IMUjbm9GlHMKgqTl2N6o0xPV3J/AewVNwexnvTNCptiLdWSztKol+1WaZ8CZfzTRrbdSS0XFXNGyi2S6/q1JqzPvASblDOeeI9d7WoPS3Ynefz6V6tYhh74rKZh/T8SsTcZgUMRqbqzfvhllZRjL538UdmEqwQSEVH0j+XfeiG25tn8jHAczrET+vj/vsonWRHrrOeJpZiVzDMEbiKDTK7fOwsX34GPQKcXu2+WHuUwP82mSEijJxV9c7+AK8LAMz3dkTvgYlWS2TYPIIeRWgQK7SbolLnfO660bKfF2rPutRfV1Kq0QoQNUmqtvQbF4W5Nso0MfP1bYU+kRAKRz7XWr9OOfYhtGCJHYqKiRH02DzZvJTAgtOsTb/A1sA4FrZ4MJDvFSZ5SrC2CKzKZL8TQ88xv2iVM/BP/AyPMjZuw1Q2fSz4o8Z/0a4QkBF9Gewr8D0i3/dmh5RRp23Q=","authorEmailMD5":"c1b99fc51717f507f13d0e2297a64fdc","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Yes, backward compatibility imposes strict requirements. I am glad that new development is free from this problem.I believe in the professionalism of the Windows system designers. I believe that in the end they will succeed :)","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"7f65f0d6-b539-3045-959c-7d3c00bedeca","date":"2015-03-05T14:15:51Z","timestamp":1425564951},{"_id":"c2aad020-2656-33c6-9903-e20b18916c31","authorName":"Riko","authorEmailEncrypted":"WUtiYs70HAbcxQqC99sn4pJ5xkdbywhDS/9fA5yDm/QFQ3B3Z122glgOUw27CiHboSLeQjBN6ZnKLymjdDsPRebGTl9bLHYjzMktca0uTU/OtF2jXNnqhwqeDCf9fqV3fLVx7ujg3tiDPO2bHB7I7zAMe2YJWqTpyeqGqSVmPnjfNH0i0OEpWCB7B4Ey651G+0egp7d2lDGakipx5/qrxacKpUzyPwCLs3Co2zdCI/w5plbdxsXtap9/f58Brg3T9Qd7b1gp65QJPeoWKSQ3/bwLPWNt7h+8LqpnVaD419VBSIT/ghQKrU57W8YevOr6j86uQ5MJ7/DZ8fN9IU09MuxMiuQb5FSqSnMlLHwJEj1K4PoE1luyEnpQOxSu7oAxbNxWIuWT7ttnUGaCpeQOzNScF5tVgaOLwRWVXMJq8Nzsm1wTqEdWfYs8PHQzB0jupMXtT6WSbDsDDe6fhM2fjPj/wcwqr6/YB0SkjmTJRsSdiwGC1IKaonusJc+sOCa50VJBy9X7/ubz+vYY6nW+mMaq03dm0gygwKKX/XoLBYnEZ9kZbVZWCA2QJbM+IYwCtDo4HD7+6hU9kdhAhxDaoypVZUpti9Axk+5kS1Z88pdMpTySpyxFZZUoFMRIyWYVRa+gwnR9f2V520Ez/XlzlnfqGx0O5oFR8yGP1NPrg4Y=","authorEmailMD5":"c1b99fc51717f507f13d0e2297a64fdc","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Is this correct method (found in stackoverflow)?\r\n\r\ninternal static Task<t> Error<t>(Exception e)  \r\n {  \r\n var tcs = new TaskCompletionSource<t>();  \r\n tcs.SetException(e);  \r\n return tcs.Task;  \r\n }","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"c5fb371a-897d-3fb4-87ac-5b2f6d95602a","date":"2015-03-05T14:34:14Z","timestamp":1425566054},{"_id":"c5fb371a-897d-3fb4-87ac-5b2f6d95602a","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":".NET 4.6 is planning to add a Task.FromException method. In the meantime, you can use TaskCompletionSource<t> and call SetException.\r\n\r\nOf course, if MyFunc is marked async, you can just throw the exception directly rather than returning a completed task.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"eed07573-b7ad-3fe4-ad55-05f096f8fae8","date":"2015-03-05T13:19:46Z","timestamp":1425561586},{"_id":"da9284bf-4fa5-3421-965b-abec073894df","authorName":"Riko","authorEmailEncrypted":"b+HneeMvRqy49gDWMEV2T3ub+rEn0qUlkzigU+rcbrFemQp6xWYSPZaUZeDJh8wfySErMF3wYsew7YePxpSK+o4RFkYH0hFlKmmEWuNXfl6t3OJTpJTGxVhJJkpt4kcyG//D2+tlUedZmxEjk88vpyNen+wX/beuyhbfzkCjAjqnlqPHj/tG/RNNRcacqJrdvTSEWXU9netXjXHJfIvLAzT85o2v86eYN2qpoOk4u6yPBGtuFz9Ku1PNd+HSFjKnufL+6RrsQZIChrBU3vN50Bz+OaGUzWdDBtUloI8tfRv0qFAxVHZbeR/WIOl8oSM539euRb3l/aMSp/6D0aLTid7UarOraWha1aspliY17CDF5z/febDOHlpY2sWUrU7GgNA9OzaKsJbAq2b4l79i2ZgjJqIVRyguMrVuDqD9yjX1bFdx4Xjv9cem5qBcDxnyAWXCb8OYgWn5OTqGJ83D2l8B5SAiO4Cw6kGmDE2k79ugKiORSVbQp2xF45ZjYlWrgiydHWL5MVEx43IAmbxpx06zb7EGsml0FlFtbqTyzgqxA4qrjZ2Lk5JQwdPtff+BYbKPzSJ40fsYuokIiNTGkADH84VM15U8zLZp6csbCYFI8iJf3wVeYh6qYAaIo9tIV7e06w5e+tYBmmbrcoMFKNZFwBk3NtI0OIlzjn8AkYk=","authorEmailMD5":"c1b99fc51717f507f13d0e2297a64fdc","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks!","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"c5fb371a-897d-3fb4-87ac-5b2f6d95602a","date":"2015-03-05T14:05:38Z","timestamp":1425564338},{"_id":"eed07573-b7ad-3fe4-ad55-05f096f8fae8","authorName":"Riko","authorEmailEncrypted":"hENjA+PjT7VAdwHmWHQEj2Veda0zQDo/qXBnZzY8ZgGUK1zxU0LOm8T804ooMYjtgljqgQlB+754VZpI/NClhjyrVTg21WRbJ+SjvUTuOnX0doS+kO/+ckMxPb4EvGWwWN4S6HvOZQw2u1T/8uUSxeNrOa8cajjXo8KlRgOq+dBfZGPmLI1nXWArp/x0rTpchO6CTmOr14INf6n/L3rEBjseyCmQIjOtDo+S8iZip3QbKnLiPftCHOO4Agrp37MDwkCsts4OaGTMQgcajk+MmcX8SoAlVDY6EgzupayrqqDglFKlMgWCGxZiVi6uqcSkdFhiNU895nY+CPuNl35Kv8XfNLFtZDQzgl4gqxEpYqcssG1WzCZq468KrH6sKyAlc90b19vnH5gExVGWd0T6CWQGQSX9n9EEsdPaGqwa5pbIShRRnr3VB6lWFnhjibYLmcaLKyLup5jrDV6PsioYwIQtMlW2tSfRTy9YXSgqbv49i5fHQSFrCW/NxRNSQ6KgPeUjRGDPtDfdyEuhKq1zW2IG0uyojQGM3W1qarhw5HWz3AAZvcIPTPFuXGE4yXQmraqte2qaH9s0w/c5Mejw7JdNdgcG0ZesuSW3VHuF0BRk52kBSr3CLbXYJJ+kp6LbzOqR7/AFwQJuHbbv98utpxph1L3TpBBiC55FT3HOPFc=","authorEmailMD5":"c1b99fc51717f507f13d0e2297a64fdc","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"I have a question.\r\n\r\nHere is a function Task.FromResult. What is the analogue, if you want to throw an exception?\r\n\r\nExample: there is an asynchronous function Task <string> MyFunc (...)  \r\nHow to throw an exception if the input parameters is not valid?\r\n\r\nThank U!","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"","date":"2015-03-05T12:46:35Z","timestamp":1425559595},{"_id":"f0b1d94a-eaeb-3066-a733-9c599c44c8d7","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Yes, that's fine.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"c2aad020-2656-33c6-9903-e20b18916c31","date":"2015-03-05T15:41:37Z","timestamp":1425570097},{"_id":"fff5b1be-731e-3cff-8cec-193525862719","authorName":"Riko","authorEmailEncrypted":"fC2xDfHQqeJ+tMY6pgpRMteCAy13vB5sBMdsfcsnQ2ewyzkIAYtjXd9dZEt9shE4BRAdQJ3Tw2psoYxXQ7aYMh038LC4TJWDX8oX0vNestdDCAOUSayS2pZPrgsyHDdltFHgYmfXi+LrLp7HpQ18y1VB5PsWU2C0NmQr480MvxRFsH8xGSR7pHvz52LhaM2qzC6WWjd5dJF4xGjQjt+iyQEkA5qHkFiRMo+VQjWtEJ87YZSlxYTszEBGw+fDArFGJqKJtkc3ZPs8yTWd4sDS/6f4sv6x0h7FgPQMI/KWbPitSXB91YhygSVB+8HendNJ+2/Wa09RYzrU5DMSliLyf3iWyAHt14NKQGASzISgldnN1OHC328QUmkC/eKGj7gZ8YW1cNSjXa94+ec/WqAMD0ppI9TZ8Wr4FgP4juedMupJ23HvVr+po3T0xeCazXf7iqsYvF3SXgaBHviJKA4Boh0pYgmm01HkRyTVgSjP3ewKeurQWRbM8/Zxg3T1tTeyyCVUYE+n5KsraOkSe3qEw7A4uvCywqrm5K2/cY6oHiobkZGJ9WkCNkOS6Redk23EUYFTEOuitIWxCL1F8EdUqtox/DDvKsO9KoPhnr+Sm3ulc//0U43spvnZ+MJ9KEJH88WR8CwAfBmZi5PaBIoXw5bpsp0OYgERoVOIbGH+CbU=","authorEmailMD5":"046315652711b1678d922c21cf073dfd","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephen. Very interesting to read a series of articles. Thanks, and health to family and friends!\r\n\r\nAfter the Windows system designers to simplify the work with asynchronous completion port, do not use the methods for asynchronous programming - a crime!  \r\nThe using of asynchronous IO methods in server-side code can accelerate the performance of dozens of times!","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"","date":"2015-03-05T09:58:21Z","timestamp":1425549501},{"_id":"8e7062ce-355c-3d85-9b77-d37e9182623d","authorName":"Riko","authorEmailEncrypted":"dmGqQXyQAHu4z7gL2ohoYJg7gicls202GOaNsFI+Rvwb3mbKeJYH9nLlGqfkT2eJXgAq0CLEz8xUqvXETEwExI/HsU0coaLGj9GUz//dVBMo6+/18HTT6+TuN76sKWc/JOdn7eHUDw7B0pKTtHCvEWk4TUQXY4yI7Jlgk83m0aoMp9EJ/w36H99HP+BmorjLWnf3h9luxqRrelVVy0+gCne3+HJiBvSY1UJ+QaLKmK4iruWvVS5rQH1o+HprED0niS1pG4uOd1TvJAIUom3S4ua6F3eAdXQvcnYcBPGJ63EbqbJdzOrUx7GpyvCGezXrAdClvceK3QrPyxLkt9g3zKzvVFnwTbaIdV9CEKBC8Zj9naaupjHr6wynF5tg4uQifRhjO9yDq2/s8m1bCH7UGiQ5+kr0QREAL+2mZw9p2ezu/xhu/en6Hs2CiYUuWRI0M7OtR1pz1utRbIpda89X/FxDX6wdvKzzkV58mpUmM6z0oW8Bie5saJ6fdubYxqH+cKNKU2aTDn4e7I9PsGr2TFrQZ891rTzgOVcFkmOtAD4yDwW36Yl+f5o3on+HgiHxSrd+DKlvfzUifaxxd6fToKrAZruMe9+Gr+rFY4Drz+Qhgk9bnLLtpAxpfiMufkPmaWotmcLWhil7ml94WXx9oafAtxN+ecrQrIeNb04J3uw=","authorEmailMD5":"c1b99fc51717f507f13d0e2297a64fdc","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"do not quite understand\r\n\r\n1. \"I'd await them one at a time.\" - But this is a synchronous approach?\r\n\r\n2. \"may start flushing the stream before all the bytes have been written.\" - did not quite understand. What could be the problem here?","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"f627e56c-4db4-3eb3-9b2a-fb7a9092197f","date":"2015-03-06T09:54:49Z","timestamp":1425635689},{"_id":"cf2248bf-b9f7-33e6-8c68-d5ac5598591c","authorName":"Riko","authorEmailEncrypted":"D1bR3zjqd7Dpg37w+Le5wuZvQcEeGfmgWXDs2WmpJqbyUGDqZ1AUeV+ZW3hmj0bQGmlWTfIWbyinuA4CsVk9AvPb3v1jADLcd7NpDrI+4OMqrfZ98fpOKwmQZ4rTx8UPDqkxC+xn10QjwqXZKtD/KOhVeYeU3oO3MxBorzvM18fqHepSzfcvPBeCM/cftKrEWkGeBKGNRqMEHoYQ6aMqC6USVheP8ke9T9rYZ26uVuRUOWDySuJpDsZRKo3xZO35ZizBDKaPOhB23lDUP/QpD1bk1SBjn2Ua7rUEGOwy+nblETWpOp86Sf0pJTGAHXcZgxcNxM62HCJb5DRa8dQjfi1pwP66Y0Ttau55zRdhC4izswyC7rn66q0wDgNRCfZ4KAdIWw+6RFsHXETO0pYMezpAr3bHuLSlkSD1CfQp3QNPUB24ytmCaFljxHuYhEx/7Z+c70k0jogiwPhB+FxJ4ENyWo8UeTsW21Sz8Z+SkM4ywx8bp4rcOslsqrxGyPZ9eAOF3fOKtqcY39L2JoSobvIY0lp0TeskttzzUONBvnaJXEk6KBxwkGYrirOBnnnqQozLKRT5THM6jo/UX5RvsELnKTWqr0fvoFcsv2sE8/l2SW6LVUzymndkdQkICFezAdaWR6BEGurB4Zk1leQgdr8D9GAyEaOHJVeuTe+5NQo=","authorEmailMD5":"c1b99fc51717f507f13d0e2297a64fdc","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Oh. you are right !  \r\nI have not looked at what methods are called :))  \r\nOfc FlushAsync must be called after WriteAllBytesAsync\r\n\r\nI thought that there is a call of two independent methods (eg remote service call and query the database).","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"8e7062ce-355c-3d85-9b77-d37e9182623d","date":"2015-03-06T10:15:15Z","timestamp":1425636915},{"_id":"e22f65d5-85d9-3af2-80a9-9cef7961c58d","authorName":"Riko","authorEmailEncrypted":"svXquSDieFf0QcmaW+Z+PC/fwJU5DyymV9IEG/4LLYfmlTx0zZG/5LQQtybAtfhsyOmpZ0Z60H8NN3dzQAkdomXQddS5PsgmW7ZxjrMEnG+IEQBUxnDuxFZqQcWnxePePpLtxqVkBt8Fl19z1+9oKwc2YFOpU1Ua3KnLgS+Mj8+YyhZn9pFJTRKCERFCXfA9na2yK+TOG8dK8GKsYJjdyiPH4j3LUACppbDMfduvFLnXgeXddKdaX3KjKHJ3t/HNrxsc02xvkvYFZHR5vOb1NWdgQNVHVL48OAjCinR5k0pePPbqjYzhklUsLdJ1GfR2xt+BKpLwAE2qwnbH660/FpB0Wq6CidO+GiojDyFTD4FgHu66tO5tkJrgohipfDyfaZOOJoEL4/Of4ZyULccDWNApcOtiwww1hD2u+JMPEpDegU6jqoc+gun+FtzYJHfHXCUtu4/Q3g3gkjafcIorxGYVTeBLkKOqvb41Tt5DwSs5ivUO1Rhre4jHRyBzSEPaDdgCpcgX75f4Heg8tg7YG74UtIK3lZxrMwd+hCgvNmsI5myVQ0nzE8IRQZwG/pYixXlQdRppbWA92WWaEmbbU7Bu1JqdgozRDRD5hpQ5rf5AwnjDZlsxLtNniDCZjO5d2tC+lXjcKqVL1FOSFOr2zEBTPSylf/juuOIR9bWPq4g=","authorEmailMD5":"c1b99fc51717f507f13d0e2297a64fdc","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephen.  \r\nAnother question about ur presentation:  \r\n[https://github.com/StephenCleary/Presentations/blob/master/Async%20Servers/Intro%20to%20Async%20ASP.NET%20-%2016.9.pptx](https://github.com/StephenCleary/Presentations/blob/master/Async%20Servers/Intro%20to%20Async%20ASP.NET%20-%2016.9.pptx)\r\n\r\nasync Task SaveAsync()  \r\n{  \r\n await myStream.WriteAllBytesAsync();  \r\n await myStream.FlushAsync();  \r\n}\r\n\r\nhow to do correct ?\r\n\r\nasync Task SaveAsync()  \r\n{  \r\nvar task1 = myStream.WriteAllBytesAsync();  \r\nvar task2 = myStream.FlushAsync();  \r\nawait task1; await task2;   \r\n}  \r\nmaybe ?  \r\nbut what about the exceptions?\r\n\r\nThanks !","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"","date":"2015-03-06T08:53:54Z","timestamp":1425632034},{"_id":"f627e56c-4db4-3eb3-9b2a-fb7a9092197f","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I'd await them one at a time. Your second example may start flushing the stream before all the bytes have been written.\r\n\r\nExceptions work perfectly naturally with async/await. You can just use try/catch like you would with any other code.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"e22f65d5-85d9-3af2-80a9-9cef7961c58d","date":"2015-03-06T09:28:53Z","timestamp":1425634133},{"_id":"30c1eea7-75af-3c1e-b47a-234108a4d5de","authorName":"Varun","authorEmailEncrypted":"uiysWtv1f3C6Fn7fl43EjxftKTMWlN1lkGbPRVfOsIoqBx5Y+NEgwp0B4T853HD00VJqmrMbL+CDZsWsWCjmig5OB+/OnkSrmoCcmOKR/cRh/bn4rwjqhIa9hdlOKE5X5uC2xXG6fa7AaddKg0Gj+l7cocWEactEiseVrkv75pORpYjc0ND6fR+8mt7niYfn5QUioJqFr2G9Egrs/Oz0PC/AZ7sUkSZvIXlNux3WwkqtZIOmuZGBbd8N2wuznirdDobswkaaS+pMo+GtR0P6DF222Q4sKflMOkePOx+2B5tjW3pvWEXITUeb/axenKPmra4zv4Jd7wUyEH+5nrxJJskNTiWhqeVJDkSn4ZUnk5C41jj0ACYDRR8ZRL0wveOEU3pdImiRR2AXrL1wu5JzMzJuSj83vjALwKDqc7Cfr84BvRm+H2yFmILoUyePVJPLq6aeuW2DgEyLyUSmB/op8EK8k9DuWAfPX4DCMDBFWgM3tXpDTEmltnrWXm9dQHmYzrvXyDU6c/h50ybGcMef5kCQEeKhlFmQrkjeS3si5NxTg3Dz0l/bKH5HXHEEQCcA4EBacPRC5Lxh39o4zuxd58D5pZvJr3xXAcxsEhd8F79XcKFIKrRsh29LqMHbG7Xq024efkpZqSGMKz0zZRPZiPxuy+prR693KAobdzsOXjE=","authorEmailMD5":"72bc0f61aa977594b000207e747601cc","authorUri":"","authorUserId":"disqus:disqus_weoHk4DDGw","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_weoHk4DDGw.jpg","message":"Hi Steve\r\n\r\nI'm talking in the lines of WP8/WinRT based applications  \r\nIn I/O bound await mechanism, If I have a case like  \r\nthere are 4 operations and 4 are independent of the execution and so i want it to run in parallel in realtime.  \r\nConsider this as 2 upload operations and 2 Fetch operations. All are async from the bottom.   \r\nSo the real point how to execute in parallel. The await mode of execution always waits for the first to complete.  \r\nSo this causes the second await to be queued. How can we run both of them same time?  \r\nDoes this means that the scheduling of these task on the Task scheduler and based on the availablity of thread it may or maynot run in parallel?   \r\nIf this is the case then there is very less change of parallelism in I/o bound operations?\r\n\r\nSecondly When we run the Task.Run code if we are unable to cancel the task in the realtime then it really creates a over head of executing unwanted code?  \r\nRegards","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"","date":"2015-03-23T09:02:00Z","timestamp":1427101320},{"_id":"892d2a07-a231-3d12-8a2c-192e8463239f","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"You can do asynchronous concurrency with Task.WhenAll:\r\n\r\nTask upload1 = UploadAsync(1);  \r\nTask upload2 = UploadAsync(2);  \r\nTask fetch1 = FetchAsync(1);  \r\nTask fetch2 = FetchAsync(2);  \r\nawait Task.WhenAll(upload1, upload2, fetch1, fetch2);\r\n\r\nThere's nothing about task scheduling or parallelism here; since these are I/O-bound operations, I assume you can just use naturally-asynchronous methods.\r\n\r\nFor your other question: if you start code executing in Task.Run, and that code is not cancelable, then yes, it must run to completion.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"30c1eea7-75af-3c1e-b47a-234108a4d5de","date":"2015-03-23T12:18:41Z","timestamp":1427113121},{"_id":"1e951bcb-d4c7-340b-a1ff-089876d181dc","authorName":"Ben","authorEmailEncrypted":"umHuEk576RGZgPfN6a5RfaDhFV48rD0lWxN7FQabGDYa6NMd7DqU0vaRzpak3wsWcGXwDZG6htqJ3mjykpLKm0giJLAxO1YEy5bBeLSPu1VxZShTT2EAXyTEKaUGHYdSGskPqsZO8Ik1lU9XgrbWlTwzoD4w8UIm8vWh9YxjPIf6SldjK/63O+Xb/w6L1/Zk5A5hTlx4U05/jMRk5XHg03IAvz0NTjUUKeNJDM4o/DE6mIPxsQ+FJKLK4AcShI5mS8qtPimAjfzzMEEDO9/dSJt7cuhASHVdpRpTXUpNk5CFqzyGEYiBmLmQLh0SY0Av9F3+hK0kKrnwwynmgl2+PWoDW94ObaP2+r3N4eqSMgVHLK2vcwC4dgqcB7LnUUYq/+2uTbNexT0VPrSueFPVkgFwyfkKT2SlCUlaj6dlIMAwvVDPRkdpYN1WKMIHmUSEgHs+iWXTvB2IAdNU/r47tYFhI0MO04W4OMFPAX3kJDZYSraRY4H/P3SjgZ00ESNS3CEfES6Zc6u2fiw1q3MfKSTUH0IbuDmVYa6rO4Yu+MY80//6OLYZhYkr/fLchDOE8kPDr4EkmxM8C1qQ7BJqPnyJb4Oz7EPtzaMGRaFSWO0p/7fk2QGJL80vP5BxikvQaJifSdAcMvrx/MjgXqECwf3boNtEdJbdykpJq5wQMQM=","authorEmailMD5":"2051a729796ae8623178d9b7f2320511","authorUri":"","authorUserId":"disqus:disqus_pBuJ18B9FA","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_pBuJ18B9FA.jpg","message":"Could you give an example of why anyone would ever use the \"async-aware\" signatures of Task.Run? It seems like I could do this:\r\n\r\nasync Task DoStuff() {  \r\n ...  \r\n}\r\n\r\nasync Task Main() {  \r\n await Task.Run(DoStuff);  \r\n}\r\n\r\n...but why wouldn't I just do this?\r\n\r\nasync Task Main() {  \r\n await DoStuff();  \r\n}\r\n\r\nThe latter option seems both more clear and more succinct.\r\n\r\nBasically, if one already has a function that returns a Task, why not simply invoke that function to get the Task instead of passing its delegate to Task.Run?","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"","date":"2015-06-10T18:09:54Z","timestamp":1433959794},{"_id":"5f62ea40-d5b2-3119-9175-623ccec60559","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"The asynchronous version of Task.Run is occasionally useful. For example, if you have a library method that has *both* asynchronous and CPU-bound portions, a UI-based consumer may elect to use Task.Run. Another example is to completely remove context, e.g., if you're doing an early return on ASP.NET (which is dangerous, but sadly common).\r\n\r\nNormally, yes, you would just invoke the async method directly. Wrapping it in a Task.Run is rare.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"1e951bcb-d4c7-340b-a1ff-089876d181dc","date":"2015-06-10T20:24:30Z","timestamp":1433967870},{"_id":"10c4d77d-04c9-3f32-b6e7-bf1e2bebdd47","authorName":"Ryan","authorEmailEncrypted":"c20ee/35RxvP52I0jAqCFGOsoTBbbEzc+08xzMLHH+KqoCiinn2AB9mx11jA4Jfa57oKtoEMmOxfTyti5XFMjfeIWEtoF89Hn7/Prhmc86lvWfgteJv5G9RHKEf8xyWfIR+3DTTwFIezw/iHo4BjwSbaiV4YWwri3xo391U5zs3rCMLKQfpGsbAbUCqAGxSwV5nktujXIKv6gYYPeHWZZMQHRwsGqUWgIWZPoyte2jASnMj4XdgmRxp+EPeJnhxbKtOudV2Q49fTu2I6KHl5/gvf5lzzc+UqVIkY7gooIgRfB9nDVihcpaCc4UWOIn9se1R26FVc/6r+zjChn9vhgnO9xFhC8Ss3Lf3K2pj2HxCUOsXgc3+dUIoWhJf2YCXu7TAaVVBaAR7LgIKfBxD59RJhlxMvkEvT8oxSWfn+4j1s5EXVAcGD5jX2EYFEiPnaWG7Tv+niwf5768/YS+KHEfJMBDqh2KKluBcQDbeQ8eDcE56CHVGdh3OSbm29sXmTdGiaIErTMPoM5kL4ufi77LpE5iyMltXGiaptsQqoDDTgAoJ6hADhre5FpOGxbyY4/V8QxqKH1etLFVX6OIvbE5v/CLlGiQqVSud669XTsdmUkVZatCF8/63q8EMBg+dWII9OjQtVCpvFGqJlnp/x7TBySQlXTQw/WbmX69D7Ptk=","authorEmailMD5":"81a4cd92a3a74962f5775f58dc73bd86","authorUri":"","authorUserId":"disqus:ryanrolnicki","authorFallbackAvatar":"","message":"Hi Stephen\r\n\r\nStill trying to fully wrap my head around async programming (getting there bit by bit). I am in a situation where I am overriding a method that is being passed to Task.Factory.StartNew. I want to use the normal async/await functionality, but I think it won't work out of the box:\r\n\r\nclass BaseClass // can't change this class  \r\n{  \r\n....void DoWork()  \r\n....{  \r\n........Task.Factory.StartNew(this.Execute(), CancellationToken, ........TaskCreationOptions.AttachedToParent, TaskScheduler.Current).Wait();  \r\n....}\r\n\r\n....abstract Task Execute();  \r\n}\r\n\r\nclass MyClass : BaseClass  \r\n{  \r\n....async override Task Execute() ... // What I want to do  \r\n....override Task Execute() ... // What I think I have to do  \r\n}\r\n\r\nSo the question then is: how can I implement MyClass such that it properly uses async/await? My thought is to:\r\n\r\noverride Task Execute()  \r\n{  \r\n....var t = ExecuteAsync();  \r\n....t.Run();  \r\n....// or...return Task.Factory.StartNew(ExecuteAsync, CancellationToken, ....TaskCreationOptions.AttachedToParent, TaskScheduler.Current).Unwrap().Wait();  \r\n}\r\n\r\nasync Task ExecuteAsync() ...","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"","date":"2015-08-24T16:33:21Z","timestamp":1440434001},{"_id":"ca557d58-946c-3922-8764-06535435669b","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"You can implement any Task-returning method with an async method. This should work:\r\n\r\n override async Task Execute() { ... }\r\n\r\nHowever, I should also point out that the implementation of DoWork in BaseClass is highly suspect. I would certainly change it if at all possible.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"10c4d77d-04c9-3f32-b6e7-bf1e2bebdd47","date":"2015-08-24T19:07:37Z","timestamp":1440443257},{"_id":"0fa206f3-b09d-34fe-88c2-18cfa4b7e706","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Exceptions in async void methods cannot be caught; this is by design, and one of the major reasons async void should be avoided.\r\n\r\nI assume you mean you're using StartNew().Unwrap().Wait() in your (non-async) void method. This is a hack, just like any way of executing \"sync over async\". I'd recommend at least changing it to Task.Run().Wait() for cleanliness. It is, of course, still a hack, but as long as BaseClass forces a poor design, you don't have a choice.","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"72ada546-72b4-36df-bc7f-3b4e0586f976","date":"2015-08-25T11:17:36Z","timestamp":1440501456},{"_id":"72ada546-72b4-36df-bc7f-3b4e0586f976","authorName":"Ryan","authorEmailEncrypted":"Cm8tUpaAP3YTGY0TRIqjFmLC0nWgtZ4Mk3apcqCOuA0zX/Kx1vhc5BEJk30kiY4zLdIe7tUykwF+JxpyHozGriANevKFVQY0AH08fnMgoTx2MkKGEazHTvMpwh/a9BAQyJWJyNFAGOkCURV1UChZlPoCGuxY8pHE3I/PnYi/IFBrQHBN/JMIThOErHzg4bqSuN8J2ndzFK0aMgqzjLQv64oND63Ljmgl+DR/NIUK15+y5a+usCT76Ryp13ihDm6nGy4eTJhjYr6sBlLJsdXduqS2dRR/nDfOgwUYMPntSvlQGWUyeNF7AOqfDFWgjBPtd5ij5vUlAFceeKkcFkbhyf6H+mUw/4AU5UXVvibfHZrofq09AUyOkLhnkn1JSBq7QN1BAwK7+F/yFveCOXZ2wNpd82j5a1mu4KD93HwaLtY5/UY+WiPjUDdPNHsTa7tTDnTn74P2+tV3GnfCv3hcDXs3E873Iy6oyLQXjyUY3+OctRi0OmoI/tdKsTh8YAfGbrZ/9vESAtLthRxbcA3PXgJvYMGdfP8sCKMLTaBK5w0xY6LPB0usHCmQhgmIQIWIqVPm7A5WWXawR1WYjcvsDrw8gOomxFEBqgLYRXH0Swr2nplJHy/5NKSvpl4tQ/amrNUS/pv5123EhtgfmTQ/5uAGSCLW/F/HXrOMHXHYk04=","authorEmailMD5":"81a4cd92a3a74962f5775f58dc73bd86","authorUri":"","authorUserId":"disqus:ryanrolnicki","authorFallbackAvatar":"","message":"I actually was wrong about Execute above - it returns void rather than Task. And I was able to simply declare it as async, which worked fine, but the exception wasn't being caught & handled in the base class code (assuming this is context related). I believe the logic is working now using the Task.Factory.StartNew(...).Unwrap().Wait() solution.\r\n\r\nSadly the code in BaseClass is outside my purview - gotta pick my battles :)","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","replyTo":"ca557d58-946c-3922-8764-06535435669b","date":"2015-08-25T05:14:16Z","timestamp":1440479656},{"_id":"306b0a40-2f19-11e9-9447-21eee9ff7847","postId":"2015_03_a-tour-of-task-part-9-delegate-tasks-9af23aee-8e1f-399b-b58b-2e0858eb53d8","postUri":"http://blog.stephencleary.com/2015/03/a-tour-of-task-part-9-delegate-tasks.html","replyTo":"","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"Felipe Longo","authorUri":"","message":"Hi Stephen. Awesome material.\r\n\r\nAbout the subject of passing CancellationToken to Task.Run\r\nEven if there is a lot of Tasks being created in a System (many different calls to Task.Run at the same time), it doesn't bring that much of a benefit? \r\n\r\nIf a Task is not running yet the CancellationToken doesn't cancel it?  \r\nOr what matters is the Status = Scheduled? \r\n\r\nThanks in advance :D","date":"2019-02-12T22:54:45.075Z"}]