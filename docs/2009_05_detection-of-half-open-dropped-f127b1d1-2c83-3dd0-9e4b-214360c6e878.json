[{"_id":"3b7a3ad3-3fa4-3acc-bc93-176eb95488fa","authorName":"Ignacio","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://patronesvbnet.blogspot.com/","authorUserId":"","authorFallbackAvatar":"","message":"An excellent information. Thanks a lot, I was just going to implement the solution 3 without knowing if this was a good solution.  \r\n\r\nThanks again,","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2009-12-30T13:04:38Z","timestamp":1262178278},{"_id":"90177e98-1cfb-3d64-9621-a073258d0a2c","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"thanks","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2010-06-30T13:42:04Z","timestamp":1277905324},{"_id":"fa251efd-cfbc-3d8d-adce-fc5fd47882f9","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks for posting this, very clear and helpful!","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2010-10-13T03:20:39Z","timestamp":1286940039},{"_id":"81f327af-0d47-3aae-8a45-dafdee8961e7","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"What an excellent post, I was also going to implement solution 3, but wanted to do a little extra research first.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2011-01-26T16:18:16Z","timestamp":1296058696},{"_id":"1e4bd5b4-2492-328d-a5ac-b6f785ef6977","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thank you so much. You just helped me realize why my connections were unstable. Excellent post.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2011-02-02T21:38:57Z","timestamp":1296682737},{"_id":"3f018df7-fff2-37c4-94ff-fda0021c34f7","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Super thanks!","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2011-07-15T18:16:37Z","timestamp":1310753797},{"_id":"365882ce-ca2c-32b7-a0c7-c9c4c529ec48","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"If you would like to know how to implement 4.2 see the solution at the following link: [http://stackoverflow.com/questions/1993635/c-alternative-to-networkstream-read-that-indicates-remote-host-has-closed-the-c](http://stackoverflow.com/questions/1993635/c-alternative-to-networkstream-read-that-indicates-remote-host-has-closed-the-c)","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2011-08-08T10:01:15Z","timestamp":1312797675},{"_id":"0aeef402-99a2-3e73-ad0b-947bf3ca2e29","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Hi All,   \r\n\r\nI'm not a dot net programmer, but need to have solution of notifying dropped connections for java and c#. What I found on internet is that with sending urgent data (as a separate stream) on existing connection, I'm able to notice if connection is still alive before sending response back ([http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Out_of_band_data](http://en.wikipedia.org/wiki/Transmission_Control_Protocol#Out_of_band_data)). That is very good solution and I already implemented it under java (sendUrgentData), but so far I was unable to find such solution for C#. Can you try to solve this issue under C# using hidden data (out_of_band_data)? Is there methods (or approaches) for sending hidden data under C#?  \r\n\r\nThank you for your responses on this matter. I hope I helped you to find good solution for checking out terminated connections.  \r\n\r\nBR  \r\npecko","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2011-12-27T17:05:22Z","timestamp":1325005522},{"_id":"f7cbe167-8637-3093-a515-4a70440038f1","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"@pecko: OOB data can be sent by passing Socket.OutOfBand to one of the Send methods.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-01-17T01:26:54Z","timestamp":1326763614},{"_id":"32b1d3b1-ef2e-3e80-98df-7ba0e5228154","authorName":"Oilspill","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/14885213291367686293","authorUserId":"","authorFallbackAvatar":"","message":"So can I ask what's involved in implementing solution number 1?  \r\n\r\nDoes the sender just send out a 0 length keepalive message if say, no data has been sent for 45s. And then the reader knows that if it hasn't received any data for, say 60s then the link must be dead and it should close it?  \r\n\r\nOr am I off the mark.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-03-08T14:24:51Z","timestamp":1331216691},{"_id":"86caff00-259d-31d4-852a-7cf31f67ebb6","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"@Oilspill: I usually have *both* sides send a 0-length keepalive message if no other data has been sent for a given period of time (or if you want it simpler, just always send out a 0-length keepalive message periodically).  \r\n\r\nThere's no need for a timeout to detect the lost connection; if the connection has been lost, then the keepalive message will fail (because it was never ACKed), and the socket will go into an error state.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-03-08T18:57:22Z","timestamp":1331233042},{"_id":"2d89798a-8bab-3437-aa29-0a1c61ee60a8","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"It sounds like the clients are detecting it but the server is not. Both sides need to detect the half-open situation. Is the server periodically sending keepalives or data to all clients?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-03-13T17:39:53Z","timestamp":1331660393},{"_id":"630a3391-5944-3568-9500-c22fefb1ae8b","authorName":"Sam","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/11457234052102618582","authorUserId":"","authorFallbackAvatar":"","message":"Let me know if any one want more details or code.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-03-13T14:12:32Z","timestamp":1331647952},{"_id":"b7f349f8-e9ca-3ff4-a92b-29edcdfcc530","authorName":"Sam","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/11457234052102618582","authorUserId":"","authorFallbackAvatar":"","message":"Hello,  \r\nI have an issue with my client(multiple clients)-server SMS application. Initially all clients connected properly...But after some times some clients raises as Socket exception and loses connection, if such exception occurs I restart the client it shows me connected when client sends any frame client doesn't get any ack from server, I thing this as Half open connection issue.But I am unable to find any solution. Any help will be appropriated.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-03-13T14:09:49Z","timestamp":1331647789},{"_id":"d4d3002b-69f6-35c6-a8e9-be0555b9a026","authorName":"Sam","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/11457234052102618582","authorUserId":"","authorFallbackAvatar":"","message":"No server is not sending any data to clients, but yes keep alive property is set(We are using C#.Net TCP/IP Lib) and I think this property does the work to check client is alive or not.  \r\nAfter more debugging I found that there is issue in thread(Communicator,Transmitor, Receiver) synchronization I have resolve this its working and now testing it.  \r\nIf this not work then I think Server needs to send empty frames periodically & check clients are running or not.  \r\nPlease make me right if I wrong.  \r\nThanks for the your response. I will let you know about the result.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-03-14T11:36:46Z","timestamp":1331725006},{"_id":"9ead8f44-fd70-3243-9ecd-6d6027cff25c","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"The keepalive property will check the connection periodically. Unfortunately, it only checks every 2 hours, as mentioned in my blog post above.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-03-19T01:12:59Z","timestamp":1332119579},{"_id":"40b2b701-f76b-337b-abb5-a4eb219af3eb","authorName":"BrutusBlog","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/18427429339546750153","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephen,  \r\nI want to implement the TCP KeepAlive property to my TCP Client.  \r\nI have this in the Load_form ( i am using a windows form)   \r\n tcpSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, 1)  \r\nShould i need anything else?  \r\nCan you give me a code snipped by implementing the TCP KeepAlive(C# or [Vb.net](http://Vb.net))?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-04-23T23:41:33Z","timestamp":1335224493},{"_id":"19f0fc3b-625f-3c0e-a323-19a7ba12d7cc","authorName":"BrutusBlog","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/18427429339546750153","authorUserId":"","authorFallbackAvatar":"","message":"Thanks Stephen,  \r\nI have found on the internet a procedure for setting KeepAlive values but i am wondering how to use it. My application is a TCP Client that connects to a server and receives messages...from time to time I want to know if the server is still alive. For the moment i have implement in the MainForm_Load sub (VB.NET):  \r\n\r\ntcpSocket = New Socket(AddressFamily.InterNetwork, SocketType.Stream, ProtocolType.Tcp)  \r\n tcpSocket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.KeepAlive, True)  \r\n SetKeepAlive(tcpSocket, keepalivetime, keepaliveinterval)  \r\n\r\nAlso I am wondering how my loop that reads data is announced that the server is OFF, by TCP KeepAlive signal?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-04-25T16:41:37Z","timestamp":1335372097},{"_id":"2dbc537f-581a-3e3c-afbf-c2c5610a3cd1","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"As I pointed out in my blog, the SocketOptionName.KeepAlive sets a 2-hour timeout on the socket. If that's acceptable for your app, then that's all you need.  \r\n\r\nMost apps prefer to detect dropped connections sooner than 2 hours. In that case, you need to pass IOControlCode.KeepAliveValues to Socket.IOControl with an unmanaged SIO_KEEPALIVE_VALS structure.  \r\n\r\nI do not have a code sample, sorry!","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-04-25T04:40:04Z","timestamp":1335328804},{"_id":"9c8d1d94-b6ea-3e83-b3bb-45f631f74efc","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"You only *need* to check the connection using one method. Although you *could* use both if you wanted to - it won't mess anything up.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-04-27T16:32:26Z","timestamp":1335544346},{"_id":"a55ae1a2-c42f-38de-a612-43778bd1597e","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"When keep-alives detect a dropped connection, any current read or write will finish with an exception. Also, the socket will be placed into an error state, so any future reads or writes will also throw exceptions.  \r\n\r\nI think. :) I've never actually used keep-alives.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-04-27T02:32:16Z","timestamp":1335493936},{"_id":"ec8e7503-d9bd-3291-b6b3-2803478663ba","authorName":"BrutusBlog","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/18427429339546750153","authorUserId":"","authorFallbackAvatar":"","message":"Thanks Stephen,  \r\nI have also used a hearbeat function (IsTcpConnected) for checking the connection state.  \r\nIf I use TCP KeepAlive, should I also use this function, or it's better to be omitted?  \r\nThanks!","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-04-27T13:22:47Z","timestamp":1335532967},{"_id":"af02abd5-8865-3f15-b990-84c0244d62d6","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"What was the solution to the \"True Story\"? I think I have somone fighting the same or simular brain dead device as the \"bridge\" device you described.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-06-12T18:28:52Z","timestamp":1339525732},{"_id":"0ec82c0b-50ac-3922-9394-43b19b8a3748","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"The vendor's firmware would only accept one connection at a time. However, instead of accepting new connections and disposing of the existing connection, they just refused new connections. They did not want to change this behavior, and their embedded IP stack did not support keepalives (back then, most of them did not).  \r\n\r\nAt our insistence, the vendor implemented a second listener. So, when we detected a half-open situation (where we did not have a connection but the bridge refused new connections), we could connect to a second special port number. I don't remember if we had to send a special message over that second connection or not. The vendor's \"special\" server would then kill their regular server, and we could (after a short delay) connect to the bridge normally again.  \r\n\r\nThis was not the best solution (it's still technically possible for a half-open situation to exist for *both* the bridge server and \"special\" server), and the workaround was annoying, but in testing it worked well enough to ship to the field.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-06-29T23:42:14Z","timestamp":1341013334},{"_id":"d3c10862-33bc-30cf-b4e0-6b73ed49de77","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I haven't done Linux socket programming since the late '90s, but it should certainly support keepalives.  \r\n\r\nThe default timeout is 2 hours, just like Windows. Windows permits per-connection overrides of this timeout (by sending a SIO_KEEPALIVE_VALS IOCTL). I believe the Linux equivalents are TCP_KEEPIDLE, TCP_KEEPCNT, and TCP_KEEPINTVL (sent as IPPROTO_TCP socket options).  ","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2013-03-01T19:02:19Z","timestamp":1362164539},{"_id":"f9e259c7-11eb-32f6-8058-ba37c3720d25","authorName":"sadastronaut","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://sadastronaut.wordpress.com/","authorUserId":"","authorFallbackAvatar":"","message":"Stephen,  \r\nTo your knowledge, is solution #4 (keepalive packets), supported in modern Linux systems? I'm running on Linux kernel 3.1.10 and I'm trying to modify keepalive settings both through setsockopt() in C++ code and via the files in the /proc/sys/net/ipv4 directory, and none of it seems to be working. I'm wondering if this is the case in which keepalive simply isn't supported. Thanks, Chance  ","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2013-03-01T04:33:08Z","timestamp":1362112388},{"_id":"0085847e-9799-3d6c-b077-9f894f0d13d2","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"UDP is at a much lower level than TCP. Technically, there is no actual \"connection\"; when the API docs talk about a \"connection\" all that really means is that you're setting local default values for future operations.  \r\n\r\nSo it really doesn't make sense to check for a \"connection\". However, you can send a keepalive to the other side to see if it's still there, just like TCP. But if the \"keepalive\" doesn't make it, there is no built-in NAK or notification that it failed. And UDP has no built-in retries, so if a keepalive fails it doesn't *necessarily* mean that the other side isn't there.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2013-03-06T20:52:36Z","timestamp":1362603156},{"_id":"936dbca6-71c3-3a49-80b8-3643bb6233ad","authorName":"Uday Gupta","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/16780765000928234784","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephan,  \r\n\r\nWhat is your take on UDP socket. Even connected, UDP Sockets can be seems to be like half-open and half-closed sockets at both ends.   \r\n\r\nSo how do you get to know, if the other side is still alive and the connection is intact.  ","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2013-03-06T10:20:18Z","timestamp":1362565218},{"_id":"19c06714-c814-3157-a66c-5bd3312e7f4a","authorName":"raghavendra s","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/06709714698733219871","authorUserId":"","authorFallbackAvatar":"","message":"Very nice explanation and useful one. ","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2013-03-12T10:54:05Z","timestamp":1363085645},{"_id":"6b5a9889-4a8e-32cf-a209-496025055c7a","authorName":"Leonel Frangoulis dos Anjos","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/09697675097842120835","authorUserId":"","authorFallbackAvatar":"","message":"You are the best","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2013-09-13T16:52:25Z","timestamp":1379091145},{"_id":"61ba59b1-7718-3e88-86a2-dcdc582f2489","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"That's not really my area of expertise, but it does look like it could be an attack. I recommend shutting down all incoming access from the Internet completely, including ping responses.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-04-04T03:13:04Z","timestamp":1396581184},{"_id":"b1ea8553-2fbe-39ac-acfb-fd599a6d79dd","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephen, Thanks for the article.  \r\n\r\nIf I detect something like this on my Cisco 3945 router, does that indicate an attack and how would one resolve it.  \r\n\r\nMar 24 04:34:50.428 UTC: %FW-4-HOST_TCP_ALERT_ON: Max tcp half-open connections (1000) exceeded for host x.x.x.x (Public IP)  \r\nMar 24 04:35:12.132 UTC: %FW-4-HOST_TCP_ALERT_ON: Max tcp half-open connections (1000) exceeded for host x.x.x.x (Public IP)  \r\nMar 24 04:35:15.356 UTC: %FW-4-ALERT_ON: getting aggressive, count (1017/3600) current 1-min rate: 2401  \r\nMar 24 04:41:33.802 UTC: %FW-4-ALERT_OFF: calming down, count (23/2900) current 1-min rate: 1536  \r\nMar 24 04:49:51.957 UTC: %FW-4-ALERT_ON: getting aggressive, count (27/3600) current 1-min rate: 2401  \r\nMar 24 04:50:17.394 UTC: %FW-4-ALERT_OFF: calming down, count (11/2900) current 1-min rate: 1410  \r\n\r\nThanks","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-04-04T02:38:55Z","timestamp":1396579135},{"_id":"3c9962fb-0592-3260-b81a-302ed6868d0c","authorName":"Bruce Stephenson","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/01321631245118583318","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephen,  \r\n\r\nI was hoping you could shed some light on my trouble detecting a half-open connection.  \r\n\r\nI'm trying to heed all of the wisdom presented in this article as I'm tackling my first TCP server implementation. It's probably a similar scenario to your \"true story\", where there's one server, just one client, and just one long-running connection. It's exceedingly simple: every 20 minutes or so the client sends a small message, server receives it and sends back a simple response. So far, I've got my server using the Begin*/End* approach to receiving and sending. So, according to the advice I read in another one of your articles, there is always an asynchronous receive in effect: as soon as the read-processing is done, a BeginSend() is queued and we go back to BeginReceive. Elsewhere, I've got a 3 second timer that performs a non-blocking, synchronous, zero-length Send() test (as per MSDN). The head-scratching thing is, this test always succeeds--even when the network cable on the remote side is unplugged. I thought it was clear from this article that doing a send while there was a physical break in connection would quickly uncover the connection issue, and allow the server to close its socket, thereby preventing the half-open connection problem you described. What am I missing?  \r\n\r\nThanks for any help.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-05-02T17:17:54Z","timestamp":1399051074},{"_id":"cecd14ee-6c99-3626-ab69-6e1d94647936","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I'll post comments on the SO question: [http://stackoverflow.com/questions/23429543/why-doesnt-a-zero-length-send-fail-on-a-bad-tcp-socket-connection](http://stackoverflow.com/questions/23429543/why-doesnt-a-zero-length-send-fail-on-a-bad-tcp-socket-connection)  \r\n\r\nHowever, I do not recommend zero-byte sends, MSDN docs notwithstanding. (As an aside, the MSDN examples for sockets are horrifyingly bad; at some point, I do plan to do a blog series just on fixing them). Zero-byte sends have to be special-cased through the network stack (which Microsoft does but other platforms do not), and any intermediate router is permitted to always drop those packets. So I consider this solution unreliable in the general case (i.e., the Internet).","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-05-02T17:54:59Z","timestamp":1399053299},{"_id":"f08a4c25-1441-311a-93f0-b1f27a3d8274","authorName":"Bruce Stephenson","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/01321631245118583318","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephen,   \r\nThat was me who posted on SO, so I'll also pick it up over there. MSDN opinion noted. Thanks for your replies.  \r\nBruce","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-05-02T21:32:45Z","timestamp":1399066365},{"_id":"f21abe16-dbfc-33b0-a825-a7f1d75c6166","authorName":"qianjigui","authorEmailEncrypted":"HVy0mmexiN/huX2ZmbZAYzsrfVIt/SHDuK20cWP37gx02eawDUAM/lZf4F4h4rLMRFte4XQuR2sNfpqe4bp9e3PdCk3oCpsQi+bYpoaZ8gc506Bau+naxCMkddRMZVitrVmCrRYAI15+11LOoiGofZ7jLRvFC4vaUVnPPV6bW2iKwXX/c/8Pr1m9s+h5L0clAAxvVpJQlqG73hCIZMRlOB8pOml44s1P5EVY/3D8hY7pEd7PghFuy8jPUa6YT5/RIxldnlqflBQ4DFVC0htAOwlWC+tsKPNmV0xKXlAJmnFoSFACNTwo3qEUgTv9sXCBFIuKWcE+m9y6oqhq0ZpoSFB2uubfnpx6nzWHeLbsQ2aP4BSABZYva88aYxTUKGgSio3letSMo/Mqpfo/kqlm51SSCE4DOfKdt/XoiQ5Qyoc/CGF+BYarK6YJwcxpbXTGHvpZm3RWTCtvT+PC2ZrbiOLSJzFfLRdcSWwbtJ0MQzk/XntYbLxoFEQShbqzM7l+ehWBxt9Jzk1CzdO4+q0/DMzdQh6/y6mQ7VrHzlN34rDfmRqHtEE+5KWj811rAX9iWBbvt+rv9pz6hgQokEusP9MRlWV0BqFbQe/BpmscB0tf9lRHL7Bl2zpQhrIMIsqXMysczFN0DDyHXLIKPE0+vt5zd8YysAntTVeaKncOQuo=","authorEmailMD5":"e4cf401d21a2f0a27846fd60adc6cca0","authorUri":"","authorUserId":"disqus:qianjigui","authorFallbackAvatar":"https://disqus.com/api/users/avatars/qianjigui.jpg","message":"Thanks for this post. It's very useful. After reading, I know some platform design problem for TCP keepalive. And we will use heartbeat and MQTT for keepalive TCP","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-07-03T06:16:35Z","timestamp":1404368195},{"_id":"6b251d72-e591-359a-8b2a-245bc2fb106e","authorName":"Kanika","authorEmailEncrypted":"sHpe1y1uWfXln5JHmHr/qkz5DCuvYwAkFzEah7QRC7HGXtHdRHBqxtEbvMh4lSWHtSbKCfXNGZmglvUFKPseqn9RmOzuOlrl+OcIefq2ZJ7TJtfXvUX0b5ldHVGucAWWlamr2HThEczjA69liw8M0/tOf8r7fgosug7UoMBy6c+piPnWuebBx8wMuzicK8Qvn7le00TwX5Fc7tvo7JQYMkBUTY0LPkk1HDSSziUCmQqRCrZboKscBy2O8w83vAEnIf2T3WHuTopuRaCnr5ONpRa+qCUz5ybWq8W+PGmjIqdWtZrO6jMeBwU0KpI+pBYmHD6D0kKCV+f3uEXkOAbMiV9c5FdBYtb9H0k/eaaPd6hgqOFtv2XekA+WVLp6C/S8Yj1ZXLxVMP1UvJGKKv44LjaUqfuWmqgGLRKNzvQD9zFBGNJj4l8tuAPEmYUNL4XXAGacl19FJtJcR9Uzod65ZwKreGrzMu/cv44nWDes5HHJC3ZPgem99a2qZW4UUyy7d6KQb/R1E9YHq6En6aRkPdfM2TCPCkMI0+G+90KtnR/2sSit9U55nouYrZGRkv4Dt2kA5A9uk7YPSro16wzVXC3C8IRFeA3Xkvk1WjHz0lt3IW3ImvuJopslPAh1kEnjey2wwO2J5DN0vKMHTMzkrcv7sp3TTlvgURjB1sHFgsY=","authorEmailMD5":"19a0377652c8a67db90762acf647444f","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Hi Stephenson,  \r\nCould you tell me difference between SMTP and POP3 port and I get a half connection error on my software when I send mail. Could you help?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-10-30T07:21:56Z","timestamp":1414653716},{"_id":"47cc2470-c85f-3286-b16a-ae81805ab3e4","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"SMTP and POP3 are different protocols that use different ports. I haven't written anything that uses those protocols.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"6b251d72-e591-359a-8b2a-245bc2fb106e","date":"2014-11-03T23:09:20Z","timestamp":1415056160},{"_id":"e716f067-b551-31cc-8a13-b25625973c0c","authorName":"Milan","authorEmailEncrypted":"v4mnR61fMFSkL4Fdqf42Nf+ZGLcGrYx/seZw121IAw6gqXClSPegEYSZ/GKzukPKxr4QNkVLh74i7YY1Ti4lWuLeTruF6zJWj9fdq2Rgf7l1uPRoj6UaBdxNqqVw7sJJ/yGfpUM2VgBRLjLTyat7Nb/76v712t1etM4D3bFwxYt0HZW/0KvQ5eDGxkN8tTNZEiqohpd6MonnyNEerYHKm4GnAw3FOr5FlTb++22EBqNoEv8BI87d+hqBY15TKu1yXwaTdKFQVMMXoLEQsXmgGRWGBVZh8ozK+JB1HkugTChIHqssAkQPMrmyKyWZD/qLNgnZc2c2QAfyMB7tg42njzDLMH3Qwm61QPdzCB8geeBRgHKeGefzw5mdRn948npwzj8LYASDXn7naLBvZAVeDCpCZSc4CHUvwDhnlAJrn9RQLpX5k8IonP3Bj1jxKul76CIHzh73LQrkQbzvo8L52+H9hxG4kwGpG+wZy6/A1CVi3Y497c0rjlBIP9lO4mGMBuOr14noldKgSzOUWgKCoSuaQZ3HgLS9i8LgdtRXNfQq3a8WqCsqMSEFDPQ1GG/XxKySfYev9iTk+F5O7vqy/I2ZnLlxWvMhnnKFG3v3GTzbCm+8/2Z1C8eW5uSQ3XnmzPJLyXADygSXcqNQ3a/CaDYUK8L5E1nBWeTEapYluXI=","authorEmailMD5":"d4ce1145da1e017ebe649511a1c0554c","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Excellent blog which explained to me how TCP IP socket communication works. I used wrong approach in my client/service app by opening a second socket connection every minute when timer times out for recovering half-open connections. I will try to implement 3rd approach with explicit timer assuming the worst with heart beat sending for checking if connection is alive.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2014-11-19T00:20:44Z","timestamp":1416356444},{"_id":"a727ad02-2728-3550-a711-337839a7ad8b","authorName":"KE GAO","authorEmailEncrypted":"BHb6QzB19JhpADnJxpevhOe1XH0CZPShc/NOKzR1mJSm1ZBcOJjxJHEZbpYsEzHPjkkb+vR33QGQq3Alo0fZlG+ZHgYA2R0MQP1OfHleNFvFWgiO9K0mTrlUwBKh9fbWbY0KdFeoY/U7spkVvjKB/dfFDPjJ5evlhp+4VC0sMqtADXl4FarPc/PtcUpMW2SgrkrXKUXD85QlDnaPGrKOv+VdUUPgPqu+CtBxfJTjRuV+TSLHYpw1GFDIJefY78GwMfP6za25g4e/v+wW7DM4N6IU1u0lOzDJCGtbBKqgO5FdGzIgfx5q3xVeIMyf40pLHyA+QyuN6QRpgXi67Z4cGbM2L7HdSr4FdY/JxFcu/uYkshAOqKzThwSH4xom5IZeAv7kXD5ZgRCpQcK4NhWaDBgu3nvFnLDryP4tMPCUdOnebngIXx8KkkUsH9JcmdjcIC6/DeLazMuRr/QTpE3KUUDlTg5NgVNKSpDeocHih/OAQ7+qTMN06HKdQ01PlcW9AmxAs9mMGyy5eHKyE0j0naOLjhEWl3xqpbhDHgtHc5v8h+31pfdUnEjm7LuUoRHogUQsPe9cSMcHwAFJEKeS08xEgXzDyMold3gGy1zzimPzP+TVm1B2rRCvzRVVvNo63oHkdpwiYVKMgv5qytWPbbHgTXKF1VyDEm8haY0MZq4=","authorEmailMD5":"242b2a5c20298580093fd2326a3bdeb8","authorUri":"","authorUserId":"disqus:kegao","authorFallbackAvatar":"","message":"Hi Stephen, for the TCP Half open detection, i found a weird thing, show as below, Do you have any idea about this issue.\r\n\r\nTest Scenario\r\n\r\nI had written a windows program which I simply called it \"simpleServer.exe\". This program is just a simulation of a very basic server application. It listens on a port, and wait for incoming messages. The listening Socket was defined to be a TCP Stream Socket. that's all that this program is doing.\r\n\r\nI had been deploying this exact same program on 2 different machines, both running on windows 7 professional 64bit. This machine will act as a host. and they are stationed in the same network area.\r\n\r\nthen, using the program \"nmap\", I used another machine on the same network, to act as a client. using the \"-sS\" parameter on \"nmap\", I do a Syn Scan, to the IP and Port of the listening simpleServer on both machine (one attempt at a time).\r\n\r\n(note that the 2 hosts already had \"wireshark\" started, and is monitoring on tcp packets from the client's IP and to the listening port.)\r\n\r\nIn the \"wireshark\" entry, on both machine, I saw the expected tcp packet for Syn Scan:\r\n\r\nclient ----(SYN)----> host\r\n\r\nclient <--(SYN/ACK)-- host\r\n\r\nclient ----(RST)----> host\r\n\r\nthe above packet exchange suggests that the connection was not established.\r\n\r\nBut on the \"simpleServer.exe\", only one of it had \"new incoming connection\" printed in the logs, while the other instance was not alerted of any new incoming connection, hence no logs at all.\r\n\r\nCode Snippets\r\n\r\niRetVal = WSAEventSelect (m_Socket, m_hSocketEvent, FD_ACCEPT);  \r\nif (SOCKET_ERROR == iRetVal)  \r\n{  \r\n if (WSAGetLastError()==WSAENOTSOCK)  \r\n {  \r\n return E_SOCKET_INVALID;  \r\n }\r\n\r\n printf (\"Error while WSAEventSelect(). Error code: %ld\\n\", WSAGetLastError() );  \r\n return E_FAILED_RECV_DATA;  \r\n}\r\n\r\n// Wait for Network Events to occcur  \r\ndwRetVal = WSAWaitForMultipleEvents ( 1,  \r\n &m_hSocketEvent,  \r\n FALSE,  \r\n lTimeout,  \r\n TRUE);\r\n\r\nif ( WSA_WAIT_TIMEOUT == dwRetVal )  \r\n{  \r\n return E_TIMEOUT;  \r\n goto CleanUp;  \r\n}\r\n\r\nif ( WSA_WAIT_FAILED == dwRetVal)  \r\n{  \r\n printf (\"Error in WSAWaitForMultipleEvents() failed. Error code: %ld\\n\", WSAGetLastError() );  \r\n dwReturn = E_FAILED_RECV_DATA;  \r\n goto CleanUp;  \r\n}\r\n\r\n// Parse the Results from the Network Events.  \r\niRetVal = WSAEnumNetworkEvents (m_Socket, m_hSocketEvent, &mEvents);  \r\nif (SOCKET_ERROR == iRetVal)  \r\n{  \r\n printf (\"Error while WSAEnumNetworkEvents(). Error code: %ld\\n\", WSAGetLastError() );  \r\n dwReturn = E_FAILED_RECV_DATA;  \r\n goto CleanUp;  \r\n}\r\n\r\n// ACCEPT event Detected.  \r\nif (mEvents.lNetworkEvents & FD_ACCEPT)  \r\n{  \r\n // Perform accept operation.  \r\n *p_SOCKET = accept (m_Socket, NULL,NULL);  \r\n}\r\n\r\nHelp That I Needed\r\n\r\nwhy is the different behavior from the 2 same of the same application on a different machine with the same OS?\r\n\r\n BTW: In our production, the client is F5 for Traffic Management, the F5 sent the use the 3-way TCP handshake to check the port is alive or not.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2015-05-05T07:57:37Z","timestamp":1430812657},{"_id":"451d783f-c194-3cb2-9c57-994f220dddbf","authorName":"Mike","authorEmailEncrypted":"r9Om1kaE/UCDv86+IMsgbc6fpRDZp3ZXqoQ6djGDfFwzw0YjGcf46PEHVKck7ib4IA4D1GALGEPr6bI8wQKOihjIeQTmiFgbVSy8+eooapwrsb6HEuX1S9V7nZWQNqlmUlyxRKsAY4A25vo4ZbzSKbXIeKjOE7VA68aoPobspWrveJ1Pwaf/7YYvzq1980GxD/j9npgo2xpuWwpVQ971OX7BJlfHZiAyDYYsqV9ycqXZmynMbZsDxlMDshRiFdy8oS6TxPRm09iMBZYo63LIOW9uo9pb6AirtqYbR8S90YliH9Q+ceSNbZbtZrmQ6RN7RKdJyWFrjZh3/ldordfo+6MzuFP7ab/AaxAW8fpHGJpot8srZ/yBIScgdrpU65NLmoTQBo4a2lk11AFj6qZ0M3FmZQrbdVVH/EX1b3pldhs+MfR6vD+rm+D4XF4drDAD1i/+1dHsZFh3vnBmEKqFAsayTRNdPbUPKTsZSjGaOYpzOZroX+3RwCPe0VjPqJ0tIGRwZm553Uu1P2RW5pXRDRWEOQgwFUCxaPEvvOJofh+GdPyZBOPK3k7qlQtCJNYvaP470jE1ozF4a7KiTFyp2vU6oxk2pwYVfsPcMl9Uj42ttZ6FOANUCYKe5GYqQWCiS4fNiPiMorwfaws1qGljZnMvVC/tkYsbLq2WLuAWCz4=","authorEmailMD5":"31749c96d2e55b82d8ec22a374bdd971","authorUri":"","authorUserId":"disqus:Mikeeeeeeeee","authorFallbackAvatar":"https://disqus.com/api/users/avatars/Mikeeeeeeeee.jpg","message":"Note that the 2-hour interval for keepalive messages is specified by RFC 1122. This is probably why it isn't explicit in the MSDN documentation.\r\n\r\n\"Keep-alive packets MUST only be sent when no data or  \r\n acknowledgement packets have been received for the  \r\n connection within an interval. This interval MUST be  \r\n configurable and MUST default to no less than two hours.\"  \r\n-- [http://tools.ietf.org/html/rfc1122#page-101](http://tools.ietf.org/html/rfc1122#page-101)\r\n\r\nI wouldn't recommend changing the TCP keepalive interval as a solution. This is just one more thing you have to remember to do if you want to deploy your app to another server. IMHO, keeping idle connections open is the responsibility of the application and should be handled at the application layer.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2015-05-28T20:52:08Z","timestamp":1432846328},{"_id":"98bec841-77d0-3323-90a3-03be1b490e89","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Good point, Mike! I did not even notice the min-2-hour default was in the spec.\r\n\r\nI agree re making the heartbeat/keepalives the responsibility of the app. There are some cases where this isn't possible, but that's always the first solution I recommend.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"451d783f-c194-3cb2-9c57-994f220dddbf","date":"2015-05-28T21:09:11Z","timestamp":1432847351},{"_id":"89a35ed7-c7f2-3671-b15b-634e06b73994","authorName":"Ed ","authorEmailEncrypted":"eUk5NnOqWy0lfuUjr++4BIygP5sZXXqq8MJFL1oxliYHXmMOMU6ZEw90z5XlzKTVbX9LWrO10d+JwPagPg/ejTBfwsXOY3V6+mP/mVCQmUVE+yZl8BgVjgvEsc7V2XbXntl4jMYrUkQw4gxv9Mybo0pgR1qR4ebDG3xIpLdtlc3TbADuAFDlRewYFUnPnbWQZr6qSFAF6B00qbXIWYJEA9OXq5to1NTYEIIURha4h6J/Digr2jcRKmJSCSltWgzBbGEtxVsHFJF9or/hNIsY0lX9s8D+iKDfyIAca8zrSh72vj95sXepNg19YSZ7ACM+Bf4QM1NUnvrumRSy9K76r/uhEM82hvJrhUNq9NoPZE2lV9ScR+vFegxdsI6Vz1GKw6J9GPNa6Mnk78HabSTBglP37/h6NzbABrqc+opytpW3w9vBmeO3HaDSjrNMXn2a0xE4/srqUH6+2STeVYKWKsCjQ0W3h2pq4FuRGx2CH74jOgOxcfva6nepHqwHLtIZJz1lV+2QdHLrJYz018ZTJ1EPb8+8RbtsqpEAr7yjLYYpAh1B5hvBTw6OdCLvQMJ5jJ13K/lwkI66oq2OaYX8QRCFZ9Y0zYJjtnQOYToudK05LOO2qQeKFtsya7LIKe1UJ+LWfgXHg+QYh5QpA0Pwz7wVI+JKWSFhiQLTAUgj8tY=","authorEmailMD5":"319ce94c9e1ca9e06f3f5450cb523c4c","authorUri":"","authorUserId":"disqus:edwardriveragonzlez","authorFallbackAvatar":"","message":"Hi Stephen.\r\n\r\nI have tcp/ip communication between a c#(windows) and  \r\nc++(Redhat) program. The c++ program has a loop that sends a read request every other second to the c# program and then the c# program sends its response back. This part of the implementation works correctly. But I found a weird behavior when I added a different function (which is triggered by the user) that will make the read loop be idle for three seconds. The problem can only be seen if the function is triggered between send() and recv() calls. If this is the case I received a return -1 from the recv(). I have to mention that the c# program sends the response in less than 1 second so the method that is calling the send() and recv() commands goes idle at the time the data is transferred. I thought that if the process is not terminated, the data will wait in a buffer for a recv() commands. I wanted to know if this could be a case of half-open connections or I just have a bad implementation. I know it is really hard to say without taking a look to the code, but I would appreciate some general idea/comments about this issue.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2015-07-28T17:04:46Z","timestamp":1438103086},{"_id":"df20a4d9-a7d6-32a7-8ad1-c6a1ec56bab4","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"That doesn't sound like normal behavior; I think you may have a bug.\r\n\r\nTCP/IP should work just fine (up to a point) if you just let the incoming data sit in the buffer for a bit. Check out the last error result after recv returns -1 - that may point you in the right direction.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"89a35ed7-c7f2-3671-b15b-634e06b73994","date":"2015-07-28T18:32:01Z","timestamp":1438108321},{"_id":"900bae25-2022-310b-aeb0-241f2c415e97","authorName":"Meha","authorEmailEncrypted":"RwrcMp4Y1mMNLZ8isRF9Z1Q3k9wdz1B/1evwiBLRAeCYbFMtIkkpS1z44gI44hyZGrW5p+dpdoIfktXVk/WJzlg+7rnOU0N+4yn48JzejBTSpy6ZNNsERDIHhoqn78q4MqbFczo7CTUTHpx7IOKlsnWsqClAQKNH38dmJ0JER4PHqI1rXLUMT2VvZfiPRXiiRTroMeOIoMr9i6685Q0fKLg3uqugMexNyLXtawHK18mtmQQNBFOMiSegkOx2lJ+V37NhswIa0gnu6P0rCaP1xB3yNRb77xxwe7hbseiCzePltlJrR3yl15+nMqr9/eT8k0I4XsdUHGE5Ux1Ve+9Y5hS8XbADqWjKS06gbDQTWsmoVvn9I2RXKZpfsAlwQxDPDrJNzMecWuv2ohgkgBFxP79yBq8ExIc+AkEjXoE8OgjG3jLZAgE0jZlG0p6QCjBwkubYp91wRz5zHGuVtQMbNc2NPcZM4/hvyOrk/SL6Pa+yFSIcr7gUAeZKxRl5K26gbhJikL3dZRl6cW+IlFSPQguWOIwrYNmdVDaf0v6yIThpgyyJrNsW/qgFKk0HOlNVBV0kHtsgrU+pIwUOZvFl8pXlaqPUr1z9HTNwhz+E12UZJRXol7wKAmGmLG/mOSg+nfQ8iOrFFRRT4c46hhVyqwoNcsaOQQbdGKUD6vDUznA=","authorEmailMD5":"e9e31630a696ff0c9469ff501137294b","authorUri":"","authorUserId":"disqus:disqus_nfoKGHqVl2","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_nfoKGHqVl2.jpg","message":"Hi Stephen,  \r\nIn my tcp/ip communication in c (between two NetBSD), i am using select for readv, my server side, which is waiting for data, and in client side 1 thread is for writing and another for response reading (using select for this also). if connection is idle for around 3-4 hours, my server side readv is giving connection reset by peer, and based on this i am closing socket from server side. But this close is not sending FIN to the client side. So client side has no idea about the connection is closed.   \r\nkeepalive is used in both sides.  \r\nIt is hard to tell and understand the exact scenario, but i would appreciate any comments about this issue.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2015-09-13T03:59:44Z","timestamp":1442116784},{"_id":"a0e73aae-9e5f-38dd-93c1-ff37cbd414fd","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Sounds like your client-side keepalive isn't working, since it's not detecting the loss of the connection. It is *possible* that the keepalive packets are being swallowed by an intermediate router.\r\n\r\nI always recommend explicit keepalives whenever possible, because that gives you the best control over timing, and routers aren't allowed to drop them. If you control both sides, I'd recommend that.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"900bae25-2022-310b-aeb0-241f2c415e97","date":"2015-09-13T05:28:49Z","timestamp":1442122129},{"_id":"3af567d0-7436-3ee7-afe2-745ea56ed6e2","authorName":"janani","authorEmailEncrypted":"iuoRoxCuBR6PDdfIdmZ4VuzFz4xwT/Eqk5W0Fo54W8NmBCbnPHVF3vWS3eTtZMChzAxaiMBexha0e/AnkjBjVIJLw5Kwi760E4c48wv2QCDnSLkaqze1IQcAxyYUtmItL36bYtKEUbXKoyfzU57E8zE1KXFW5mFwGWu7ETKE6Ip2+dUAvAj150mFrQOWwLyupTLOsvfqVQALmKVUTbxYMNHzeZ/wBoev97RvtqN/fqLsiwfYVug8TsR53WlgYVIbZRc3uqrh/ga9y34vIU4Voe5y1cFtYDHIwxvO/G+6l1VATJaygCt7MbWS/5y/58CiCLUzXsYYO3GEolG44KBto1pYq3mUIvivid03t8ai9ujz9uovcOuubuc4HDKzgbfESjEYHXrK65ZyoZvW2A+frudAmpJtUA34vlAUzW7VIzdnxHUYEpGV7+gyV1zLuxqaAJr3WcGmEJyx5lULZHlYMNDcJtP+cB1X0zYlhwX4Mh3o1ngyZl0PRE/XOrptS2PwSwUwQsoi493xH5mLOFiT7SWGS4pKyxZUmdw5Dq9tKZuqZPLXioYUfubKBy8y2xj/+YSng+nMSvRO3jY6rxVIIuX7vCIn/u+18t+P841hrlSSnyZwOSyYD1B1D7J1Tb5nIzq1JVKiFkrgya5eRpahETduNsiRv4p9E8Cq0siq+sI=","authorEmailMD5":"acc2c257e0ca345e2521a1a711c8e705","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"hi in half open connection,will the message be delivered to remote side at later point if socket is not closed?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2016-02-25T14:16:00Z","timestamp":1456409760},{"_id":"82f81286-16f4-3b67-b3c8-d92a75961abd","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"No. In a half-open connection situation, the side that sends the message will get an error and close their side of the connection. This is what makes it \"half-open\": the sending side is closed while the receiving side is open.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"3af567d0-7436-3ee7-afe2-745ea56ed6e2","date":"2016-02-25T20:28:44Z","timestamp":1456432124},{"_id":"2a40cfd1-1b6c-3254-a893-330ea9b8524f","authorName":"Vijay Kumar","authorEmailEncrypted":"gkry1O/lJ2q6kQ7LREaNQibdNMaAo/imI8qFtgLgi8NQvMVy4dMT/byr7zay14vpl6TCLbdxMfBQ9wm+RIOgQjNu0FLIjzddweUAJ0iEgA0BDPRe+fKYcmLwdAeUec+Xic8K/hg1m/2xZ91MP/psYTrVmI1Adu8NW9leaZ+FDeKfMx4gaeK+iz9dHSyOQVuQO68D3MeoNPwm8zYvLyPVw8ei14Oms+d2TVJqIE8xw7/rHmQCpatS1NYvjMjaKU1nc/Hbqu0AG83jxvKPF07lKuk9WnEbWI/arv8wIy/83qVm/qinbq1IhO8XsCGktGeYuaeWnz4IyYvnfMnXF/aHpHfaxB9r7+MKvq1ZcONSPIjcXZSAcga6FpWvdYnelSx9Y4imJN69T2tDH2bHmvgp4eq1g5OthoLcAWLjFDQK0WWpeii8HG2O0AbjcqN1kyB/Mulgj+asKSbEb1Aig7AUqcVnfZgK1BC2ugQ1m0GDlxhd/1HDzMRKnOhTtZGs82mdPb7toXsan8rULgCVLq20hj98sygtdRgU4Z1cDDN4zKjzXUPpaJ+9u3Hmvn8E8IxxdqeHgVtdgQHaTeUr6VyTt+kzSI14E+mSKtNQ+Rv69YY+DkbDqf+LJEqvSAhIMBQ/hnUcmZs+Hrq0lT+LRvPGJgxO5A2oZ2cOp5eOxFdLoR0=","authorEmailMD5":"d65708590457a0d1dc80a0fd3fd76d90","authorUri":"","authorUserId":"disqus:disqus_9m2kzOQq4X","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_9m2kzOQq4X.jpg","message":"Hi Stephen , I musing a tcp connection on unix. I have set the parameters to detect the disconnection in 20 seconds but if I disconnect my system from internet and then send some data on it it detects disconnection after 10 minutes any suggestion how to avoid this.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2016-03-15T03:04:01Z","timestamp":1458011041},{"_id":"4c01da0a-9299-3c92-89f1-1dc375b9811b","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I'm not sure what you meant by \"set the parameters\". If you mean an actual send timeout, then you could be seeing the result of a TCP/IP retry with exponential backoff. It's been quite a while, but IIRC, most TCP/IP stacks will retry 5 times with doubling the timeout each time.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"2a40cfd1-1b6c-3254-a893-330ea9b8524f","date":"2016-03-15T13:09:24Z","timestamp":1458047364},{"_id":"c6d656c0-6b84-361d-b149-17b9cd2f0e06","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"OK. The longer wait time is probably just due to the TCP/IP retries, then.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"effb16d0-734f-3819-83e2-28304721ae56","date":"2016-03-16T11:08:43Z","timestamp":1458126523},{"_id":"effb16d0-734f-3819-83e2-28304721ae56","authorName":"Vijay Kumar","authorEmailEncrypted":"sTXH8JqNQOuUGfQTRq152pLCQJZIEEr6LhDIRtgXfNf6fNt7mBFZEtlQsmgbTXDyAWnu6oGBbzD9ijp51sKTUmH0P4BZsRFkRXFuGTB+QvAHVac+5FbnIlATmZUyPrQvYBNLg+nu/fveR0j08PqHiCCbiFlOVCuC6qc+axok8qeBVLb0BD+VVZfmM2nwKhhokhZyNLBFUApK5bwgE7OtDDZ9XINeoZMTSqsvK2Nw6eX0r02CMtNXxQiFsg58CffoDWGhzpYF5MBJWA0cYREJIiZNPfjdjR3fGsizP0LmR5S2wOb8W//mTa2p2Iii8j0B6JRKj4ojinnKZ3GVUA8x4plZAoc0GGWm/YRj34tzO7ts1DQ3Kj0kUnDtgTgFxKqzWtfR7hyET/OwXQiiMRxNEaJKsLfy80SHiXGvNyPJMUtPONm8MPq8WcznDWbDbasXmx04dsaUEx8TqBHdOHZLKHz0ItSeAr+tr7OpMlGq6wn7u5LnoC7ZmLf3DwWRRUjR10w0+p/qlqGXz48IUKQtp7sC5MVv4vmka+zO8VYxNKzAPMmJSbGJSslJ3ZDGUE24W817JgMKBcvyvvNWpeDhtykWaD3f+uxeC1K6jcmekIdNc3kodkSyG3J93+SCzLt0irkM/yw531+oBHlqNZyj/Q0UKjRJpZMOEnHKMVPFUww=","authorEmailMD5":"d65708590457a0d1dc80a0fd3fd76d90","authorUri":"","authorUserId":"disqus:disqus_9m2kzOQq4X","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_9m2kzOQq4X.jpg","message":"Hi Stephen \"By the parameters\" I meant setting \"tcp_keepalive_time\" ,\"tcp_keepalive_intvl\",  \r\n\"tcp_keepalive_probes\" for a tcp socket.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2016-03-16T08:57:00Z","timestamp":1458118620},{"_id":"9e80e7e8-d386-3746-a312-cdd76275abbf","authorName":"James","authorEmailEncrypted":"UL3fQi1tmPqUULp3sPEQSspBOwqK2A6fogZ3CYQKsHRWO1NtZKMsgSjqr2s6slWQe/lzbTorN3Fwltke6+m7S+2AOZ1V1HjSiy1yAZjqNNwA8GHmcgNwB3FQXNxSPWcQMWbb9nCSzOYixijH/y+5y4ukCedF1BGRzjkXRUAYw8PEt3uX1iKtc9hw80JHaV/bs7npGKvU9U/ETgIsIhz1lFmGIRsxFxPP7pkyA6XTXt2weHTkjFnaQobKd714ECNeUlg4abUEBWuMDJJgZT64wUut1IDGak3sZxgJtjE0j4b5t+VMaCeReomVAmEUicn+i78K6DPzZKpDVkpBx+AMa0fzRH7qfC2AgkLpfVD4SXpiOsB6VKiVAvTl+GOlF5ZcWrqGWrA7tkMHQtC7X+Hy+0elqRSYW7tlziIQC7wK8SaLj/KqaL+V6QCuZvNa5jMuwF/pLGVa5ud/mqnjRfSjIK0p5ivPc5X5dhP35snwi2/Aym8CnNlD4Ko5vwFWM/nCLcJl/b91584+ocdaKF/FIlWQG+VDBUkAdyQ3dGFcJ8QRkEKEXcj1X+/E8nA0POuvynUUTRXkMC8MnSev0DJdEBg67u8cYaM0ZFQYPgrXnwtds7jof2HB4ILi9qdpqGk+pNIq22gEQW6bf0UDvX9eWQW6t58SUgYd6SKCzsWr1uA=","authorEmailMD5":"fa3970668cbe0a51334d80270452d5cc","authorUri":"","authorUserId":"disqus:disqus_T7Ibik90rQ","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_T7Ibik90rQ.jpg","message":"Hi Stephen, here's my situation:\r\n\r\nI use an application to receive data from another system via TCP/IP. They are finding that if the other system needs to be rebooted, my application needs to be restarted before they can send more data, otherwise we're just waiting forever and the other end starts backing up. If the opposite is true, no restart of the other end needs to be completed. Can you please advise on what's going on, and how to resolve? On my end, I am sending a keep alive message on a 3 minute interval.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2016-04-29T15:34:55Z","timestamp":1461944095},{"_id":"1285d497-3a2d-3ee8-9381-f78e481571e9","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If the other end has been rebooted and your end sends a keepalive message, then that send must result in an error. That's just how TCP stacks work. Is it possible that you're not checking the error from the send?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"9e80e7e8-d386-3746-a312-cdd76275abbf","date":"2016-04-30T01:35:11Z","timestamp":1461980111},{"_id":"8f6f98f7-a92f-3485-9ec1-eb0ab065dd1e","authorName":"Virendra Negi","authorEmailEncrypted":"etp84hwVka1YOcRNOw7KjmMpWtJj9lltvZhu64UJ/Vt2L+Rek0P5iUoe2KiiOkqXFoKUlIR0ZAf4cfa0J+mAYmAiF41f688P+QgQaXosso5PwFbRIji0ykmTfS0ceaepqsCflsRA3gWVpP7Ypw9fPwpZGoBLJUI5WKHzEGHMHqIOLTD8r96TdCVa6eAAleWVw4IfI/PTuvxWscvkdIGkzGE4EfrfWjteezWbKLR/NSywVYOPB4GP1Yj2Km3wzOwV3LyDfOupr48LXXP9yv5EvIC8N1QyHRUxdgQ4WvnhbcAlFxNRzj9kXIqrRYyN4b0yWP2n9VgxOhWgszdr4C4xTGUN16Jz6yUUrvJNpnYrXf0zWCSr2ZhGPWFm1m0e+1y90xS0aji4vEPEDUPdz+b33zdmoR0x+xOqnmgEDfqvtF4TrDNrZiLY73peR4HPJUOcvYHwugBuhAm1uyiFi4sqXg/Bc/iseFw/f/IvHi6BHpY+dN8OylpACvcXa2px1gQWR6Xq0UNZg2Dfb8v+wOHeojb2wyuzdpZmrlixL8pgZpYhzhstvSAVbq3BLMf1Ix+Ayz6g0oLcs8YuOPvJDnXcBK93Lj1rpc7jPJ8tf7H++YB8W4jqR5joIrfIXhlEG7R3KpG3ZOhdgUxQcYf7fh8JO3rsDa/mXbb8Y5OUuzEKPqw=","authorEmailMD5":"568ab3526e901b817d5b7f0fda7c0676","authorUri":"","authorUserId":"disqus:disqus_QHbdBou6mh","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_QHbdBou6mh.jpg","message":"Hi stepen amazing article we are facing a strange problem. Can you please provide your thought.\r\n\r\nOur client B is connected to TCP server A.\r\n\r\nAlso to note B is communicating with a service C over IPC.\r\n\r\nSo traditionally request from A would be passed to B(over TCP) and than to C (Over IpC).\r\n\r\nAnd the response is from C-B (over IPC) and B to A over TCP.\r\n\r\nNow here the problem we are facing(problem since it happen randomly)\r\n\r\nWe see all request from A logged in our log. Like wise response that is about to sent to A (received by B from C) from B is being and logged as well(which exist in our log).\r\n\r\nNow there are time when we are being informed that A is not getting response.\r\n\r\nWe then confirm this with ngrep.\r\n\r\nNow the thing is if we restart C we see the message getting sent to A from B  \r\nNot sure what is the reason for this.\r\n\r\nSame happen if we restart B . We see the old messages (those were stuck) getting passed.not sure how that happened too.\r\n\r\nDuring all this time B receive message from A and response from C.\r\n\r\nIts so annoying we are not able to track it and solve it from past 2 week.  ","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2016-07-31T11:54:58Z","timestamp":1469966098},{"_id":"1c2050d0-ec5b-38b2-b2c8-155811c650ec","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Sounds like you've got some bugs in your code. One thing to make sure you're doing is to always be reading from each connection, even while you're writing.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"8f6f98f7-a92f-3485-9ec1-eb0ab065dd1e","date":"2016-08-01T10:21:37Z","timestamp":1470046897},{"_id":"bec0f28f-5fd7-3cf6-9a80-342f060342ff","authorName":"Aris","authorEmailEncrypted":"UU4HB9Ht96egHvaIxqzUBlDnh8Ykj0uppypwav0nbFzs5pVoo8EK5y3lvWm8I6ugKSfeAAUx++LAVn/8i68mI6rssCD9JDL7zVXSDVXYFaAmRCn2zuYuZcxlZE8R3GUlUsgnaAdITIBuIqTZP+a6csrQoz0NV3vUZ/f6RZVRVBdK4sy9rwV4DCHmhKTqFwqF6/y1mrCAo/DWzEAfTyP6ZJR1RWMWwHNqgI0pN/Xh0mrByKSB7p6y58u9wVbbVwJDF5vm5Vajk8/4zLhlNIEPntulryJwLk6lwYS8EkkN28bm05Tfu3XDFYSFaUQ+ZvL5f3xuAeWfRAtNEox9oS8hcJL8Xf9mDUt43zHIRM1C5umMqQfnvZ0zIWSsfE54/Pm3qXp2BqlWggvl8/BehIoFJ8f3v/BRsy0E5kiulbT9mzm4eMkGeV10DRSAOq9X8lEhBGqUqXVS+FVFOsuozwLRmo7A6zwFq9EhsCmPktgd/W0eTeh8DDbxiMNgX9asWhvrYuf2ENxjC/u70V1Fg76bLSbTQNv3a2hZaozrJBJPIuwAcI5EMcS7GnE7wgXH7+SfH3H3MTH6jBITZeGoIIbt+5+DI65L1a8WUQWupQKKuNL3Ml9zRc/nf63bcI+tgb5r1mRRk+kk7YjHFHBTJ12REjYt6k0OpyJPwKKcZfmKGus=","authorEmailMD5":"85b48e671897dc513cf64081bc35e90e","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks. Very good article!","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2016-12-19T17:48:38Z","timestamp":1482169718},{"_id":"221a4d5b-c5fa-37d1-b59c-392da75c79c8","authorName":"Anon","authorEmailEncrypted":"sK8D83OlavHNhfvxESIbPjPJ11bD6lgzvZpAeqVGP+OQu544yTlcnGN9GQUTGC4owdx5uoz5Dqq2rkggNYRxSf6Q4gCe6+Gciiwtwq6/p0XLOZe7MKbFYr50cWTYxFgo0N+UQIW0gBues0PFnOF+hZmDKDYF4y6tto9Ee/ayQRmVqS+hpRjHcxCxR1AJyLthLLnFs1txJ0uvRlVCyae79fwICbRHkwqEM1tKC93PLCADJtAb+icHliuQsEvb4VGEZlgoGRXilrl57OZehvz67ZkeyJWdQyx0ljVr+MqpPcYKm7XObsQnHCH24P7jVpMotoj0JP1t8XhI2anBzhjEdFXl92z+QJij95AxnuZwU3SMwwT8gp1PHGz0Q+VP9hUjMWtC789eddJzgEH/dtFsDpfxIaAeV9a6ZAt0rxu3Z8vAKs6OqtkgQxroJwk0i/C5nFt9leVoeOR4Y0NhBmEXFgnnMqedRbglrNVqGA91jauATJJRlDAvcPvXtay4C4Tsl4milioClfkHx5G5/Kiu7JFz5x02qAE5Q2TSsix5GYuXKeJNL9yGc0OZXKj+DcNtDbWR9gYkL/Q5iE8LpvYteFxtj1uxydudsnLLULxDrG4u1B4N6KhvT+jmssQpsIY5CUXW2ZY3VBS4Zszc6epl6t9KAXzwi2KFuCwQhUc4Ejk=","authorEmailMD5":"933285225d6a05a99fe35d72b38ff17e","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"The article was a real help. I was working on a socket chat network and I needed a mechanism to find out if connected hosts were active and reading your discussion helped me out. Thanks and cheers!","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2017-04-24T20:36:54Z","timestamp":1493066214},{"_id":"33f456d8-1481-3fbb-aec1-63b57320315e","authorName":"Eric Hesse","authorEmailEncrypted":"spVLE1lQEclcRjELdxpScHxEkCLhQkbvw/PyC29v/COGwvklt+Ws6p2i789IA5zYn+Ec0gBcogd9B7Cl0e0t91gQCdv67d62rPrfYrVSSlLgCDcrEhGDzooMLh4nJBt66kQs5qN5NA9aSzaicMiNhmIJ2o7LA1UImAdc4zO6nwifpZHrqhoyZgsQQ2P6JMW9+/iWLAV0PEFvNDzbfpmi3AkHEViHEUB0et8/1GKfZWDvS7JbP2VuEn3ko3ToWDNaYtl4CWWHm3b+8SKSryLn1ki9T02HMF0Wq72Dd+qVXDsAcwZgSXDAVwMIiI+BUMNos9UBvc04t9llXIptR8VfZMHybzWW1mkyjM2qv9ZPkqUyQjRXXURqzixLDoM38wpeRBLevE82k3/kw2QUTWQH+8DVQVQoAv8KLtaQOjStoWovbFXfnEW3qGPtdK2FQCzthGC5gkm3ATcaW9uLQOBIj4jW3sxyNdH2WdTlpopujZxdxaKzSEQSCkXjSpDAtQpADHjkdY5FUexHZtRnQF925oaY4Tsep0YXSZ9nm/COZPFjvkojn6zQMX9TxY+pgBhhKEUJt6l9ak3kAC+B3DKVbtf+FPY0wlslTHixEHM1zn9R6ltNcncKFfB1rQUo2XaVM1nsZYsSnUow8IV5c8Ffd446H4ran13aF5/jF0xWObw=","authorEmailMD5":"031134010a19b24e448a57f4ca9d5f46","authorUri":"","authorUserId":"disqus:eric_hesse","authorFallbackAvatar":"https://disqus.com/api/users/avatars/eric_hesse.jpg","message":"Thanks Stephen, done that with both PMR and RFE. The broader question is whether there are other development tools you are aware of that would detect/pop this error up to the application layer that we could use to create a proxy server around DP. Any good ideas there?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"38fb923c-1c53-34cb-9cdc-6c723b8b1a74","date":"2017-05-06T14:06:51Z","timestamp":1494079611},{"_id":"38fb923c-1c53-34cb-9cdc-6c723b8b1a74","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I am not familiar with DataPower. If it silently drops errors, then I'm not sure there's anything you can do. My first step would be to reach out to IBM support and ask them what the proper way to handle this situation is (since it's their API that is lacking the functionality).","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"3e7b1e3d-30e3-373e-96b4-f985c6c277dd","date":"2017-05-06T07:51:03Z","timestamp":1494057063},{"_id":"3e7b1e3d-30e3-373e-96b4-f985c6c277dd","authorName":"Eric Hesse","authorEmailEncrypted":"HnuGoi5b9mlwrmUv+K5kgkGHilpAsC2vQZHXwSR+phgVnM3mx+CJLbF6fDjLkiTFJ/tEqVoQpBtLjJfWXzrkQX7fISmOZ7OfdwJSmXZ1tGwXaAmJZr3S1FO/+rQFkXNsgDbzcbsHI5FdH8ekc85ujyHLTNPIFjS9/YOgfWZd4MBazf7HzKNfZrWe6V2dFlQC/Dkq527eaL3YHK2fYdNDvIjskspZ32qZr8+KAgYEsBGLt1SvJQ645s9LooXOeY6xv89ZfkJhEsCO09/BvAMG17vHR8SvPcC2prKxSrzinehUCB8jNhjlw5Mj2KlvB/uLPj7gsjo8HlgJx9Tdm0ICL0hmBp5Wwa3XI1g2bKBR4gmmERYT6+gFrS5ilkwlAm78yrwqDfFg/6Srp2r4Hhyn6y8WdfvMKpstSESr0RfTGujlCKd0FjrNtZCAy9nC/NhaZb+Kd5Q6bc7sBlU7nG/bRRm/uVWZAUn+zMCUql4Git0ujQgRt/KDPoWjtunyV8HJIVEtxUVgAFFdUIpMg2lGJAqx+vjTvYAY/ZVmJB7YVPJ6ginwIiW5csnZTdKByIEFB/vn6ryZ3Fcub93vnphJv3j+b1aVcHCFeIxhjIOfp1awBzmOY/VJI5kHu9jx2w2HW7RyCaFQY+u8qrEQinnyj3PPgnKnf0g3IlO8zFesx5k=","authorEmailMD5":"031134010a19b24e448a57f4ca9d5f46","authorUri":"","authorUserId":"disqus:eric_hesse","authorFallbackAvatar":"https://disqus.com/api/users/avatars/eric_hesse.jpg","message":"Hey Stephen - a great article ... thanks. Quick question. I am a middleware guy, using IBM DataPower. Our client has a cloud application that submits SOAP requests to DataPower where we then send it off to a backend application. I am not allowed to ask for any changes to the client application, so we cannot add keep-alives or any other solution requiring a change on their end. When the client application goes away without sending us a RST packet, DataPower never knows the client has gone away until it tries to send the response back. DataPower, after failing to get an ACK packet, retries to send the response 8 times before giving up. At that point, DataPower does not pass that failure up to the application (XSL) layer so we cannot process that error (by, for example, un-doing the financial transaction at the backend). I'm told that capturing this specific failure is easy in Java and other tools, but I wrote Java HTTP and Socket servers which do not throw an exception for this case. Without altering the client for solutions you noted in this article (i.e., keep alives), can you tell if it is possible for this exception to be caught at the application layer (as opposed to the underlying OS IP layer which might not pop that error up)... and if so, what is the best way for me to show that via a proof of concept?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2017-05-06T00:35:20Z","timestamp":1494030920},{"_id":"20d1b6bb-8276-3ca0-9eff-693b6b72d209","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I am not aware of any such tools, sorry.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"33f456d8-1481-3fbb-aec1-63b57320315e","date":"2017-05-08T13:17:57Z","timestamp":1494249477},{"_id":"1971a909-0652-3f18-82bf-d4ea971e752d","authorName":"Doug Barker","authorEmailEncrypted":"d9kBMW7US5j5X2MzfWs4PLMzu5EDkhvI3Ht1lG8TO3jALlWFHydX2mdeLj004trfpCTyaANZnLgC67II30nCQypYmS4LCnQl6ay5gQmNy+VWGEgqub411KoP/A0rwaVXHWIAOe+SjjjnwE8bRXUDkTHvr6lkko49B7kvrhBpXx8AAKszs0yERDQhFBmG2ttG8XzCFVJ1O/id0t3hNoCaxb3COaIilErzRVEFKULGBkZGNcHy0vbcPZukEYO0C8hB9O3txSSGiMgFB0xK4WQnSCsCcdM9kPZe9b97mf7l8wfhYKAYBZI39JrV1h6y2E0hnzF9j2+yfvn48hfDsAO0QHCyr7iN9gB2XT6HimcT7ZDmsfiqKRqfwgo49INBKTOq0PKxFTBH6clpqyYYA2n1hy2bz0jf+Rx8amzfc3JnD7Tt4D7DC/RT1/UYdYBFmNoCl2MLTFcGGEdYE7E5K5Buht0PVQ5bf8HmMI3yX/cXQ2kuIn30aA9FWuUiisgM63/K5P7Ogwgai8jqUi77RlwY+R31pvWueU8QxdQJtOum7HVEbP2fY/6jrHHLczT3netNZ+fy1eUwM5xOWOHPKLJ6PLc7x+j+GX4FKSvZPRc77QWzZhPnB/QMUvXx7F+M5MN1kl9ESi7Ix37IWaUnEml9AaVfgf8pPoGjVSAodPIy5Cg=","authorEmailMD5":"4fa11b23a0d1151b1c71834532ee0ee7","authorUri":"","authorUserId":"disqus:disqus_AKfQIXg8jN","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_AKfQIXg8jN.jpg","message":"Great post very well written   ","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2017-06-08T12:46:20Z","timestamp":1496925980},{"_id":"389e700c-f37e-3ba5-ba59-c3a1274bb5cd","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"A successful ping only indicates that the ping is successful. A formerly-established connection is not validated by a ping, and a ping does not indicate that future communication will be successful.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"f12f3338-1719-31fa-95aa-8d6edb823b5c","date":"2017-07-20T19:26:41Z","timestamp":1500578801},{"_id":"f12f3338-1719-31fa-95aa-8d6edb823b5c","authorName":"Chandra T","authorEmailEncrypted":"vYxrYi/JxGtYIH0ZEjTZhrT8WG+PWw6iEDITku+xBWUQn3+YEqxppoTaxwPr+lhTX6yY8EzFZH5sx+IMiIauv9SW3GiZtL6esvcQr1E1b1VypDFz/5UbLS4jDxw1WSwiR2l/5eIOgo+P6j00skqXbprdWoI82yYtpQITBTDy29DF2USrJCi/EEj2J+GA/LhEc2+0HzZTsihybee4ieqKILFfXN5v/Z/Oq6jA9R9VcaU99bSpemYzBoascuB0VD5N2Rf2kk0wSt5WDuQkTzM+yhNtwRDYhPfGifERacCXPSUH37FGjnjezHnQiAJmdjS5K9I5k/Z2Ta+g/dFRcYaA3cEnpvjjmlAwneuPaSxrTL75a+osIs5I9JzU5rHtATETP+tlcfjwyKUBvLuQHFfVPvAKrmC37vZQGJaDZxQnU9HpVdEd/o7jiA8/Os0+Tz10Gm5WOL0fwo3YoAPi75Kn9lruwNv5909FW7sADxCxQYpPLMmYRHW6gZ37IAccV/u9WOZRjp9qxusOPbbAVfGYNd+uvJi5qrdy+bIAo+kPza3U5vtpkqFLflLe7GLYy0Be0oS55P3L2J4j9uEQ9dM0HpeMbvZA94RjVL6UH8X3vHFDZM3T5a9Mj9VeLIp9ftavg94/hSX06++XynhQze62SQxGAYX0jrAUb0mwW29FnNM=","authorEmailMD5":"66d7fcadc1e35a76a7fb093eb184611d","authorUri":"","authorUserId":"disqus:chandrasekharthumuluru","authorFallbackAvatar":"","message":"@stephen_cleary:disqus Great article. I've a question regarding usage of PING for detecting connection loss. Lot of membership protocols use PING to identify the failure of a member. My understanding from your article is that, PING can be used to check if the member is available and reachable, but doesn't necessarily guarantee if the previously opened socket is intact or not. Can you provide more information on this? Thanks!","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2017-07-20T18:44:24Z","timestamp":1500576264},{"_id":"9158dd45-5557-343d-b158-d84d50ff9015","authorName":"Chandra T","authorEmailEncrypted":"WGctWtmLYAK4qZ7Y/QUD5wGO/Sj+Wx4C5ER7EOQm2x48zXruy3IwW1AeMap2IYxABGoHHWGwqY2MGMJqdtPurtL1bI+qoY7MiHQST4eJjZnQ4oGUzoasRmyidj3n89G9Le/RvBPHywZaxxm0ezAtfy6XRlCBwyLPEE/G/gKQFBqPHju+R0afghjMwT9m2BpLUZOI56lajcAvgkgpz+lU6ad5G7x9Ci3JYw17TzAVe80ULOwJE/AauKXhCLY7PLJ6hnUuNPiIpgomVs0Vn7Pq4qs3euXTjDwtusrpXKnLj3zyf0VQCLeWYR5byzA+VRhaUudL/Vv9cWFZakMhaUhRJmOE8XhzCCR3uhO49lohZlUMNMkV3M71RaUkil3EmSOFoRmVy86xBYmXoCtj/hgYZqyenq5VPy1BmLYZi6C0j9gdHGGKCYe7BL7VWxg4PSIxuCqc3dVeWxTMTtUCzpUYpnwfVm31VZMj+tb39g5wzMpXhQV0fmTYmn3m89afjQz3klMntXPlg6O6ritMoM9Ca7v5F/3Bo1dTvQVfAuJO57xl9J1YvJ2iCoaesWhqty0AWvhSAFvfCJ6hQt1wAbdAG3d02pnCCtMdcDDCpTfjcnmYJk2TcmF7oCxgRJxRjNpq4/LEihQvOmCoXXv9Mrl7d2MdhDzMHNbZNyC66Fm495g=","authorEmailMD5":"66d7fcadc1e35a76a7fb093eb184611d","authorUri":"","authorUserId":"disqus:chandrasekharthumuluru","authorFallbackAvatar":"","message":"Thanks, thats what I thought.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"389e700c-f37e-3ba5-ba59-c3a1274bb5cd","date":"2017-07-21T19:18:59Z","timestamp":1500664739},{"_id":"eef23b96-1b5d-3a6a-8bb9-f212ce48c69a","authorName":"The Green Girl","authorEmailEncrypted":"cecFYLxYNyJOh+6/HhfCR0Lx8KcL1CbJw1EEt4c9WD/DcPHSgb/R8886Q8qXRU8himbkQdeA1Zkvnb4qTFpIAB6f+q1tKCInW5LOXm2wLPGe1dLXoQP2O3XoNZkoIAupnz3bfQsQPcjTkKy/vOQcCcAgXfuQSmKjcrchLjjh0Pt6RkQUMikPNJYH7cDyg5JNP36+7YADUf3uoao+ZnCypvyv1ksZMoA3nsV/e14Ll3RAh1gY4VpBA9VC4u2Xpv5yktom8wdlh5GvXsnLn9YUOkBusCFdPZRGuB4SA73s6iazidVwEEnLaAgS5j4NT2RSCQzZ7+GFBnjoI1Vhy8w1P8Q02zLBHj93i88M0IWewk/vw/9kdEBERmcYZkXhifDQWer3OhcvtFKr1JangJVQbQFCZMw/SMVdLD7jMg9swsyQHql7EuEDmQ14aAkAu8j2piWdaUq9hUxNqSM50JCqjF3h9O98DqLDHcQZwzQRb+43OOFuPz//M4MUoKHVaU+9ecdyOFuczRbEgsXHV4fp0Lxc6FmDlmvEUMEtbyrTY6ZcGhd9J0Z7BVf8znK4hWFQyB3VA3Q0LQILILtYzID/UX280ZSBJHQac9p3nLcKAZofU+ruh6cmGFtQoAwOToEt1rHWzYsEqC4G4BwfEb7qKzhtpyjqePy9jaW78XQgNDQ=","authorEmailMD5":"fd8490780b732963d83e2fb3622ea4d7","authorUri":"","authorUserId":"disqus:the_green_girl","authorFallbackAvatar":"https://disqus.com/api/users/avatars/the_green_girl.jpg","message":"Eric, were you able to find a solution to this issue?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"33f456d8-1481-3fbb-aec1-63b57320315e","date":"2017-11-15T23:24:05Z","timestamp":1510788245},{"_id":"aa5648ad-e1f6-31db-98f8-d4224c1e88f4","authorName":"Eric Hesse","authorEmailEncrypted":"sYHd0Gbb/iwD/LElUEwDmA0IKfTMJsW5wXwOGzlRmMdC6/Ftbh4kO+6nEZ/1ASpmjnuAgRaJ0xMIG7nRws1QFMPYqCCTUkSiIXx4EIUnXzcPJClMMpmtmtNLnJ50fF1EgIyK53I9czgJi7j1TiERVKor7vKjzrt/ceOABFH3VCyWtcp9j9CMu9KX2r9wIcMB5EKCOXGRzRhWU6WcnunIsYqYn7ZFU7t4sfL34UCaFhG5wjT+5FpUY4PCH75YH0tQYHc4WQCBKlvPN5KQ2Rp2oUfDmwEaD1D11vD9GZOf8b4l3E5XAOBNKQz65jCJits2Nv/koz6cidzpXH4QFDqEH72l60UZktNDVfgnoMpwFItIZDyS58CWzlLdfBveaBOxhGNP60qCDc7aZx4wnIEva/UwrfA4qJftRSB7hwqBCxelT9Qt1+EGAz/3oYTHL0Q4UB7oOaVc+usI7zxmdpwuDlKp2xm5pNmlRyNM4pJ2HORJWE2WmGU9MrxP7ELtbs9f9KgEbir2FlZfLQoz3jvVqtw94iPMYBKa6TKoDIRcr6camHNM0NTEfo5sCkktchBjXOSvPt6Qg/yDQY9JRqbp6jD8n25zromTFIeZnuXRoice1Qtw+R3dL8myZSueQGkoFadatROXpyn8rZX9ASXUWBE/gW4nElx9ZjYSeHRyio4=","authorEmailMD5":"031134010a19b24e448a57f4ca9d5f46","authorUri":"","authorUserId":"disqus:eric_hesse","authorFallbackAvatar":"https://disqus.com/api/users/avatars/eric_hesse.jpg","message":"I was able to use Java to create a small socket server that can detect the issue. See here:\r\n\r\nimport java.io.IOException;  \r\nimport java.io.PrintWriter;  \r\nimport java.net.ServerSocket;  \r\nimport java.net.Socket;  \r\nimport java.io.BufferedReader;  \r\nimport java.io.InputStream;  \r\nimport java.io.InputStreamReader;\r\n\r\npublic class PBSocketServer {\r\n\r\n /**  \r\n * Runs the server.  \r\n */  \r\n public static void main(String[] args) throws IOException {  \r\n int count = 0;  \r\n ServerSocket listener = new ServerSocket(4321);  \r\n System.out.println(\"java.net.ServerSocket listener has been created.\");  \r\n try {  \r\n while (true && count < 2) {  \r\n count++;  \r\n System.out.println(\"Awaiting new connection...\");  \r\n Socket socket = listener.accept();  \r\n socket.setSoLinger(true, 10);  \r\n System.out.println(\"Connection received... setting SoTimout=20, TcpNoDelay=true, SoLinger=20\");  \r\n try {  \r\n System.out.println(\"Getting BufferedReader to retrieve query...\");  \r\n BufferedReader input = new BufferedReader(new InputStreamReader(socket.getInputStream()));  \r\n String query = \" \";  \r\n for (;query != null && query.length() > 0;) {  \r\n query = input.readLine();  \r\n System.out.println(\"... Query = \"+query);  \r\n }\r\n\r\n socket.setSoLinger(true, 20);  \r\n socket.setTcpNoDelay(true);  \r\n socket.setSoTimeout(20);   \r\n System.out.println(\"Going to sleep now for 5 seconds... disconnect cable please\");  \r\n Thread.sleep(3000);\r\n\r\n System.out.println(\"Getting PrintWriter to prepare response...\");  \r\n PrintWriter out = new PrintWriter(socket.getOutputStream(), true);  \r\n out.println(\"Here is your response.\");  \r\n System.out.println(\"... Response written to PrintWriter Successfully\");  \r\n out.flush();\r\n\r\n System.out.println(\"Calling Socket Shutdown\");  \r\n InputStream is = socket.getInputStream();  \r\n socket.shutdownOutput();  \r\n System.out.println(\"Awaiting FIN Packet\");  \r\n while ([is.read](http://is.read)() > 0);  \r\n System.out.println(\"Calling Socket Close\");  \r\n socket.close();\r\n\r\n System.out.println(\"... PrintWriter Flushed Successfully\");  \r\n out.close();  \r\n System.out.println(\"... PrintWriter Closed Successfully\");  \r\n System.out.println(\"Socket.isOutputShutdown()=\"+socket.isOutputShutdown());  \r\n System.out.println(\"Socket.isConnected()=\"+socket.isConnected());  \r\n } catch (Throwable e) {  \r\n e.printStackTrace();  \r\n } finally {  \r\n System.out.println(\"Connection close initiated.\");  \r\n socket.close();  \r\n System.out.println(\"Connection close completed.\");  \r\n }  \r\n }  \r\n }  \r\n catch (Throwable e) {  \r\n e.printStackTrace();  \r\n }  \r\n finally {  \r\n System.out.println(\"Listener close initiated.\");  \r\n listener.close();  \r\n System.out.println(\"Listener close completed.\");  \r\n }  \r\n System.out.println(\"Exiting program\");  \r\n }  \r\n}","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"eef23b96-1b5d-3a6a-8bb9-f212ce48c69a","date":"2017-11-16T14:16:21Z","timestamp":1510841781},{"_id":"4f16088b-a2a8-32d2-ae03-dbc9dc2a3465","authorName":"Arcade","authorEmailEncrypted":"H7xnc4VmAbp7Oh4e68m+NE43HgPOnkF1IMGbpkJAN3PqezZdXrmFtNvHBKl9ejqGto/bqGXB53ScKAVy9ToR2bkfsW6HkmdZlGxDNtkjq0lIlSmkpPVXodfIHyFeWA8GFghScaIJDhKQ5c9ZBDhqyJyZPkiuzbLPk8G7OKfpujnfA7WeS71BoGe/mmtu8WjfRrcM3WJeMnG1gdot46CrbofsZnZbbLhDQsoXnjnOeUho1P92yVNoqKiDxlbyvdXaEYGRmE/K6FEPJXisDW6xj0KEUisaSLlG4pXwAp5tRR2P8EqV/UGaZ11xL8MHcnsLQ0LbTY1rwlb/tSxt36XQzs7P+PLrEA2UV4DCJ7YTwbuGGA855p3XkqokhtS95zxMjDo/7IvXvYTDR23bVPOdeWbmHpKivuasV+Wiri7GkENTto63v7XWmnqU/JntcpUr4XOpGHa+ZFdBXFJhesTqKTPSTV2r8YGc3hC2s3mPaKCWifvweHidJkekCxDKHGx3BCZKkUdP0t6gALFCV3OGSlWPqBzqT5lV3YXWYvOtUjyNYiYWWMiBTB4AoUsZ8NGzHcg5Y4+P+WlBuE4N+62jhWWMkbj9WTzY1MOOtynRznXCjDMQgeeKyV3aOQQLMtZKj+g7BoC+wZjxoldpvlsigTt29L4W7i2ZPp3/QSt99Sk=","authorEmailMD5":"a137b359aab6f0e51136c22dc362cb53","authorUri":"","authorUserId":"disqus:disqus_Iz1OKztWhC","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_Iz1OKztWhC.jpg","message":"Sigh. Are we SCTP yet?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2017-11-29T22:13:15Z","timestamp":1511993595},{"_id":"2d216578-9eab-3567-9a79-2b91fa7a7e8a","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"You'll need some kind of keep alive mechanism.\r\n\r\nIf you want to use a timeout, then you'd need a timer *per socket*, and close that socket if it doesn't give you any data within the timeout period. So if you're using `select` to do your timeout, you could only have one socket in your `select` sets. This would defeat the purpose of `select`, since you'd end up using one thread per socket anyway.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"fc04a314-6454-3e55-9f69-2d45debc1f79","date":"2018-01-30T13:44:43Z","timestamp":1517319883},{"_id":"fc04a314-6454-3e55-9f69-2d45debc1f79","authorName":"Jay Ghiya","authorEmailEncrypted":"qOT7XiBaDVWuBn5K8AKX+01ptbFQtALkjyPlh5QISew9IbvQVWSMh4svHUzbasCrgEs/4iZgaBcGviCqaTkzFfi8+wsPjOTjdxHlZVMtHeBqLm0v7R6CaffDemvD1m+jMNPqxKNgi9B9TuaRnt99c6jItaNk6RhliJXuIWTsWgIsRv3rafBfoBT03+ielpP4YhS5ZG0CKP7SI/NIzZPO5i4oqjA+xMkDwGDvzUx4+8rHdusavoW+5DPiV2VJALc7OGfkVx/XJ/C2VV6/5LuA2ahUhYD6LdAwZj9n3rgkShcEmyGgy5Bj2CXsMs7aVal82GHP0l27MDfXOYD5hcuQHIvJHlnra8noXEuxEuZ5x2XdPuJ2dXfkVsYfhsIbJ1Uj53yVVTpxSBSuWExTmaA2Vmwc0Xo3Sg/rAGhN9tvRZkb7E+Hp+oZ966x1YkPRI6F6zVlFPnzgLs2jDZH8wmriizXAn6gLOOucJYStDRL7JeiFknGt81esQy6z8km/14yM4iSf7BlASlMQwr7g7MDM2bKOxIR1PXb2WA8PABWicBor3FCtQ9cYWsJFeg0zcnjYgpQYTXaeeY4bV/FdAwcGwmWHK9hZNZqMvH34UY8Mu65wFCrF9KkB177ct9mEBbQSat2F2sO3jCAiTOxakHSd/ex/sNIwVyydxb8PDAIcEw0=","authorEmailMD5":"b639a04e96a94092bb729714f996804b","authorUri":"","authorUserId":"disqus:jayghiya","authorFallbackAvatar":"","message":"Hi Stephen,\r\n\r\nThis query is regarding Half-open connections. I am creating custom protocol in c++. Followed network programming patterns from [http://dwise1.net/pgm/sockets/blocking.html](http://dwise1.net/pgm/sockets/blocking.html) and applied prefixed length encoding! So i use select call in the server side to monitor sockets that i have connected to, to check whether they have data or not! This monitoring happens for timeout period of some seconds. So, is it still necessary to have keep alive mechanism at server side ?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2018-01-30T10:15:57Z","timestamp":1517307357},{"_id":"fe5d9016-2256-3450-8482-9f1bcf12c983","authorName":"Jay Ghiya","authorEmailEncrypted":"rhR9dxJC/bT9RJD4mB0m3wkICHe8bRN/al8sE43b4w3Ight39Q3UYHwPGtBEq9MF/oFCgWHqNCP0fqesvbpCLyaHf097/FQzOVlamOYVVZGG1fxAvUS3J4iTsdSBFrBs0BciHrA+t0alyF9z30fXP7zEl/MUeyRro6eY15i06aMDyg6r44tdRUpOlAjMaHHCW5Li92+ZYKuj2uJW7YD28zU5oBn9KFj30jyHa2sz71DJBy1Yry5QwF2FWDO5WeGbIOH5r4k1q6AnRKkDYjJT0I8LlSVzy742W4vSr4slTYk8oGaYbMTARlZ3HveVVfZ6pcK8kgQC1p7GJRWYtRXaw3/SbGJvA2GlZr2ODw8N1gULL0n2W/WiUYpCD8SpOa7K3UnXqSMINQKREqEzMdotM3W1aDDD+QxtF9iRwzpHxxT03uxS++6VOouBbUygvavN6TMIgYfHCObRN0/24sh58X1gvgZ5Mc2ic4BMBNs2aFnsaqJhdZPe38iSycYl9Ezoj7F8pcJrfvHQeYEFZkYrDVU5Y4tNCgArylM2TMB2F4WGHMJXp999OzCZNLq+uuiEJRTU7S2GD/qwOIqbcZSiZWPpSIaVbjHz3gWYWhWX/0qYs4hl+ihgU8yOy18NxOaekw1DStt//t38LAe57v4wV9WsEgL8AWwKfnhZvPBRjKY=","authorEmailMD5":"b639a04e96a94092bb729714f996804b","authorUri":"","authorUserId":"disqus:jayghiya","authorFallbackAvatar":"","message":"Stephen thnks for prompt response! But, i am not still not able to understand the argument of having only one socket in our select sets. Select is used to check whether there is any activity on any of the sockets for a certain timeout period.Then after accepting the connection from master socket, we normally use FD_ISSET on each file descriptor for any activity before we call recv or send on that fd. So if there is no activity then FD_ISSET api will not succeed for that particular file descriptor and we can disconnect. And also this approach does not involve multithreading. Multiple clients are handled in a while loop using select. Reference: [https://www.geeksforgeeks.org/socket-programming-in-cc-handling-multiple-clients-on-server-without-multi-threading/](https://www.geeksforgeeks.org/socket-programming-in-cc-handling-multiple-clients-on-server-without-multi-threading/)","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"2d216578-9eab-3567-9a79-2b91fa7a7e8a","date":"2018-01-31T04:43:25Z","timestamp":1517373805},{"_id":"31d3c65d-40c9-3158-984a-61dcab19a741","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"The problem is that there's only one timer that must be shared between all sockets in the select call.\r\n\r\nConsider an example where you are using select with two sockets, one of which is in a half-open state. Each time you call select, socket A gets some data available before the timeout, but socket B doesn't.\r\n\r\nIf your logic is \"if any socket reads data, then don't close any sockets\", then socket B (the one in a half-open state) will never be closed.\r\n\r\nIf your logic is \"close any socket that doesn't read data on every select call\", then socket B will be closed. However, your code will also end up closing all other sockets any time any socket reads data.\r\n\r\nThe only way to avoid this problem is to have a completely separate timer for each socket. This can be done by only using select with a single socket (which largely defeats the point of select). Or you could use explicit timers for sockets, checking each socket's timeout by hand each time select returns. But there's no way to get the select timeout itself working as a keep-alive (except for the trivial case of one socket in the select call).","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"fe5d9016-2256-3450-8482-9f1bcf12c983","date":"2018-02-01T03:02:05Z","timestamp":1517454125},{"_id":"c226a9d7-de97-3224-ab0a-782f5bc1929d","authorName":"Jay Ghiya","authorEmailEncrypted":"cs5KN3hlbSpeOJ9ZKEEWJ8gtluB22mRpKMUFERS09OmtfjxCrs6i0cZFX8esUhjaibzA6AY/GrfWrbousyCJqGL7ytxGtG02XISCM2r3qXHNCyvPnySSnXovrui55KIdnvULDX3OHaDDyha/9VeJdAQeCcA1QDQ4N9MlogdttaTcKL8R7wWL9E7kftacbhVox/twOPmS87j2wSTUs/yVYyLgP7mZWc0Erk0gGfnVaRNcDNy7bY/ftzmq6dqIKmu5rgkUQZYGh3ZQ+JkbdGZgC53xsfSkqIeQN9RtIVP4bJCoOUUwQm7X8xUpe2rK2DTtu9NxnpgYzMNfX7pNhSUHB5AXB/TSiHLQgLT5bsNaEmFe8cjlb/symn3EnxuGe1PF69DABbq5SLIg883HV513K31nIc4xLIp84QTkcUqIt650hRDHVxoPJaEwdW+5V+oLq8By7blPVrDgA0wUWrO1HyI2+rZL82zP5ZguTXmScQXbOdWAj4Fw43IJgWVfxkA/nve2iH+lFUiVSr3p2BSFwJ8L+GzoLsUyFSkDaLrDxSdglOznTm5TjSLczYp0rMOUuPy+uHwnW+uNHbEqPMz+SpFmVgQAv2Q5c/NJhheEJcqTXG94lypDu9qPqfAr3SsIkmKBr605GQ/3d8ZtLYBT6dfloLTYqWZ0dTc+MoMvlQo=","authorEmailMD5":"b639a04e96a94092bb729714f996804b","authorUri":"","authorUserId":"disqus:jayghiya","authorFallbackAvatar":"","message":"Thnks stephen for such detailed explanation. have added a explicit timer for each socket using setsockoption.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"31d3c65d-40c9-3158-984a-61dcab19a741","date":"2018-02-02T09:50:13Z","timestamp":1517565013},{"_id":"c01c8212-b9f4-35a4-9bcc-823f3f574181","authorName":"Jay Ghiya","authorEmailEncrypted":"EDWyaMJZOE9LudWuQRrqGTP0Ihp666T1tf5HLCeD7U1ocLb9igSV54E6xKfihgtqORwUpVRL6HvMmKsxxI1Nfu+bEA2T6FGXfQCQYUSmm+Nr2sl/Y6yrPRgdpaUywmbvgrIjMUpqPKZrLvtVp6+YOI2t0gqXkC+K/pob89JgtagYAoKuaYod769WJS3WsInUQmaM+UKrgP2hoffv7Ri5MIh4UoWaSUanslh7p81HdzaH0vWSM7hcyvGxV1AX0LZ5T8tyGUS1/7LH7CcG7fktaFO1rykT1/+HldKb309Pw2wT72nz73541rXOmT0XhwYPfG6vuyvVSrMTAwtYAvnNU1HXPA33wv4KkI9DePqytkTr6W9Dq7tvp6ZaKJbLN7vbN17fDsdR45T5nX8MhMuGJ840c0oIjuLT6WAdp1v5hxKPFjbJDnCraKFxH6MYLVthCBeCCBpzCbA6EnYbR+tRv2kqSDuk1F6UNsI5v9SAOHgSgyAAuTvtfi6xwVUa/a5BVy+e9UITEk1xsOGRz+xP8J3hhmG05+35AfQoQMTqgGWrsNP5MvxuvDSJW+uLPSNvpTgms+8RmkAZ8eGKe6SNTpyj1S8q8EK+cQ2ynMJBxBOKhKP03M9V1EgkyTQfTUqGmnR3z2Glr3VW0JYLoc4R7cAJUiEu2O4mEQgfI52qsJs=","authorEmailMD5":"b639a04e96a94092bb729714f996804b","authorUri":"","authorUserId":"disqus:jayghiya","authorFallbackAvatar":"","message":"Hi Stephen,   \r\nIf i have to implement keep-alive mechanism for a process that handles 16-20 tcp clients and a multi client server which handles 5-10 connections. Then launching a separate thread for doing keep alive mechanism for each client is recommended or a single thread which iterates over clients to check keep alive is sufficient?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2018-03-14T09:33:50Z","timestamp":1521020030},{"_id":"2b48692f-214c-3c10-b72e-fe8d852cf479","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I usually do a timer per connection, but I suppose it's possible to have one timer that would send heartbeats on all connections. I don't recommend doing either in a separate thread.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"c01c8212-b9f4-35a4-9bcc-823f3f574181","date":"2018-03-15T15:06:45Z","timestamp":1521126405},{"_id":"539ec776-4188-36d4-a047-c2e8116673db","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I don't have a code example for this, sorry. I've used the pattern, but only in proprietary code written in native C++.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"fbea326c-2b3f-3d50-ac51-0e82d22543b8","date":"2018-03-29T08:19:43Z","timestamp":1522311583},{"_id":"fbea326c-2b3f-3d50-ac51-0e82d22543b8","authorName":"Altiano Gerung","authorEmailEncrypted":"ony1xsSuXLoxifnHRXiFj/I3r5U7WnaDRbSfQCMetSl2PU/YGrIP6B6lLnvjXpcW6R7l2Lr3RRWrNoClvLCv9AgEolSRlZwJK8dlD5172wzvjOIpy79UMStTIXBoByo6D2hTD/bIkwKM3OMP0d7ttnca9VFpMBRLEHtA8g/hVCfMOkVMyyTQoXxgdLnrQcAzoASDkQpuqxQiQGb+rUWYv3sUWDXJJiCT8USD2h9JZkaUf+jnvHOllp65QJPgAvsyznWTpCuilI/cG3E3wdtNhQJKFrfN0ZI5vErxxPo69DqZrZF5YAYMhcyOGZ6qFxu+JlZL7/RcByb03DkrgvXnIn6P9xM134VgPzne6jp/L0BaZ0IKNaSbGiqNlcC2KN4yYptyepZgQ+dO0ZPGaco2t98pvfTsw2zBxnEUxyPDHvVjytup7ILLZz67DWa6PsPxwhB5Eb0wGe9uhOE0A3r99/xODfFztJIbFFEOBAb2JgOMKYmswLev7g1bpnjCp7h4iBTd+7m2YnRS7gCw7Q7aay3DOWzOMD7vwNrqzKJcyLDcjTMaRis+QgFbSQODkLYgWPPHx8yWOfRmSgEWzDxW8BulL2wBPeRdqO3s+nZcVcz+YcKnHwKRndba8YPhmxVb6fwfW5yqPAMb0pN6Rg6NpntpG24cvQhIBU5T0p0Wfkw=","authorEmailMD5":"d1469ddcf624f008f5595b6a6cb40ad1","authorUri":"","authorUserId":"disqus:altianogerung","authorFallbackAvatar":"https://disqus.com/api/users/avatars/altianogerung.jpg","message":"Hello @stephen_cleary:disqus\r\n\r\nCan you give me code example links for : #3. Explicit timer assuming the worst.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2018-03-29T06:11:03Z","timestamp":1522303863},{"_id":"cc280dee-7692-32e5-8ac6-81a0d3a00036","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I have no idea what platform/framework you're using, but if you're actually out of threads, then you should be using asynchronous socket APIs.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"f6327e0c-4793-3e5a-a110-1170644fdf0c","date":"2018-04-19T23:55:29Z","timestamp":1524182129},{"_id":"f6327e0c-4793-3e5a-a110-1170644fdf0c","authorName":"Dvd","authorEmailEncrypted":"IoJciwhJ0F7h6Go9UR3eqsW2EMYGFwdDrRmgU1iAz44oDVf0dGxfkbgEMvvKeJrCxiHNd+n2ZLN6T9dKnxIpeAA+RqwURT0tVoHs0vlQ8mekCYzRr88PMPzPY0vYKeykc+bmH7WHievTcp1beMxq8BcnmAHPXbXUK4tFys1d4wMSBbtfJcxVEItM7AxFP5OyUX/T4NyOEThYHMC+q4/PBYgzzxI05DdhomIFU3g/cfdqsizYBRQ0jehwTlUM75eqZqtG7KxlpXp2JLg9sR47r7uySAHXpR1PG+JFcT8rCBAaQe+sBwDJt234BPXVf9t/1B9i2BUuQbLrqNAJGwnWZpPHox8jr4/GR6RUuzVRW+ofKq9r2+3ChTF4x30OrULs0v+9YwC8Gu07PZbun+fM2+0836FYSCXJjq+rNAFWHtvFF3atAXAL4s9lqXF/mqPBb9RNEXK7YOQDdTi+SqUw7pBKwE/zHSb6KY2mzLnCJJYY2pnmi+HGEDpGgAfYAYUwZ1WIYi0/h4cKbmwjA8YuUZfF3f1Ps62LKJfJGXh08IynJzCrw12Y/pzcGeqffMhQhSHInlw4ykqc450OOvYt8R2qf6gogYkMcESUSJH5Le/WSlyE2irOYNTPfsPE7roAnEitj2BNNg1Yr62Yf3LH6bV4SSprW09icjsGW56hAFQ=","authorEmailMD5":"9d0036728b83a97bdcf964cf1ed35334","authorUri":"","authorUserId":"disqus:disqus_rYtMlAHr44","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_rYtMlAHr44.jpg","message":"Im using timer for every incoming connection but still a message with \"to many threads\" show up after a few mins. Why this?","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2018-04-19T06:44:58Z","timestamp":1524120298},{"_id":"5ff9b880-bb27-11e8-a5c9-b1c933868169","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","postUri":"https://blog.stephencleary.com/2009/05/detection-of-half-open-dropped.html","replyTo":"dc4c4160-bb21-11e8-a5c9-b1c933868169","authorEmailEncrypted":"cktApk2vJh5k9gAvcILHNFv5bHz1C3lAWi/IYki8NMTS/Wvm+tNBok9VPRNw9wAI1JfnOwGN8As6kOgP9qE+E1gGCmS8jcfM3HSnQR3+RSiubP28fmjr84DDt4nV2YvL7uoAgWHCdqkNuuP5ElKFC8dZ5B9jFcaCByzJIaNISu47RPX0RG+Fg3nfKonractVR11/2TNGH4P6C2poYaPznOhacqouGyNHXy5m6r8aZfqyFqHHOaNxCdiN7o8FHHQXs8x4+ctMWQGogepXhB+nh4N51JeyrlvDpC+8iFVGIFJXL97PESZy89i+3lywPNmrT0gTAPMq/xOIOJkh4vEqhi7ly3Jk1FravYHg7BB+kykYW2MYs+qWQADYFKFR19uQYjmR28shVhu04Ofao/XyRd4dkAME0zO5SJtA6V/33RkRYXYBly9jceW5e2cGUhdiXv8FjcXNxMZWmALsnyCdDj37wfTEdg36Vrcc/mnM1pWnu+eW5pVr/+fU1W+XjUaR39af0LcE0LfEs9TyeEmahBgaWGOdnpZEOHf1XAUldMUxCRAf0216cKl7HNAIeFSTjgOBfU/BocIrks6IRbWkiT7xhy2fqmyg4xwfoGC1Ur3W+9SsNllAe36fgKSg5mxTLJUMu49zqvjEtFnxPmjDdwXNYJVvf5dOf569wXnfX2w=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"All of my experience is with TCP, not UDP-based protocols. With UDP, I think a client-side timer is your only viable option. In your scenario, consider increasing your client-side buffer so you can re-establish streaming after the timer fires but before the playback stops.","date":"2018-09-18T09:44:03.227Z"},{"_id":"dc4c4160-bb21-11e8-a5c9-b1c933868169","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","postUri":"https://blog.stephencleary.com/2009/05/detection-of-half-open-dropped.html","replyTo":"","authorEmailEncrypted":"noQEcRTVGRBlchVJboTwJCsYhMpnQmbpf2BYROOC7Bwn6oUzBg0uJj6oXfZOHIQBN5Wj2IYgLmWfE1vCDNOWvNPeE1kENExfy5rX9SkL5ZjD1tC2w4PP13sWYLDR94/P2GOVYhO4O2QfX8hu6ABPdQSBhFakW0oCm3WAlGRJseUVk3Udz+vsnzEtzFVEpBB7jWJ0H0Ituyr5nZPsmdUexixIFyKd/1wXZS+QfPycyYbxAQLp4QBVthYANMELw4Kju36ItO+ef3E0uiXKUDbuqXn+8jbweX77aN22BgKe7ljhVy+9j9+ksfHpv58LItlpNSlY2rubqqr0/0FnGm4tC1vyOb8CcQIhllFNdiZ68IRkTU2QMpnuztB7x+q8RC/UHIKJ/ahG1GWU6rnk/BrbTU67jx9/9JzSGsKugQKXXRsoXawC8LBftTfnAraFkHzB+g6K9i3qMmrktkyFeh2J1ElVrSKR/FwENpxmsxFBZELFdIGiQUtXfh6embMh6bRfQH4yB3/sXOMAaNNyb0I9L/KLhaoazCKdhNyPNN6TaM4dVukyA2QEzcgKUrvwyv27dK1w94bezPbNTVkZbzpHNQhOFQYqbjMGxRS34lVEXLrfKws2Oz2alYU/M1uIGelUB7MykyaS9z3Fvq5VuqBk3daL51PojOWZvMPcJeHCTjk=","authorEmailMD5":"cbb566a56b6d67d2f59e46a421cde1a6","authorName":"vk_gst","authorUri":"","message":"Hello Stephen,\r\nA intuitive article indeed. I am having a RTP over UDP connection between a client-server over WiFi. I want to be notified at the client side, if the communication link between them is broken. I stream live video captured from server to the client. And hence I want a detection mechanism that is acceptable in real time.  I was considering using the timeout mechanism at the client(solution 3), that sends an event in case it is not reset. What do you suggest? I think keeping alive does not make sense in UDP as you explained earlier in the comments.  Are there any other mechanisms? May be also periodically using command `ping` to check for connection?? How does that sound to you?","date":"2018-09-18T09:04:34.373Z"},{"_id":"e28c06d0-4601-11e9-8eaa-bf9870a70db5","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","postUri":"https://blog.stephencleary.com/2009/05/detection-of-half-open-dropped.html","replyTo":"","authorEmailEncrypted":"v6hP7cskZjqr5Y5YfRbNA77a71FY0zw0nmm/XnDtv6Mgd5VnwwKjph+MoktcXx9xhwAIPmoXgUOukvdYZqpzBzZyaw6ICK8B4MhcaLiKR8eeX+bkzQAfJROY5bgmhunIb2hgGaFJuLsBUY7viOnTD6aK4LjKLBt4jKNkCH/YxTKabmXm1Psb4ZPwNizWkOrIPPCHAZ83pyxfakRSMRWlhCW7RBrJHfLiGR/Gcf+FrkdGrniJmFzAGB5Ipa7oUNyyMaPNSkXpPP8gJlUReFanHe+JPCte0/E5eMTnNELyQ36u2+JubrcMNNJIh5wpep/9GdzajE58bSbo80PsL1GTxE40opGjLEJuZdb+MkGwBkW3PViwxcRHwRBseTm3b35PoaUfkbxN2ojXaO/63fZgBi8AAzd224PqUhHmVDZiRM/cOAmAI2aity48ph+boNGhmMUJbXm/Y9G4QjV8tohsVepQI0MbNNH+PLvbckPjP1S2FUBVkKH7t8z8fWWyeQHzjrxiLeJVbTilIz/ihdBb9G+gS7T6hDZ7OwqIaJb8Z/t69PG6JvR3JQT/R0hGrHdWDI5rnVFAmo1TCd0G/xbIfB/gmdzCp+yuVWI92MnuqSAyAoPUO9MNhkqbin81p3pPpagOMGTsi0RGIoSFyHH0f9FBrOnhqFylEc3O1cZP0PA=","authorEmailMD5":"6eb4fe21aff9e2730e8c23c6e8690fb6","authorName":"as","authorUri":"http://ua.com","message":"What happens to half open connections when readtimeout is set? doesnt readtimeout trigger?","date":"2019-03-14T02:35:52.814Z"}]