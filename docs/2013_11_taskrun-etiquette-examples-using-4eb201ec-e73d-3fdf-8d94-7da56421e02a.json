[{"_id":"a94c24a9-4e39-31d6-b46b-3db54c5fb351","authorName":"Chris L","authorEmailEncrypted":"","authorEmailMD5":"","message":"I'm using a third party library to convert a PDF to a Tiff. This library doesn't provide async methods. I've written a method that calls this library to convert a PDF in my MCV API web (HTTP) service. I then called this method using Task.Run which I now realize isn't correct. Is there any way to make this I/O bound method async?  \r\n\r\nMy code looks like:  \r\nvar success = await Task.Run(() => ConvertToTiff(filename));","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2014-04-23T23:23:32Z","timestamp":1398295412,"authorUserId":""},{"_id":"0e60493c-7e6b-389e-a303-b957b9bc86f0","authorName":"Stephen Cleary","authorEmailEncrypted":"sACXExVYj1vqfbW+ijmlJ/3L2Q+zNRT3GpZiDyjKeMl6dtJ1f2AMOxJtx4ZrlVMNoPgyv41Q1OyEL+HU8HapneKk+4OLTTjy5Cnbe1Hz3uUxlxCxzOH98oL+V7JDu50bF7tRjkmqWWKx/9uv9sdtnQaHZP+TD+cBVFKdr+FIWUxgx5YKPnLEd6KdW/ogvvS8xm7x088ztB/VKA2424AYhj2LEKZOVkD9t8UA6GayMCxEe86CY7V/4kx1wM1FKKAo9svy4f/YsGcQHVojJxYJ3tluPr19loUw/qMLyEHJaG0FTxp4UfP/e6oRFtvGEyDAM4K/7CsBBfW+3oyzpMqWCPQJAbK8yAtVXbrmpjRpSw2w1ADDt16NRWWb74des4NpB22HmxZD5bNtQ1ioYNrDLrunjBGGK3NIPl/eCXZie5aZ7eVeXRi0i6z3/KsOCONhlg5+43A2GG+u8cQJM9ZcdzEz9oM+ru3VAY0XoOb///RlOrDCfNUfmYUNfEOMnGLBpoGUAi58NTJvpV9EBJ/h6Ch+lrI4fv+zolCMsuj+B/pUmhFSAI0USP+MbOx1UVUjnYnszFkzaf/upOOTHjMiH0WFzkvSGIjnf0UXsA7KvPpa4jM3wm7EhVmFM6xtumM17chx9PEbQFyFS7buEYjIjiG9Kvd194yUxVRraGQtGwM=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Unfortunately, the only way to do this in a way that is meaningful for ASP.NET is to actually change the third-party library so that it supports async methods. Task.Run is an acceptable workaround for UI apps in this situation, but it's pointless for ASP.NET.  \r\n\r\nYou'll need to contact the library maintainers and ask them for async support. In the meantime, just call it synchronously (\"var success = ConvertToTiff(filename)\"). ASP.NET will work fine if your threads do block - and it handles that situation very well - it just won't scale as well as an actual asynchronous method.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2014-04-24T00:28:41Z","timestamp":1398299321,"authorUserId":""},{"_id":"502c05e1-d369-3852-8e62-615921073af4","authorName":"Chris L","authorEmailEncrypted":"","authorEmailMD5":"","message":"That's what I figured. Thanks for the validation and the quick reply! The other alternative I suppose is to offload to a queue that another app/process handles. But that's overkill for how much my service is being used.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2014-04-24T00:52:26Z","timestamp":1398300746,"authorUserId":""},{"_id":"8fa07172-8556-3b97-9658-cf3e7f3f0b49","authorName":"Greg","authorEmailEncrypted":"ntqBTiEsG2DV6tKZTVBzdCUuezSctDFfYQl6kZEfQBsE8KjRNMNe5bnzMrSXA37wuOmyKXNq/d/ZvvhU5p+Clg3lE/7PNmMALaZdrOCZoJuTiqMwkFULRfxAu6eZRprk/L3CxLtYsljG1rV6QUljgSVnqcPq2k21vqL7NRrZR2NmoqYa+UTxMqPOofZaS+YPTRQuVjvCeZDVGhzariW/NNS1v1Sj8ZBxf7UB5nllKUm/wKxRb0BOL6tPa5o0QedVp7BkJUWRzAB+ktvjFBtHsAtNa6BmC+weNM1cxw0omu0+atJiD++1vwsOK9qfWp9z5ddvARGdPM7qhtvCyg6nVS7T5fwCTkl9//a1K5CXeQpFQO/nR7vC9dZzjd3oWixRgFd1QFV+cN0FKT1Cvcbnuv3w9VHd6el8Xbk5QC8cVOULQdj2j/JQzX3mrtNdPPm98i3rqcZtuCHrQv7M+vU0k+injQgjXcmn8UOL7DNRcn31PuTSOC9j/n3g8Z1GEp3X2oR7kV6c1ylR5Aps+MZzm3DWNsdL5cun55WtOjRHYiTyEq3mNDmpk2IA9NCrqdQ5TNpJPzi5iwmkkmKz5rVOPJxs7Dw+Yp8L1PNqAXDpLBU3/5uI4I6lL/9a7coraGgDcwQ45DOc26L6PZjtIl55gFMlxzqfuufrdhac2O9xLo4=","authorEmailMD5":"f3eac793786081525a51d07fc1d15656","message":"Nope. See, you're stealing an ASP.Net thread pool thread when you run Task.Run, so while your MVC Action might not block it's thread, you'll stealing and blocking another ASP.Net thread pool thread anyway, so this is like paying a home mortgage from a credit card at the same bank.   \r\nWhat positive thing did you really accomplish?   \r\nThe user still has to wait to get the   \r\nimage, and you're still blocking an ASP.Net thread pool thread.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"a94c24a9-4e39-31d6-b46b-3db54c5fb351","date":"2015-03-20T15:07:49Z","timestamp":1426864069,"authorUserId":""},{"_id":"1df7ad95-ea49-3413-b4f3-f6534376d60d","authorName":"Stephen Cleary","authorEmailEncrypted":"XUJYRLjC1FCNLIO4J/rnaKsl9cuywZ1nm7XjODDF8Kree1xK4UCfCP5G25SC1M22JofdgBtZxqfUzdKNBzm3I8WJ8wHcaFZOmTX/iGw6A4MFdYBU4dzLjsbvyCp+ptojf2A7yD5cJu3Hz7NZk+DUirzqoUKX4kf9UrKCShdpuk4SBeWoWm08yS4OV7qWg2mTZjWgAEUTJzTN/HEFMiU2cL3Za2XB793FQPqin69D8ZKrXNXbWbnIL9SGbojnShjZi2nTeEAjZk/iCyi2PXzR4+myUq+Wz1eR+QAwR849xHO/UskEgY88Ne8Q1h8ob46sHvzx70EqVi8ZGzQHi0iHquiWWEKBWtKKpVamHVXEh5VQGrjm07qi39x1tlJExd32KfQWOb/bw4q7WZLACKEU8eQXe/CN2FBYDshrCHW8I2Q1Dzb155yGqv1UMfWnXwfckNYKpLVpF5boFzGxZ9VY60EW0Ta6mqcCKm0oYyEi6pG5jvqGt0gb27h33V3yDwoIrMwTbFxk4UmRKFB99hP4jJmezKXp0+9Gz+chmJNmqoqysfB4A+5AJqxLueX42y8nePrwtJsmlZ/owyNYRbxaS8QY5iBP4meyKderLWYcgTCUhFDt21nU/jwQEzcLusBdJb58XBwOVCO1KW2nZZLCKKDLkqooYniGWMG6qB90W8Y=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"No. At the very least, you should register the work with the ASP.NET runtime. I have a separate blog post that talks about fire-and-forget on ASP.NET: [http://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html](http://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html)","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"a95eac41-a6ff-3320-92c4-6d96bd83da11","date":"2015-06-12T11:48:29Z","timestamp":1434109709,"authorUserId":"disqus:stephen_cleary"},{"_id":"a95eac41-a6ff-3320-92c4-6d96bd83da11","authorName":"Prasad","authorEmailEncrypted":"EetrIFi9Qq0A5KP0sRMBUXlLPe76pyDj+35LWD5nazdqPi9ttR7QK1nPCq4+r+XJn2UaYIgtbGpYEGAQGaTq+4YMU1oYqnBZCFR8uykOH3jzVNrhi+L7V2P1il7tSeh+G+Sbi6KMopSK9O4HyQAwiNHFvepAI9pFsLXRVPulUDsdTRWcqx2XFvOgENKubIf6+lBQuuok8b5JGcZan0Of19VF6avGdugk8+Xoppc8pFwxp7ARiRR7JzwRnXcNwGeTdPRh7PFt24Gr1y3osRtWz1BpWtW8ETfXLzXBxx+fwRx7p+n5tkhtmV7bA0+BhxZIyF2FaTNziBropkNFOCqQ4z3RaD+WMqjCHAtdXSjoRsJyxObgiAsLYt+RebGX2S0Yi5j3QqS5db4yXPoJxf/qxP3TDzfUMSgAeXVNug5sjc9467+7m6d/SZhOExHO4mrSRoQYNhWpi4zl1d21TmAiBkebkQZwF+Cb4pjp9fXpQu6GdE0VdmXcELwT1vX+/g0paHp2qDHlj1XqluDFgcZt6zW5ag+TMgi/8lvUyR56a0hkkIVBNzy0DKbH4yFLzsTsqcmcN0qU3/4j2wdVMhJt339Or+INgBErl29nnKjX/0tSdVxp7uyyeS0W7O0KnYbbSp0T15qP6J3BdeLCAp7itPp8f9dN9lumoxbA7y9Opck=","authorEmailMD5":"ed84de8de17c845d622079117ecf1895","message":"Hi Stephen,  \r\nIf I intend to perform fire-and-forget cpu operation in UI/ASP.Net thread would it be wise use Task.Run(()=>CPUTask()); and not await on it.\r\n\r\nI'll have 100's of requests per second which land on UI thread and for each request i call Task.Run. CPUTask() function takes less than 30 msecs.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2015-06-12T09:43:34Z","timestamp":1434102214,"authorUserId":"disqus:PrasadPillutla"},{"_id":"ff6122a5-94e2-373a-9876-3a48a4c670a5","authorName":"Prasad","authorEmailEncrypted":"OXWWQbwsa6YXJyMZ/OvvyfzxoZ6uJhLHj+xJ2lRSo0+1qBPYRgBuE5Zjn2B7gjXqXu/2vN91vmzGTITDa/zTdae0+3PG7EEf5tqJoz2GXrj+4SEKaOD31kAGpTO51/Cof9LjjvxCmTAr7MyaqbZGARgqEAvfnMrvg8HQI1qxbRRTpDp/gvVgymDUYzlcbH4w/H/VJXrM43c7UyBoHIWWhvNmcuhm0PYlvVd5RCKd2jWL5SZe2V3YRF2tJIKErCsp7Ji3QT986YSmzR2C7az4WhL/lOvLQPKH9YKcqSUtQ8Z+WvjipLhOQnNzq7xL8ct6hmuSmeE8gePJbtfZzXwp2OUTrfb+jURaZWv3+ahKy+h82BGMmFQRHihgwoyfUXrhOdrLYsWWPCoDrWGmO2CM0sojz7diJqEgs6yPQOC3opCZX5hEvi3oyV6K9gjOooB6LeqeAds54C+6qCE+I+9kffpRPlTICit87z1R6CwAwRG7ktO7VW3Ny41tBOPSBTDirO0dEDPV9xcWHVTQdVzF0oGwwIzCe6twsErsQ/CoUM/yUYCvjlKPjLpeYI7y8SANXHW3Jpxo1uTT3dPGS+JZxx8gPRE6yV5DFVSiZzBedjzfDXM+wywVpRvM/5et07q2B9ff812thiM+R7grueGGFw7F3IoOR/SsZQq1heyCjfM=","authorEmailMD5":"ed84de8de17c845d622079117ecf1895","message":"Thanks for the clarification Stephen.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"1df7ad95-ea49-3413-b4f3-f6534376d60d","date":"2015-06-12T12:34:00Z","timestamp":1434112440,"authorUserId":"disqus:PrasadPillutla"},{"_id":"3a66676a-95ec-3d6f-a20d-aab0ad642e42","authorName":"Sim","authorEmailEncrypted":"UCnE9POKlhRflYXQg0LBmtrMxK5r70/rRKnuhj8rliwgr2BiW58K1qb6d7FDlD4jU8XkoG0TGGZOM0xuYlKEJbu5Xh3LVe0eTJl+v27w4cqgKMj8fLZv1FNIvxAf4kd3fDJfJHqM72PKx3MmWQjhzdhWbWPknJChPj3YYW82zwZZnbzgolwYLNh1kpcM4zFpQYAi+k83JmPOY+8ERzcBKFgIQqBHbtQWINaAPwrotr3AHvnjggeu3xPS6K/meXb1V91ANJP2CDxQcRjEAjDdWCy4vGKVlzWSynxHoxXozew1+xTGFOZLACjwnFuIiX/kRYqTRCK/9fEjPVfIf5QMYTt2ntaF2CibiqsetPDnXUatOEPIxCvtHYnHygKqhwmbDCbI9nUynfUzn8R/1Aux7OYmD+tEi/ZxFgunJ2MpjQr1KOjoxqHKe2RnVEvcSjMi8KVnCV8cz+oQVQAHy8HAqioqFPrFfX9u2PNSYaP9Hg+oNhdE0qH9tPiLKUtayTjyWzsJwvq70rJQxNpb8ZBVjJXfQGmkuhNnNYdJGEXL65TVuroqJB8iRYDLD1TCbxvlCSGKlzThFuP5wY5isy97fuNzxzTIob9jPpe3sLVUKcmpQUFIwm/r1BmEUFIi2ZRZZDxEcepluvt7nYIXC3uELslz/0zTTxg3TQld/ubgDAM=","authorEmailMD5":"756a19cedbf833909908c70a7cbc6c30","message":"And because the point should be stressed; you should call Task.Run this from the UI layer and not in the implementation of the method.  \r\nThis is to prevent the UI thread from blocking and because its good etiquette","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"70ab64e5-7c87-39bb-a80f-219d10a7f954","date":"2015-08-21T09:49:59Z","timestamp":1440150599,"authorUserId":""},{"_id":"70ab64e5-7c87-39bb-a80f-219d10a7f954","authorName":"Sim","authorEmailEncrypted":"QZ4EmmwuEKRNvri7AXuOoIS9vn/0Xo6X300uLWdSeCv5k15O86i1efjQEkprp1K0c+UwYxk15eQmmzMVB85ibH3nt5OB0ek0k9f/3ckJ8Yr3+YZqCS5Njs5qnKTk7Gcp01F9Ml784j5LdWyLsXPJHfN1elqLRY59qMa6+QFi9av1lDdkrlXpMf/m2f7BQdIp3uNIbWKHftaLoMZuiscDuWUYkpuGA/d92s+DWF2u+RJaFCtfE4YgQQBesUvbp8lumJdS87PD047KMO+GbSmpzZLdknJDIAqPn4ogtI2fOrbZrTP1WIIU56JFMy9y/Mw7a53lc/xz4XAC5bNOISBRu5VUf3bK1h+rZHGUy19xXb38ZJdq7RBZL0EfZSVThQoILzvILkQcVitFWR8MAusCctMUNNa1Rs0Pq0LfIrom68Dj7q1/wg56/VfKssbxIvwDuGuaQG/FBS/zWwW4J6TXjczvXrRaC8DeU+wqh7n3CVpVh4bKncr13BNerZtCHi+eULEeVKVFhF90/HbBSlAb40l+eNn42M2QacgNux+NAz/I1zKkTUgjoOkAXtoHlc5OYUOGIWlJbkbDJTnPyDzEkH0Zn8IZ2DzyTdnfUpp9TvzVw5KhNJ0kZxEVJSQB/9lv+QdXl8un6+vLZjVdILxO4Y6BRMUalt+vGzKZHdCBMss=","authorEmailMD5":"756a19cedbf833909908c70a7cbc6c30","message":"In Addition, you can avoid the overhead of the \"re-entering\" the UI Context, by using ConfigureAwait (i.e. await Task.Run(() => ConvertToTiff(filename)).ConfigureAwait(false)) when the UI Context is not needed","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"9687f4de-18df-34ca-b880-3c46c6f6c503","date":"2015-08-21T09:39:53Z","timestamp":1440149993,"authorUserId":""},{"_id":"9687f4de-18df-34ca-b880-3c46c6f6c503","authorName":"Sim","authorEmailEncrypted":"X57aA6/qe1vDA98K6mEzI5CE4H80YJVY63RzeAWDvioIjHyV9kB+gQZNRyVeD6GK/YV6+YJOiuq4aWaW6lXLCiA/wIkC6KK0GZIoI1210JruEYqfxZcpTK+CHuSWIqlnky4D6sDjF0nuWKijnrs22UsOfi8zyaaOTCgEjRvJ4cqYQgh37YEK4flz1t3NzrxhQhRXUUolQlvVwZxqrwKpuaOTF/QpkzWGlG07ScS/SBB/bp3bg4/crc/D2LnDjtRz782o469jphYKq0jf18DyJMVB05E5ENlfF6psUbmVYXgBS9gnydj/i+1jfA40/BFypZ8QZ7c9Mka9QUF9jIKpvTrSX/ekrE2c8h8CdEK70Y2jFNp5B0UhjAjzo5oTAO4n+0To2fnb4r6dC3Yh3ipFhW4/r/Fz9Angdi5NsbpS6uuumZw9h7LNfIzVYZtr9WMnnfcEDEAOnCG22d92z22kJ2bEGD485iCZb3DhBXy17mTX/Iaw/CJUYmGZ7RvhR9xgt3S04a2T+szflPxVmiXFGowjcH6QN3P5SmkCi8Sb6H6Tku1nvb3jY1r5+ybURmCzCHtBAPPhK4PpkgNfiJzus4KY/OIdTunGPf/fXv5d8QCKcDHNZzXsiKO0YrIwCN/ZcHWoOdIBmLBP5E3L8rtiMmQDAUZJJ6vsd19O66TvN4o=","authorEmailMD5":"756a19cedbf833909908c70a7cbc6c30","message":"Actually, the benefit is that you are releasing the UI thread!","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"8fa07172-8556-3b97-9658-cf3e7f3f0b49","date":"2015-08-21T09:03:43Z","timestamp":1440147823,"authorUserId":""},{"_id":"d0b313cd-213f-360a-a410-4e601728fb4d","authorName":"Stephen Cleary","authorEmailEncrypted":"jMZHbXsN3a8MZUeCNohv1PBIABoDNipCSh8iio21rF6r3BAlHIN1AcU4CFVZKvFsYODpL1NQ5CZWTWzZIfOHkpSFrDmLxjqeo1Ni77NiBv2phraGfRyygO5reZ2BqXm6+3AnP2Gcejk/6PDRnCz/E8pCL3gL0D984gYFaCTqzIP5pBNtMtLV69MtRClzq0NM+bbS2JJzY0+tGjgTEOShnMFI9wuEuB1fZSBTwU6nmBJUWodYr24QK13PXhePYsMUL6ht1eVlgtn8o1elx32F/5xGmNRvCMWeNaCmj3lPT4M7CWD37TcC2gyN9Hhjz8KpxsrPrys8NX8i6qXa6ic/Ipfa++C57KV3MPqSbV6GAexJ5mOJD7uhfKXPWUQ9OWNn4Ekaq+3TSEw+umXSjYbeeNaW0CIDMCLLGWo+nqIPJ0TWa+EiCaENC6Kq6kSxSATwzEOPagAdCpgeqdZCWf2HGVyfUScLYpyBqmKROrQuOs0gvC2+1wsG0NVlyYv3ltZa9Aza1amJpRgUHoJlbxjdw0VW3vgCCMaLfR4j5L7fxMznS5Yk4iDHjVXkK12jpQismLHwgg0uq4ZLWDTYDwrl5g3Wle6HgYTRFM8p6Z6bQUOQus6oEWWy1pyK9mIn35kzc+7amgVUFxNORVAYBjBKtrBBMkKYc9LG0pxsz2Cmk38=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"There is no UI thread in an ASP.NET MVC/WebAPI service.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"9687f4de-18df-34ca-b880-3c46c6f6c503","date":"2015-08-21T14:01:26Z","timestamp":1440165686,"authorUserId":"disqus:stephen_cleary"},{"_id":"848871b5-585f-3dcf-8289-f73633447d4b","authorName":"Anders","authorEmailEncrypted":"bZh7FALb+9lao9gx1XUPXRM0CAIFZsimDSxuNYmrUMXv8NIQlaaEIHpUL9/B716ecXbuwvnRnUhykyd3W5vguTTf9hfqSswyMH0Pd77xhwcINITr/Z2tXko+q5FO86n5C4MFA0DxsY3ITgMCzhnjd1YUgF/w0ag+Y/FbxBNV0he80ktoKuK4I7eMQaugRSRDnDZOwAn8RWzonXRi6TWVV/avKuKdmbUig4f0CXMiblyeknbVCKAxM2dyYBqVaj4q8i4JNmzJ62cFAye6BssMIlyMxhUExeqDWLJEL/sXRcSy2T2m6kaGvt4NSJN4lQKiiHoccyRsb3+zRcBOl1U8f6zoYNrC9b9GIiygfiOQ1boFPC/QmhXQWdXm1NyBEw4dhylrsLsplrKXttCx4IB9mfnHA5T8NKbUJiOJquI8blQ3ujBcrc3SqjwGIZ/wXfuYQtoUB3LyUhP7wqdqSEItq3tK6E6IGExtF5cD7VTQ7PaFH1Nz4A4sQ8v8nQxItZ4eQGd/ln5WU6vadKDgJ4lj9pXRs/EUviCem8r6vV7JFGcX5ozO6av/XWpJhGuKSAl/4ylrtvyFsXNIW7/wt5JljwdIpUiNndqudLFE4DZHCl1PYMpVLWAGV28nUSR7tootphUb16MnoVUw/vTBaeahCcIHvMU7BoXbLsHytDD1aqY=","authorEmailMD5":"df0c87fe57a95cce1df1b512109a0e0e","message":"I receive a CS0414 warning with the variable assignment (and it is not pretty). I wonder how you avoid running into the pattern, thinking I must be doing something fundamentally wrong. In my example the UI thread wants myData as soon as it is available, but I also want to update an IO bound cache.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"b576f01b-c140-3da8-94d4-620187a8bd11","date":"2015-12-02T19:36:34Z","timestamp":1449084994,"authorUserId":"disqus:disqus_czcHhkHzPx"},{"_id":"84c7f830-8ab0-3c97-8abc-2845cb38e4b0","authorName":"Stephen Cleary","authorEmailEncrypted":"qCgLZX/H8ksRuNJO5BxL5A3au0ufU4Gk8DKpjjaHSiSLcnO+WxRd2nshi+ebqv6CfBgBcfQ/dUgyF4itHCoC4lK/CNiHe549avZuDy5Z0qqtez3Fc8P7neUCDZyKWA1aV336/Sw63zoOgRF7isyDZBp7TE+1VMUcvxjCC30gnWdiOBdJwQUaZGFD+L4743z8KyUqVe13kfZFUtKH1Yyv92PdGZyRPRk9jBQGn54EZGnMp454leQZLe3D/H1nrnKbLk4QxAF2qNL/14ItcaPfTKIj86dUgdGm6MAxtNW+xy+kToMK7VN6nH+rqipu4luMTwVuQsxOan7UN4Fysqk6AmwtXzcfv2Ec3nA+tFhlHN2ASl2lVXIHjoEVxPjNS6MJ2o3BBJKG9VrUFpUTKyQaYH7BI8yOnoqUN76enLhdFrgqitZ5f0VdEeYjq7trYTr+l148B2VQRcBoCLiYtdIZyVhMBZk2nHYCMsWahDA+F8qtJg1zohKNpZJds7Y7AjtJkpXyhNsdOWTKP8VYxC8IcNno4qKRNrtaJqUChkatttZpBWiupTyFnykzj/vqmAXINI7Y8HsiIxen9VZXa1c4eCcq1tpbE3nB3OlenwvAxDrfDi1h76CwV9e6fw0av9tBVPeT8s23sknqdu1/1P/zJ7g//s/KCiwZPUKdaR3Z1G8=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Sure, you can just do this:\r\n\r\n var _ = CacheMyDataToDisk(myData);\r\n\r\nNote that this assumes that the method being called does not introduce any functional differences if it is not called, handles all its own exceptions, and does not attempt to resume on its context (e.g., the ASP.NET context may be disposed before this method completes).","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"99282677-61f1-30ca-965f-340bc3843a20","date":"2015-12-02T16:32:13Z","timestamp":1449073933,"authorUserId":"disqus:stephen_cleary"},{"_id":"99282677-61f1-30ca-965f-340bc3843a20","authorName":"Anders","authorEmailEncrypted":"PwsUaTY418KEdmNctimbnPEtxLZk/kih7w+VHGJUEX6hsqRhrVcQgDqd7IwbHeSLyzBKG3IDteUg02EyFlSQkCD1q8m+nRGYr7VPhDslvKXpdLlpx/Rzi4qE8FHsV6MPq0lIxNyxYMuWcCBUWMNk+rJ8qUOR2qhA3z+hN8EltuV1wkcwzJn4MSdjn1ZRYny6HCp3tb8b7yXTmW0/TSzz+S2NW2Jx15JgS+j9ncovi0m2ab7/hgyeOgZQoS3epNlQIyeN5fMsw1aSDBxeKwNvJ/16jrNQi6zpR744BOUDXOWsCaCEWGbquvk+5ulCIq5Vjv1zIbkItvo4JNYWjUTjgbRNseNx4twvB2rslBmKkRoYBVZlb2k/RxHZVFFLPdPPvdSMuT/wUcq7huTaG5MqLFAmgEWKdIL+88F+b+nav9XMzeAaGgMGLjZVCft7aAU4yZfCLBY8cqwmIl8UUhP6S2tVeJRJAGGyhCA2D3mQ6YulWNzVnbX+LjQM3BmkdUqlEGl+4mvIPxUgGO8EYxggf2WX/dH8ZeS5fOVbpNvI0jYckj54zKkPfgV3xp1DIsrVg1JTl3CwButK44uOTu34oZAjfu0AXlELvI4+PGbsi32FhESS9B4/WfaWmUdl9yjS3g0T0z0sKl62/h1LRF23N4fYZeF8LEUJ79kmhRyG5d8=","authorEmailMD5":"df0c87fe57a95cce1df1b512109a0e0e","message":"Hey Stephen.\r\n\r\nI have an example of an IO bound call where I'm not sure how to avoid Task.Run():\r\n\r\nasync Task<byte[]> GetMyData()   \r\n{  \r\n var myData = await DownloadMyData():  \r\n await CacheMyDataToDisk(myData);  \r\n return myData;  \r\n}\r\n\r\nSince it is not necessary for the function to await the caching, how would you avoid using Task.Run()? Calling CacheMyDataToDisk without await throws a warning and introduces issues with exception handling. Is that really the way to go?\r\n\r\nThanks for the articles!  \r\nAnders","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2015-12-02T15:56:03Z","timestamp":1449071763,"authorUserId":"disqus:disqus_czcHhkHzPx"},{"_id":"b576f01b-c140-3da8-94d4-620187a8bd11","authorName":"Stephen Cleary","authorEmailEncrypted":"DpmTkv6BiVLfxHGC/r+7KQhJNhxKeL6TwC7epTUwdyemq7nzU7eOTO532FIbLEcWRFVAxFpT/r2cEgiV/ktCH+IVHrTwnfdEJ6BZ52Ty7Xh6Asxc+4rQQfXvaX1Xyk0T7nCFIVnVeEOCoMCbIi2Ng+Pm5jVt+T9JYqJPz2h2odGMRsx7PDd8cWzOlLMrT49QhlAAIe+QloixPDokKpMl8b9MG/kyvHAbcfgEdawqg6b01ppkv+I/3pIcTJYV5Elau8QA80We6+g2lq5FzwLCsNnFqc2hBe0xdvwOSUv4gcZHQA4f6Z+aJONQybp8ICeD9Bm/auPz+amU+gdGaRia+a3Sjp5U5SvBFl8UfUzyJfMROC19qfMxVQS1piMr8vzGP+6sx8PRupb/ygZmlmWXOY0R7mVgNQm+wSz81UVBmUnyEFWRN7AN2MGF9Y2Edrc+UmM2kcQlXOKxp9cotoOh9C7Za4YTMEJY8YGHdyRCm1A/CbMa96GzJ8dlQp4a5CDFVh/eag0j3aNucViVtWlU92qkT3Kh0X273yPBjiHIWOa3g2TSRW+tFGk1yydHQq7CXqUlpARXRY3HtlOOiwh9UYfiGTwi6g2v9PvNXuM3/Rh+nfnwSxNCfkT2hwKgtXEurdmZCCqvGraDFkFoyALowJ/M+Mm6lcjaH6RdJ5nEQ7k=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"No, it doesn't cause unused variable warnings.\r\n\r\nI disagree about this being common. In my code, it is very rare to spin off work that isn't awaited.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"c76b5480-8827-3a00-a63c-289e4b64bcef","date":"2015-12-02T19:16:11Z","timestamp":1449083771,"authorUserId":"disqus:stephen_cleary"},{"_id":"c2e98b3f-2df5-330a-a097-a36d172f3dfe","authorName":"Anders","authorEmailEncrypted":"RY8Imh5kE5duJNXFVFwr/6m+116WOmYhob+Gxq43zR1vCMuxnpNkfaaTTRRT4eUHuXiLjMjeKpsvQO62h7cb9u1/VlPIlEqDczgcuf1KNuyueU1vven4Gg5rnhzo7t3G6e7sDtWBCwkYroc8Q0GNPpiSzgVWRF9sH2A0p4VxQkt5qmGc5Iv0f28CWxGVKazyBZnWjUTbapTxJA1/iu8vAUGL730Rxm+rqI0PLmBTu4RpKjz6JzB4YTIbvkGa6UNL2UNEBeOfln+83QHpfr13FyHeNHlRwklkk591HspQzqRLvzvXIzBxfi5ReSP/v4D9VTaxQBprv/ZcRv4bIShp0o7os8o6G8tmhk1vnBNby2XmpPCfF3uuMTtFIbweO0BBnklupjRO4M9hKwBYoSqhS4RGS/XABEgv+PrxZ5gpsIb9PNIcF5NnJ2HRpw1SwKWvvJZ5niOumpv89XL9p2xEiP58l/mDWQQeDBmyLck2KemPAkLAYavOdf07FTzh+rZOxVOIm5Wf/TvzGI+xJXTA4Yjoa0H4P/NMxsrB8IilvuFNEZQdMOx6KxY2TdEdvm8iex6trkaijiJDQWwGRnV7y+aK7qmOllZdpDaOdnhVHQNhBFthAdv+xb005v/AWXMvDWbmG4gbQA/KxQ1ekjQStC3fohDlX9zQC4oVjs1PQDE=","authorEmailMD5":"df0c87fe57a95cce1df1b512109a0e0e","message":"Perhaps global suppress warning is set, because I also receive it when i compile your code example (besides, in what other kind of situations should that warning appear)? Regardless, i recognize it is a matter of taste, but it looks like a code smell to me. Maybe suppressing the \"statement not awaited\" warning locally (CS4014, NOT CS0414) is the best way, but still awful. Could you think of any way to avoid where I landed, taking the overall goal into consideration? Or is this the one time Task.Run makes sense for an IO bound task?\r\n\r\nThanks for an interesting discussion, would really love to know how to make things pretty like i usually strive to ;)","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"e16e9ae0-f918-3a13-a6a0-578ba48a8514","date":"2015-12-02T21:10:15Z","timestamp":1449090615,"authorUserId":"disqus:disqus_czcHhkHzPx"},{"_id":"c76b5480-8827-3a00-a63c-289e4b64bcef","authorName":"Anders","authorEmailEncrypted":"Riy/rdfPIHQhCBdw5nuqsBxG8HWU4ATFExjpCLDZw+CVmrYwZA5G6ngqqB044hbJJZRAaVu7B69rvtTIFVoQIZ1+XKcXvhbpM1dlHNmy01WZFZdxgUaf9KHh6izls1UJ71dK8mWC3HVZKE79Agfxwhq2KMcIGeDHKhmOPku9+EHiZ5IjT5X9ElWzgQXtCGIPDO8nkmXDOKHIEAMIx1zTnBrCi7fFblJoNEX/DWROGY9eLKEJllgA2yiwJp704uDxtA7LhwT1dScjSLFCSuwNuYNGOk8vop1GapN9dhxCEHQDeHkU4tL2VT4+RkdBmkhJPnkqPm4r3ibuuFrP2rkWdpElPkiNz4sxOC0q5Ff2ish/6jbMpaHy6DlJyTcbk4A21JxV5iVCy8OXcZAGd1fVoP3Q+1DNY2oma8uHniPJB+Fb12SqUCBI3XJsUdp/zgJUoKMoCCaigsIlQWvfiwUcrvF2XCObgZmZeFzcYWutj88WWM9FRMGOho7uAIG7L0mpJpMtrOG75poS7Vg3GPysEmQiL/M11vL7XylwyNTZ6Rv062zD0TBZ/Rbf7dykMNMUewCyphRR04iOWIDeU46izT6A00bqON0HtGuw31IbA3ogrpln+2QwyQ9PhtBF56ZX3Y2By+ll0kU4oBBuFU9Tr86Z7gnqxdN/eDG1x7PgnpI=","authorEmailMD5":"df0c87fe57a95cce1df1b512109a0e0e","message":"Hey Stephen,\r\n\r\nThat will introduce unused variable warnings instead. I could disable warnings, but both solutions seems sort of hacky to me. I find that I very often run into this pattern that deserves a prettier solution; Doing stuff that is not related to current function but should run in current synchronisation context. To me, it seems like the async await library is the first major C# feature that isn't fully thought through. Unless I'm missing something and should think differently to solve the problem the function above attempts to.\r\n\r\nThanks again ;)  \r\nAnders","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"84c7f830-8ab0-3c97-8abc-2845cb38e4b0","date":"2015-12-02T17:05:05Z","timestamp":1449075905,"authorUserId":"disqus:disqus_czcHhkHzPx"},{"_id":"e16e9ae0-f918-3a13-a6a0-578ba48a8514","authorName":"Stephen Cleary","authorEmailEncrypted":"kOfiPAMUS291w5SqH3gzj134ln/8pN5Q7yXQzdWlbUKZ/uDD5Pro7mRws3WBdIT98c28/7sM6LeEinWGExZi7B4cITf5dq/SOV6Cl/PB1z7KCbe1vKU1OBEADlPVV72ehyCyllz7n6v35H+rJ0ptYcpH5aRS/aV+IkYOjdF2NI9eM2XcSqAaSgFPFb/u2G+QPBN1FBr4QIA+19F5y7kcoW2f/9qOTAtYMC4Bm9jxV9R5+q/1O3BX9K5R9ZBE2AC2p6Za0BxT8ETTbzcmUxqMQrU5Njh8r/FT5P9FjmsJwNWC3EVsiGcZjdK8k29hzHMksS1kuQ2F5t3yzO5AeSwo5vbNew4Y44/4+0K/OvoC8JF8t55UEhFIWh+3Y93sVODgCZQlVdDzzWQCb1Wz0EibjtIWykwKZI4HXcGg/2cJhOlwHizA9eLl3sFjeHkjKQ42QYYH1u4TK3OEy2bbMuniMCYM6mg37pHPyC35wp7c6LHUfEB/ojSEYk1jXohHLwLrCXKf716X8L2gZNkerUE8RUEOTtsrzsUOOW0vgKDQjNlmBpgf7g4651kQHcsdFgSLD22h3294/p9TapD2u+InOhDhtE+sOL1V2EoaYYa7hbl0fmk4jHkLM5DkXTjU2yEZlVmiJNOOm2Ds2V5vS49wUjwdlWlrO7eLgAij0IQ/px4=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"I just ran a test and am definitely not getting any warnings with this code:\r\n\r\n private static async Task<byte[]> GetMyData()  \r\n {  \r\n await Task.Delay(1000);  \r\n var _ = Task.Delay(1000);  \r\n return null;  \r\n}","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"848871b5-585f-3dcf-8289-f73633447d4b","date":"2015-12-02T20:41:01Z","timestamp":1449088861,"authorUserId":"disqus:stephen_cleary"},{"_id":"58941c04-0d81-3646-b719-fa0ebf05d5a5","authorName":"Anders","authorEmailEncrypted":"D5RAestRCeeg7V//CQjxfbsWWvdHkv6rSv0sn79DaxlnQ+qchyZN7Mg4eDpI5W4OG8mXN64GhCLt4v27YL3HvVC9QOo+rhjuQBIMjX6DQC/3ARPbCdDo8AHs1uVhLsEEQ9lGUP5HzoLEIw9MdizTnFAfkj2MBWCl3KySkMliOa8QB8oPT9SfTGYjo0P0mjfPh35idXsUk6voxok3Bz2JyeJ74IMgp4wRJEyp0ZLhIO8yfxGcjgH5BhpUujN3GNgvrdTyWGbpZyr8MAm+XbRwDfPATn2h6m+ovPFQKEw3Zk3BPop5REFPk4mB+xYja8bv7IdszjbywDFSrv1JxdFCvhr5mCJnWfthATHkB8w7rNHy38JKDWee0loL96mSy5CFfbbdXx1WzIeHbxPPGiWlxwwteA02bA1GBsKPb/TFNVTWqYV4E9AsmYGSyyEg5CqiQZMHfDTU6PFKKeDJRD9N3eLqNBpFIFRao6/bTc3VCuz5QlCWTlr1sa8eFhTkYqsmoDrhybUDiNzsJlT0nzed1dGMhGtoxbOS/fOhpRTw2Mdw8yK0WEo8OGG7jXxbMk2p8DZW7T0qXVmfmd6+irvY8pkioax/Pn71q41Yf9WyuA2Koc4PY03/CWmIPk6lZirYfcLuFhplM1BqQHdZF6I9IVTmm5VaMJQt6HjVrDrFGWg=","authorEmailMD5":"df0c87fe57a95cce1df1b512109a0e0e","message":"Hey Stephen, Regarding Task.Run, variable assignment wouldn't be needed (no warning). But my older ide version explains the variable assignment warning. I considered the possibility that the warning might have been removed in this special case in an update but then discarded the idea as ludicrous, but apparently it is so. Async await streamlines a lot of work but also introduces syntax nasties.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"5b0f4850-58da-3f07-b1a9-22b85a999dfd","date":"2015-12-03T09:11:06Z","timestamp":1449133866,"authorUserId":"disqus:disqus_czcHhkHzPx"},{"_id":"5b0f4850-58da-3f07-b1a9-22b85a999dfd","authorName":"Stephen Cleary","authorEmailEncrypted":"iOGO7edEAQ5TmZhlO8o/osa1yoSrx9PYqSbCzVDZxuVQ2hgrl+ERDudcGRMGgt556gkH5lK2ik7k+C5+0z6FiriuT7P/s8qenPmYWPkSGZcg9hYh2xHKvvsYGE+qUeF18CxEf7YQM24+iRMj6eFfh94Oq+qJ9ekLET70yf5+Yz3xRIMzJeRDIUQHc6Ir6X5XePStmDYR59WEnVo9QQozdZukRs3nmnl0oNpyR6teuoxu3UdaJk1KPlxf0qaBv0CbEv0tBzK3zTRCPL2spvi+vWaMt6fXynOOHpUM6e/xZERfq8uUY0kv9NxeOiyd0Zok5uqZsZ3DTGDU/P9D625ys0Z/UX21FcyKwmDwKOPdLGG9zi0dMUoKUHmyLJu/kk+61fp3nLurthAQgcV8/OJM7mRqtQO2F9xSK30UaKPnFHTgLJumMimg8rVNc3AonqMIqXB0xBV3bhf6uFAUH46moTAhMv8SOua0OXbT/NpPuNgz5WxcoARP9ALLVdkBcVzSjC+gPckPkRSvDRa07NjuWDwEoBsyIgjhOyx9mGYoKxPcAHJfmLfg4sCgXZ2G8ezBG2iBLX2eTH1TF8ehu2dttkLozuVzZTn/N9EKaBgrIWBX+fFZAHw2cgiL8j8YawsYDBxTTWxDjyUzOxHy9nafMBtJ9dfKUSXmqObCXR+lgZg=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Are you using a very old version of Visual Studio? I have all warnings enabled as errors. There is special logic in the compiler to *not* raise this warning if it's being used in this manner.\r\n\r\nTask.Run won't improve the warning situation at all. It returns a task just like the method does.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"c2e98b3f-2df5-330a-a097-a36d172f3dfe","date":"2015-12-03T01:58:20Z","timestamp":1449107900,"authorUserId":"disqus:stephen_cleary"},{"_id":"20ff4838-717d-34e5-81c6-561e80f83708","authorName":"Stephen Cleary","authorEmailEncrypted":"PTlLoKnSHpruOLnLm4zTt3DpzwT6vhgADW/i4ffAFlDiHEIzzrsvBROGkywuc5pbat7YjGI8f/mehVTLqGEVYQjxPMtvf3WLhwmtGhBGdklC94MrdQzIZgiC8jPd2o88cLNpqIW4VyzDXiC0l29i+TQFswgvVBArH1ciJTK/eA+SUyVllGliW5opCuHWaC+UgQ7C7ywXSUqCOH3q6cDDqnZR9zEWTMrydE6an5BmfoDNCtJtaf1eC8S4TPRxgRDAvzoDkTnIirdAseU3J5Snz3ZSN4UOdUOLNPsWz4GT7xUrC3S896XPz5AtGiWnANx/Z9f+FYnPLbDsH8lHr6h2hjYO9VMzfxKX3r+9LfiBrjDP8suCfBSdNZuvaBpaD/uOOBKmgcbAucs6Pqx/X/VQZaK+sLvCTJP3PFZOIrRa0sZtXvaD7JjACCYv5dzyQd7ICJG/EG5T2HBXLxW8I503qjv5Yzsi6tNpv3+FYF5P/g3mGP5lWOH4WyCjRFDnLATPOzq+7VwOR0Fr4IIoZExXaKp5WV9/OjnFh5fT4huOHmT7VtYai3w2VCM5aDV49JA7PMPOlXQ4+vpUOUYylclRlrN/alKMlYo00yI58aOKhkhBczbiWL7igAalBfgi19abVECIjmrfI884BU5UT1WamD2R088GBO0doLP7qcL+sy8=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"I would use Task.Run at the ViewModel layer, with everything else synchronous.\r\n\r\nUnless you know the 3rd-party libs will be adding async support soon - then you could make a good case for wrapping them at the Data layer.\r\n\r\nThis is just a guideline, and reflects what's worked best for me.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"835b9a44-e8aa-39b6-944c-cdfe93778956","date":"2016-02-10T02:58:58Z","timestamp":1455073138,"authorUserId":"disqus:stephen_cleary"},{"_id":"835b9a44-e8aa-39b6-944c-cdfe93778956","authorName":"Jan Magerl","authorEmailEncrypted":"bqe/aFGHtj6B+1hSL9rH597EfBbVk2mRa/CnpsABLqAi/5hqQtFdGBRpqnsFsf22oXr/MtstZ6GoDgkFR6EPCKZivkgaaJYe/Z4g8pwLPwvjAEUmNG5WdZafi1v/bMVexh5Y0IK3g1ZMiWstgAMAqDprBoFIqT2tGfnHhMiDX5c0KwAH+nJow3ZZM41yhQBmSkcoDmU+OEn4c2idvc8qpeA+nWgPJyZtmVnbxqj0JaF4/ebzmYCMyt5hjsQ0HIcj2FiIwjlBJz/EV9sv9sQEDJASUmpXdhpVRVE8zKqMi6tZv/17DKOW49oZ8GvRs9g2Hx5jF4DxN73Iqb3oldrW850EPYFhDMZfRki69xzEPJ5Wg2v3Qu+9BWPR8bsj6LMVZUbibNYtDI9d1m0/4KkPWRLSOcWGCmACoHjIvKyaM7+hWO0UzUY+GMpsbw8nh9VtMiN5F/Ez4vRGY+eicRDwMFr8b0M8P8/vf+SVYvs7hN4jU6EL2mp/lav2YMx3erb1hFyernbe3ebTYLR3QotlyD+hGA2d0d31VrFpfG6ZeKNHsY5vCcK7Au5p4cV9SadyZL19ej//6fSz0dIObafqrHICEzhc+kTLVqlXCnGhTjKpnJ03qpfSeMsoQInXc8SWYFz6BGVx99wHmp6X61ggr059keNBxKS6X5+3fuHzCi0=","authorEmailMD5":"efc6de27e3345d43530fbe1a2e819e50","message":"Hello Stephen,  \r\ni am working on a Desktop WPF Application.  \r\nWe have to use 3rd Party Libs for some IO based work.  \r\nThose Libs only provide syncronious, blocking Methods.  \r\nSo i need to too something to keep the UI resposive.  \r\nShould i use Task.Run at the Viewmodel to wrap everything in a new Thread is it better to use Task.Run in the Data Layer where I call the Lib and make the whole Data and Business Layer up to the Viemodel async await?  ","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2016-02-10T02:20:11Z","timestamp":1455070811,"authorUserId":"disqus:janmagerl"},{"_id":"d30b69d9-ffd6-37e5-9a57-df12742717a3","authorName":"John Baker","authorEmailEncrypted":"HXn4PQTwWXuQPLA6o70MHTyoNhStEieaT+8+oEcpJs41CBXkOYNMr8u5B56tHXJugHk+fRIDy7U/7s6gq4D4BFjXQZyuehQH/iVC9bzZ5GANj7vMXgggDfcMlewJovXNrjUf8d0WAnWzymL/OQcVCleJB7EC514TZL9C+DAf1OL50oVxYmV5A9c3REwfS3JezEKzHBojN99bgg9vfqm/6jJKQlJG7iMAZmBcYQCKxrX0eBgD9qsKb/1DR9h4mMrvDzhZNgZMJI5xi7/Glek2wNA8bsVzNarrEsfpC6uSrFGPE8PgNVsNy+KmbKAOQ9B1cmF8QFf4c8AR5UQs8gM9uy8g70dlk1hOyrnGw9Cvk6tzrzanvwa/OaNQBdN1ssc9GFgZTiVNaLBWcZH4fKljE5QFQ3pLQMmQgkLBSLphDQzFWIRixVN4Rb/FKGUtnhuFNy0IDyPt2DG86sfs/3NJc9jV0qZwu2XACidtfSGvS+9lgM7iM+NuIhMj4h9E74eZyXP8GefLW3uRRgWuYbKWU5Ks8VnBiGOMQw2InELOZFAPVP9IYlZcvyBtksQ1f5LYA6u8dfHJx82Zmieloo67bRuvfloSJU5LE7ovJBYkOz8Ev7vbLpxOnT58kfMQ3zESbJ8LDYJnc0ml0MbQEghNbpSD/CZcZ0Yppxcvny07nAw=","authorEmailMD5":"275e0507a59612361def8c693c4eac9d","message":"Thanks for the distinctions Stephen, and I wondered if you could reflect on how to implement some local long-running services (both CPU and IO bound) - implemented in a WPF MVVM Light Ioc service. Since the Ioc service signature must return void, I was thinking that having the service synchronously returning a Task that the client VM could run to suit its own needs using await, this would be a good way of getting progress updates and intermediate results, and being able to do cancellation (because the task object is available in the VM) - while having UI responsiveness.\r\n\r\nNow the service implementation can be done via a Task.Run, but unless that's done properly in the service, it's not always possible to do the non-blocking implementation all the way down (sometimes 3rd party dlls get in the way, or simple laziness!). Any suggestions on how this could be achieved with MVVM Light Ioc, while respecting the thread pool?","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2016-02-14T19:58:27Z","timestamp":1455479907,"authorUserId":""},{"_id":"6b60a362-3847-3d37-8bad-a2a61aeed26a","authorName":"Stephen Cleary","authorEmailEncrypted":"dcRh/0VT5Q6AkO3JBl/WLk7gm8oXl2cIWQ8+fuMtt7y0euZ4UvqXym8NTtOl9BG/jTtd1BCJeO7rtKdFwaOzYOjV/YGTCCYRZIrn2fpkiaRzL00cJCS3QWrxwaiTbY0cnmKpvLe+8BqAv2EOguUKh4UTPzjjNUBT/l4lrKuXoYzwET22RcBxG8pv2R3PV6LZnuNxyv0p0FOLR0y5y6ktZ9lodS+BINR2sJqjP+psqkD8J0A80Bi7dOvsqS9L3BiXO4nZOCaMzUWyjHjn6ad6T51dv9jZ3nUZkQL5/nKxFrdqygjna7dCqsgnnISniG0Q/T2UOnl7D8Y6E4yIF5szig3yZXuxpRNxPCp+46DeNgWRtm5k70AEp/TSmECgAH23g5N5spoKR6Jaj5nZsf1GGt71ivzwrcdE0wn7/erkr9R1fTY77O4AWQZXzN5vDa9xCxvfD1d8e22m1hPx6nhxRoTGkmXHwN4y+o8IyF9f/bUt+a2Oudv79y2WOGNSUWjRTsOJKxKA866JiKG+GTmpoZGyGleqNymx9Osy3RBAapsViF2amaBW3k7RPDOamWlqicH4eUgS3KkzOgbmX16v+onPdgcnCpQ3FUMvy9MbwgvlJxcm3uZ2oCYFE0DZs5/GUSobUI/R/EB1WEM0KRL9q8VZIIAP9LY7LWkojWTwERU=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"I'm not familiar with MVVM Light loc services, but in a WPF app you don't have to be as careful about using `Task.Run`. UI apps have the entire thread pool at their disposal; ASP.NET requests have to be more careful since they share the pool with others. This is why I do not recommend Task.Run in any reusable/generic library code.\r\n\r\nIn your case, you could probably just use a single Task.Run at the top and that would be fine. I wouldn't worry about the blocking calls further down because they'd just be blocking a thread pool thread.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"d30b69d9-ffd6-37e5-9a57-df12742717a3","date":"2016-02-16T13:11:09Z","timestamp":1455628269,"authorUserId":"disqus:stephen_cleary"},{"_id":"c90f6329-2bed-30b8-b153-69b47e3a2d4e","authorName":"Stephen Cleary","authorEmailEncrypted":"evxYIjKUrrQhRpYP46ItFw42zEhjJXQC90ExgoGnLtoMfmqhVvpHvcrATfrtwUDm/H5lZkFTmOUca2au6AJTWA7TJdYFIU/weUKulT6c6MkGI6TdvTTxhrgw+jzQ+cU5NKkW6b0BBDzz5glfM0hMcdDYZxuQnjdxD4on7AC4uGYd7LXTW6Hn1oEzTco6RJtfTRGM0Qa5Fg2i53P1PD7y+Zsn8YcH8/+TuyRLz84lYh6feeNsZ25pDhZCd7RVefBFTsTBuLCMh+nsIb8kLMDHdJzO2kBSTvl8G4IENq0343kfcA/4vBajRrgc4C9KdBUcJEnY9MQZEZyr6SUuPHWnY439Mcm/fNWoR2tIV6V4oZ/mjmJPA7xoapEDwuD1rm9N5tIjXzJELtfq5q5dT+6wx7Sk60Vaz91ziDQ5AhChOmEzp+uuWAr1lNtucia+5U/o5f7YvQxSpprdCpz0354FIxc1LQkOE47TXEJzCStfUDNbMaHKWfpgNw875wX9dgnlIREbrR6IrGxDu/0m9QqGkYxGNHGUvb8gMBM0RbdiNvDl8Nr0fOwAz7Fm5zFqJyFsnKkcu9thoLVmxxEXvsbwXbCC1isHJMAwkvNps3EDlGCx7pqV/ADcBDjaoknT7EH9yw6R3wWWl86YsGH5WXzn6VWM5aPMqpgbPl4a3+drc8Q=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"RxUI is a very interesting project! My book only covers the basics of Rx, though, no RxUI.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"d21864c6-7498-3345-bda9-4961f9609943","date":"2016-02-20T19:47:30Z","timestamp":1455997650,"authorUserId":"disqus:stephen_cleary"},{"_id":"d21864c6-7498-3345-bda9-4961f9609943","authorName":"John Baker","authorEmailEncrypted":"Wf1xuwgTh1iD3N+4Wr3fTk4wzcIlBDcf6V8ISWQG1vSp8CcYu1d5Q2quWprzpIRz2HugIHMHkpwYinUjxwE6ONOQX6uH2DukQrN8IqiUFnpTg9LgdRdCxkbAgJQdOoftyETsU1HYDWaQRSQauR1aehiK4VzfdOXUSX7u11zwqMy0w8P/WK3l5gh/Arm+iNeOeFjS8DmxfjQvEnjuOS6LazROVuXO6dI2Tow9YMsuoyJ63L+s9svWO9qlFW7Gtxm+qbQuj2Mh60wqXTGh1vgavkc+oOPYGx2JaxzdrdvS/KxBsRgg57YBkqKG6mEkPJPguRYUE5BMFvNCmrPDs4NHjn1uxU88P0lYSQcTMo8lTg8qhbg3O1fdeP669LBCvVw+HdtsLMDcAdkTKAYffwL85qwu465xDGaH1mgoSGmJDaIBM+GOy3w0f9xZxj4qjeC/wWWIMJDdg49xcrQK8hgO6fd03tDeSZahPS3BLwpqn3UHulg7pvMDV8+XKosPg7xEmU4A9SZrFEG507kpOTQZihZ2wVyh0CLhjP2UO5pnl0RDlnHl12tzpvbd7wjZmXzp752n4mUf5Bidfto27sbTKmlNZvdNIFkenOJACB+9e/27cceIa6hVkwD5MHo9uyWIAdrRxcoa5vReeUDr5SJ1PbYHwTjiP1TjLuEO6ewWdMw=","authorEmailMD5":"275e0507a59612361def8c693c4eac9d","message":"Thanks so much for sharing your knowledge Stephen; I've also become interested in what Rx and ReactiveUI can do in the circumstances, if I can get my headspace into what's happening there! It's programming, but not as I know it Jim & specially hard for someone who started out on Fortran way back.... Time to get your book methinks, thank you again.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"6b60a362-3847-3d37-8bad-a2a61aeed26a","date":"2016-02-20T14:36:11Z","timestamp":1455978971,"authorUserId":""},{"_id":"64fc3dcf-de7d-3448-92b7-09e2d0ddc47a","authorName":"Giulio","authorEmailEncrypted":"MT6G4R2kI1iUocvlExm+VNSZydqis0qqPXb46u0Hs4N2RyalfA4hDqPeUFP6YXz7E4lVgO9NdUT+rlyCqT+aBBw64tkt8dlPWHcqMi0fQvqA3EbdiY06TkLWlDEaXamYnbOf0Dk+0iX2lZnwlsKX9Ohs0S4HY2UUqKkA48uPDvW1HTK9gf1+xWMVaLqbJmOeADkCbR1Fb9zcnNlgOHLLtj6IGaqrVAwBN19/xdlpZnU+DhrYMlih1fonTCoFY+gMO5caMailM2MRIzkOYRDEA2A+kDyhe83cF+qw5vZ8W1pBX6VNwt8KVyzNSZl3+Q8V2eFHT8KvGRYtEUMrQ8rMfBEdIjQ+8ZXLTQew2wSe2gIpm2NAsDR9jrHhKNIeNeIjtiVWTK6xmTcuQxYT2r9kk9WSS83nHvI3fBIaVYCL+s8muZZdXLLhaPNj38s84UOkN2UuzdkYG6locAF/dHI5XHqGHlgEdy8yGb/Kqi02pJBbJvdvAkU6lWDpbCuYPwYWwvL72oZGi4G8zBWRP5KAH4BKV+EVzCG+6rXKZOlDTXkJi/dAifC4HGyk2h3J9UI2IpcxMuu2S385zjjqyrbKe6/a/ki4xnwcNiPRM+WSpN2/rTT1pzmsnDEDINnwaId7yv5PqgR0WEsOFUw3tG1jcP0+/9i1KYYFWQB/Yd5vEV0=","authorEmailMD5":"d040d48dc09031501a031acd841cd580","message":"OK, I understand this. Just the comment above the placeholder was more generic. Thanks for the clarification. I don't really know ToListAsync but I imagine it is like deferred execution (like iqueryable)... If it is a similar concept, then it will block the UI once its binding requests the content of the list, so it will be blocking, just a few milliseconds later :) sorry if I misunderstood again","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"869dad8b-42d8-371f-9909-7d60c582b54d","date":"2016-04-29T18:07:04Z","timestamp":1461953224,"authorUserId":""},{"_id":"869dad8b-42d8-371f-9909-7d60c582b54d","authorName":"Stephen Cleary","authorEmailEncrypted":"evETZDmpSWNmQJCfyL6mVoeIrRpmxZsL6ONKp9+4WRDD5LI5/blmdl3Is215Yhh6bTn8/vZLqCs1rJzmRrQLP5S+cAYNbZawF4CSFjJBNcPdQnLOqsKGcam3xNvjqov7VhWhI03iChHEPevKG5gyyqkgQcNJbDYTb3TAt24ZhqeuQJvsU2kQcT48eSrEBMRLjcG089P4TsFEXVYUMNezRBEP/oaT2u7aepVdqIFyLMVWyyYXedzQYMzdzw3l4bm9jPcIXfXe+/zgweXMBjbFgviIwWNxYyydlhiFlqNAk1nrSJ2Jp0o1VtoZyP4MAvI4TNlMlGW05QzuUaOf+MtpBhd5RqJyEz0kUKgvssJ/FIIOkDVwolYl63vUnYuDFLMo6VfWRA/f9ADtogSmf3fjN96bFl1VMxTWTZKIqGYoM2wdkpyxOZ/Xw3aGgJ1bWKJp8pos0wwLoGmZnQoQDOeN1RAZ38IBzOwDApE55tqCUChiyvbwyptgkSTSdXsrxnRZZrO/CagQJbkn1awo6cvaTX/vYKaeFZMXn0dRv1q27uy7hPW0q8vr+x4MOaZn+3oSUsynLFAyPjIZ5Xv6v3x0kjljdOgfX2cldj3OCugCcQyetNw7yVsoHLPlAbDehXgeQ8Ac9QrhKnqiNRJ8o1KhtgJ3yD1/NzcrVVWnSWyodL8=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"The `await Task.Delay` in the sample code is a placeholder for an asynchronous API call. E.g., an asynchronous EF6 query like `ToListAsync`, or an asynchronous web request like `HttpClient.GetStringAsync`. They are asynchronous, so they will not block the UI thread.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"ca6f8460-5d65-36ef-acba-ae07dc12f5b0","date":"2016-04-29T12:04:45Z","timestamp":1461931485,"authorUserId":"disqus:stephen_cleary"},{"_id":"ca6f8460-5d65-36ef-acba-ae07dc12f5b0","authorName":"Giulio","authorEmailEncrypted":"CqFhqBsPIeh4vxFySe+JTOeX16ZfaqrrTgsOCvc4AqI4UBK1qSQIozE+Y5A58mTYcR6XDR7TWgBzkRt8uhVfEfQm4Pnn0detqmCMkLOcxLqomWFzNIhhBAOKHJXK+adaSpzWTDJpFOjGtQO8S1SQIbn1yd4vrVHnGeP8v6QwXC9SKlI+g99b81D1VrLVqYNFW6UVNacMGr7OtYBxRwklpQpQa1u/tBPaUo2+5bmtaeYBJ59KiMvg86izV5Y5FyGPDXRnU6bnE3o98nquVlMxBnAytlDLhZ+hUgX+L9xe/sRjkPyDn3YeeywWT2sKYTUoKVNDPIb1Keqk0zdVIu+sdPmw6rl9hNuSgmAsrcR1WyMTLs47Am0kPp+PxBIwbCBFW+V2YLOG6kXEivv1KlPV44hpjX53u0Kg+rad2KnpAVfKDZ9OXl56BhUcUHn/h3th/dx0CeyZDaL4t96ovY1peuXZVq9+PoOm+YJDly/uHJZ+ko5k5fpd3EcWTY/wutV991rcWJjGJBomUqgofoxMPcpaJIso0Mu1GORqI7riyw4fQa9lnWIPAsp2/r0RUrCYVuRaC5LEiqCNXn4AnTruV/kNlaQZ5xwBsFRGWHcgwMleCi5zGygdCIX6V2O/0bkEZFB0yJzji6P03s6D6L8YcRCGpcznUu8RDhQ1G4IfE3U=","authorEmailMD5":"d040d48dc09031501a031acd841cd580","message":"Sorry, I don't understand your last example with RetrieveValueAsync. IMHO async is useless here. In the Button Click I will have to do a Task Run, otherwise db access and web request will block ui: thus I fail to see advantage of the async here. Thanks a lot in advance!","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2016-04-29T08:55:15Z","timestamp":1461920115,"authorUserId":""},{"_id":"3d5c9354-0fc1-3e68-9d21-7ca3c7c18413","authorName":"Stephen Cleary","authorEmailEncrypted":"OpaaLn5915HhDOvVQuWne6s2Z0jnCP4KKZMLDXfh51g2HKnkZs1gvViugHXHNeFwoekSFJhn4hAVpJfYsc44/Nl2eAYHP0FOklb/m8oNYkoApu2QYGtbnjczQ9L5R6UsMWlst+k1OUNbNc7Wm9B152liRXTsiVzapnPEAETh4SZ5Ho8VvvZHyqleatiNx2AAcDaBPCsnqNlZ/aWmWDJBL5lMXx5ym6239UbtIb7zEe9hdsLW0GA298qmty3X7ydCGH/R0jiCwDV5bqtc0yJaT7DyYe2h+ly/w5cmtG9NgiPNEfpnzvtd9Z6B3h8gOaf1V1zp51/BKzYodzNaXoSzGaQOIfXQGVqrbSdeV/0G91lyRT2FxkwihzL84KuA0SKuOIFZTWORGZ7QW3ffL5UTET3HW3pqBfK+Fa2s8IUX/T8xA1mjaZ4LS5DOVEaDNHi4uWCPSU4+txScVn4R0TdszXUbbNwOy5GIO1rNTTvbRmKhThzCRwofoVq6zH+JH19wCFryMWuybb5Pdn+zWyujRF58//Zcyl83SaIPtogH2OtPwGxeSFmb7ggkUFg0+QRj8WXgYkeunULD3NH8UCvaWdD6bDw4BxkgyzVYmVTHPEduLrIiR5pWlALZqDSbfZ3ZZ2FpbYE0dl5QGdQlP7Ntl/TanwDFkJNHIxS31AP7Flc=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"No; it's nonblocking. `ToListAsync` will send the SQL query to the server and then return a task. When the server sends back to query results, the task is completed with that result set.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"64fc3dcf-de7d-3448-92b7-09e2d0ddc47a","date":"2016-04-30T01:39:35Z","timestamp":1461980375,"authorUserId":"disqus:stephen_cleary"},{"_id":"65c7d7f6-cac3-3796-a519-22272b53be36","authorName":"Giulio","authorEmailEncrypted":"aQwptiaCcxa3ygu7Pphuuy/hSQreyQXGjkaIyXDU/nRYVo3S47P0iF0o0AotLWzw9IKa4a2KbHNeQWOdrgQfODrx42Wo4GxFkQ1OrKgYBCab5XrNSZ5P3In3v8MXV/2tlvdGUNeMcGDqgaTe5RPxhIYgaO9y2suBWYVKt3Ve7zDSDQgllWzJb05F8NmVfhIPlG1zGhWsQms+dyuL69Pepa41EpQR3cqP+bEGn+CjLBLMaWmZvvMg1KILaHNwbXYK8jB/B/pM+dTNbbQcXoczPCtLw30SpCP9PfgtOYdf54lmUpZrz0D2cVItqq8j4aMat2BDqCiJ0HMaJssu76fNNcV4oRhCnaKY7Im8K2Rxz6iFdepKLjFEyKL83D7wgLKVbAZDlw3771hs7N3qjsGySM/vHrKZYJ7qcI+EYRfKMCNy/LEuR7rLGvUXC8AxkZiV9Tl+wT65lUEbWQgU2LiLNhQsSYeG/7g/Armvjj1AKgynqSexWyjJQMynegE9cYntIexFuO+p5DuUQOvFKFptcCZ24aG8/7/HsTnTZ4v7rsiulM/ouKpe7b3H8+FR7tPQQ8ufO3or7NlvSJQUZ+F3st+tNkmk8chpyi7kDVXofzDLoW70CH/VvoDWSpNDrLbrC74bQ6/aEqOcVrOA9qRJJTRtWjWIi3T5pUIazO4uGZw=","authorEmailMD5":"d040d48dc09031501a031acd841cd580","message":"I will try... but I'm not sure if a can build a small demo app for this with Visual Studio on my laptop or a proper SQL server is needed (in that case I would change example). In the meantime I've found your article [https://msdn.microsoft.com/en-us/magazine/dn605875.aspx](https://msdn.microsoft.com/en-us/magazine/dn605875.aspx) about MVVM. I think this is much closer to my situation. I still have to study what you write.... There is an interesting part about binding and async in mvvm: that's what I'm talking about. (Side note, off topic: your attitude towards mvvm is a bit surprising to me, while I'm striving to understand and apply attached dependency properties and so on...). Back to the point. In that article you write: NotifyTaskCompletion<t>.Result is data-binding friendly: it answers a key part of my question... Thanks, I'll try to follow that link.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"3d5c9354-0fc1-3e68-9d21-7ca3c7c18413","date":"2016-04-30T07:20:06Z","timestamp":1462000806,"authorUserId":""},{"_id":"7a4bb2e5-d718-3ea6-a312-b0045fce6fde","authorName":"Giulio","authorEmailEncrypted":"ucOF4ML8RacpIozxdjjnUto/ikyWSK5dJ1GtygXINnR/YHCoIYR0a0tPbMIz8za1Hup8AZ22bztx2jQHn2drhQ00u2zH4zMXK60lVqtwpNWMXH/nhZmff+Rendnsh9dSpnrJZYSgWPbQfdT5V14nRqfUCSZzs79QFW+DWT6WsxF+UYupFKM0Rrspr2TFXnupCqKUVgdzMkI6B3jdS8B3a42ql1FujEInE1VFOib7VAYNrGCP2Gx9Fk4fGBhEKb9ZfeWh1zDzu5rJUEXe8GtGDdJe0z76CoyTR00xKGoUzEbsj9dvl3Ch8a2DcmrXjcSB4aAp0Bg9/7gT5IUTL9Vb4Jm0ET72lk+ge14vUBpUoN7fussLeVsI6CA4b7sPzPGJEahA82EjA4gcRvvZfJOPiCnz8DWsp9+VBiuRdLVKogk8v7J2EOOyDunyKixjMlYL80mE8edrvRGgdBZ4MJfjzA2TRSQ24sJQAckpl73uIcGmHxYCpNmmN9+V8SJPEI9WMIDQ+/HVqW66IYkj3LgC049e7CpW1OH+wKHHz8AbMdJNCGIEv1l9PgVnA/P4nXYLiXpWN7GSFoSPHOA1WK6bVqdCgkEXcc2bjKGnHvl5EzRWJuZyu8yJ9R7Gzlz3ZaDkKFwrRLW9G6cblhdMUVKZ/SxTxwto7zvgG1laukKUmqY=","authorEmailMD5":"d040d48dc09031501a031acd841cd580","message":"Sorry, but there is no comment section on that msdn page. What if you want to the change the content of the Label with Binding UrlByteCount.Result through a Button ? It's absolutely not intuitive: I'm wrapping my head around it :-( ... Please look at my question: [http://stackoverflow.com/questions/36956334/async-mvvm-how-to-change-notifytaskcompletion-result](http://stackoverflow.com/questions/36956334/async-mvvm-how-to-change-notifytaskcompletion-result)","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"65c7d7f6-cac3-3796-a519-22272b53be36","date":"2016-04-30T14:51:24Z","timestamp":1462027884,"authorUserId":""},{"_id":"b56d8934-e044-3517-960a-29fad7428d88","authorName":"Asif","authorEmailEncrypted":"OVT3cYxRybQTk/6z/dSOjvAx9W2jIzJ3tFMrZQJqXzc1ICCoSGCsKUBTEgurf1caPbXx8fipx5a5l2YnTtngkIL5qTk6wXPdGUtqwdhFEVycYJm4QTiU2bsaiEtdWN75/2Qi37Vq2pGaBqhej9pXUalusJXNCJ5kYTxav+rMT0phWSOUizH844l0Wks1ekxhSbGORWnVGE0Xb2lVYZkUz8kaofCeIA/efehe42VIMiiiWjxMyK4GysKpPDm9zcv5fE68TED+mTnGtQQIPr7XVNI679aNf1npmaML4DE2hg7CW5PIvdtMxjU0EPSaIdTxgdVy+rd0IP+oHGenoM0ukSBTtRWqZwemJYKSD0+AdvRoKg9jWq42GNDcVH7tVi5XOaTQh3mvc3CBIhMKWfm8yTGarZQzrNHA1YqonyFdv05WeCz7wumx6G01SxN2AmG/5mMaHTyBAKsV2/uA3UJOAysFajl/CSNnhHFnLBPYdCTJssk7SA4iUgkV0GHMM81nF4DwqNgIyU5B76JlXG8YMcz/GGSgtqsIUsgugwlKbZ2ZwzLM2l0q6ODtyK/a2DWes2SQAOD/Nt+9Dqn6d7jDilW7yEOgV8tzFteboF/RedS3pOS9uQ879zieecet3RunBg6ITTj8/uhS/bKNc3+kAG2qo0sTIY25pHVQLKzUk8w=","authorEmailMD5":"1f2d98cdcdb3bf1455f23f0221c6092d","message":"If Chris L's situation were like the following, would that then become a valid use of Task.Run?\r\n\r\nvar t1 = Task.Run(() => ConvertToTiff(filename1));  \r\nvar t2 = Task.Run(() => ConvertToTiff(filename2));  \r\nvar file1 = await t1;  \r\nvar file2 = await t2;  \r\nreturn Merge(file1, file2);\r\n\r\nPS. Thanks for maintaining a great blog. Very useful.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"8fa07172-8556-3b97-9658-cf3e7f3f0b49","date":"2016-06-02T21:32:07Z","timestamp":1464903127,"authorUserId":"disqus:disqus_x1Q3JpMQXr"},{"_id":"0e2f5dce-8764-3eb2-830c-3ee8da08a0a2","authorName":"Stephen Cleary","authorEmailEncrypted":"WhkCPoyJGMHvn7fZFO4hxJjDEfaT5yGeyrAU4Nb7AKz1xceI8jfB11Upi6uOqPavquAoOUTkT8I42JwuZmRAYLqHOghR755p7g5W7Rfm1rlI5BzS8oIuxGWFh8EHTjDsHeobM6B3r1WicRlTO0DQzbBa/gK+tH3Ltr8jN3w1xTQlEQljdkTrFHrJbx2gA6nIaDh/g5n18BPFVUudgW80g5PmHdwjlDOu0/Hncxa4XYleZ+qTXxBRXuOHFNrcUvi5+pMaZBux5/NuccCegt+qE6zBrme14lXimxzf6zoOslDljsMflURatA9MeX/Kdhk+/FqjB+zpyO7sUm20W1V4b/rLoYz7UlMtd2n1uCrQvOFrlioyI9RlTU4tvvZ5Lk6+VLp+o1AlUyoV4ODHf4RdR719xK8b610YZ+kYEoO9aFQQB6MNerrQ7ND0HS/YV8Iqc2JaIB+tZqwCVsIIkUZV034WDziXMadFnNnnid8/Y8AjV6sAYDXAawmFawVNq4ZsA2XpaXJ0mwh9n2ZMLs4ORmPYVKQkj3RP5HlDqBiGKnEBoRLmDwy4c8IW7cljybCpqYyPtfdDp4HCVC9rIUJFK3TXqU2PKQG3QlAxWLdyC+Eo2c1d/QrWt3cjZHgvzlIzxur+jIKiCWxJUHqSPrd0g8NigbYsZlSwiK5dUq2bT/Q=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"The code you posted is doing (a bit of) parallel processing and treating that as asynchronous operations. I do use this pattern in UI apps, but I wouldn't put it in an ASP.NET app.\r\n\r\nYou can get away with some parallel processing on ASP.NET, but bear in mind you're now using multiple threads per request instead of just 1 or 0. This can decrease your scalability significantly, especially in bursting traffic scenarios. I'd only do this if you're sure your usage will be low and stay low.\r\n\r\nTo be clear, I *have* done this on ASP.NET, thinking that I knew better etc. etc. and got burned by it. Recently, too - just a few months ago. Sigh. :/","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"b56d8934-e044-3517-960a-29fad7428d88","date":"2016-06-03T00:12:07Z","timestamp":1464912727,"authorUserId":"disqus:stephen_cleary"},{"_id":"964d8956-8457-380f-96bf-6f12aac8936b","authorName":"Asif","authorEmailEncrypted":"LgO5OUmm37lDDGK5hQ1/fgWp5mVxJhVrSNJm7PBJ8yVt6C2IFiIjEdG/WUid3jBQ0e40Zj3LNEDp0Nknc0bp5ComjVk2+wdmXNXQFnyZ2H4BwV7NGR94gzLXE9+wfDtp3BnUlFNBJ9XcdMnv8XrBrpfuVKH1+2mLwV5bjVryw1RPVGnXsEblf9YmfQr6p0JAmi9XPPSfsfOoujMxrQiW0+2Ikkq6sY/m4YYc66V3drpbVB5QD4gU/9uOB7tE/vxCOOQ4vnvxNq7eXBs1liFSO2vejXCyVnW2Ax/ebigdGlC8fNUtRAnInU2Deunx6Z3V32dDAOxyZghtIyJox0MxheJTvX74QTxkzGsyihnHmjOTyMPXhbHAW+3DHMPyAe4wlwBeIIMWwOsru1Og/RyCZFJI/j1bah1d5zXnAbEE0+bW1QpNSu+2zOBQYi6lnOb0F+FAyNisI9xcYhvm3RSbvJsYDzUv5P7pDnk1J6VnthXtxjKXsT+yDjCIVLRZ+FETHuQ0HYsLCGuyX9z0svEQsot8+mmAXCLaYadRxcRA6CAvioXXKCJiuveVkbuL9/jCcRA23JEUJ7oAriEyKfjopgHGoZiS5mLVgxzG85ULl6i3QZC7QKt9DJykCS9jkdYBqqY22j1Qy31Pm01nWmFGzi8LpJ000joMfP6YfxWSD/s=","authorEmailMD5":"1f2d98cdcdb3bf1455f23f0221c6092d","message":"Thanks Stephen for the insights :)","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"0e2f5dce-8764-3eb2-830c-3ee8da08a0a2","date":"2016-06-03T05:51:10Z","timestamp":1464933070,"authorUserId":"disqus:disqus_x1Q3JpMQXr"},{"_id":"3aa84c01-81fb-31be-b5ac-52281102c1ea","authorName":"Nathan Phillip Brink","authorEmailEncrypted":"bPNbxMb3E3t+0zfnUBFNHgV/tNCPCpDthiNRoFuBuRpAX8GeSPwDMF5xGzhBN8+LvS4qPBIPM4jhi4gYo6rLrcj4qC1vajFNCOybLZK4m+94OMgLMM9LBCe/S7rfue5QzURofqb3nNuKeon04XMrGUX6+PbRY0oedokzr0lvRSE3jhrov/dEbMVQ+OYu4hAa/O4g2OoAvMiN4EoFr+eAIpGQ1SnlGmQLOIbFWToIpYuN52EJ1k7nt9OMhOwSYRO6nHwmA+FiwSVo7GZ9j+L2tAD/xGZb6gCPnTe/r2h1cC0BI57g2zlPLH87L26FbgOUokIstvZpRt7XBPdAe958C9w8vyGKdARYIf4lq2kEyTZ2cOWtLMbg8Fe5mZGlQ2IRviwxJjJzicyFCCptkBHht4ZhvTsw5iSqUlKCT+aLxEt62piH8lap1cDhXHKeWec9Bt9U+6lnIyx6uEzaQKChO5Aj0zsSxF6EEE8Psvb7u0kTj6KVBXMiUkUEOtT1ouw2joyBSNC4d/6DPoINWK54ElLnQ1o5hVlFDJe36BgWeLOw5n8aZOsrriRcdKh0V0yUmmzK3J9i8Tj23GEGwqXxw8beQ2TpzJAc7IbBB9ecx6pfRAdS4tN0b2DK4jUAU2q3RpnSJCMeAgCR5bbdqlaEZQhY2XXjCHnQTCFYu6goYDg=","authorEmailMD5":"a8defe14b1c80bc2bd59a1fab3848cfb","message":"What about blocking things that have no async implementation? Like `File.OpenRead()`, `File.Open()`, `Process.Start()` (which I assume has an implicit blocking `PATH` search). I’ve heard that some of these functions don’t even have OS-level support for async and *require* sacrificing a thread if maintaining application responsiveness is a goal.\r\n\r\nI understand that just using a simple `Task.Run()` would be bad for these if one is really properly putting CPU-bound work on the threadpool because blocking calls would just sit there preventing CPU-bound work from running. But is there perhaps a way to create a custom threadpool just for such calls which have no async alternative to keep the main threadpool performant *and* keeping the main application responsive? And, is there a way to keep my code concise if I try to do things “more correctly” like this?","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2016-11-07T19:27:55Z","timestamp":1478546875,"authorUserId":"disqus:ohnobinki"},{"_id":"8be6d5cb-146d-380e-b0e1-7d0e70e74f40","authorName":"Stephen Cleary","authorEmailEncrypted":"lLvav22I/vWRZvTwHbir8STAKqgY1oNC7IgcL+ypnQ3xoOGjq0J2IREwOXKv42ijN1E9dk+Vz1G3/v1hJGvN+IezEMjdS1lEIcOADBxuMtUKnYYGmzLueMxhG3w2DOo12R5+ABXuDQInRoN3ioyIlMNSgInQfWpiofSHBNXB9F08yMBQkEfNe/hczg4J7YhiaWE0SvpK0b1A8XG/m4YZODKq8wGZw10hfDIc4YxlpP+XV56MiYNcQ+XGjUxE7fiHxhe5hl0mkqB0nCXcywLMvGk8jI9PdB9aH89MMVkkoBEYX8VAvmk3EBA7J8F5ZBtjSH5AO3TM4JLOv2jJuwyOeuZGpGvV/OgLxi65O/jlMoU45E1+j5cAy2O8CuIH5Ek+qWG8CkfgbzwqRuNugknRywfGJ1KDDcf3p/RwEv6pXIxA40xfI5NbYGh6w7JRIQJ43YPod3+dHhBoA1y9FWaQUvTtVOO9ywr+nHhKuCcAMiLpLpcwbyxp3dHVBH0BqwOPMXe0YQEvbOd2sNGOtnGvVEgfbKPqlNBdn0JhffhEUHZIMO21sC0gYXmizAsd/LiwzCxxuQt2LVaHjS5siS5a7AwXnAOVKMDJht/4xYIeBF7IQ7CIswEVVNUfXSPpVS87FlKibQbCTn/+Jy51sY+WvzpkQ3GGDDzFzACsUSxOJnI=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Yes, those are all examples of methods that do not have async versions (and should). Win32 is where it breaks down; async file/directory operations are fully supported at the driver level.\r\n\r\nFor these, I would just call them directly, and consider using `Task.Run` from the UI level. Windows is still a preemptive multitasking system, so this will block a thread, but it won't block *on* a CPU. For this reason, I wouldn't make my own thread pool. It's possible to throw off the heuristics by running a lot of these at just the wrong time, but the chance of that is so low I wouldn't worry about it.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"3aa84c01-81fb-31be-b5ac-52281102c1ea","date":"2016-11-07T20:13:53Z","timestamp":1478549633,"authorUserId":"disqus:stephen_cleary"},{"_id":"878671ea-c336-3866-8631-3e51cfb5c1b4","authorName":"Stephen Cleary","authorEmailEncrypted":"JBs9KblvK4qes/QJTZkI9Ohb89j4yEGKCYcbDAjDFmYZqpikBmHdE0bdxFdVY7OEICJqOnjY5PKIPov5cG9H+a5oIhrjJHenWsDZpP9GiDORQlO8ss8S2uaynIfHh8qjUt7mYtAM+bnkumoVdSjIGt6NvmZFv8+teQ17L0Bl8EeY1HryMWHBnhuaw7v8YM6cKAuKIRJSEfxs4gZuInLU46ktDB4E5/iTXZqwxbI1E2Qy1Mm0R4s7cWBxeZWn+O01EkWiKFzYtI4B/g0y1xBCmxAVH2TH2qy5xLU4br3c/tUc7XMvrEWgS+w5LnBrJqrf+91bgob3wop7POUMKjjqj5dh/ZM7+imz7qxnmcNm4TqdLLMpSCgvLXfy1AhhDv/4UbnXdMESUvK6szduJdOMTMWI4P+W74PFHMNgOySkq3yWiNd8k1K01wPE6IphcvkA6cd8iy3I2v+EsMsS3MMQUPA67Uc3wykTUVzYBXHZrJUxpwUK6K+WYXDvE+0JzQuhS7oUjCnKNFTtdpfN0u6unZivakR7w9MbJkSt6w2tVT6XEdi2KQL6LTwSS10yyBhxLGG8CGXn0cniIL45v/44Hts5F6uc9KDuoTgqiCJuOq03tD9gGXwZyclhZKlLjlY4lyri4jecb6yQjru33vfzSBhepoVW3o/9zs/KP4qxigk=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"My position is that the best solution is to use asynchronous APIs. However, if that is not an option, then you should first file an issue with whatever client library you're using to support asynchronous APIs, and then go ahead and use Task.Run to push the blocking work onto a threadpool thread. This is not the best use case for Task.Run, but is a perfectly good workaround for improper API design (for UI apps only - not for ASP.NET apps).\r\n\r\nThe blocked thread is not going to take a core; it acts like any other thread in a wait state and will be swapped out.\r\n\r\nHowever, when you do use Task.Run, I recommend using Task.Run to *call* the synchronous APIs; using Task.Run to implement fake-asynchronous wrappers for those synchronous APIs is highly questionable, design-wise:\r\n\r\n[http://blog.stephencleary.com/2013/11/taskrun-etiquette-examples-dont-use.html](http://blog.stephencleary.com/2013/11/taskrun-etiquette-examples-dont-use.html)  \r\n[https://blogs.msdn.microsoft.com/pfxteam/2012/03/24/should-i-expose-asynchronous-wrappers-for-synchronous-methods/](https://blogs.msdn.microsoft.com/pfxteam/2012/03/24/should-i-expose-asynchronous-wrappers-for-synchronous-methods/)","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"d52e1275-e85d-3f9b-9fa2-25f38a5c0ad3","date":"2016-11-23T14:03:32Z","timestamp":1479909812,"authorUserId":"disqus:stephen_cleary"},{"_id":"d52e1275-e85d-3f9b-9fa2-25f38a5c0ad3","authorName":"Mike Waldron","authorEmailEncrypted":"wpQbZkvtsseLwes7P+t8FBL1vTOx5F4j6PfYfnZGYE/TxmNruzJ8L3WUrJIBARthjUiJyMgjoVeW4IxcSoQOJhCzHy75ctrRgxUMLNrswKwSQQvHKoiitlM9xDFQiGSiFHzOyAt+BLNU+8UMMpck5V8dq4B3Z7dkrdU3qciW5UYQzhYb1uDrJRcmc9zbCFoSPXr46/LwTpZtjKSd4AxbiDNnUEp/GSXlZEsUkZSCBCs7GH50NgO0/wvkJBQoJ3BsO5TWemnmOASoMpzAlk0yMHsrigBb6BuKeFwsdfeZVFwwQnglyZou7gQzdLv0+MKOE9xvkSFopkHhvtaQG6S9OZQrt+HnI0ZOmxdAJXrRut4VYPTmDv1AEMYv8gLt4RaEucja49tv9nShfm53dntOiWaT1uRJ5k3tsfdnIE7vuetoaxBUjW5Zn052Zo9iKd0XMGKSA72EFpbPnj61Rh23M2hT4Zh9M9lsbQRrlAPntneFT9AIRGh7ds3b2iXuDHMtKbVyCaqhHjju/TfBdYU1kOzX6r+urY7AINk2dGn+JxhVxbEikNxwO4RRcw/1ANOK+TdY2neVWfx3OT4TCKTDgPX9wu4cP6YxmvWAmzziyPljInQwu5OxePh6UG9RvjnfYEvY1qyN6Cpy+UqiyP1aBg97uznxtGC+TvQN1XRoAQ0=","authorEmailMD5":"568ebec42b1b05a894243580ba4fa18d","message":"I'm a very literal fellow, so when I read \"CPU-bound methods\" I assume that means something like \"We're going to multiply these gigantic matrixes the CPU happens to have entirely cached.\" I never need concurrency for that sort of thing - I'm always waiting on a web request to complete. Where you write \"It’s still executing blocking work, blocking a thread pool thread...\" that doesn't sound too bad to me, as long as the UI thread isn't blocked. But what I think I hear you saying is that the blocked thread is sitting idle on a core, rendering that core unusable to other threads in the meantime. Do I have that right?\r\n\r\nIf Task.Run is not suitable for freeing the UI thread from waiting on synchronous web requests, is BackgroundWorker a better tool, or does it amount to the same thing with less syntactic sugar? It seems 85% of the web server calls I need to make are synchronous-only (no async calls available). One way or another I need to make these synchronous calls without blocking the UI thread.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2016-11-23T06:15:54Z","timestamp":1479881754,"authorUserId":"disqus:mike_waldron"},{"_id":"4f854d99-96b0-34cc-af24-b9f0a6046b17","authorName":"Vincent Gravel","authorEmailEncrypted":"qlJNRUEcsZjVvnAxkFvJ+IBZwDHvz+QaivVU9su0nCB3WL8FWM3MoWYKbhIsdDUcd0RGbhFjBP9pcLXsEAFcj0ltqdd2D6GxCg4ww2IBaD5WtcsqxZAGd/ii48V3Rg/PanEscqmsFSu90VzrU/ncW64Q5pFwDB/P6NnkXdy4nbPmmgTXoMWiV6PsY7D2dGtzLbmiVgHAorWw0U5FGuSeJvIaASTw7RMiNrZgWy+DoQJdR0KL9o2GtbZhLK2raHKmMaqwU6/5BUtaWA9XmpBv6ZcLTSEzvJYSIKGQKp1JjwrQmNzg4cuhNFzA+sU/YBiCugPwnFS7Myo1kJZk1StzkTJsbc57r4+81QzzbJtfDirjT4DVSjdbziRMlM1pGjYBlC7tkw6UkjhZAWr1yXY5I3sFYr6TCwAfANVDxNYeqOi1u2IIZ6Gity8XOujw4SK9rj6K0v6mUn9AbowyefGAAQ4j6YGI/Yp4cPT5YUsoTzAchBjc/elj0oVHw1OvXgWMe0kk0vXZ6Gw4Hwj9xdsSprmfvoIOizCGj3y6Be/83f4U9F9EqDnuej3AqmL7UEo8lXe7YXRcmEdFf6dwlulc1Mo0sog+zoVHqwDzj8CeYSvO4jN6rjSIXHB2dTtX2BMVXJISEGEL+i0Cp3jiKT5piZuhf01r79aTzJGzt3i+ySw=","authorEmailMD5":"4e9d619f1a01bbb4f1c209dbbcad2498","message":"Hi, I want to do an async version of the method \"DirectoryCopy\" taken from this link for my .net web application:  \r\n[https://msdn.microsoft.com/en-us/library/bb762914(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/bb762914(v=vs.110).aspx)\r\n\r\nThe problem is there are no async implementations in the .net framework for those operations(at least I didn't find them). Is it fair to wrap it around with Task.Run even if it results into a “fake-asynchronous method” as you call them ?  \r\nawait Task.Run(() => { DirectoryCopy(); }).ConfigureAwait(false);\r\n\r\nShould I still named it \"DirectoryCopyAsync\" if I do it that way? Considering I am blocking another thread.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2016-11-25T21:38:07Z","timestamp":1480109887,"authorUserId":"disqus:vincent_gravel"},{"_id":"57eaa870-9391-3a68-ab08-25c214628ae1","authorName":"Stephen Cleary","authorEmailEncrypted":"nVb3VK9Bl8nepTLI4XL6K3Elvpw3U9FvOEwe+P26fxWQ6vc+m+uZxm3Sh2tk945gThGeX6d15qp2A7G15+/2ucXme5mgWW8ELlnOX0xjTq2EZOql/AkAfY8PuluYWmKAtdNHHEg8nCtH/RAqkrFaQ1s7K1XAtn3XJM1BL1sQ4PV+NCAOIYqeCu3pLQIasg8MdyLorMkp63ALyWXv2zWJDvCv3THD6q9bEdaCEif3S+pgvi+fjnd031bwE003oWdYwczSRt9bkpmxpLqlfbXqDdidtGfTOlstBdxOXeAsCq5Fx/2cmU2N7oDpkDZqAGm1a3b6Fc5nHtlWecZOdLkZ1nDRWIdiSYNTR/Ojr+hNK6bjFyjKENKQr/c/L7skfOe93lPnF7876Mpqx2e0Mm4xN+19lWIDLgaTL2jlNlM8wtm/TeUECgEcvt1v4ZXyXlgaBOPFDMfzHHVuw6qNXUcGysuAkupIsmz9bt9TKVvUEdIeSBVD3VhDDecnDdvR+E7GiTPKA0u6L7p8hiE3ZMNOoFUSdvcx4GcbHbCEVEjuwencnWmfk+e5k6BkOZPmXOS6JlU/Aey0jORgg4KroCdkQ+3ACXYVMJmPPHrwyRRWjLNL5QCvqfGNrWhI2ThPemc2CvrjwBBJo5QtPHTxGuQHgZQStxDn8gYoxVzts1u7Oy0=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"I would use the \"Asynchronous File I/O\" example linked to from that topic. There aren't async versions of directory enumeration or opening/closing files, but you can do the actual data copy asynchronously.\r\n\r\nYou should not use Task.Run on ASP.NET.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"4f854d99-96b0-34cc-af24-b9f0a6046b17","date":"2016-11-26T21:50:43Z","timestamp":1480197043,"authorUserId":"disqus:stephen_cleary"},{"_id":"4884c2b4-a4c1-397d-a0d9-f25edb47bfda","authorName":"Samuel Bamgboye","authorEmailEncrypted":"JUmESALD9V83ycwpvfTz8QnDnd6j5CCCdlJUndaD09SvgLK+hatMUqORh0YH4GuVM/b+K9hS3+vadtJNbMnZZ/w5E88rcVN8r25g3HnNMPUYsMRjM+DMiPZ2ad7GlPPnApGIsNJponJtLk71Hm+KSHXnHVUfr22MqTm6vtXGeIbfWNAFOsqvcdZuGM09sieQrV2RKp6zptdf8doyL8G+/Q+GGL01YfkgmB9kJ/D0qeVSNm+rOHwWlSENZlYqyAHz1xA90Vm4OOAyhzpx+FCVNuMjEBeu3eUnTtBKHMY7riRzII7aQbB7LTSpz9/Y4p++s9FEWnAWQ1D9gEVC5bo4RQ8RHt6VBVxiAZjn9QqRYToazN3EN+kuAlNv0eUuFOBwdt10ZV/44VZUfopVLOnMVhgTHW6FI9eqJINp6/hVmwcjAAmUMEGPazQ6CQR/BrNC7RtEiPMQUL2KGQkbPvZf+ltlh098aJEdNF2gE5UxTDB2ZyykSzDxDZNuBdxpci39IFQeVrgXhJoTFWhHoG238y7JKgNlomrPH82f1mXk0W2lUeOdxukQzG1Y1VSfjEl6zlT//dspa2WsAy7Jn0nzriqLj+EX941LqqMQpMEV4Lcm+tj/hOY6/OdMZ5oWOB7iuy1sL9xXfdgRkKhJvYM2J1Jo5NInBpKCmslRUhWAqnA=","authorEmailMD5":"869f696d8bfe04adc490266a5173ead3","message":"Thanks","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"d0b313cd-213f-360a-a410-4e601728fb4d","date":"2017-03-26T15:43:57Z","timestamp":1490543037,"authorUserId":"disqus:samuelbamgboye"},{"_id":"ab7c326c-5c14-3c24-b391-b85426e1a440","authorName":"Hai Le","authorEmailEncrypted":"O+gRFOBNqcffWONmpSY6joCuTjdCjJzo8HQe4dqAIoGaASE8Aghv60csjBTkYBhSczv5DennpV4KLQhMysVWIxOEtTlo6UVpm/mq+CI3zeqfo/7ymzV4gSsSAzApDv0F0zzdxlK097NkadO9zMvtthVrd9ytA7GTWpySvrfdGixCVUqZuBcVPsu8o/uJCfs0IX4fOaOx1Tygg9KIAGC1a75FOsem95yfC1eqs1+KiSqEg2x3A+IDrF8FD680TNYXaPt0o5jsTFq6HOHOZBStOWuESdujOxzCjHNnzHuqS/2Kfl2HLy2mrLfXzCtRL6qZZiq43KVX36G3loFdnmK1FjD8e957aPxvQAauX5sboqF0Lg9Q45NXkvMxA/e3f4BzF2YDzTbDOYh1ii/0NAn7JT5hmTUDsMXsYtb6n/7lMvGQYA8yYxbxYPpclvzYeE89kjdHKEgTVCi3la0skSOO0jCS06hgvi7TQ/fk2/Qp8ihOX6K/N+7eCuRj13v/BnLJ2S5ntxC6oP2l2d2RjiLyd8maj7QgJnVKMZlP8DDJZOnoVeqihNUDUEr7D1N7e1Mmc/NPagAGbs6DGSGv+SRHvu0h6NewJXMDzFwK6M0xBJiP8lkG1gE7uxKXXG4tbzFjcK5n7h9YmAbMGjAtBJaMQe1OogwN0c9YYJ98qWAEM74=","authorEmailMD5":"fa153687318c55d55df5e5ba8f32ac97","message":"This post is still relevant even though it is ~ 4 years old!","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2017-05-16T18:42:41Z","timestamp":1494960161,"authorUserId":"disqus:disqus_OaaNMkV00R"},{"_id":"1a82fd02-06bc-3e30-9bd3-828d06325f82","authorName":"Aria Roller","authorEmailEncrypted":"ElygvTuH48v70Dzk40vM6LSEg9SQTksMXwGSYA1oEiKG0Pq661XgSzwLYFfblv3hXTxE57w0XDRDMJlQW3io9krWEd2WV5/v6ZeRMPacqKE7BOFMELK7GUMRm+6MvV5qg/kAu93E20dt81+hz9CT4hqRcONxS6MVve4dbEPY7BdqxmclhAXQrP7b/n7903de4FUWDGV+62f2rvz1Y9nfM9gTR9gxoAfYsQK51SGmO4JDDJpMe5eRoyQX2YmMHmuLUiqQ4SzzjOB+iZlKX6paTnMqic9F7iqQe4xYb8RZQQ/kLSOQMA99umtg0Bj8BHhXiy7FpW25eUqizwFcGHzaNdg5pAVnCzLMwVhmHB+/i1c9O+0R6hgvxAbGwe5o0wEIuFQdduMtcjcCEEn49Fqo5oBOfj7bD8+BP2A8oBEh9vJGuDCAzX/a+1535jKUiE5rZka3ClN6p5px9wSCiYYIKH1HXtnD3PjZmwRJ7XpzyOvkI2pOPFylLv/W+U7siqMkxGOOSZsaxbBa26dRg6eNiBRvVoUVH1MfUHY7FVLa2/mJ2i0CxDOPZVjSsyoJds6bNR/mvy6lfEdTkZvbAN96lxQ6c6ylJN9q6f1s+xIDVeJbioJgkX76ca1ltYUcJTwUEUtjwBS73UzSxY7yqGhWr0H6b64Qil8fMJZbJeIx40Y=","authorEmailMD5":"635f80f6f28bd346fa155fb2f1f053f5","message":"Hello Stephen,\r\n\r\nI know this is an old thread so I'm hoping you still see these comments =)\r\n\r\nI have a question on Task.Run implementation. We have a page that is being loaded synchronously using HTML.Action calls. These are calling sync controller functions which are then calling an async function with .Result. I beleive this should cause a deadlock situation but it doesnt appear to... code below. I'd love to understand what is happening here. My understanding is:\r\n\r\n1. Call to Task.Run gets thread from threadpool  \r\n2. Start execution of MyMethodAsync  \r\n3. When await is called, synchronization thread places a pointer in the Task object being returned to MyMethod()  \r\n4. Control is returned to MyMethod which then blocks the main thread waiting for Task completion  \r\nHere is where I get fuzzy:  \r\n5. Task completes and sync context tells main thread I'm done  \r\n6. Main context is blocked?? and cant run continuation of Task from MyMethodAsync()  \r\n7. Deadlock.... but this doesnt seem to deadlock.\r\n\r\nDoes calling .Result do some sort of thread synchronization behind the scenes? Thanks in advance if you see this!\r\n\r\nWhat am I misunderstanding?\r\n\r\npublic ActionResult MyMethod()  \r\n{  \r\n var item = Task.Run(() => service.MyMethodAsync()).Result;  \r\n ....  \r\n return PartialView(stuff);  \r\n}\r\n\r\npublic Task<t> MyMethodAsync()  \r\n{  \r\n return await SomeOtherAsyncTask();  \r\n}","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2017-08-07T15:54:32Z","timestamp":1502121272,"authorUserId":"disqus:ariaroller"},{"_id":"2f8dbcd4-574c-3303-9264-f584cb0c9193","authorName":"Aria Roller","authorEmailEncrypted":"gvFyYDBbpvdlu0pfs0u8EhI+XBmY/DtjoWtJIBTpR5DatRf0J+t9cyPEHjappuLHgY2OJYXtPV3Hd0pVCby/RSoFiY9dqYL+4W5TT3NuZoWutYh9PUBmn+/flDQoLDNRau+6roImLPmroFAf5C2bHJJa2zHXEICOWCpEHbBrti73SabxXIQtEOjYpgp5YqBS7dEW/bIi4u6evvqh5ze40FGIh5UMGc6bOmpz+rFRg9/FGfhjxEMI01YZc/5RVRPW9CgeFBbirQ7+hfEHWUbKpscg6NwGdfYxURCRi9MM6Vo5QowRPoX/an6J5+E5RQJGPqbTxOe8nJt40sVvI6U+tC0Z32unstosI8311CkdDllD/pdd8Q8aGeoxPTI4CwU3dVBXJ1NdvI+QPDH1dQKtycHlplsadafgGoNC/p1G3acC7fcwOxg9jtWfdRe3vqGA52wBXUBNpZpeL3rdwVhta2sj3JpwMC60iO+OMiHD5HokF4P57nCURUy8GXZoodrSeXuZ/NNsigmiYlLqHLDG18gfb/F4acE+iDtv1S36VJ6AgLZ9TV/kdumJzrxxLR5XWOklL5aOUg22xV5SBJPGCY4pUIWFKaOvLDSQYdBxL8Wfedtpdr8/QreS++lMb65O6GqthE+01OUTn9X06GTNIH5HgdaQQBBbiKsQg4Whi0g=","authorEmailMD5":"635f80f6f28bd346fa155fb2f1f053f5","message":"Thank you so much for the quick reply and the reference! I did not realize that the context is not passed to the threadpool thread....though it would make sense, since the execution is blocked, there is no need for a reference on where to resume.\r\n\r\nAgree on the bad practice. We are updating this code...I wanted to understand the deadlock scenario.\r\n\r\nOne last question... if you call .Result on an async method that is awaited.. does it block the main thread? Again I've googled this but I cant find an exact answer and my understanding of .Result is that it blocks. However when combined with await, I'm unsure of the side effects. My intuition tells me that the await call creates the pointer in the sync context and .Result isnt actually called until the Task completes so it wouldnt block. But I honestly dont know. I dont think calling .Result is appropriate anyway, but I'd like to understand what is happening?\r\n\r\nSuch as:  \r\nvar result = await httpClient.GetAysnc(url).Result;\r\n\r\nThanks!","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"c283337d-d392-3a84-94c6-cd0681dc2fd7","date":"2017-08-07T21:40:25Z","timestamp":1502142025,"authorUserId":"disqus:ariaroller"},{"_id":"c283337d-d392-3a84-94c6-cd0681dc2fd7","authorName":"Stephen Cleary","authorEmailEncrypted":"QLayBIA5sLa9nyYr9olpUN7EPQ4ZPt1xfmK50xV7NgC7/QH2i1BklYE9V2tb2P1P7AsTPk3SeBWFLmzz6pDflNFC3Ws/QDYQOWbthPfFN8aFZSUDRSqXsaK7MhzETxKkNbxIJT0W0QPP+7LDSPs/ZijrT4uuncP5ZKtKUrHwtjkcAB1blqCly9DiXrdrD+vOd6TXAjaAMXC1wdFuUxCRBOnKXlY0k8LSX/KNOD0ddlZFTwnYt0D+wsuPmiO2BllmJOq4kNYGQbpGjJQ+wfKwmYH921ujQMqinEUIgObrhVZ8U+Kd823JVx1IlYGwKi/MCwOmhFUxJazdNOoZhew4i+Ty+hTQic0lbDvObQI6jwmzQRPa1abDJy8N0PJkmUIusKrzZKbC/vHPvwpXuAoeF5X0VDUlVWGBXZJbQbzDtewx2ynrx2oG1OdZKIme/t9tRyqPMo6T5fMLA2Eg97T1/eOtslq7tMJ/5oY5czKKzrqFtkrB2KQHBdAHo1d4x+qCd9cVQH6+fn82W4dQXLPzefZkuTuZTJbbE8LuOg3Ef9eUlkrmQLmMJQP02Ipe3zpk/UwXmI61T0vQmPDcpbu1INZNCA5l9UtcLpYl520YNpYIhniuwHFm0Z92PveKCXTO112MRXadX09brB6IgeJavb4CBYNaPfS2BlofHGysHb0=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Hi Aria,\r\n\r\nTask.Run executes code on a thread pool thread but *outside* the request context. This is why it's not deadlocking when Result is called. This is essentially the Thread Pool Hack that I describe here: [https://msdn.microsoft.com/en-us/magazine/mt238404.aspx](https://msdn.microsoft.com/en-us/magazine/mt238404.aspx)\r\n\r\nHowever, you shouldn't use Task.Run on ASP.NET. If this is just temporary while making your service asynchronous, then that would be fine, but this shouldn't be a permanent solution.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"1a82fd02-06bc-3e30-9bd3-828d06325f82","date":"2017-08-07T19:36:35Z","timestamp":1502134595,"authorUserId":"disqus:stephen_cleary"},{"_id":"01ba3680-fe43-306a-be76-25d12305d75d","authorName":"Aria Roller","authorEmailEncrypted":"epKofIPr7fKD5rk7qYJ6F5kXSLR7qgg3kSefx/BZ5cBPogMfVqgPjRNhtu+h51IGAruPMf+malyvsrl94YgGFN5P0bxDunL1yqSTYoTQpF8cQAJhmTCYC60xtB83hAo/PURpRFOJkpyWm32/qoXf0TJice3JeKGbIZGjLCPXPIcJqo6Th1IEOZF1fZZfDOdttgns6wosqCEZNedR7OC/kvXByOtH51Q9G3pYpWBGYzm9Hez+0JDaUQCCiLw2tzjX4gcw0UC3PHEL9qGKdNRns0uPZa1x100a9I6YrVuzxw0A26H7PGlL+lTuAvdXW9RAg+Hq1okqa5vDugoUmd8VjH8cu9MaEYmXV9zvQNv8pCooo1wrzhrunrPvQ6Tm+LHUo3vghG1MQgMQiwU8TEr4pzuBsIpHoeXBi4MuoTgCMLs/HyvBwPQkzEj7n87LmNIEampqRYBcStnNzLecR8POQG8j10u9bsdw4C8fzzq1fChuqQxQKmNZwk8PU00Y5N+rC+PNynKvA+o1tRmzpIJE7aijgmI2ORkv7qlj+SHjGNCOWchlQgSIdPI1/ZXRYiRURXL1FqYrawKQpLxUHow6HJiY+ORfLO0+jvjkdh7YRl/BahvQPtYNyhHWFCVevsl3qTbScE01rDOOKB9Cm+xJenVqTWFVOH2ZQ66pfnSNUfs=","authorEmailMD5":"635f80f6f28bd346fa155fb2f1f053f5","message":"Thank you again. I hadn't seen .result called on an awaited async task before and was really confused.\r\n\r\nI was really hoping that the .Result call was chained after the Task completed. :(\r\n\r\nThank you... your articles are great! Really appreciate the time you have taken to share your knowledge.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"4b14d8a3-963f-3cc0-837c-766a2f8c941e","date":"2017-08-08T12:50:40Z","timestamp":1502196640,"authorUserId":"disqus:ariaroller"},{"_id":"4b14d8a3-963f-3cc0-837c-766a2f8c941e","authorName":"Stephen Cleary","authorEmailEncrypted":"SdpTOutmfMcysAJbK3JadkDoqhCcRvkNqf3KvEu3Tp4nAQCwbWWMWmD+9G0khtJ/+WdtFdTQbe80g178QbfNkj2bh7X32fhmIBX4UZ9vEDZEfIU/67n7OTGGrtkWK07BBcQKMWa2+iP9IxrgTcxfK7rY73n9eDMD7xXHQvFg+5jl4Z+LOwm0OOQEsFBXvKT+Ml85b8kzK5dJ3TIxzew5pV7/edUJsQ5H8ZeBVkGVUoom9yPDtfdVHkVPKlkkGIcXwDJ4SCGkgZpVOeNVulKADwCjRjxU5pL4EDauFuAUA4U7Ok7hsaR6Rn2uyOE9W3tK1Gt0D++mAAHvjOMeuqDVpNynE7NFabrio41usdAqco+7a4yqmkFUSGZx85Nn5dwy9CSkjf4DAwuygyCkuAJfQi1r6MBgH/GLThKz5GtHzOaT0T26DNvN5p8oh3NJrsai3UqVtphCgqBhGZQxTXceiYVN6+yE01pVzjI+PAXLyqJx7EUJ13yn+x76vxjIdGylOsePl0K5UoY3Mu5SVmQvnlFKGfdJBxdu12NuvcIuSkDDMKKQQC/qiwK9AvxMZCEhXeEfoPZUJHbdkwbeRBdrTtMM8YopjuM50ejBNj0YNMM1OsAhgUDiCy3WQS6eBcnRKGI+gEvxEvOU9ha8X/xoKzLaPB022X7OZ4wQfY5cepE=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Result will block the current thread until the task completes. You can't use Result with await - it's one or the other.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"2f8dbcd4-574c-3303-9264-f584cb0c9193","date":"2017-08-08T01:43:02Z","timestamp":1502156582,"authorUserId":"disqus:stephen_cleary"},{"_id":"e0796e12-5d7b-38af-9155-d89cec1e78cf","authorName":"Stephen Cleary","authorEmailEncrypted":"AumWXqN7WDj/akqd+2zceD2RkdHGg8HJWAqBCZ+mdgcpkMc0fneIP5Px+E+jWBVqZ+waXVm0QVGDubSKg5CdcoTNlmcdQRcPcdBZX5h2jIzlBj7Bv4iMqcW9hJOl0qxoCKHY8vQSmcllLUgfchzVXi+wafqolekzljntAggjlNrTFahjpxSt75L6v9MnQtMHVvCRKWBQrjtTAswIZnISx+OcXvt9495QZv55qlgZ6T7vicNHt7aBDYxQeKSIc80RsS1EtW8TL//9IwZf8zhGT4XQdNgxUkq0XwYNm3BDVKp5w/y1vETePSKZTA2w+1JJY1UCmzY5Z4BVXlWO+d9yNJl0bvZYxVZPS3I+qgJC2Okv1WT8J0Nq/KIffKTU+9eU5zBSEXcoIEg46LTI9SwogTrT+IOLcnx1r4jYP/En6J6J02Hr0BvUGo9vGuEZjuXcka1LzTNTF92OW/1iLdhpWwB1LkY5l0Z3y9YQRIRgB/3SfM+LFA5ECpeUop4Bp/strL5I8ulLr1z3NDYsZOhEKi5rT0gQ5M0IRqfoWs1dLhNBGb1L7QCr/UApRiz8idSi6YB1ZQJwlUSvDEfwKLrpKO+hV+ZOJ3sM417ItL7fbcNFnr0x3SyfKeyoPA18lt2/8qr3f41ZqrhpJzNPrHbPcb1rUNkMAqfn1QCtO0kBpI0=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"await will retrieve the result of the task on its own, so calling Result isn't necessary if you're using await.\r\n\r\nYou're welcome!","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"01ba3680-fe43-306a-be76-25d12305d75d","date":"2017-08-08T13:15:44Z","timestamp":1502198144,"authorUserId":"disqus:stephen_cleary"},{"_id":"6d74f16b-d545-3e28-b5ab-57471f06050e","authorName":"Joseph Louis Lagrange","authorEmailEncrypted":"H3fPmIqNJwas4d4h9FUIvnsfIAt7HwPCvD/tDXn7RHrPnz1gb9FkNc2SlT1qwYJ/+FpLEwErbINuyI08ILmJscM7J53zX9a23hkdm7GmuENgUlAHo88JgF9xRlqEhU3BlO/63wdmwXBYkHYmk9IsHaQuUupEsrNUsI1K7vnISiapAZYEFyX+kcqbxF+liOSw1178FeH8DZ/ggUyVQwNumsR/eqbKvuLR62GGZcbZjSyGoF+p/uYRZqMz0nwPBfZHeqv1ye+hsac1D3dqFIviU65SlPcv+tE0417WtuCAWWQ9MgcXViuiN+eY178OgYuvUxihJ9qZLvRE/KdkAq6OMMcyZPPMg2QdHTaFPPWwkimqF2uHwc9GH3yhB6FzivASBsRbxaoHXU6EHsw+YOxGZiwaDf2IHpHhaUCNI6KN+axWgkHTWiz3LLUtRkSsjiwAICkwGCIOfJ7GneTHr/YXplE4+9bFqanuax3lz3gf0KZp6V63sJFFtuZXwSVcdJ3TOUVdg4s2oqxWOEB5thKS41kzooOeFe/jaIJYVPpV5E7nYA1SihlC3v7QGZvnzH9O6ypGv+lCStYreNKnEDwoHk4WRRn3NOCpuqRCnzjaCt0ejs3JaT+1pki+ds5aepZvOI2Kj9nD7SC8rjT0K6eRicMeubzMDwOvu+XY7dGVDYg=","authorEmailMD5":"7e6002f0e0c986706f0d834f7db3c134","message":"In the third code snippet, I think you forgot to insert \"return\" before the \"await\" keyword.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2017-10-30T03:51:47Z","timestamp":1509335507,"authorUserId":"disqus:joseph_louis_lagrange"},{"_id":"e470175e-55b1-3a82-9688-3f0c0d92ba07","authorName":"Stephen Cleary","authorEmailEncrypted":"YmFX7N30ioT16gX8GgFEI14amDNc67A09OFfPcgI2cKKPprs1QUXAWOzvEkvilF6wJqzivY8KWoRbidomk2xOGgMlbJh+fbWWXyAMk5y96oqXnc7/e1C/z6dqaMWQmBgDsYfCdyJmumNB7l4jalUaui+XuiFq6YjbDplVV2XP9lYoDnRmNHz0xc7kd+9XWJ3f/5bm5tOQ9LARQ87IfbQSUo0ScPNWh3PSBvavTJiodxM4doghMzabDzg/EldslK2MbiYSv8hhLZWgjrkVvVSOfzDNunBDOpfgS5d2HRCkU4RTeKUYKADqFriauS8B0AJ2EAWty9YMVjPF/oK9PHFBgxJgs0k6agTK5D2GSQ6LVyzGxNjzNZU7fzn6YCHH1SH4U9GQlv//DS3i3kwoW9zsU4rHQWbLFR1zlkqUST3UGu5ZqhfSLEowASQibtu+x7gQB6FA3zesOSFx+MYvNjuJuPTegk/zmFc14aSvaI8iNKGkAUkzzMpRudqahiCtdI2TRwiWGTACGsLq97gPP5q6rlqHBw6OhrMzJmXlejWJnGeBLy889Po/qcp4co4lVK0yAm3atUqPWW9qlgOm3UOXWwIZPMD+BZo82yfYeTkhntAXJW3xQB8A3xOaWMbrR/RpR3aPf/JWwsKb60YHL2JFzj33RxHgZbCwvRPkq/ik0g=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"You are correct, thanks!","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"6d74f16b-d545-3e28-b5ab-57471f06050e","date":"2017-10-30T12:35:03Z","timestamp":1509366903,"authorUserId":"disqus:stephen_cleary"},{"_id":"f1fa98b7-be81-3bed-9c9d-b4313148a460","authorName":"IgorT75","authorEmailEncrypted":"SrflVCH/lNaitEgSpg7K7pMwJatUNELvD01YDax/z29v9qYecywQUHH/Ht0r15HgBqfdkLSh5l/1Y3qRWdIbSXB29Af2NHZl7N72s6gs+SIUvgw+Ud/0XeaOKJrH8PnGs9OcgND092F5Z1vwgkccz9YhkUcXXcwq/FJRAzJm/hnZDYvil+WEVyvd52ziXlAbtC2VQrYRg5/rWadrTtL+DMZJMKmyp/WaeawPILaMWk+hhe4I1d/yosNzDCWcuixuX8iTGSYKQ+eHY8YTCrzJIOO8wA0SV1AOtclIfrkA8lNZOttwCLaECMNfShvTFzRhfUDQSxBeHl7MTQAcvvdeNOYBblMtHxe3yGmmgsli0zD6+vk2mkgd5qT2SuhZD6uCAc+GqRFJIXybe6VxiQ7uWq+GGJgc6K3C9bdngy4zHmTntrR51Lxlcvcw0m0B/zOUZNLCWP/5TxQZf8U4ug/R0HyfgKAAmXWzHjqTo2/j4zM44vHE3OzvIUA44Nu8gG9NaNiWCpPFSU4A4B8JtUzXtqtrXJ9jWwlA3egBngEMNX4ex2VyCPrUXvawfRPup9tPu0yqfZou5gfek/O454CCJTmxmf+kLq76v5LMOKXJMrQh/Nk4WXnXrOU6UxufuASr0cQXmzHdeJBf7KhMKF91pPeA4BSN/gsY6iVUXFVsgPQ=","authorEmailMD5":"160a6454194230908dede268d09ce1ba","message":"Stephen, what if I can't convert to non-blocking?  \r\nI.e. what if your RetrieveValueAsync method contains a bunch of calls to 3rd party methods which are very slow.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"","date":"2017-11-29T18:27:32Z","timestamp":1511980052,"authorUserId":"disqus:igort75"},{"_id":"0e67a1d3-12fa-3cc4-ba77-71a1dfdeff6b","authorName":"Stephen Cleary","authorEmailEncrypted":"r+PI7EhXdZL2986jVdyxdDBFncz2hHiiGHwPiZtjdwPA5VsLX9nKGG47HcSnq6gVPOQLsqZGD1Uh0fgjAycLWg71KXNFdb7wy7Qas3aQ7O3B+bZn6773aG/2OvGfQQUblu9ZrgQZ48LNxDvYXCa59QfIfdjLsPSsEBqQ2JUS6Ertei92E76F/Il1V7WGrPoCnSvBXPo+XDiwNEOI08TIuUw9r8rXF2St9aUfJQfHTVaWLQz0C4ZOSlzRs80GA0OjGK6mHAf3HHk5c3Uga0jdN6bT110o9bp6nJZYu/d8TxnoldcW0SuRvo4CCGA3su7xER0DdsTXuM7tCnTfX8UzMNJxzJ9UB/FVrDSNvfFCA0e9RPb6uQWHnkpF/G637NhaTO+7axGztUPPSw6DJyjY8c0SjyKed4w7S3GFo9kLed8CPpMX33ObisNwzUXY8imfdNthiI0tEaT00n91aDqqHJv9Vc4radc0c1gqAVfmVFAaVKcMU98ehtzvtaGqfymQKMe0+wyYDfcaXzgrsafoWkNlF31iGsRDZGPT8XVez4tfR1hwVMNN1LIyJwM0HpTupaXRmATmwgOsixMwXUAtsbuB85yJC3ltSctrbFGHz35uE6UpKWwg/g0PVrbsM03jx2ZL50Rt8xY/zyENDLGclw88vrrn9SiI4g0OXi/ca3A=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"In that case, I would keep my methods synchronous as much as possible. So any business or service-level wrappers would be synchronous. Then, when the time comes to call it from the UI layer, use Task.Run at that point to call the synchronous method.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"f1fa98b7-be81-3bed-9c9d-b4313148a460","date":"2017-11-30T14:20:51Z","timestamp":1512051651,"authorUserId":"disqus:stephen_cleary"},{"_id":"1ed42792-501f-3f0c-b1a6-e858e5b42000","authorName":"Andriy","authorEmailEncrypted":"L+NwU2ThcGE1oEl4GIYWqW/1+0WqSuJZhJSZKDY1v2Q8B3nUkxFhWhkmTO+pzCb6jZl3KqvKv1XG1Bob++zlYKgp1QM3FOZmIzeKFg4I0Lx6nBzfoBTc60Fd6v6/tRnaJfNbduUWWIZE1inLMafCYnwiTzMMv6F0oXrpuZYeQnh5hsiK3duse4jWH2WfCEM90q/J0J4MFMoeG5G8Dd7s80AhR+tsu0mJ0dlKjvvqJqKokUKbDxykguLPW9hHpzWix8bYVcic4jSdkUVr4Edj611tcbFsnNlTvsWNj9UVV1n4HEN7ReQn5G/jHZpCmOAdN/XdzInMJHPfuQdIJWESJSTNI/qReZhzsMfGLK3xC/bXSaiDbHc57T+40bidoLW87ADpsmPnyAieyXPqVzW/Mccr+vh28OLqbhaKAZX4KxKhHYnF4kQDiTCamjGxJ+5QCJhPL15ct7XWZ2Xj5gnwjCm+EDGVje4HDvZDMLtFYk3tq4SfM1JJ3WWaSt3wp+bhx8VoDVE79byp/84PULScb/I/15cY280i2T/527SUCjPs2+2CoTETj6GVguLhKphd7amweVDm7FAozynHjVwtV8+7jD041x31VVq4WcZaHDtkoP8ywa2DrUuN5dIXnLfzZ10ucBqvK+nLzvoOgyiMxZieYlhM0fy4fxMFsAjj9s8=","authorEmailMD5":"7b3ef8e67ee7ef1ab8207b8a51c348c0","message":"You can queue a work directly on a ThreadPool, it doesn't return a Task, so yoir method doesn't have to be async. You can also post UI changes on UI context by SynchronizationContext.Post at the end of your method. So it will look almost like async method, but will return void.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"f1fa98b7-be81-3bed-9c9d-b4313148a460","date":"2017-11-30T19:00:45Z","timestamp":1512068445,"authorUserId":"disqus:disqus_xVnVZUEaIe"},{"_id":"c77c778f-a76e-3b07-8d28-c0fa83d2fcb7","authorName":"Stephen Cleary","authorEmailEncrypted":"Cc9wZdBChsxGSgkuQ2ZDt/T9ArBwnnARU+iI2yc+4pRH7rdV+Nlsj5vBCi2Rt5AXFWdmyaQni8+YGhP1YpJYinphHq76ECXMnXHR0BHoGHGBiCY9IjlqfvD3f1cP/lczts42qTdMCYuujKyCERFlIhGUjHGgCxgBXCxghnraQj1Douw3G/QYqpJingzcX8bsuON/+rXBpJswun1f4wJ0HZb6g9TFMOxuPPZA4a9ujTU32Lp4yKEEix8pXLSLrknJKn6ZRw2H09vbgn0H/PoKcsEyg9f41d8m+jbJDzrxibOvsr9ezRXFrcVuNdpEDgxzXeJD1t0Z4rE//L22njIuAjwrG6geeNnOyY2jub5wivlVMuDLQPQ1wABGRYU/IqvP82WSznuUdPCuw1Qsl9MtnlVbCSCGJUQEOq95DPvTkQ2tPSiszs0mmegQ016RV1ESzWpEqcPrlrm83+2OeuyB3ueZFEGOZFugAQioffddyMLXTq3wpBubtupa2HF+hCsPvII+7333ce/cgTB6k/XvwnNR/ME06hJh7Iz75N4a7okX6KSmJGZHM1OEG8Krc0NQojt5cFUdRKxy1vYZNwrBPV4gWSMf/uHeS/GdDoeTL3KP/f/9BgZUxO1YSqdUIchMzVLfPI9qHQ7MZR9UK7r1Conk/vlaG0ibVOFAAbuAb9I=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"That's a very low-level approach. I much prefer Task.Run with await from the UI layer.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"1ed42792-501f-3f0c-b1a6-e858e5b42000","date":"2017-11-30T20:09:57Z","timestamp":1512072597,"authorUserId":"disqus:stephen_cleary"},{"_id":"951e0c83-39df-33bd-83f7-a70cafdcf5a6","authorName":"cateyes","authorEmailEncrypted":"f5UlIa8oQOdjoN3NPQmKL+t/viLOBYy8uDDsvzJ1GCAJjoM2zDat8DTkSIlhIJCl1qVZvnWrD4qZhYIAxky+qtyRZZe3nLNGoN7VyOG84tKKnASeAzR6BPTorGC+dK5Bsx5hyZkEmKcRmALCxKPP3quh++ZegOTKkqIwhxz+XC+IawBgzxTrMLIxZztD1IxTJmhH9msaVAN+2aAgw5Y/OuQmdUKCNcGuZT2oIs2QTqAJGYn+lUlyvtZcnWrcmXMpN0I5BsR7YRsZJoMi9Rnvx4SdbvbOCMuTA7qPlBWysJgvWGtJ7gcZzhZHqqXcBANK/3XHKB7JYIz3/oFbMKIdOFke8jO3oT/cH+RXKhEUSiz3hZYeCtVdTzbMqq5H03WI6tIXX5EeEe/2fvaVwnjXkBHvYXJKyovLoH2684/QLksqs0P8yECxAq+t0ilir5nWvRnwNQaSQxO03l0Swu7Qyu89SxqPmXuSb5MCK94f21PnrcobPZTY/kqql2uP+bJ0xypEJEMo2W5lPkOwHvi0nlRx/wN7GLYWhAHgL8WWAgQWRawOkFb/H3Hkqbexn3ZI5SRlyFo2oCpfImTHaBjc0UxGS9YH9Js9gM8vwk4Dyg9ocmAQ0ILAFSwxDDiYydoKWK9Qo5hgowHgmOC0YcHpfmChGA5YYtNphBqPmom/dNo=","authorEmailMD5":"a45c2b2c1647b28ea4c058f06e418785","message":"Hi, Stephen, () => service.MyMethodAsync() in the Task.Run(), it will  \r\n return immediately without waiting service.MyMethodAsync() to   \r\ncomplete, so the thread to run it will be returned to the thread pool.  \r\n Thus Task.Run(() => service.MyMethodAsync()).Result will return   \r\nquite possibly before service.MyMethodAsync() completes. Is it right?","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"c283337d-d392-3a84-94c6-cd0681dc2fd7","date":"2018-02-04T00:42:24Z","timestamp":1517704944,"authorUserId":""},{"_id":"b2f412d5-72cc-3914-8eeb-194ca9637bbd","authorName":"Stephen Cleary","authorEmailEncrypted":"NDl1k+x5nG7w33LIOQahutB8aI/LALp2x14arPYbtaYzOJIsRWgWjJnw7V0q/LVO2SeHIG/9pIhe5Ejabh0it7v5vtyoCUwS2tZlUf/O7YxKz+jrz1RTGzmArC8ikYnvSltERPLkbK6SrPAWjiBm1kIyWfRLISf7jd88ZUfO0cToBsmEZHt/U8qNKKCaLOYcL3jHqGC0bDogZE9zrdVVWVLmUo/u/XcoIFo+VNpL40kCRIkhcX9gLsl3JDGwY57SbfKqIK3wKy0ME7SwdEEnR/zCy7elpcvsG3c+XkhKQoimNrl4lJmxOGejne3K2vWGE1hsC5MUNM4H+qxsiduuW2gXRPDuYoJnMXQcJpTEG8siSmtANGrap8VCvuGXYrxMY5POqxF30KjcFNJO51TZ+cNuEhAkDYiFrDiHmZkJ4R1sjZ7zge0CHKT5Gyuy+tZBpvPJcbCP0J3pXkm2YNM8tw6+d9BBpimrliifATKjWYRriigYaF2QWZR798L5V3MdOgo/oPSYsoDQMm//NXnQvq19KvmrNO/3o1I14t54rMYKKUZ65JOzwy7NDEgoX66+e/2LHjIrKZ73uglS6KvYtzjTPR+rK6G2Gb0u4qYmppxIIkoXs4eK0xCeQOi96x5oJPtIZRC5Qmk4iEtmsbXCiPnuxlpQPVkMm/9zmaG7je4=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"No. That behavior does happen when using lower-level methods like StartNew and ContinueWith, but Task.Run is smart enough to know you're returning a task, and will unwrap that task automatically. So the task returned from Task.Run(() => service.MyMethodAsync()) will only complete once MyMethodAsync has completed.","postId":"2013_11_taskrun-etiquette-examples-using-4eb201ec-e73d-3fdf-8d94-7da56421e02a","replyTo":"951e0c83-39df-33bd-83f7-a70cafdcf5a6","date":"2018-02-05T18:54:47Z","timestamp":1517856887,"authorUserId":"disqus:stephen_cleary"}]