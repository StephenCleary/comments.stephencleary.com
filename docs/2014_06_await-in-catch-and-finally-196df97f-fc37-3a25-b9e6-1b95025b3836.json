[{"_id":"5eb4193a-3f68-31c9-a699-8312bbd061f8","authorName":"Marcel Popescu","authorEmailEncrypted":"KThyTknROJEmOPbBIbxSjt8XzfrfD1m1XckhDoMNLIrTtUANTcsIZRu2UrCEq7bB9aBCtvewLxyLux/0jnJCWX0AnPb+ptLi0JhYypL3SF8VlFWfjHeUD/pklOvF/d3HNNKTUiAU8wQODLpagFZ/6ceic7aLqeSi6SZ/d28q+LFNZq9kJi9SoSVIjlVeUlu2el06IucoR7jXnrjVLC2Afn8WxaxSR6y2rNr9SaI0uRgPWrceka+zQh2IQQU8p3nX33LDCr0eSFaifcNPlRn3Q1/rZGk/rQ9FasEVPEhjuYBKO39Nuu2hJy1dqVwjQnGD8ciHDI92yTEQ2uhje5ysM0P/AIJql2hOV6SpyOjR5GoQoZ9vyiw9RebpkqiJFbD52O9BadAAkM1cuhEX6aGzBvqZFNtQzyProdEgs97J9PjDic0GoMGdnFP2FX3E3uOXTUkVir2y7mZ06w/axTkaV1AFK5mbva8WUk4+OkvTnPweFVMdLZMbZutoTNrU88oJZyDti6VYhm6HW72VJxIn+1R0drFlB7vf3ihemFlMh2qFMxW0stjRLJIUOv4aS+iWOm+NiZC1oSnE9n1HtI/Qmgynp6D5LK2AB7BMW0GqQ3iw+OBUJdFy5bo2br21vP5mJDdDTCYfiivLlXRlrXEpmHjLJsUfZSRAxf4kZRO0kqo=","authorEmailMD5":"062547509ea29cb1a75e7260a77bb6e5","message":"That you, I wasn't aware of that, I'll take a look.","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"91d99160-f7e0-33f1-b51a-873f1fff3ecf","date":"2014-06-16T08:36:14Z","timestamp":1402907774,"authorUserId":"disqus:marcelpopescu"},{"_id":"91d99160-f7e0-33f1-b51a-873f1fff3ecf","authorName":"Zarat","authorEmailEncrypted":"RxKIIWIAz/Iyd6Ms6FFN/pCNYSHnn2D4geLL8DwKa8fklXsKT6NbTnynSuEhsOovuRQpIFTj0qyamhXx/wj7Y4wVXt2GVn/QmIT4CB34y5F2nw+6nKA4ILxhc0ZKxqux4yEK0/FLD7Oc4b1TpjmevSkD4F/HetwXYpVhX+6JzOGcqLhMXtlw0nY0aPOUaaqGTDqw74zuuPAPTG+ta20CBYpy2FHsFTDH4CsvMBs8UZ2xBcnaaHbbpq2RnraGHGUSQQ7q5qYkfxK2onS5wfd4+HpVy8kycqLUWBCkRIGOvlL4sqtT7QH3EuRaOqrxRNkp2QLNGNSwSxzM1teYR/iMlmRFW0lS0J/nvVKqACBCzSEEUQCF481gzsSXI8k5pXla0DqhsouIuT59v/RQG3X8TmhejcKnla0k6y5e6W2ne9+dNbjc7s9xuYQm8Q7Pw6Fl/IOfQUqHsyqMLkqzDnJuhxFuTXckq0A9UEaimCbByecAmuawM25Pw9x/oGYbBGpBnIuPb2JQSti+K4QAn3H9CU+s4F97S4JUwvdLlY4HhRxVsZqOCqGoFNChFJZf+o7g+j6X6+51wpMPJZIgmzDDZ9fS/oUr2QYVy1jO7ySUj/29x4L+N1nNqra6y+KEZP0az3WMT9d2yf/KkBBjcfYKX/djH3/Tyc6xdmAixCnLBlo=","authorEmailMD5":"d307e42a92fbce947bfa9fae4400e95f","message":"If you're on 4.5 you can use System.Runtime.ExceptionServices.ExceptionDispatchInfo to store the exception and rethrow it without overwriting the stack trace.","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"e0dc4f0e-ae83-39b8-9ce0-b23ee457470f","date":"2014-06-16T08:23:07Z","timestamp":1402906987,"authorUserId":"disqus:disqus_bCQ4ScqAv7"},{"_id":"e0dc4f0e-ae83-39b8-9ce0-b23ee457470f","authorName":"Marcel Popescu","authorEmailEncrypted":"WlULmk2eDpZANbL1SwOigzk2EJaMENKJaGAkLnHxE45X9Dm2r9+74Wg4IVuspCyB8anUqcEPrUG89CBUzKmsoUjH8233Q+se/ZF5wQ8AdWjQC/h2V82868yBwv2jKIAWi4Xpso7eIfmsylwO2Y8TqFCoHSmnsB9JlZ0jv6ipGnr0TP92Vs2SA93sDlU5elYR30r0Th5aJvp+nMj6JR2YxNBqqDytJJFDlqsoxr056qnrvLHEjUfSWoL1xgJFJN/fkh1FgnQsrWY8cPhCo9Moxt1yjOrCj3KDcdMuxIpSOJ1CBE6izq27QJU1Mt/fywig9V4wEWlDfrcQzYyUsFrAbMSnxUMZeN8C6z5DoDoUhMEd2OI/+wHnAivBc4MB1KtpBT15dcdhOKaQeX444sXNB3KAhYPYUtTRH5uWDtsTAKYmkFXAtnjjUaGEdq25+eGmIYWy9knpzOevc9DW/SyzE42HVK4D1B/Q1ysiBBtFLfD4YOdKxxx9piVKozO6hMTXIAT8IlAzNjZ6Csy+lrtWJ79otx1QJrXh2GrIMW47wqWklfZUD51fQDrQACmXIu4916llhuqkgPuVcLLF0zzSSzUgdCHz8/8mQtO8cz6/f6Gcxfoh4EdH3Gf6HY2WQWh229TU4C+WDLiQlZ5jzXshmVFzf2LPoWMYXPyZgfMVZ2c=","authorEmailMD5":"062547509ea29cb1a75e7260a77bb6e5","message":"Unfortunately, that trick doesn't work if you want to throw after logging; I haven't figured out a clean way to handle that. (Currently I'm calling the LogAsync method without an await and hope for the best.)","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2014-06-16T07:45:47Z","timestamp":1402904747,"authorUserId":"disqus:marcelpopescu"},{"_id":"ad453931-b13d-3b82-bfee-b804eacfa5dd","authorName":"Sergey Kostrukov","authorEmailEncrypted":"Be9aZZg4At6k7/v+QmEUqNmGeWFBWrsnJ2xjNM+jLho13se47VhnPCPIcuBlAT6ZUCbzInAyKEi5hlPo81j8HgbnpbCBnfD1puKkkQ/+bRMMa197GZmXgBupJDX1n67H1RVsaGndeufzbkjnSNVXHwX4VqXMkY/iVfg2rM4gLJZwy+WBL8VTG34lhfGxkIJQHG3DGajxrrhfgZoE9F+i/4InTopAVixMbrWdAyp5/tOYNsrc7qWAJlkcqbmd+CfcuzZZEGpP0XUkOq6J2ez2FipZb6pZhHjA9C5lv+//lp/BEi5iAQUd63g9pe1HxJQX9FOTEwI/rP77s1HaYiMQ/sA2GEL7SDGC7+CQoJWll0CWMcZyh39lhP/hvTE9CfMsZjsYG2ZRCyuI+eLZjludD5YkTrYStbCsXrlgFr+CXbnrBBHV0znYhOBSwnB9/pvLpkl3bCfys92ZW49SNZvL/lmhlF9S1ZyTsGJDd/gEVB9YtnoHIzQLZSeAYc6svdarzSLQFg+MOkCU6k1GcpPHlzrTsJajTnrhmRTqGynfhZF+/63b92OePneA/nV0Jo221cE/qlNL/GovtaXY11Aq1jE6ZVehnmhqjQWaWNdP5nCVWfp3TgKjlZKCKWM5fLNveR5EHV6fm0UILHoQrRjCzsABxzX45CxLhy83W4rTAXE=","authorEmailMD5":"7598d735bc04481a6d5da1625652bbd1","message":"Good to know. Thanks!","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2014-06-19T19:45:14Z","timestamp":1403207114,"authorUserId":"disqus:sergeykostrukov"},{"_id":"ee32d751-6c99-3a65-bcb3-ce27297c8957","authorName":"beton","authorEmailEncrypted":"TsxQ+tJeOUWTLKZa2niEvSyhzQFZpBUI+n6JrqYRUWmqYHpGUqsiugFdkjEiUh4I7K9TRd+lj1CdCZd3xun1h5K3R4muAvWYGqYiELkm2IiPmHSGpmaye/PsJZr4lN6i3fD2QN2tGGR1Y7JtCxWiyD0al1GsaoxVqo3N1lbizqTQ27Rguiy1oFA48utKmRNk39qK+FzPk7YTlNO30lBVphsW/5KoBsEXMkvQ2oQg7KPIkrk/bUCUfXIC2Q9x3bEwgcrSo25KIuLT9wMBffCW/CNsjrY9UZqMsA1eMWr+lw2sqom6iMfKSq5dXU3w3F9xFHW5GTLKbJ7F0cFR/hiklyHJ6j0Ozr0JD47jiUm2+iMtu912tIkvqwBAMhvLghNVuakeAogIqRfDAk5OqHxgAo0p2aTJmK08FA3QwmMJu5BNGf7EDmCeOmdWC9Zs33vtfGrqsgSanAWVmVtyLt+fnROsdE5NYn78LFrqd1H+70gzcokcLfxtI0xAEVS52piU28O7Oy2C4ZGDdHDilKUbgJGjWNt3xaVCSkT7CDJId7OTCcSwRwOeQl+K4dd0Pxn3CF1nrdeExIFC1etlVBmlQoQ875BQAAvbKsz9bncvSvn0OX9dZwxdNDqUO55gTfgT+/cPygbQlD/6Fokw8TNbgddQLickG4wYp7iE5Q4Fk9o=","authorEmailMD5":"1bab52ce4bedb23809f85251a98b82f0","message":"Can you briefly explain why you cannot (or couldn't because apparently C#6 permits it) await in catch/finally blocks?","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2015-11-26T15:39:37Z","timestamp":1448552377,"authorUserId":"disqus:disqus_OW9fbW4I3h"},{"_id":"f13db1a5-ebf2-34c6-aa47-c2588bb04d92","authorName":"Stephen Cleary","authorEmailEncrypted":"Xy+v18NGghi/AIkt9WcUH3Q8V5iF/JGSbtLRpz7AVudZV3fU0SGEhql/lLr9XAih2jwyED/LSa5KZmsuJ/ijiZz0PBydY5cuXWwt0EQ7Nncp1+ppDCplctMJpjEBEONOnRMdr/rMls6LbD9Fu0Emj86TBQ5353SvS/J5ALmkO8u5+v/F5J1qSK3g6x7fec/VpNbQQrQp7GglB/fmxCZ6RcMktRTDyB1hfKOE9ZfndW26d6WWKENlA1ueAItfMUQ1a5htkxpiW/gRyVD8iHrVFRfHgGDgKBDv41UjaVRaQuejqzrvH6Abdhy2PNMo+cFOxcLsSd6vFcVQbsy73l7nv5neze0aLQXPqK+Ma6g31GIrXf7YfRKmxUWfL/CldZz8j1opz7VKPOo2hh5+nPXSo8kZ9A1YHHKIXrhMUzYq/1+83en3DaboK5vNjhmOl9ABVQsEjiuxYp6RP8ZixYfK38TmoQ8WAgqQRmA8CPTFyOakDSwlteCDoDk520ccYAJY+jcH3KZNStYOHZqtFUtR9hsU1pPavdcZyI3QF4C2nzzmb9E/sXJ1L+dW4sqL+Te2UFe6nsZaZmSmFUqb2WeXm8pq0JfltXUTtZQkb8ELKOvxhBlSTiqIsfA1HvSri+DXHxb0RuU2LZVf3qQb4XbyM0fa1rufzXzHcZoC57CN8H4=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"You couldn't (in C#5 and earlier) because the language didn't support it.\r\n\r\nNote that every language feature starts at minus 100 points: [http://blogs.msdn.com/b/ericgu/archive/2004/01/12/57985.aspx](http://blogs.msdn.com/b/ericgu/archive/2004/01/12/57985.aspx)","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"ee32d751-6c99-3a65-bcb3-ce27297c8957","date":"2015-11-26T19:16:50Z","timestamp":1448565410,"authorUserId":"disqus:stephen_cleary"},{"_id":"e813545a-86ca-3006-94a7-d2e30b9aff9e","authorName":"Rahul Shrikrishna Joshi","authorEmailEncrypted":"eb8k33mUY8tXLopLVpKZ1TlDbfrxELZBFTw1xs+ku5bw+lDIKU5so+ZPa3N1sfKcqkBlmGRCoMUbMh4tlHm2/rDc5Mhf7Goo0keUGqtmmgTX4oSBoFOXUTWK455JZkOgAuykzdst2D0K04ANVs7Gi9hXiDYjrmIM3QDf1zy4qAy4bGwmPv5OkDnS7KD5juQuaQss/4N0zp4sYWwZwXan+1l8aIyMwIdhYRo9w57E+TTwcShY6QpRq+DT4/DZh5MuOW7CpyZhTem3ntvdYngl0AfFQeptdqbuYyt3dR1H76QVaKEOB0j396TZ//0sNsZDtail4LmtafIUzT9l1i4QjXT2yjkyeOBd+JFw8zfGk9um6G767PlqwN1wjLPtZBoPJCCoTQF9fmMv+1QxdQNFSrWiFeF9DixbK/7k+993AM/N+1FRmcGm9haP1+kVxnKC5EbdaCV4Tvhxl+UxIDaNm/8wbwFdTaD1u7ZCfj95K7M5ZURLZ2YgB2ObnJ6BRVmB/7Rs6umAaryKQVsl42mx9IqiZ/2CYZBgHrsaOgRkIWiwC9jLiXhVpf2CQPqZpiBS9pRyj5aqSL/aQAcoSBjStlT2Nk5G9k6So1p/U4OpdIWuDjqgun0CA1S44mbUbpfCaaYpisKuMSq6NLOBT1lVxwKHDnmPNkM9xanOa8rXdFI=","authorEmailMD5":"8cccaac7f182897317df2e337a11be01","message":"We can use MyLogger.LogAsync(ex).Wait(); in VS2013 instead","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2016-04-22T04:55:29Z","timestamp":1461300929,"authorUserId":"disqus:rahulshrikrishnajoshi"},{"_id":"eada00f3-b63d-3457-8270-3da9fe7217a6","authorName":"Stephen Cleary","authorEmailEncrypted":"OumWnu5Z81b31x+pIJrc5VfpEUR3xv8exPdU7Y2ej1I7wMdO46Il/ZsusoFOnzlkTd2apPSYl+JMDvBLGiLAEI5pZAogGg+A7t+r7+ytKnVkEvDqBXlEeNRK2iqJJzbyoJOQlO79b49LqRXFWbXHqGcOUYDeA4f8jDM6anw/wZ1Ln9DzHs5RxXrBSvQpDSyIndNFzQ0jWTEprOY6FpQcnKlsgiH7YwbqnnD6eCloA8B+HRHktgTS9wm/3BxIQ9MRnCwsgzQ8oSJ0Ccqy53edsfZyj15N+7JHOsB+A153nfeEyXZLtjY9whGjQMCTCr9ljNfFM/vnFkUSqG758Y3s7etz6j5R9IsBcIr8kQMJ5TVtaYZziwDSNAWgrlEo9V9RriVluXgzZ5X1UBx2wbFKD4xw/BTeXvD0YoNJu+MhLwuv2OscgUE20wPX49hLPZaprQBLp1sJDJePt6ElimaejrbSlfC6SNtM6f5LhBKw6cv/12UrMKpO3zjmgVUeMXofCehpUKNwA6XoArDoQAaUibir0HS70zU+oooJrBFZ5ptALlTdKBCDEk4RgWbD3gypGNFWeSXQO70gk2qIsDVXks0Nqzi0Xqcr/ijSqGB+HVVMC8jNaecmMVUIdMvdJ2z1wNh5BwcZ4Yl6Y0xCeoZ4PhLownDOMHf8g8cNQLMpwzY=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Wait() can easily cause deadlocks, as I describe here: [http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"e813545a-86ca-3006-94a7-d2e30b9aff9e","date":"2016-04-22T10:54:27Z","timestamp":1461322467,"authorUserId":"disqus:stephen_cleary"},{"_id":"93f30af3-4f6b-3e0c-9bbf-ca8edb534ae8","authorName":"Pinky Paru","authorEmailEncrypted":"m0XkWz+NiE8PaGADobuJJOil8Nl4kHJtBdlhS8VFPAwoS8oIjVu5dem3zLKsVf9kr3BKgiYb049P9SXlza+ZileieR0Ii9/zJDzu5nK5lvw7De0sh83TFcl4+ATY5TmmwqsU+BzRI+gN4L+MO5w8ACROta+RQuTiaZx8QlyG8n8+giZu4XaUTXEx/TN1kwK68OF+GfUSS3tDd/pjlyrWlVHrfRjentOpAqzCtwcWmorN/hVyNbJ4rigtkVKaylb3CnvTqiocXXBjsQ7wEAKEysik6mfedytL74F5a4Czd+xhc5AjY45mNUixcACxpJLT/xQ6w//+GWWrsOOOjzxVcNXhlbOPoVkpNmCZFghUpz47WHeXNAYP+fJx9FeOSjbYD8x4VqapPspGZ4OXPrbR/8sWWAsd2FhTnIQvy0uRX6HuklID8T81KGBpz8jORLb6/472qdMc21JXG8EPoQsq2cEr9wyZLpJRW5USSCtWRWWkXPpCJedPA7/5MLJTEUvpzGAaRkhqg0uoo3T+N5QpMoZjuCLySpzOskKo3s/mH2jBl0tYg2Akm+8Ju02cSG8R7n4B+rG13MaVQxys3dqcjyfGVw9NUPcaIjIlTf0cne8+EUD6MCzL5ceGlY2Fiz6TWKzGZfYvXK/60T827q92Ha7Jbsv0V1keJSC8CTUIxg0=","authorEmailMD5":"853585d273c77c62e48831ea5e691da7","message":"Please tell me what is wrong with the code. Finally block is not executing. In async methods when finally block will execute?\r\n\r\nTcpListener listener;  \r\n private async Task WaitForNewClientsAsync(int port, IPAddress localIPAddress)  \r\n {  \r\n listener = new TcpListener(localIPAddress, port);  \r\n listener.Start();\r\n\r\n TcpClient client = default(TcpClient);  \r\n try  \r\n {  \r\n while (true)  \r\n {  \r\n File.AppendAllText(@\"D:\\tracer.txt\", \"receiver started asynchronously\\n\");  \r\n client = await listener.AcceptTcpClientAsync();  \r\n IClient clientInfo = new Client(client);  \r\n Clients.Instance.AddClient(clientInfo);  \r\n clientInfo.Initialize();  \r\n }  \r\n }  \r\n catch (ObjectDisposedException)  \r\n {  \r\n return;  \r\n }  \r\n finally  \r\n {  \r\n listener.Stop();  \r\n File.AppendAllText(@\"D:\\tracer.txt\", \"receiver stopped\\n\");  \r\n }  \r\n }","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2018-02-28T06:22:20Z","timestamp":1519798940,"authorUserId":"disqus:pinkyparu"},{"_id":"c578f9f4-bd6b-3c06-ac5b-8af9c4872293","authorName":"Stephen Cleary","authorEmailEncrypted":"BjaKwHz3fRorVky2+TT2paspWalKswqcavo0FYz5LjPhvoA8svT35MSmkcLgf9cnJhMeTZM/UxncgHv9eETcNQorIYuhaLVrbjDoN32uiV63PZ64krNwXvI17cGeguZRgxt3ECYpm+6wfy39yd4EAdezNgiMVG1dhWXgCZzXHhiiHp9sQ84uPxtxJbwvGgw2tzqu2UEHszmAgW1RjUMmb9bg7HJWMyrrZp6PJDNNAqU1yEJ15dZ+Nkt2kY4Jyi6VuHeIH/SX+nv8IhojuPWsPNSolQe4HuPji8Uo+14Qr9mjViF0j+gwij/YMBTA7R/983KeCR1Y4UxWFJZiFblQOdw3xy1/1qJ8h+lzgZOXVJs1zJ5xOyeYDmB8RTrjX3Qm4kkUJ4KN4WpvT4KLXkozEGUapKDzWoI0hROQYKsf+raCIF86HlCTkcGqRxr2y4lNgyLE6z+TLDOO2aA8Y2H1GPEYM4T8FsdEzW49XcxJFO+elpcWMvT1mw5ctwrj4jgaf2cLYBli1wSqZRXsdqLQpmU1Wcoyg6gprXazo1SIKnA7/Atkx/a7+fwD7FVtbmYWtNKXlwhi3UOJF9/psSAvah9a8KGgtM/04ELrJNFx+AKkX7KTh/I5T+ExYTTK0H75Rvg2H6JHJoyPkIUoSyEBogVl9bgmwXufMOmcDDmxMGA=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"You have a while (true), so the finally block will only be hit if an exception is thrown.","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"93f30af3-4f6b-3e0c-9bbf-ca8edb534ae8","date":"2018-02-28T18:31:06Z","timestamp":1519842666,"authorUserId":"disqus:stephen_cleary"}]