[{"_id":"5eb4193a-3f68-31c9-a699-8312bbd061f8","authorName":"Marcel Popescu","authorEmailEncrypted":"wU3iSIeWpUJrr8DOUhZNiuxqu+tXrQB0UZnBt/4TLAQHzavj332h2yluG1H0rGH+8fTa7axQYl5ZwHQoKFDD4Cx/BQiYwEh4TssYBzLF04oQLr7zDBZudzvET+ah0mrztfIHk/D4mOmXTANvgmTwcNVEnSGr9/9ShSdcWzmfGGGHK2fIfWHqDgBAQqC820zJC44p72LvaCfMmDv5y7N7EP7XQRDyBVJB50N17t7lXb8hKvR0mVrNa1qQ6ptVMt/550YES4lFvCmB95DacJFEXd4W311D34N1a87NAKcZFOMsTudMNdBrk7JrLEvSnWUjqNBMUKSuyg5/n1gUkQYdDUxqolLv+PSebZm34hus7JEzaQry+Wg5pQ01EtiRvOGpv4saKf9xDJODM30/X3yMgwjk+P4MqRSBYeZQlSD+frKE2JVpGetgijez17Cm7jMbMFPCjL86xHAhmmzASofaXH3YLc9wBsnAEUvQq/ajkuAjzwiB7lu+ZkP2ewtwwsPV+nmfsDZy6u3AT95Mc9+pPjdPHjkdOKlFKXbCY9PaN7TcAfHHbONooJHJkzdvuxTbUFQtVbwnTjFkku2jDNlvfhw5kWl9QiE5DNOGaLlfDIkcN1KeTk7r0RKr01uuQ23YlDGUrhcVQE4spAPVRghcC55cAF1nUAzCbWPAC7kdGtM=","authorEmailMD5":"062547509ea29cb1a75e7260a77bb6e5","message":"That you, I wasn't aware of that, I'll take a look.","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"91d99160-f7e0-33f1-b51a-873f1fff3ecf","date":"2014-06-16T08:36:14Z","timestamp":1402907774,"authorUserId":"disqus:marcelpopescu"},{"_id":"91d99160-f7e0-33f1-b51a-873f1fff3ecf","authorName":"Zarat","authorEmailEncrypted":"niCJHBfqzWeZyXHs0fEis4tyPa4E+n5yWL6MeRbcERB5SlKu99bd9rbbKo4pVbHLMYRs7S5a1ePacQ/Qp5GqzdqgwNy6/2o36qqNucyhZr1QChH011Dz2CrZq63WUvjm80zINR3YOVOGXRbCc58ixQxDNmjeozIc2byeq4DZna7KA3dDx2J85z8q78HsvgD4bUIZ5KxIixsV6JE6g9gEq6+ojd/92IItnmUZOx3O5+JmqaG3dUTm0VNxb4tDhA9CFwicj4PwHDPxsDbzUjvNxhFLn8zSb3DmtTa7he1VMOikvJF8CQ5Vcjwu78Zo58n54+QkU4XM8Rcf0mbRxLpkvZhPCQaYiyGfRi2mx54c/Sj2SppGiHIEXenBzNr/XASZ++wBLPiEvicNZVWNJjnFnU8dDC5Bea0qRZjauJP/riYDZySNkLvufHIkoSholuQt5zh60AF+nlE7aS5dQtkJ0F0A+QsN1LxrA0MPOhbYEqij64LujBR83DlBTy1xVCY6q9tesYYrGu8cisIfasvPT7B3nAr2A1MNdf9UQbmQGB3BDn33Gu6KTHHfY3vw5Uk/8fyOVD7Oyx4knwXwLk3CcbEQ07CUnQ6BiNVBSbV3jazKInZB4m8V4nC6ay3urb3RVJYEQvH1U0PcUok7R+45GD6V/+BXHj1Y6mZ51lEcCTA=","authorEmailMD5":"d307e42a92fbce947bfa9fae4400e95f","message":"If you're on 4.5 you can use System.Runtime.ExceptionServices.ExceptionDispatchInfo to store the exception and rethrow it without overwriting the stack trace.","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"e0dc4f0e-ae83-39b8-9ce0-b23ee457470f","date":"2014-06-16T08:23:07Z","timestamp":1402906987,"authorUserId":"disqus:disqus_bCQ4ScqAv7"},{"_id":"e0dc4f0e-ae83-39b8-9ce0-b23ee457470f","authorName":"Marcel Popescu","authorEmailEncrypted":"oOmhojmKZPMvYvZMIEmdyd6uW83UAcO8ZPOYgEYmUPHoLLP9QYDEB4pyWwQ3+iSQuqjZkaO6m5qeQPjt+4z40HTUrIGTPeBNGzCUYdPVS701UapbqmZz4QxVuDZL5+lTvUS6UDQJXdPjYokFlWsl6ks2n66bnT1b8TTS5W5vKF6m+VU9lD0oyU90o1TOOKwgkyTbVXs3iSA7NhRHBGQFddUBavNi+IGzckBHy5iI9HXI53zu7eBueQUNh2GPT4gOw7URjYLEbcQtZ957UBJMNOmWO60BnLmPACxogLAl3Ts7lXn9GspHoR8tlt0UBOS39IkN1Rtc2FmHKM5S8Ks98uCMv/nGtf3QWzpABVa0z3g6JGecE6VXP6qt/0XSWlNbtd0w9Sute9w6QmfcEx7IJnQaXNgv0sRc4t+DYqaIA0xW9TcdNOGw+Ass02gNuTxRNH84KWMKM4I34wk+ABwi8yIEZOdj+DIDtrdLcLIM3gdyCp3iF0a6OsVXP/fZkks6NQ8vd4E2J/cVR+m2AYg96m9gVH/pXndOQgH6+NUAQe45kpHwOPaYwEOa6110dS5a4TyFATWBBH2PtWJJ609HUc6emtU7kWut2b7i5mbZqaD6T6QsAJNkqGiDUvf1ME+YRL/MW0PxBpeDiKe4UcTOBTt+TmMLtB1Cs8lQjeQmd3E=","authorEmailMD5":"062547509ea29cb1a75e7260a77bb6e5","message":"Unfortunately, that trick doesn't work if you want to throw after logging; I haven't figured out a clean way to handle that. (Currently I'm calling the LogAsync method without an await and hope for the best.)","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2014-06-16T07:45:47Z","timestamp":1402904747,"authorUserId":"disqus:marcelpopescu"},{"_id":"ad453931-b13d-3b82-bfee-b804eacfa5dd","authorName":"Sergey Kostrukov","authorEmailEncrypted":"nAeu5aE0++UYM75HHt4/z+GRgzIw3TKxyKEEDwZfkHRqmYfmXK4D2TvMlemLo2vAXY+nLQ+a85Ag8AxR9ff+bPzkmo+hTAHLXmoNiCRoj6Dnr3uW7QC+w+q1JXOW2LFpsFumQEpGCQlp31j7FjMGmkDwD2liBDxsLppNBz6zeMtkv/6YwyjtHpobb2sPdoGH25NmRWSRV+DN1P8vnfOO1hAIts4jRVvRs4kyqQTdtu0CiUJKNvOykVBXu7wKZ6SfbZ4Cjycoj1htX+uXZV4Mpw1ZHWtw9hYYmpCA26piW8JmHS1mtdeIFag1cs7Q3rb7iONjEkciJfrsYGP3k2gDrLSZC/YaztGQmS+BkvYhksu9yJ9XXLN39ERzUEUy8ZC4aMGrY8W3gr2xG6MnWotFT67K59fHUbAdvXZi5UNNiC4TDO3QigWcB2gSW0ni2HLnobVe33U58mlrSXt40z8E3s85dzXf89FqzIQ7+W01T0kEqDDMMuWrf1aqziEX2tDNE4wwji1fyxnzQwpvB+xvLBtrP0IRiB7D0MHmQqUHXSTGMwU4C8DMYdvGSCg2pCQ80Mw5uk0p+o9h0EZE5mEREIFUrOZa6zBvXSMO3SigcD7b5Rfjr2fiCK0dMos2mzePqPstr/OSHTgScsgXUStj3d4YwKmxSo4nGu1YLGymhh0=","authorEmailMD5":"7598d735bc04481a6d5da1625652bbd1","message":"Good to know. Thanks!","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2014-06-19T19:45:14Z","timestamp":1403207114,"authorUserId":"disqus:sergeykostrukov"},{"_id":"ee32d751-6c99-3a65-bcb3-ce27297c8957","authorName":"beton","authorEmailEncrypted":"a4teJnkDgAHvjle0SdckR3LdHCkKhRIN86MR7mb8KHL3hDOQf6bPtRXTkS9/vB6oDaX31ImTk6OTZMs0s4rZYftxeTWRhF5htNHR6S/cu2MBkEFcxEk0QxuSuYHHOFmXsmDUgUpR0fTPjRbvZIvtQIeO+w7pkcH7X1/JoVHrZzkFSDsMxU5OzlVPXdRFx9VE/AUH9Z1+yZ/mzY18Si54OeAzArQE2cYnzh7eMLjfR7SEVmrloquO9vw+OtC5PTztmJuHa1XSDAfGP2tTc03Hb9SrprZvogblKbOPw5x1Q4vffBt/H7nfqCKAGv/tk6uFP+a7dSKBjLFimg68kdMBpVfdkYfoxltzq29Ee6F2iFoAsSh4jjwoPZNW8AgA2N63ziTb46seQKscLn3bD/+JIzGhTm1ABJMb5m4iwrngt2pgBFPRH16PC+7kS+e35bfK6Q4kx3IVhG71TJ/om3tTMLb0xiy7tNsBZQpUmdAeuLbFgkQRoQi297w7GfOv6PzoKASVUCNAvDqU9JA4x2HPKr6pZVSeO9dW0TSgnfOWlfQFKWz/gUVKYEYJmYPGtTCC0D2hajwvex7wMPUH3WahxThr/mT+tb7K+BRLZr5S0TWp8Zm2OKtTjkQO7UNIVsNdvldgENKPTtLcXxN2NCJrj3SRpXDN0sBOOWL0uXrsz1I=","authorEmailMD5":"1bab52ce4bedb23809f85251a98b82f0","message":"Can you briefly explain why you cannot (or couldn't because apparently C#6 permits it) await in catch/finally blocks?","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2015-11-26T15:39:37Z","timestamp":1448552377,"authorUserId":"disqus:disqus_OW9fbW4I3h"},{"_id":"f13db1a5-ebf2-34c6-aa47-c2588bb04d92","authorName":"Stephen Cleary","authorEmailEncrypted":"dX0LZ6ATAp7oju92t5gVKbwmihuuvlGhHl7ZvS4Jm15O8r4eGvSMmsyyYW+xMJlaadJO2NOwyuGL6vNbDJnuZGWtdBhDwJ6Cij4HtiI2uECgnm5rBtJFkPmbqcsm+aoOEvfXSOboIkwp3iM0cEZX5VVddRYMMhzd+/0y8qTjLhdNhkvXNwwtU1DRBIeAOsmNMwS2hBphIm1cJRV5Euu41m5rTphOg8htQ+qe78DJftNbMqe1ThaIlTSEoWQDuEx1+eywWaOlwdb0PQZ+x6dMpWvgTa6/zEC4bioqxrRBki69LvHGHxkUUA2jbuDF99Nevn0jeEV7FpmKHKfJY3qK6/gSEWd//cqWh33TI6ycYA3izg7G2OHL/H7qbwxVRYdB04rEezurzQDwEs9j6RLVf56vM1A0sLtcsJMIWcmWvmB+0+V4yjx9iPyLT9wOd5acuFKSpSCuq6EAAai37aTzppvus9dxKqITVTPK8CNQ+wO/pabACUPb4L9bdb9oQZfakFzDj0yxya2UXVr8lYztKrnJf+rKgGIxpLJjC9Av4Oab6YSDMuQrsR3EtE5HOotxSiVV6bed7KYnhImfQugH5RKqWoVCHoyW0tmO42fhEic3QET44P+QvGF+ZPeb0+tgscr8DI2wLRHmrlOIzR7g/xqkpPd45g4ZBnMnNEyO+ds=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"You couldn't (in C#5 and earlier) because the language didn't support it.\r\n\r\nNote that every language feature starts at minus 100 points: [http://blogs.msdn.com/b/eri...](http://blogs.msdn.com/b/ericgu/archive/2004/01/12/57985.aspx \"http://blogs.msdn.com/b/ericgu/archive/2004/01/12/57985.aspx\")","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"ee32d751-6c99-3a65-bcb3-ce27297c8957","date":"2015-11-26T19:16:50Z","timestamp":1448565410,"authorUserId":"disqus:stephen_cleary"},{"_id":"e813545a-86ca-3006-94a7-d2e30b9aff9e","authorName":"Rahul Shrikrishna Joshi","authorEmailEncrypted":"BnXevCR3xEABsTW+32O2Xh/P+uhGZswtlDxx/eSSH5YQUZ/F9tttYQV13KAkSByoHLJIH+o4dRQiy77a9a8ocWWQtGwk67Huifqf5XzpFD4yKRQ4bXguomvHnoRPsMVD7VDUWDvdjBJCEn20tvYaBYUlty0hYTBr18qww3iQH1CUzMyhaUJzJYgCwnh+PPm2JDAfLqCbP5sz/bWQcoFG6Tswt6dQ4nAD7CNSJZGUjP0RyqOIhiHa0ryyNVkV1HVAjDGMsmECIzsrML7XGzCiyTUaXdNWeQ9CIUP1gHXE2RoSjBcw46PcJO0Vs2Sxu9gTs7y7S++2qud5dy7nZJ/WLEeLs8lmwGpX0Rshj8rsd2Osx3TwZkJeisC0pGvzNttIjBMugximNVNjCHNJYm2VXXrBvFm85XBfGNyOIknHwEi8mZHNfDfyQqAqyfVYtWTj0EJ1m3RSFq0HH/ubMmDUsypikFPIkpTLTi4HIscC7izdSYgUS8tfOcaZQKDZbaeHaTzrXuhYoKCfINFK3T0d1/0SsH9v5/KAVMnwkxatcuqKpcTk57iuiNYWR4rdYzhXDYuIHTA7+IdZO8Hfu4lQijPyMc/l8SUyKeeF71FAW5FrbrNw2wqGC5obXkVcVo0BEnCM0wJUiH4Mv68aZ8xsAxMIw4GHzFDurUsmuKuFFhw=","authorEmailMD5":"8cccaac7f182897317df2e337a11be01","message":"We can use MyLogger.LogAsync(ex).Wait(); in VS2013 instead","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2016-04-22T04:55:29Z","timestamp":1461300929,"authorUserId":"disqus:rahulshrikrishnajoshi"},{"_id":"eada00f3-b63d-3457-8270-3da9fe7217a6","authorName":"Stephen Cleary","authorEmailEncrypted":"ma5alnSckAlcc+HoezMKaDHzz7zrrPmvBneEBrGEi4FUTk4i4M6qHTa7T/rjCCgz5QGdmoQ+lA18JWqFnymm77KqvxteSijLWrxJVdDFPEhexZTUSMfB04IqEW+Bt8fUBh7YqOgeHxM5+7UYmGDIoc7ZSzoE2ZAwYspJx4yY1k9zdoGPIUhS+i941wdmrjQVsyR1TeXyQYrfHFVUUCUKtcdoX9ndMBdAKhDqoPXd5P9URf1KBs7GMb45I0oF1E8LrkAN1qpTzCmkPnGKM8G6r1uc+aKrHO1Y+LT01gBGXbYfzNWW/SmPAKc3hJdvUCKphgjfPTOUcTC48l6736ukds+veTZqezZ9ZOKOMxNKA65V7Fc7Kzg+yEBrN0rA8cQomvhRku9/vkI+1xJVrD9BEIinCVfpogeU2pWvRPtL5Pf7zS7snCRM7GMAMA6bKrcVqVGgB0TKauPxtI/J+4Or5sA/EldElqkim3sbMwLzWPWvB1jeBfZ4f2OONzCzgMud33V12EvbqnfcePjEKcxw6Xuip17XgO48nBPElwkMwK+tPNJDz5iE4/mJhXf0mjGN9i0FmEroStZweYTFnlUVuNPuU/HN0EHZCt6Jp11BFufS1mSzVl/VgHE/i/b6KGFkSNtvvAjoF2Ikuy44ML6sq0OQXoA1f5MXF7QhaMbnRh8=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"Wait() can easily cause deadlocks, as I describe here: [http://blog.stephencleary.c...](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html \"http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html\")","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"e813545a-86ca-3006-94a7-d2e30b9aff9e","date":"2016-04-22T10:54:27Z","timestamp":1461322467,"authorUserId":"disqus:stephen_cleary"},{"_id":"93f30af3-4f6b-3e0c-9bbf-ca8edb534ae8","authorName":"Pinky Paru","authorEmailEncrypted":"caI53HY/hI79tSsXzuuRR9xX8kthDf4J09mx+IDRMIhdYTiNA/rpW5owNz7xbFmpjZX67FcYm3hSNZpQF0Vf0+jHnZegcGK8uwaKX3oDjMXSBdj9J67ZCccs5VPRTh4orNGatE9Yz7arOJExumn0/nOMUK7VVtY3eQK9GzaKYpHzfOctiYeoI49fNnRJO7mRLLIObuZCi+pK1Rzhj/O2aGnLzwaAznPVWHiLKgh0mZCMEXIXmasplu8N4Q3zBkwM+2YYhCmjH9kdK6uphRg2HRnam1MEPnqHHx7okHC4xC+BamagXIhD72u8XEbUVxNh/FOkAWem1CMcgAB+LkrcOUMI8EbL2GjPx/c3pdSUVc9BDbkg3PAeW7lbZJxX+/MFQaDLkUT9K2/VAwz+jqLuBflqLpiSphHoyS9U9h6i9cLF9TNVJQPj5ND7k56SIzsXg30TibPGbMm+I35Nt/T3wW5AyKW5iqX83KRl3v9VIOLSj2jTC8e5MNB0kc/Yb9h3c4jiQscWEvJ3NJFPOCzOhE+dcNxfJB7WvJFa0UjfL4wmpSlGgrljbCSrgkauWLhnV/7mmFMOKtGTaL9qJzRaNiYFzq53qS0Ds/ZejGukuP4e5o55KifTS+WCONg6jqjjy7Qdb7/DWGq4+ZdYECPJVIzTuwEucHX2Dx6vGcuIaNs=","authorEmailMD5":"853585d273c77c62e48831ea5e691da7","message":"Please tell me what is wrong with the code. Finally block is not executing. In async methods when finally block will execute?\r\n\r\nTcpListener listener;  \r\n private async Task WaitForNewClientsAsync(int port, IPAddress localIPAddress)  \r\n {  \r\n listener = new TcpListener(localIPAddress, port);  \r\n listener.Start();\r\n\r\n TcpClient client = default(TcpClient);  \r\n try  \r\n {  \r\n while (true)  \r\n {  \r\n File.AppendAllText(@\"D:\\tracer.txt\", \"receiver started asynchronously\\n\");  \r\n client = await listener.AcceptTcpClientAsync();  \r\n IClient clientInfo = new Client(client);  \r\n Clients.Instance.AddClient(clientInfo);  \r\n clientInfo.Initialize();  \r\n }  \r\n }  \r\n catch (ObjectDisposedException)  \r\n {  \r\n return;  \r\n }  \r\n finally  \r\n {  \r\n listener.Stop();  \r\n File.AppendAllText(@\"D:\\tracer.txt\", \"receiver stopped\\n\");  \r\n }  \r\n }","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"","date":"2018-02-28T06:22:20Z","timestamp":1519798940,"authorUserId":"disqus:pinkyparu"},{"_id":"c578f9f4-bd6b-3c06-ac5b-8af9c4872293","authorName":"Stephen Cleary","authorEmailEncrypted":"fjKW37OwD5qwiz2fVKLBt3awwRnlvhXd+VyHUZKJtXfD86SlwM6EWpoiSQnjPpYe6GfFj6r/bcAy+hlbwgvzrHf1L0mNJFdPPO/wPNH+yzKoZVT6Rppf3dmpnvuGcX6JRD2CUb1ODrwEydK76iHtwX0gOSXyZ26+Kwg8NRPpUtx+ujqcYb3mYx+IwmOT2aApiAeLCf1nYtwbW6ZOhU6U5nUDEc1cR3mss4Vi5IdG/2u7cdKLWi0qUk1B+dEe0EBRKNIq3baVpV4K7fHpBcBgi745EwQfsWNeePj1kgSr64E7HBD2yilYjPfpu947IEObPt1RQf8dFHWt2Cy3biBIProjiDsQxClTnpGQm0MBoRpvu89Mqb7IHNHUmdZLoEkU87FQPefGKea+mPSD4lOnzdggNSucecnEMAhCvaRaD5SEdp7A1qLrpREAPINQUQocV4WonpB8Otl6BMoATyoKAjpILhtuLDTTw2cPVxfPf38SiA1nwFaBWH4iEN2HlqVzdgr0Go7k8bhnf+ynt2B2iJRGIMPqWKaiR18i1JgCkmucG/Pc8L9rrex1SDaexKhji1schdTKBcr24mCjvZI098RVs+l1VTTv2tdnpwea/wSLUalNViNmiDUfQhyTF/r2CXtz2AlKJiYBj5uwQyt/u14DqtHElFcaNnpNgnoxDjM=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"You have a while (true), so the finally block will only be hit if an exception is thrown.","postId":"2014_06_await-in-catch-and-finally-196df97f-fc37-3a25-b9e6-1b95025b3836","replyTo":"93f30af3-4f6b-3e0c-9bbf-ca8edb534ae8","date":"2018-02-28T18:31:06Z","timestamp":1519842666,"authorUserId":"disqus:stephen_cleary"}]