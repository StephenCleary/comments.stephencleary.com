[{"_id":"1a486373-c009-336d-bcaf-d779548484da","authorName":"TH","authorEmailEncrypted":"We5Hi93b8egT+aVMPpOcJ5xlrz1zde5sni5RXTvuDz6a37uiuGLvo4V6ZFN7/rbz9cYCi8qL5bwMuxa42dX808OzRuW3DaJ+YqmaQ6L+uQy5l9CqvPxJpJ1ePza9zz3qm4WoBjSeze4QlaI9dz0qR7SjXZKKGDzIZQgRw/Cq9x4998kxD0gXUjmFBrCGBqFbe/+w64cak8bLSu/wCvcnzGEeUj1QDU2RujszCXdbsHeDBu99FsVIHD/1m1SybB7g6tbTOV3CSaWOtbVqg69MRku6ua9b/WlMlnoNMMAEcJ8VZ+pHhvBOGm93MIEDlJzdd11gxnKleOImH0TcYJe+AfKZ6jFE0YqxN8tLj3M1tQAxDjKITeohQjLIudABnBxI9IeUNFr7xk8IJLUX/tRhE8qdNWX8imUUPS4ny9Tedpx5dd5sheTBu6FkNS0gWVIIz4r5ZuDjAW2inHfR4ygtkdUcmOFwkpMqXhMKGjMCWH1Tpj4c8A8s7MgX0e4X9vPkOzu2czwovaPs9qDleWU0MQudKyQc5U1hNeRVd/XZUCX6lYNjeK0c36RfQdl1YLyo9YY/K8izd+p0Y9aQC5GqOQTA01WIbWpjQHDuMEMDc0dYcAZ/s7vS+NpaDAvr0ZY7xPDAGhEVXvEbx5eth3Kr3nVsmGul/LtDtYJE83ErLUQ=","authorEmailMD5":"a8ea7345184b7d11536bafc966e8410b","message":"I use MSDN async sample + your length prefix solution to write an Async socket Client and Server class, 3000 GB data all success transferred under single client and single data send thread test.   \r\nBut when I use a for loop to create several threads to send data to server, I found that in Client side, the thread created for BeginConnectCallback were always have the same id.  \r\nand all ManualResetEvent mechanism failed, all threads actived when ManualResetEvent.Set( ) called by first thread.  \r\n\r\nHere is my Client side Log sample: ( the problem is why it always Thread 7 do the EndConnect job? )  \r\n\r\n15:33:05.100 Data send Thread 1, BeginConnect to Server 192.168.1.100 Port 6000  \r\n15:33:05.100 Data send Thread 2, BeginConnect to Server 192.168.1.100 Port 6000  \r\n15:33:05.100 Data send Thread 3, BeginConnect to Server 192.168.1.100 Port 6000  \r\n15:33:05.102 ConnectionCallback Thread 7 Execute EndConnect and mreConnectDone.Set( );  \r\n15:33:05.102 ConnectionCallback Thread 7 Execute EndConnect and mreConnectDone.Set( );  \r\n15:33:05.121 Data send Thread 1, Connected via Port 2650, Socket Handle: 8234  \r\n15:33:05.145 ConnectionCallback Thread 7 Execute EndConnect and mreConnectDone.Set( );  \r\n15:33:05.170 Data send Thread 2, Connected via Port 2651, Socket Handle: 8235  \r\n15:33:05.177 Data send Thread 3, Connected via Port 2652, Socket Handle: 8236  \r\n\r\nI can mail you source code if you interested on this.  \r\nmy mail is thlin.harcon@gmail.com  \r\n\r\nthe MSDN sample URL: [http://msdn.microsoft.com/e...](http://msdn.microsoft.com/en-us/library/bew39x2a(VS.80).aspx \"http://msdn.microsoft.com/en-us/library/bew39x2a(VS.80).aspx\")","postId":"2009_05_using-socket-as-client-socket-e7cb6ac4-c799-317f-a088-1a6d2b2125b9","replyTo":"","date":"2013-12-11T16:35:24Z","timestamp":1386779724,"authorUserId":""},{"_id":"2fb63c03-198a-31d7-a0fa-338ef62f3933","authorName":"Stephen Cleary","authorEmailEncrypted":"RFTpKs7Did33AtyEhYguYoPeyJcm9QYiNh5xZJmfDHjWGVIyJ8kOSBMNTFhpyJwI2Sae9qs/INAqX9ZYruYVEgCLDlnl2pGhe+8HLzdQghuVgh+91hS4InPOkkidlrdCJI8ydErHJrOcZr/NrhhXGLxxmsGLcVE4gKzuwfxj9iZS4ZPsv7K8cwjNWEQSNE3+9FtUKIOaHfSMTQwP9nPbbJ8ZiTDiIowQlTgxJAJNu/77IcRdl3lI4KRicp5KVeixPQzIWBORVhKsWwQyLdKs8pTn8eoPs+3Bl8YRvvxbAoa7EzTmb7ln4f8CDLaie85JskBoXcrF9zHa37PWNPmzAYVGofk4qhXJPpUBro/mtZI5vzPuK+4qQ5MoBh/lLFv2jXTdd6TnZ5H3d3cHSCO/gcXZsD0atvJdpfoklG6Ne2trrArYmmk+V6Tps4ETXBRnBUB1nYw5u9pdSKq/8F2U6hf8I0rB4hFFkzQ/NW6Ge/SXJaPUy4PMBGPiNIJ8wlDAfsxBLL95nsK1ZJwfKK2OyZKs7hgJUo/+agDDCP7FAd8Aqw65fTx2qZKDhNqcNmUM2VSTilCvD4AsORPZlcJtCGIs1wqCa+kfnqHMBZi2WS2wI0G4OM6BHcXx4/M+GuvNw8d0V41W8GAzZAUZG1sXkPhaRjNFCy4iMVN6MXJ4ST4=","authorEmailMD5":"36e44ea0274d8207eb632c566e60ecc7","message":"I'm not sure why there's a problem with the same thread always doing EndConnect; this is natural with the .NET IOCP used by asynchronous methods.  \r\n\r\nIf you have a specific problem with code, the best place to post it is Stack Overflow, where there are several people who can take a look at it.  \r\n\r\nP.S. The MSDN socket samples are notoriously poor.","postId":"2009_05_using-socket-as-client-socket-e7cb6ac4-c799-317f-a088-1a6d2b2125b9","replyTo":"","date":"2013-12-11T18:02:23Z","timestamp":1386784943,"authorUserId":""},{"_id":"3686db8a-8d9b-3e39-8777-05048a51e8e4","authorName":"TH","authorEmailEncrypted":"Up13vLYiL//BcjhFJ9NBxLbx7FjimcHDRuVA/NKPWgxaaVDObMGpKe5v5V0l2NDAqnKGqsgGvQYwqzULSD5+DXxX7d2zOqD957ysyq+DKX26cW4aLGbj5sccETP6jQqd4YCUjU4lDY0ng/GAle9d1mHaVhf4J3Ib3hjFXj3je9DgnybQKIuJz/DrSpzYVcXLL0s2ylbENiWKL1iE2Ns3vkekFA2pQmT/jJaGrnTg+/iXAso8LwaxSfYVCSE25V389MfxLgBR2Cnhz4KcCaMoSgoN+BwRIvTV76Z76644qUlboZwlKntIK39TyVdKXeIBRxCmN7hFl38ShgB1hycw4E0WLu01jD4X29V5syxDtKcGU0/uPnjeC1JrXnfd8lEecbDGc+bKJM1Hf/Up0YV3wX70yVtpfexs4Yv9JBLXvaVplqP3q71rXcwsKUoRgqKKhKaCMS9Le9RpIM5i7u7VbqB3J32JxOYvLkgIvtLswSZvSYfeEHEj3BCHKPLb5QALSG7z13FGXxETmP46vv8Id4SXM8QYXtQZcT0nIG3XVX+glvmQ3eZbEsQES6pQ7jWXT6y87LdCmmRX1FNx4S5YSP+TaLVS3w1pq2uUizGIPLnjqSNi18ja1bAMRHPAM1wu3kBbHYSa2j/w613qEM92AhBH4yaFEjMzlWc7U/kPk4M=","authorEmailMD5":"a8ea7345184b7d11536bafc966e8410b","message":"thank you, my problem solved.","postId":"2009_05_using-socket-as-client-socket-e7cb6ac4-c799-317f-a088-1a6d2b2125b9","replyTo":"","date":"2013-12-13T16:06:53Z","timestamp":1386950813,"authorUserId":""}]