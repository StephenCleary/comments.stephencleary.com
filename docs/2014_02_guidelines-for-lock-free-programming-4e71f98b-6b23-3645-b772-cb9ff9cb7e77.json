[{"_id":"2bdfdd58-c853-3ec0-9a1f-192957149b3d","authorName":"Paul","authorEmailEncrypted":"","authorEmailMD5":"","message":"I would supplement this with: If it's so important to be lock-free, use types which already handle lock-free synchronisation for you, like System.Collections.Concurrent.","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2014-02-28T03:42:38Z","timestamp":1393558958,"authorUserId":""},{"_id":"76c67533-422f-353b-ac6f-141896cb0543","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","message":"How informative...","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2014-02-28T01:09:02Z","timestamp":1393549742,"authorUserId":""},{"_id":"a57e3ebb-ecb8-3c74-b9db-d1ec3439eff7","authorName":"Stephen Cleary","authorEmailEncrypted":"KqF3xu4/ABv7UZarowj6KJUsB1hnsa8L+r2chR4cIpdkBwAO41HEk4JtZfrjJ/qagXrTHXoOd4G7OoF3vmsNncWGdaFF2vjJzOoYXyTuqw5vmo0WOjhRPzABCas7E0wueAjYkjECbS2FgwuyRxdCEBFhcJfXCGWZ7dzuVteZrQJwRx41GqTFZBmCNQgKbWmmW1mAcX5pazf2rJ8AF/jtAPkEyH0I3t4MMJypPL/DHeybWGKPWGtw8lOgHUYZ9pRoc2JUlwDmfqbtqUutEhGKK13c8Xm2bfSAiJFMZr4lbGbTr+Uoru5BawODTOb2DnMsmSWAugf5oBjxnNA/TdMXEgIkmsUXwInXBF/XPH4BfN604swXMbWjrOp3GOQzqZQm2JXa4EkbhOX4f5JhIS15/A/pciPVtyY9LsEXw+POjaHKngsfDyVF+JfYYkw8+Hh5pf9ZTFW5+blTfYYb5FaNB1FMY7zU0P2WQMgjBeRnHxVRWHtbGX1UogXdJRbzDZCwOTaLYZrB5gFt8LxcgOa/UXItikefcDYya5yaor0KJwF3wYvMKaSVnNBC0MyHUItFiCKtj3+AtCadXnShzz8fSquejRZrsdp+7VYoc3UPCUNpG1wtpEOF11vZRCXeD/MlTM+q2uvwU5Q5nzDHbaRmXU5ooYGoGh2fw9ytnpNALJQ=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"It's true that it's only one short guideline, but I estimate it will solve ~98% of all problems caused by lock-free development.","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2014-02-28T02:38:57Z","timestamp":1393555137,"authorUserId":""},{"_id":"fbd2be2c-b49e-3a38-b80d-10c6d802c6da","authorName":"Stephen Cleary","authorEmailEncrypted":"iQQRlCwNNl+RvX9rjNTY7UOLIHmj2ikxwOnBdzz/APnaWQMbLkrbOoh2Civh+IA3QGSCSFHguxSBbu+jLgxWHj37zplRRerthzha23nApunpmOBB8gUqQ2Bj7PLYp7DnTXocurmHPjxaHj4Pc7T0a6s6jvm5yywrAMHs/Ea+yDpd6x0c/+3IcQ37ltUOMCSO/B4IklEbBIW+rNbQao3Z0s/q+np+q3R+FUFjY/sSaS0lRaj3KqSmMa8vfyelbw0rjcQjtBzv/Fk+YLJOH7RsRmy1dpcFBj4IYs7ValPCZLvpf9pOUe87CPpezpJMuon1qpQWFcbhNya3wzdX4tzJ3EQzZn9obkClGEnbIMtfhl3A/Zqgrt00IJIdR2MliMa0yGXhUMSP+WNaAHjA1mXJMSgbSnoHx2QIRPQmnV02V4Hvh6GT+iGbcn5J40zIOqTRjrtyp7HgtkKKy98Lzw5BDi5Y+oSd2ej1zSX4tKs5lNg7VyeyEtARXGganoa73oNjLlkJM7fdaAyU5J1kGa1XMx1oo3iBNN9sie6AOBUuDWcdL5vJS3/fHRIIV5HXQzny10t6vtLZKaV+qh+QeTxcEXg+vbgJ/tGkeI9ImRbREu8tCSNNTzEATUWNkxWoDqaPEnntmjag8Bm3dFHwII9x0jgK8wP4+mcOFDnAo9QORn8=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Sure! There's nothing wrong with using types that are implemented in a lock-free manner.","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2014-02-28T05:43:22Z","timestamp":1393566202,"authorUserId":""},{"_id":"3ed69c9d-0b5c-3410-a481-b5cd673df4ac","authorName":"Yury Schkatula","authorEmailEncrypted":"","authorEmailMD5":"","message":"Perfect wording :) Thanks, Stephen!","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2014-03-03T19:48:30Z","timestamp":1393876110,"authorUserId":""},{"_id":"bf7d7f16-baab-35fa-9fce-3e9d1a558195","authorName":"Joseph","authorEmailEncrypted":"","authorEmailMD5":"","message":"Like!","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2014-03-17T19:00:49Z","timestamp":1395082849,"authorUserId":""},{"_id":"cb9ab4c6-e21d-3af5-a7de-2335c0f6e4c2","authorName":"Bengie25","authorEmailEncrypted":"CGVlRGqMOhl3NFQOVvTyOIf/HItcNouhJ0Kjd8/vozHKKoO2vIpI69gxz/tRsGKZFOdkhvzZQeZGju3uBw+0PaCtF6Nh9QtiLlG+S14HFN9KImhNOoj0OiAb3EwVVTmjQjckWR17pQG/Pf6VWKrHg7zz0SKs3v+Y+e/jNOOHJRFOHU6r6w36Km9O2sJC7pusUMFQczPg01Ew/9QNIVpX3xUNEZq9xydS+Ds1SWy4io/mKz32lsAO3RSdDOZXeWnwyx1NjAK3w7/tqiOezXkM2lVUwtUxv9A7eNOxxlQPZOxCbW/qHAsUROWFtTT7cVi+tRXg8fJ///QTv+/LEM/lP37gWSAaU+zfwLzgo1aOPA8THmyKRCgPZR2p1a4o+0FD0a+iXFt/z+w0tkRBigFyCM5MI+NtvQ/cHgrJ76E5UxjwCgZtlv0mytP4nBPIMmD+CPpz3hL8oYy/yi/3jjJqPfcJRsXcmrv5BF9jWR3UTv55uYDqvY4rVfO+aznHjDCh5sSCn3hBBm6YACw+Z1UX10tf73XNhqHbzynwlip8WumRnVixWsejBNQAeYlleDPflpBCILCTkCfKxgjVhVK3FA9kgTUB5Gi2S8TCRgDEqwtiwHokKgKsq8SEgICd4M+0LRLVMLI6edPUCrLBv7HGBrRxzIN1hjha6SYsKxW9niA=","authorEmailMD5":"dadde6abc68d13f78c8170d42540967f","message":"Now if only System.Collections.Concurrent has a high performance lock free queue that wasn't plagued by massive memory allocations. There doesn't seem to be a single-reader-single-writer lock-free queue. I had to write one myself. Went from gigabytes of allocations per second to nothing. I will admit that the worse case of a single-writer-single-reader lock free is the queue falsely thinks there is nothing to work on or it is full, but it is an example of lock-free that doesn't fall under \"don't\". Unless you're using non-x86, then don't use my implementation :-)\r\n\r\nGC pressure can negatively affect thread scaling since it causes a stop-world.\r\n\r\nMy single greatest example was some high performance C# program where a code-path that occurred about 10% of the time had a \".foreach\" coupled with a very simple lambda. This single line, which 95% of the time operated on a list count of 1, accounted for over 98% of my memory allocations. My program couldn't consume more than about 50% CPU on a 32 core server, constantly stalling on GC. I changed that one line into a FOR statement, and my CPU usage jumped up to 99.5%+ and a text label that updated once per second to indicate estimated time remaining now accounted for 60% of my memory allocations.\r\n\r\nDo not underestimate the cost of allocating objects.","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2015-03-16T17:51:18Z","timestamp":1426528278,"authorUserId":"disqus:Bengie25"},{"_id":"4d1f78c2-2708-3777-8a80-7aa7e21e5408","authorName":"Chan Fun Chiat","authorEmailEncrypted":"l97vPT4IDblTg4EBym9zurgyIzGITgDBbhd7OytqL8PwWab48aYt+X2PRReZSiKpheWHfmujZ8jMDlZd+rxW91Pd0nU9eSnRPQQ7yKVNxCGXB2vRlilMLnat24sCY4chDHOe5ryIT7bEpwARwnNIcJcoh6DGXenphRTkD79nRhI5eNmyzNbgHg/FYnGDoHw34cJX83jIH79q5L7/Bz0/q5Md7a/vK8Dz59dDpq2ISRjt3vCNeqtGuovGxp47oEbEExOMWJjeaAv4UoDUQQXaC8zpSX8+3iBIVo/MtjYBOLFYkXIkUEtResr0xuK+xvTOCqrUtsJSa/PHbIyQFB1AybSkbDGBfd62xiAZAG6R5e2gbbIblbrmPEXSVc55OfVlYuo0RZxL1ewH+wdUpDJ2lse+FjdOC4MhPKX7u3XU1wfsdqzWmWU9+0hB2pYqoVqifbXaWew2313cBTuFKYkgb3F2VK9Vw3zBKcO66VtkZGQzLJzkrT6ORRCwyM4pBk9LGn5RaNJIV8KkoARiOwSriyaOWZCYJAqhqReH+iy741oCAvnNYW4DnHSfT9F/iPTYJhbd9M4oJyD23bx6mg9CHTRBeUE1XxOpjSaGhcWfIMqswymvgXRJ+osQX3ZU2sJ0wSBPRDAaot3cx8Y2Q5IziHoOaGzFpxEq1HtRlu1e0Pc=","authorEmailMD5":"5dea3e9fa56bf704d900e2677b76792e","message":"This article is not for newbie to locking topic","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2015-11-17T02:38:40Z","timestamp":1447727920,"authorUserId":"disqus:fcchan"},{"_id":"b33247db-25a5-39f3-a211-4f608ecfe152","authorName":"Andre Soares","authorEmailEncrypted":"SNMOpKImFhZuNXMJVCXPHTphAhq0/cBmfBCXilelIlvUHFv3Yn689qyLxaJC5T/mgO8/2hIn4qpjDgwL/jNSZtZs6QDhzvBOnuTKXVj/8a4wn8IhXY/ZMQDroD7VyIDok6iZenkgZ52VaUqzpwEg8gohFL1y2VOu7W5KqLf68RRlUsjrr4UqgJfC5piPEa5W3F9Pq+A3S2qRjjic9dVxzsIK9O3O8r8NPG9hDFq/AV/a15ohpSTeHPxNSwsVBumkpBGEVXJqsguPUQzIAY5KlLuMdenkzOEjTQtjIORDVMnhuJxAko7zru1msW/j1qGwncVHF/Ak5E9U6WQhg8wfb+bpRzW2gSyRJic0xcJ4hqpfb058Ag0FWpn+NeaHxyFimGKRrH9DqgO34syQ+1Wlco91VIaz2XJWwj7X7hwVCBQDeY3gQznIq3M7Av276Ffj4gcxOoVaO6ZaJUSZjyha27Tvyq7oRcMoXJ/zl7RcP/MPQ9SF//AtpLk+x8zNeLq2QAVza9U0nhGNXVLACVXtzIbPHQ6sROgKFpuGah6kpkouplcov4rA3rXw3Ef5etkYcog/IV+N/iLMW5TDfY15NY1mer35QX2duLwJrSxYHW6V84cFZMtkw+3ZoIfGktDwT15YGF+jA9zAJYp8+2RLE2tERo0D7+nF/C7yXjh5T3E=","authorEmailMD5":"804aee742efaa7a85465e07f45fbac25","message":"Hahahaha! Very good!","postId":"2014_02_guidelines-for-lock-free-programming-4e71f98b-6b23-3645-b772-cb9ff9cb7e77","replyTo":"","date":"2016-02-05T12:02:59Z","timestamp":1454673779,"authorUserId":"disqus:andregsilv"}]