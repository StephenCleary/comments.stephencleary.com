[{"_id":"66ce0a98-95aa-351d-b31f-747ba8cd5b6d","authorName":"svick","authorEmailEncrypted":"X2zJupyhZufo5g8Wio4Q4mtLeIM9hTuV9QI5Us/XghZdWlRbwYhET5qBvmI9pM7fnIC7HbaXE3Z4pSbQ1krRnEM1O5OkQkvAeSQLnfZL/Ri+7hRgdF8L2Wc7HE01F1r0/bpZg7qMdzwxojyz1Nl+azXbdNP4YHDZHx8WtKtyVNeyAnR1tZKoqlTMn5zrNokj7L4CdlyDoRWtHs3wPnjmVWgkA5m9M3S7z8MixEM+QnQxpazWpag0BKmpiwRyQB/y7fwMf9SwssIhSWUfxh62bzKIOZWbszNC8YSIJKBlS3NDaxVRqZ1WS8NEox0zBHHiHu6GjLvUFzqCFJmTueDiql+v01aWqd6A9JsqcaugAwWGJmyjgna+WxqenZlzKototpmnlwGJx/iVqQGvmuzDhclfkPhURFWW5Bltpr6edDzCN3XZCWhtBxAiUEHfuCs63RIq+6L5n/VDx8q8yDgFkuTbhZc6Z6KI1mRty5qErEymXd86OGdnqkfA40VV+E0PtQ4rUxQFuuHZ9tDAg9VnYAx5CYVUcO71Rm3O8ccFeSXzSPcQeyBaUyQUxXOIC8eKYdzCJyVw+jqcmtk5DrDnd6vhTuCtbqC4xn4MFneIyBXq7zk+2az4N4JrSLM9hFujVmxz7gI4zpDqRCkxNM3ILXPLoXW14iShUqP/X57I3k8=","authorEmailMD5":"0ec0f5be7749c8cc8ccda4a809103f36","authorUri":"","authorUserId":"disqus:petronderka","authorFallbackAvatar":"https://disqus.com/api/users/avatars/petronderka.jpg","message":"Did you mean to have `await Task.WhenAny(task1, task2);` in GetBothAsync()? Otherwise there's another race where the list can be read before it's written.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-03-30T19:54:45Z","timestamp":1490903685},{"_id":"794073eb-5a16-3245-aeb4-fcb334fc54f6","authorName":"Toke","authorEmailEncrypted":"nOjXmQF7I9byssXRhSVELR5PrAfh/U7nHZLpjm/J3mMINPvym3Y0XdAWz4c8TLLLGAKK3NhFW1g71IRm0EbiLENxx2ibeiGcjkX38BfE1rCmCXXWx8gHEPpord2S8zt/v1lzjwcsvMcNx9bwDrFJoSA0aIJn4LW66lIdQjrQCorrp9co0w99aH8cwg0CKOBF4jXGYAPd9WSXOn1YC3cZmKzPIx0W7VFr9BIdXGx3cBqY06ta6vzoDsv26j9ORqYfdd5tMFDKqh7KNwV3boMjEyPlJ3AZ9uD4WR/26VmgUoXPyF4WmDJw/D0XEU3K5GLeC228ps7u1pg0yv6Q5qs2FfVusw3b3aisef2h18k76mZhilhwoAaNlX8HD3WJ6OUFfriGd8Y5PeIkAXGWdu4/lmYggVIDpmTKtntd664GNvB/w24UzMLkxRT03ZfrrStlu/SalaGxcT+B+4ve/71Q1/GAmmRmSfcRKm+mk63kubq0bLyd9FVMvf6oG+JbjlDkcz5sulznlYA9Dg6quzvDdkQtDr2+V7qfrUR6TO+tPH0A/Z0YzNqP9MOtyDVQ1Cy1AlcKxX0nxDizChOctSmJ0t0MjYn7uMgLnqdRIRa2dq5yPpM9F2yUFqYTHVPKYe1FCqu0Un79APh8aGJvrIrdTWnizzS53++ZtQD3Q34sz+w=","authorEmailMD5":"cd769043940abcfc6ecbc1cc290757b8","authorUri":"","authorUserId":"disqus:disqus_BsTHioZIDq","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_BsTHioZIDq.jpg","message":"Thanks for sharing. I do wonder how thread culture settings flow without a SynchronizationContext? Or is that handled somehow by the localization middleware (if present) and could potentially be wrong if any other code in your app changes culture for a thread pool thread?","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-03-30T18:37:39Z","timestamp":1490899059},{"_id":"13fbf2dd-32b0-3644-95f8-b3a1a09cb658","authorName":"Stephen Cleary","authorEmailEncrypted":"LiW5vqkTYd98cV8CbOxxhTZKcM2Ix0qqs0TazrLf4OGQeIGB8gyWiBPQA5f4gypgO8Y6y7Fbx/vOiSjae6bCqSMyFO0maZDQTtUU20DRcG674FjtoYdSepJwMHL6Fp2K24bbLKxM2vAmS4xppLXJBJ7LKpg5UlN2kLNmIKoGVZTGN0ARLgDvIggO1qoX5sId2ja6vNo87rxsPvdDLyKw75iE62MYhIuCZWAfwF/HZhml3hy0a3CCTngUVxjyU6M0oYQ1DFDPU5pCBGX2BZO1ROUzOsA8Zb4mJe4HufV3hGivxUFfnQILh0dbq9yZeMZT9jCN7+Y8V39P8ZLB0wNAt1MRBSVp+OBWkjB80AA1/cYsi2mcJnScMtNPIrYBpbYbN6sM7VzhW3n131mYHI0Bz6FCqdTBPSaRFDDxvlrO6JlZ7O03HWjSDG0aS2IqH0+gYfNzhTG2AKjX5PhfFYs3uS1ig7+BV+ac4iZlWLK9ZnDSow92UaY+FU/HmdYpUcIC1pstVHniZrK3gGqGWVV1x8k1BWxYKceVibM/t9I2n57GbrPuh9PE2uhsQYIJmB4fadbecOqvIriSZSNakUg59fluSfQt0iBb8GNLnwy7zS4+SuemYdQN1EaT8Rs2+Hr4el1J8PKRKuadKJ7vO49PUmhlWM3hErnHfq9Jzux9Y4Q=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"Ha, yes! Thanks!","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"66ce0a98-95aa-351d-b31f-747ba8cd5b6d","date":"2017-03-31T12:32:00Z","timestamp":1490963520},{"_id":"2e9422f5-b41d-3149-8b47-86fb84a22acc","authorName":"Stephen Cleary","authorEmailEncrypted":"M9hJYB/ny8qL9fK77Bdfz8NKnrR+ksZmzOF9oCt7KlmEqcfazd8ugMKxMVsjVVg7bVUCYVqaDL3SczHO1GwAZbzJHtc0nHZ5kKhs2fDwc8y+VBJowUO1IQ1eggY2F6rLK+wQyq9qkhkW4BnUW4JMnvT028kCFeMNMeENAIrywV9cL6rp3u4PyMJCfhtpGk8FI7q/l3YYd5Vaf6mZgFg7EWKP48tnI0Wn/3EvzzbVNjkjenQpb4gA45CE1ByhlcgXeSVWebFnlb5mB7s5Dvm3DuFB+QEhEkILdhPi9x3/DP7cdstOGztpT4KVixRIM2TEuABuuMhTsmYJV017IttEBAipl4+NYL6ynKw2H1qpPma4FqEhTh0K3NL7uMliFgcYEAkT/SlsN00Zs+6e1AiVSbp5NVLCLgmsjX0VAM9ZAqLr4Ea/f03CXu2kQS04b4GI+4VU8d1rShnPCCRH3JTNlcRNCXYIJ0HFAngLkObbjiBFCWGvLY5sd6/buZddRzYlt5ZBFLEAjSLgNpIwxWJcNgU/6vMFT+cE10mKdke6cy4b+DkbmTEVcifGYdF9iZjpMieiten+UWCLlgNEIVlhA4kAweNPQXhb+fiIzDSTMVRSEnDPo+aEP26q6vYbVhdJu/c3okiHaZEhw1IDF6Z+qdg/b+vXNISBZrP3bSsU2NE=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"The culture is flowed by the runtime in .NET Core (and .NET 4.6) - see \"Culture and task-based asynchronous operations\" here: [https://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo(v=vs.110).aspx)","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"794073eb-5a16-3245-aeb4-fcb334fc54f6","date":"2017-03-31T13:01:46Z","timestamp":1490965306},{"_id":"34ecd002-9a5d-3ee8-8788-aacd0fbf5f62","authorName":"Toke","authorEmailEncrypted":"qWXRKMK1AAg/9+eriEPP46IJ6OzvF/T0SPExXuqjCE/cPVVX4PP32XIiaq2Xdz9LcGqaphZTBmpFDzWAOt33BB1i9jddpqNc+7bl18VxZmVefl4/JKYpVx2C9vn3G9bVAQlKwVeNWHQCcjsbeDbk8Flag8ZidX2lo8rtXJFpLRODX/aT/Ks3hzJWHFRfk8FoMp+XFsgeo81JsMLoG5oj6Mh9bDq1lKxnOs9gtqHmEKuk+mY9Gm+PhBayCPeuLGus44MaojvSi6iVspLwgTC7u8wxDkkMcPWVVaoTy5RSlAp8AN7py29hb/wAUnXsoakk76wNTy9aBnoxOf6fLwNhzVGS191k/syK+Adgr+UKYi9wZVgjIpiJlUGJ5lgY5zYwVkMnYBagX2Dmb7irjOC/9y5bfmzmIJRI5wwGwSV58RODEbVroQkNIvKAom0QJorp4rBIsh/pa+MPHQJ2+SkTF6RcCG1D7tGgM3v6DuYCDoiiJI67nng/xNmMLpkG+6rppnQT/1BZiN0LPnL6xH18+GsW0faxZ7vqz/9M+yFgthtUhMOHG0ESlB8GEzInIwgj8T/RdweOKWwglYutLNbTqeevAKVx0zrBgYqXnMQN9QjXI5u0Wbd5uE0Gh8+kfihGgvcEKitz4ODDVfhoDkVmBcP46uAlGjvNufBsOLBcSjc=","authorEmailMD5":"cd769043940abcfc6ecbc1cc290757b8","authorUri":"","authorUserId":"disqus:disqus_BsTHioZIDq","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_BsTHioZIDq.jpg","message":"Okay, thanks - I always thought that was handled by the syncronizationcontext.\r\n\r\n I have seen \"weird\" stuff in our ASP.NET Core project though, running on full framework, with culture changing after await. I wonder now if the assembly is not set to .NET 4.6, as described in your link... I'll need to investigate some more. Again, thanks for the link and for sharing! :)","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"2e9422f5-b41d-3149-8b47-86fb84a22acc","date":"2017-03-31T20:25:52Z","timestamp":1490991952},{"_id":"780018ef-3645-38ed-b7c7-41a0946e77f8","authorName":"Sotirios Mantziaris","authorEmailEncrypted":"JbQ6QHqCtYqSwYlLItZtcD+D56bAAzXzDy63uaBWSVQ1mEKP/d4qrkjWgJJsjjOYwep9fq73YZ8CtTF6wUEwtoSAU4ppkoMVQ7SAvFMZ507igPQRgxWohCY7Mk10vyHCXeI3acoehxyCyfNpoe9o99yaYc0DPaYJ7epaChhBKBppGTEHq73YEVPMZ5wbRZub2wdQaTPtlmc0fJGvpjkiwBLmoCGTzA5b4ZVrOWZv+Ul8choVC3KmaiRge0/zgykduZqyan38MX+j+VJYZOgGzw5apGXb2AiBtt8rt1qXqy5YcyvLCMw3Nkf5Pb/JBXiDfWVbccCj6VgaqB1P0FkBwH2M3nlAk2xfaoeP7JxcqzTVJU8Nl56aAjkXvJYnqlfNnk4D25ZABdK7SMA4+66Em8YI/1yv87RK3c2NeGRSkVlzWpmmOdtM/H2RSpVzzkjmQYibmTVZ7zqN1BHia/qbPpzRGa0Fwj27bg8tQkvNXr+wLZC6C9ERjO+avu6r0WRdS7JricBTfUjjVNp2c39ycGHYDJogfqCTCCRweXA9A/CxDZO2njP9s4Xz17RHVl9N4WiIkOBSUJRjuptimJn/+BaPMVngunFmALkM+W/rZNA916GWHczi2p0KDkTaKP5yxeZoXLQxgrMSOFZ/AL0xA75Y2B6wcQpX0A7X0NJ6Rj0=","authorEmailMD5":"77b9abe2cc4f99740bdc9592ecbe1b13","authorUri":"http://blog.mantziaris.eu/","authorUserId":"disqus:smantziaris","authorFallbackAvatar":"https://disqus.com/api/users/avatars/smantziaris.jpg","message":"As always a very nice and informative read!","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-03-31T06:49:32Z","timestamp":1490942972},{"_id":"d0e0a006-2dce-367b-8212-ca25ed2923c7","authorName":"Stephen Cleary","authorEmailEncrypted":"oy8lVv6FLh+V6U+6q/i6hOL42Fj5wRfW39IuMF8wFz5k7em0jdnLJqJhTHwYYMoC2XHTpQF5yDsUbQLStyw2bnf7RLrqNn+eJo0BX5qkSrWvMH+LpSXIIpJtA222CXvdkrGtlIOyAPrn/x4BhWzDKmLh231VgMt+7dJ9fxG/SwUewoPTXXTmW7URYkbtfZJBTihhPwX9PHhbiviQJgwF5/Zbs/NCt1GmCCmXi7E8dn/FGo2OIMW/wx7m6D5/B5RiMfx6DOoCmXYWkXwxWNO+alLvhuj+PCP5s+H57D0yurWZTkg/rVqNjHGUZZFe194hKwChRb2v+OhI3YGjpZ1leGRzixRPE1RUtokG/XxSfOAvqu82P3aQIKOEIl0aF0BGOTZpPD600EUZWdADuQdyozK9Rb6gapWUNgGIt32vUkgpmSlnygX3Ipw8/L3RRwhyBcmzdo4izmnjbybRASp+xxn9Drz6seQ125/9U2/NuGFlE18NeQNxszLUaqYqIN0o8L3/kN8Pr2awsxfX1eKWQ1X0xTqGtSLZv5VOPIWvDOk4FqXLHf6GWFK9Eyt4JsIAZ2d9rZLt+L+H6/FhPKy1sKe5KCplNayiARg84Ash4TCssu2rbNJfEpYa1cOuXlm+c/0wJpX9S57DUyBe19tyeGnWrMbUIF7Xewwr0qtElq4=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"Be sure to check the `targetFramework` in your `web.config`, too. Ever since .NET 4.5, ASP.NET has a server-side \"quirks mode\" you have to opt out of. :/","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"34ecd002-9a5d-3ee8-8788-aacd0fbf5f62","date":"2017-03-31T23:18:47Z","timestamp":1491002327},{"_id":"6173a217-d358-38e1-90a9-9ebe961ddb45","authorName":"svick","authorEmailEncrypted":"mnMxWC2U/fqS79/16KlTFAXsK1QEg5NtmxDaJ1b0bqsdW+FFI4ZzJhzLX2RJkkhdb3qlyXBQ+aDgm7u620VOFKyM2D3TPlCY8boSyrd30VLFO78fDWESuOZXYTPVVh9oHA5IrVL/3SN59gEn2ONQHSA7vTOuIk/bYKBs8iUEc6kYqfTvmb2c5h5tMf73q+xzcorchfbZ4/zeTvgdq6OxTeRK8n/SqggYpmw8V6Q8OsbhwHUaislXinpSbmivcoKPaEXOsYNPWMeMnZ0galzFBMurvSQhoBhdzy6s/2gdublCLjphFYpttxpsspAMeN2NRXaTBGjPOLRLjkjFYbATbQ+WxPbrkLZ5/kSXP4xCYLli2VKMtKRgG1j94DPpTG1uSzGpKbzctvqJLj2H8ySeWAbIeCwfnw6FKguJEbyUiTVGzrxj7zb38ZgiWG/I/7eToVt2eVzCff5BwGJ+HQd4eBgpqV6YtU4pIW2DeYf5h6ca1/qJOqiqSx5Ur5GDjhTwLsV9Mom/kBP+3ROwJ49QIUVgJlc5WFL2LTe9OZ0iSv879uC9jOVyprQkEvE7qAv971IVnsbsGegN9tAoRuU9JfzSmSfWvXBvPSLMIur/q6Y3BcHSvxJBxdV3Bd8D2cUtbvkunkRB1RF/XJmghqxH6f8IqpT8hzo1y2K1pOff1AM=","authorEmailMD5":"0ec0f5be7749c8cc8ccda4a809103f36","authorUri":"","authorUserId":"disqus:petronderka","authorFallbackAvatar":"https://disqus.com/api/users/avatars/petronderka.jpg","message":"It doesn't. ASP.NET Core does not have HttpContext.Current: [http://stackoverflow.com/q/31243068/41071](http://stackoverflow.com/q/31243068/41071)","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"adc8536c-56fc-3732-a755-44a0440e0af5","date":"2017-04-01T13:27:55Z","timestamp":1491053275},{"_id":"9aa966ef-25ba-3918-a680-c283a7ca9c5a","authorName":"svick","authorEmailEncrypted":"pkeo3SnmUcyp8tdAkwB/jvFj+YUmmShyu+TPbSTBmZHzawRLTEsFWf9q5NIT2mJvDMLhwnzujkIPOrzZzufT73OmBzZqg+PAAj+V+ws+vOpBqc0k3xmdXTHJBsK/kO3X/Tj0UYQJ2EBiTn3CTEGOvVasHjaBPo5ZyxzrvVJA2aeoPdKPrNOf8B+3UB0LSvtCQzi0ZvRAcwnSyAQAHURi78k8f2Nl+o54uBLTy0Dg5R4xNidajA+4DgzXhniB14VIZ9UJpualrDIYHNX3qtqkoNJy+DpsYBN5xFVm+nwai46xrAMQTMPdKMag9deYhQsoAo4u0VIafV5vA6HXgGx8kD+Z1yQCsZeu2gSfGX82I3t0/oDTgOyZC71b/f6uj/9S1QE95VeUj+DmuW85g6nXBTnuWo+PnJ/JnnWKEJ48DpAls3cWOf8It4dULnYCyetSBsLaTZukJWAjvXZKwnIFR6TyNh9jj5ZzhsPQcKk4FD5ClNj1kizSwoKT7wqBOA+/UheAgH051mgTe8XwpxT9uHyHC5QadhPtYtNaZRJCEdMoVn4lS4qPrrJ2ZRvIITGK9xQdIx5u5WDVe+E9xaCBqI7UQ176/Oid1QiHhwSttD4BB/Cn3wVQripCQ2Wuj3m2AhdeAqsBtesiaYk4LVb2T+fq5kwUQklw6kPeaXrQavo=","authorEmailMD5":"0ec0f5be7749c8cc8ccda4a809103f36","authorUri":"","authorUserId":"disqus:petronderka","authorFallbackAvatar":"https://disqus.com/api/users/avatars/petronderka.jpg","message":".Net Core tries to stick pretty close to .Net Framework (especially in the upcoming 2.0 version). ASP.NET Core, on the other hand, does not really try to be close to ASP.NET 4.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"dd92826b-97cd-39f1-9c91-518d3fb733f3","date":"2017-04-01T15:26:53Z","timestamp":1491060413},{"_id":"adc8536c-56fc-3732-a755-44a0440e0af5","authorName":"tobi","authorEmailEncrypted":"nFRvCNtottuiLJ6RDN1FOx0p+KVdIbfy649NE1blpT6Ob2XNqWzhVIJuNlHpa9RAnlAuj3RK1zzwC/l6sTlJ7FBp02Jr/cyxKkClwQI8CQayuquuIgoAyEnJJmGXrNT69ZqWmhZNsHlFZMwW8BZdnywdbRT87MOMkUdMi2+uQOsQopIJuzuVg6484uG5Ecmh+K8hiVlCmZ8BnXrz7fxS1h94gujFb6c5727Y4h1dC2wPP1ATXITYisuKDMZm9OrMtNjaNVeysdlH+whtlor5W7j4qcrzStVWM/6No7plnHVXt6Wljxy5EiYWJu9ezyiFhLic3FKpBThJSqT3uxUFqUGNQyzWUoqxogRMJpPk7ViVjRsNAQG860Cfu1BrDaLhWpTavmJLPU0TfVKbhlv6EjdvOAL6BR6Y71IfooKgczIcXWN5GizMrkAQ+ElUMEtVHCHcqpZEKSYgJcVL2WN0lH5paWJBvn0r1bTRi0TB9RE4BJ70BENUHfChtt089l57+qJdKgneBFSpjBif08uxbAgLBM5VO7jy6S6lWrDJ9lScj6kR7Uv1WaMMoY5F82kpyBavP2rQWyAokOBnP4DUlAn05gv/qmuDbujbGtXRSvyYinhmzPyEluJu/Rq3bLEaFYwkHWDHPFms99SXULM+7F3gmiRq3+3pxvtB28Xcj58=","authorEmailMD5":"4024224ab7c50d6a61538600cf63fd71","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"How does HttpContext.Current work under that model? The same way culture now flows?","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-04-01T13:11:05Z","timestamp":1491052265},{"_id":"dd92826b-97cd-39f1-9c91-518d3fb733f3","authorName":"tobi","authorEmailEncrypted":"ECotXcfuSCL2uygzf5kiLtZ8/0eQt/rBv/h/d5am6ag4vdW/B3L3N9O53+oEaNVPbfYSPFauzf02GvnsKag077tkdbgql/erF2r4yBa4QW7BEiYiWWPCrlcal5Qd8x2xV0mhdCt4Yu5IDgnXxWs6w8g2O2O8/sQRUCNdbbE2E/OOvniohXCPQ7SzQu/55WInyst7UEiUihqOhyrxaXdqzZm67J7krtQ6HhppypHfhU3H1XBx8hW5Iaa4jwWyRDLklVoYmgJOeEDtmOwJaGLhUbqw6riiIlXgRIz4EgVeeHkXNrq7zezJoN0QPrm/P51cg2CcyAaGFn3Clh4fW6ukx1vUNB6jmJCLhtXxQNGlLgJ5GCp+BbWEpAZW9u/izICXz5+s1l4+KJD6BsoR5CYBOGHO10/bLefQU/mJbE6aI5cooNqEULGFopovF4TXNXriHobgZvjOij3nkeIcDjdZVP//cUx13ffLP16haK7V0sGVH9s29zTX6Jt+oQ7cqV4jp9ikg03Ri7e8olQnQBFBgddKaei5TncKTLf7Zl3yUoP2qOS0hQW+ovhUMWjKVmEWaC9MQDGucJnf8a+hHTeZFNE1qj5ruZB0pLerthWC10XMedEkFelaSz2aNobMtnHdfmw2vye2lNfqvV6eu+snFAwLTiahsHkJOHdzba4PIQY=","authorEmailMD5":"6c66dde938129e75ff3926e508070d05","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Oh, it seems some people will have a lot of fun migrating to Core.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"6173a217-d358-38e1-90a9-9ebe961ddb45","date":"2017-04-01T14:52:14Z","timestamp":1491058334},{"_id":"8702cb01-6ec3-38bb-a6b0-d4c43d7a6b41","authorName":"Stephen Cleary","authorEmailEncrypted":"GhGhXt566GW5M4PBdB74czh9530ILLTgwUnp+AWzFMn0IwlqGkD19oKo0BXpuM0uGqHOJekT1u4eXohy1bB1kv8jQ8PxMqHppjulvned2G02HW2gflC+WYzeikjlhJfxgl4zwvnkpdxUxZZOYdGyLPR66Wm6Fa9eWMOw5E34n5d+V8nI/t+qfVCzkLBpu8wnmKEORwfdyMQzHKBEA+v05RG6MbJXCPpiGpRZRNc+fXEkrm8p++1B4hg60ktgA+DeoHtzUwICxhcbTa6sQpdpyeWDX1dbnHXnFvFR4kK7pS07Z2S9zvgtbh+E8gtuC8a++/FhGd1vABU+YIKfNjFkwJTo5xUlsugdTaKV4IORXezv7xJL8vYDNRhqo6ZsSiRNQiwyfmQCQ65bZ8PvribumcgsJilUDLEZLLZqvZc19U6Rk9yMpaic4eu4o2ass5bmvtqE7QiWf2Bckc/gv0qgXhm+fcck+b01sptn7/CSmt/FfIsBcuTUeg4N6ZDiQU8VNFl0LlxEgtNrdlaX3/eiZRFHWwrn0Qn3z+JFethRN+Oy/ykVHqskl83L0E8mxwHPXXnZTHTLaWCI16RiP8hoSCZn0FB5oWgGN1avsotE+UOir21ekCnWjcnHsaUjD7HXtLJka6G8EQahnQc9LCaolE+OzP0coPHbuILoRFxteXs=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"I can't say for sure, but I *believe* that a lot of Linux I/O is actually fake-asynchronous. That is, the underlying APIs are synchronous, and applications have to burn a thread to treat them asynchronously, thus creating a higher possibility of thread pool exhaustion. The core cause of this situation is the Linux driver stack, where drivers must support both synchronous and asynchronous operations (in contrast, on Windows, any I/O data transfer *must* be asynchronous; all synchronous APIs exist in the Win32 layer well above the device drivers). And asynchronous drivers are some of the hardest things in the world to write, so Linux is trailing Windows in that area.\r\n\r\nMy experience is from over a decade ago, though, so that belief may be out of date.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"d24b6398-d50d-3099-98d2-2da41b5e1bf7","date":"2017-04-04T12:48:08Z","timestamp":1491310088},{"_id":"d24b6398-d50d-3099-98d2-2da41b5e1bf7","authorName":"Krlm","authorEmailEncrypted":"mEQpwZSppWz6QuMnzcZ5ybum8mG5SuFhoQJSVO47SY2rgArlrHwqJQB1V0dUdwQy8uY0gYnId2khc4Dapa0DTjxLgex8qSzk3qn0H7WlRBrrOItdlRwWdmnkx1LqLHb/ktDvnXxEFJJydDr7iWi7SGek43zQ1IRvCLbdQN0gwUuvNqfmmzDKVG85tZ0dkMpLJagcr+Esrh2nXihR82xADrqSxUbt2fInkbj67PcOt54HVQKW9NaJahFa/HpJurXoUcHj/kBIj2NpYYgg1mI+DZyPzT/bJz2Am596ZNF87n1rwTm/IIPP1SjK63iJ0UeeVtAps5WGpcoxj9oOjE8vvlD/Mbx5XKyyoN/INlw0f9O54Wr3sukZKcjs+Z129vZNBDeyzIpPC1aqH9Yeg6oVRJLrfz+/tv1uctO40gnzdjcSJ3fC3DeBwQkWnnTSdO1L7bOaLRvoyfKrbRjMWy/sLOu+aa3Lr5LFmfzb63nDZz3tVHdBPG7kpRVMmrPge7N1YkNe40JdzT6g33LG4fJI9TT3bOHWYXbU88V2yt6fCAsP3hIBpQcMUV2bIRoxMia2AbsC3Kgy46Q5y0jzBwsScj/pp1Tkxxjd5aR73SsgA/juLxfW680FMZ9HF5JNL9wwRPkdpWcfTLp78tQ1p8IVevRvEWW5lQpheQDR9onxPIk=","authorEmailMD5":"84c0065aeaa77718b0783f36e927d4b7","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"I'd like to share some observation and ask you to clarify this kind of behaviour. I was performing load tests on ASP.NET Core with some 3rd party lib. handling StatsD metrics. That library was using Task.WhenAll ([https://goo.gl/kj5MvR](https://goo.gl/kj5MvR)) in a one place and due to high contention (load tests) that occurred to be a bottleneck for the whole application. What's most interesting was the difference in behaviour between Windows and Linux (both with the same .net core SDK v1.0.1). On Windows the performance was degraded but the application was responsive all the time, on Linux I've experienced a thread pool exhausting(?) which made the application unresponsive (req. timeouts) for exactly 60min. after that period application returns to serving requests. Would be thankful if you could put a little bit more light on that difference in behaviour.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-04-04T10:24:39Z","timestamp":1491301479},{"_id":"4ca027eb-8d8a-3b45-9505-a36dbd545e4e","authorName":"Vipul Gaur","authorEmailEncrypted":"CgOoWOEB8yEa2ZUWnzzIXjXXyV0epNcxyYOK6N4L+ZksEmfnrpahc0BJJnRNN4fWIAoYNhKIiG18Hz8jlWYiiwIvtNjH+5RyQAiZdTVF5M90eSsPcjEzo5CqOd1RX+PEldLnjm5f395YybAkaskNVBzYXnA+8gikjPhI10GU+xcXIqNrC9nknIvBQenxpP3h8ogMiPVdiyFRAdyTDRF+bbV+K1Pp186Rs2EIemng8sJ55f2wncdG62QSDTZWl2Zmyk19aHL0uxLjnqneYGh4jBpUXyKYhF2A/eDQpVAVyPsOyOwMUEga7o0cLZs4IU47RopvW01UiLOBg7yfNoff8Mn0GCJWeDKKkhN2OLql4b5FAswz8G9EBTJQvBte8n1+4J6ntN1TLzzppVEmt4YJxWMn1u8C8XRmHEpiXoU2aRug6JczhE3R2Llm9TQsD2g2KK+SlQF5hnrC8wVEfhf7tDst38/BV4QVXyh5ZtXik/ZlLKoWT+1Tx9Co3CTMrJ2crY9Svm87aB4xpSUb+6HFXEv8OJUB+xnRP+hIQ0veK5+MKd/IeE5QM5ZL75mb8CvACjFbb2NifJ+Adh09g60tGkDWmQC2yaEyXe3ucxfOxJ2+uY/p83MHs3Ebt3FnBBzO+TpfLjcDchq1tRQ6uo8cdOfS0zRrUqkyA/iAu5JuFq0=","authorEmailMD5":"330c8876cb27d9628c1a7bf05350ccff","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks for another great blog post Stephen!  \r\nOne question, since there is a possibility of implicit parallelism, are the threads being used to run the continuations taken from the request serving threadpool? (Like the Task.Run threads are taken from the IIS threadpool which it uses to serve requests)","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-04-17T03:19:43Z","timestamp":1492399183},{"_id":"b1dc21fd-caf9-38eb-b1ae-520befba599b","authorName":"Stephen Cleary","authorEmailEncrypted":"AgLzjrAsJs96pYs8Nf68S4R771V1ltPpCMVMOk53craHGaNKaWvs+rnZEE0+DQhZTcfguBtZUyKsSm3uq4amNlA7bp5/p9N28zOlTf08LkaDoVgefg4s/v66tl9x57o9HGm3dSrbQXPAkfgPpttXt84m9RBF+T6GDnRPC6g+xJ4phcajg8HagL9iFoc+/DWTySq07aL1IGb2ySJZgjKIfxv34h0w8zJkOTOsikGT81bFEC9yXnoDhonAWJ3km2W8JtBlqGgSJs21JYRMEGmPLs/Mxd1iwmPazTD/lrQk4R+o3gPcUayJuUMGQf1nl5bLxDtOsZRtW06tvtVPqQ+Xx09wgjUX8z+grG0NY8NXL8qmKg2u0QQH3Twu0+7ATJXVfqYlmQfy1g+wy/mYRWiCVkFybI6j1ySxIw/CmPDWt1m3XjyPjD3fh/XBraeN05zvCqvkyS4wSQqPquaWa4E82HzRe53MtTMXAeaPiNhpE54HiO6UrTwQK2ZCIKwp+eMKBTbzkjjlaEWuXOdnhETkA7xqWrglrXc95MMjaBt8XX7fHx55IdZy/AZPxBI5InW5Vg9qiLCI2d2uUhIrVnvMZviNyvADIhDdWe284bd+l9PvgcZiYuhEiT1ymyjm8isQmeFrGVSXl6ZTkOrsZDIguVFYPQAs54Kbe64lPovMnw0=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"Yes, it's all one shared threadpool.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"4ca027eb-8d8a-3b45-9505-a36dbd545e4e","date":"2017-04-17T14:20:44Z","timestamp":1492438844},{"_id":"0624c771-1493-3ba9-a8dc-c1d4bf9d0a8e","authorName":"nguyencaoan","authorEmailEncrypted":"DZGUjQNVBpZQ5cOknrOf4CMaVwn1bcewhBwZvNCKfaFU4M8CPz28acKKMTEvo2JJyknekD0Nurm5Jge6pBPbINVisoL48TBAPvKyJqPSs5oDfjUeO0jrQyr8lywJ4wOFFyCG0gY/sIMqiG4MT3PjeN1zuVIRIcV5qPyL7Ssx9YBL9nIXIAQDbOQHWbS2aRyCkVnHKnFfDf+FgIqUQ5nz9zyYYF7BbLV/u9iKjcjc1g/pMJO5PVkv6VGqp7fmWOUyj0wALYo0KRvOkeIRM86jkmEvPlBxuZ4e3P+Gpg47fNm7PN4dM31/VasSJYvoKA1gqzDiXVgDjdYOKm/wGYA7muSt3e02hZ3jzT0AlzTj0J+8YXPpPXtjJVkXA2WblV2Qqckqc6NYjVeqlQUkSAStmKt8IN8iT0P92wuFdWZ1vPw2T/ORWUEpRiS5ZewqCkoqzOE1GFhc8xp9mIP2SWkH60ly9nPtLdwJtpu790VJS2ecHOZd/DWOYYahGqbbG2Jp2lS2z6adbKaBBZBaphfoVqqzHbSreu2MSk4DBmJy2oXXm57aUdneu2zWRHnGZHK0/dHvmBoutBi+QMDmrHhE3KXEqhHGBwCjHzNVpYOXtwBZnzhKZmp3dka3SVZZNVUYANaDQxnL2E91CbZvH4WV6o1fbpI7a18ZgYk7rE+E7NA=","authorEmailMD5":"82f4b139a318cd6a3b91d540889a222f","authorUri":"","authorUserId":"disqus:nguyencaoan","authorFallbackAvatar":"https://disqus.com/api/users/avatars/nguyencaoan.jpg","message":"Thanks for your post Stephan","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-06-08T09:52:20Z","timestamp":1496915540},{"_id":"1bb50a9f-eabd-305d-ae5c-82d0f90d0fe3","authorName":"Stephen Cleary","authorEmailEncrypted":"Zeq0RBxWN6oL1iCelnDCKb2umsw5Z+DtZ8yDUvXGnm+p61kTNY3JiOEcoRMv6WXBoOZKRmiaz8ice5vFcn1olt6uhD6tpd62jqJYJBDBu0rynr5vWEWwIrEhPsBIX/6yR6ug3qFtVSiOJjQ8sIRlrmrgJ9O0UgopkooSqmODdUziINJ3qXm8UP3Pf8B+84YqFaDjFE76Z5EKP6vUhT41OiXUOkr3bWXVejWX8a7tNLq0ZSOf/JTfyZIZdQOGDx4fleZwsF2M2pbTesZL5BdpDV7I+aI6sTIcYv4ndWq7D6mhbegejkeLDvMSY3Y6FGhkPcr3x2k72W+/8ERU5dJxTfdYuNX52XEh817N0ytJblON93p158cyEUFhvbIOsQpMFsW2+nw8Fu0IseV8E/CZ6YJwQDIaVTT4bHgU4QB7p5d3BhOkSbwe1ferGlRT2vKYCntm1LETnudXNfgMV8kT2d+NUg6ysZKfhDjdlICF7n+EkQW8mflTVAj1dZzecwQasrMewWKjD6BRQnShbxhS3PDz9GpotwKTnKHYH1KthFEhLdiBaEeVjZp3WVrUUYsIWDaOyljadsXWnyDiOdj5kgjcNJp3N59La7032v6d9mzSV1DTMPL51igB3B2Vkkg3PA6y0VdFFAPttyDi85QagnMNEG50YhAbPqjzu0E5kDo=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"A lot of people do block on HttpClient asynchronous methods, in a way that can cause deadlocks without ConfigureAwait: [http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html](http://blog.stephencleary.com/2012/07/dont-block-on-async-code.html)\r\n\r\nAs a general rule, ConfigureAwait(false) should be used in library code.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"43b9b56e-0b21-3632-976c-c8f91d391c3f","date":"2017-06-23T23:12:33Z","timestamp":1498259553},{"_id":"43b9b56e-0b21-3632-976c-c8f91d391c3f","authorName":"Nick","authorEmailEncrypted":"m4l6cLiStG0S6qTKH9vNvI23BGFc9LGulVmlytipZJ5xpzzvqBPeReVyr4BANcf9e53Mwt4pfDpNSMAfml8NiFLBxoI1rGRpjkBeSifKW6td1gV02MY+KmqnbacW/s7rIq4mL6RB8l/3TbqhLlEbGmQSeXR2+2x5D2gWfiCCzhm9JJffguVublyiPSJkRxhahKIBZsyf23hj7K9HdHgP0UMhTe/p3wwFLlAfZGUO3J7AvTIFbQzRVO6wnW5rMZnkn4SGHsL5rCcccLJMtOZydXG7ZREzEGgSpszYoF+SE8byCOse2gZUCEd6SDYCeG+Kxhi+whmw6uJkbx2Ztdbec83bx0P1PlbFj8Txhx9kS1M3P5rwIkN0YWIRYtE8WD2Eb6AxYF5GIjEFC6YR+dCiON1SNsp7OJfhJ1POZ4OGD2yoZNoNepTdsGIi/HONhZ+j50Go58p23CdU4j/B0aCjxPAdZ+SAbCnNL8R60QnpeWHoRrLCf+fqY7ganYAZbnmAfl+YjfRNEbbda678X5uXDHNH4LVHKPL4XO3gU3Bsd0GgI09f3WUz/BWPd6k3VwIMkCwRcxDy87YXB8xeA2ZsNcfUAq6TSOxcPg3QFIc1gL6ft738WXmqe6s3AQTIvTISbv9fODVZZFL/YLgpPUsHFGz6qd0lpqRfn/W8MU85Cts=","authorEmailMD5":"f089e70f17da27da76666f47c417f0fb","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Hi! I'm wondering why than HttpClient core implementation contains ConfigureAwait on several places. Perhaps it was made for feautures releazes .net core.  \r\n[https://github.com/dotnet/corefx/blob/master/src/System.Net.Http/src/System/Net/Http/HttpClient.cs#L139](https://github.com/dotnet/corefx/blob/master/src/System.Net.Http/src/System/Net/Http/HttpClient.cs#L139)","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-06-23T22:33:32Z","timestamp":1498257212},{"_id":"12a1504e-335b-375e-928f-d3c35f0450a6","authorName":"Van Thoai Nguyen","authorEmailEncrypted":"AwGJUgzAbaIChJMOwKTAExaPjlpf6FPaVKeyWXr5ZeMqFLQe4zxjh8XAKh8bVHBz/4VsNiyEb0mEo9F5Vy5MZZeakld+p6Amh0ibVT8C6ypX5LthEcoUOkOrUe1s9CaAKrYO20eR/hwaM1vejMeOATsKjbkg6XU50o1xE38YH97/ZB2uiyMh8n5C4Gg+ga2fFwYx/TBGBRCpEzJg7bBtj2DIV6z5GO+8u/shgPEy6ge0rK9NIKvZTLqVmL1DsG/GC6AtuaAiyeDFHRxj6j8sKzFiZqhU1T96Mh3V/VIj5RX66rtH7bTo1g9OYM1MhSjK08TXaBPccp85Vi/Le8yNpsZ5fwYTPVNH2L+n0h6hveErM7CLBEX0vC0eKDlsmuhIIVE9HnU+HYlly0z1BdngrjmOcgyHM8AxSO4BQNCWLdUTXpmYUYsXLE/mtk5dR6jY+ErIPwwJqYMTrA1lszOd4UAOCS1gX95Gomq54MXPGMw/Or3/g7zgUpKZ+B0FT/Rbo4ClyRZpCAI7xUam6FDeQlBTZSPQjfNEohsYnxRHxTD2QQAqEHrprtGe4dZczMAA8/AVlGFdwzydUSmE2uxeP6oPWFD/mzWr69sdRHJHRjpxEum8Xs79B/pN+XMgKMcSbTn/WOKZoubNf6oupFmVPOdC4MRyAtQWcD8jE88f5+U=","authorEmailMD5":"0a2d4b6ed85d0b1578ab33effb7aad21","authorUri":"","authorUserId":"disqus:vanthoainguyen","authorFallbackAvatar":"https://disqus.com/api/users/avatars/vanthoainguyen.jpg","message":"Hi Stephen, thanks for your great post.  \r\nI have a question, you wrote that \"within a request context, only one thread can actually execute code at a time\". Does that mean in legacy ASP.NET app, using Task.WhenAll is useless?  \r\nI used to think that Task Scheduler will run the tasks we put to the WhenAll method using thread from thread pools. Is there anyway to do so given that we don't need the request context in those worker tasks?\r\n\r\nThanks","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-08-10T23:24:13Z","timestamp":1502407453},{"_id":"10c949a2-fe34-3545-b880-94c834360c34","authorName":"Stephen Cleary","authorEmailEncrypted":"sP6EZ24khxbs0KsleeWCizGbYiI5n79/SwwO/UicAARrjz81otCrqZ0fvi28pIm1XVRgtxnrQFe7JHQRu6SLeBWXFgzbvBhjDyXJKAFeSBtJsS60/M2GbnGoseFCbAC3F2GZb+jd7pCJdBRUI3joiPL2ECa3UYItBKJe7aSrPsl9vH/6VnskjLlPRPKs0GnW1zIE3Q2s95kIq9Qk3mrsMpuClzWxKmi8OSJh81HfDt8nKz3qnppy7nUximL8L1nQwXBX+1Q9zD5ax8dVtuXs1obxungrKzOEJgDiHWXcMBFzzfj+ssZP7qaoVIln0TX3Y40tJC3iYQaZQIaWYat7w5CIq3oP/dv6M3GDNQIUZb4azvMKWAR7xyRI77cTxDRsm53PjggerGPSWbPwQ7tKZt7CTIUhsI6MrlTu1VGfd2I9NoNxW5I5X2NS0IBqEJAwe4Jbf/BR+XbmGBgRc/l7xsppUyRxKquQpeUoR1dgbvotbWuQoAKQ5Z6ZgglUnvrtKPrHjhsCLoe6Go/M6vQnih2/0+Z5toaPpUMh2X5KnYuFd4gXSR+7Y+vVRDvqTyeK8ASI851hMMpUm3Mq/OgRtED90EhqzQ95TFdGFFETz7aS9DSPRlsFDXWCdx7cGcVtrGKePrgmx0lPd9rB31MgEJXaiTLZ9Zc2TV2iEbmU7CI=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"Asynchronous tasks do not \"execute\", and hence do not require a thread. I think this may clear it up for you: [http://blog.stephencleary.com/2013/11/there-is-no-thread.html](http://blog.stephencleary.com/2013/11/there-is-no-thread.html)","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"a1f0374c-e7ab-3fc0-b734-a666f75c6850","date":"2017-08-11T12:18:56Z","timestamp":1502453936},{"_id":"761d417b-e928-31d5-9717-d9350476c57f","authorName":"Stephen Cleary","authorEmailEncrypted":"nGqth6BB/8EP64eeNuLWjAHqpSkTkru5YEJLq51buRXbdMgU3GALUGVlT/iWW13TL6GuA3CKixzvzx9Fj7xEjr7lDQqcWxGGRT0KMZ+mtl0LtJkuzKKvUseukYJW0PHTDaqbxLYMYlbn/eNADsqnijdBpy0J0IPJMgkjvZnFeyxr4HX9U5UcIHinwysf3bXXxIzoegKeMTyalye6rZ63ZLBjaoFXTbQ17gugsPYcJkjmO+FsG+pxqJfmjesTlNe36mE2uWdLmTdT+FigVpxEE0mzWOMTZGfhiQWMmteBFgZjuAaLxuZzkpFZWkj3OOtkk4dYldDoUmN4bGqD4aZy7fIfuB9ZsZbDKGTRfLn1D0smmAWd3JRdSsoOSnZKWi+KeWN57HKVtRBv5+NWbI1O0E+Q0aw08FBRMG+P09gIF6zTSUVx/rNDdHUXLNlsj1flvPcZRQSpj5Sc/JhwLjWNItoC5dNxWnMsrImYaJl0JSu+FdN5mKojpD2kOJuv9QdgWCEbFO02StNnsg9XLkoKv3GFKuJAlpPnBdo8zz4ipfzMXxLzPYj21njhRaA8tuEwntOwIm3SUI/6LgEu+kNVLkpoN7NPSE8thQ0DTbXimTRYPjVRiird+fqWwMokb8ByjZVkBJ288A8uIYHOKAUQGGr+du5y993GH5bn7bwNPHU=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"WhenAll is not useless at all. This is because asynchronous tasks do not actually execute code for most of their time. They're what I call \"Promise Tasks\" as opposed to \"Delegate Tasks\". Thus, WhenAll allows you to return your request thread to the thread pool until all those tasks complete. There is no Task Scheduler involved at all.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"12a1504e-335b-375e-928f-d3c35f0450a6","date":"2017-08-11T00:41:16Z","timestamp":1502412076},{"_id":"a1f0374c-e7ab-3fc0-b734-a666f75c6850","authorName":"Van Thoai Nguyen","authorEmailEncrypted":"wd2UJQ9bN9OuUqCRq11Ok5dPit2Chcc+zTlgk/9UdO3bjA4p0te4KxjqT5WcrHuWL8GTG+VqvLTDBketNtwa/gPdhwe5ZnM8aFxj3valR9C60IjoSA+aGrQ10EhzEYjnxS6HedwNclMl4b+mQCtkCqgGhdkIEFKK6swzDow6v6IEc6/bH7sAN5Wadltnw8gsxH9hn6jcLWgznbgWN89jGJCu/N+jMJZ/F4iZVhHihJA6or96PwyO5IcfUAv5ElYEJdcExVBl+SfJsw1xtY0iNWzIsxZV+BMDtRoWuHgkEIPW80bJXiJUpyIkynUK9AEuOgudZjT1Lm1bjvamKeDi3IQ4AwQnjTE+h3rok+L1G29Jmwx38gXJYJxxVJFdaCR6hYbuhgxsJ65Vl6VIvjqiOb26XYHvDzlbPpWG+64ZGRL3dC07uMlxHMsVGYjTcnf2ZeHhr5n0h4ty31VGmE4pYLnXpU3YEXIojl//r1ru513rSBfhaRb6IILMXXrADf3uHrL7OjaaEo0l8fIDpmdQDiChFNCADbnjChNNUkV4tSI+pPOE+DdxuQd02KFg2IRW0e9HgyEgXPGmeyQREGMsb20XekOR/4RJeHnhfhHW0mCfiAv74SSA/lJG4OGCJH+5ERGKXlHi79+FlrV+30vT20OJLlcdPgi9H0z+Xl/Z+Zg=","authorEmailMD5":"0a2d4b6ed85d0b1578ab33effb7aad21","authorUri":"","authorUserId":"disqus:vanthoainguyen","authorFallbackAvatar":"https://disqus.com/api/users/avatars/vanthoainguyen.jpg","message":"Thank Stephen and hope you don't mind my questions.\r\n\r\nWhenAll allows us to return request thread to pool, but would other thread from pool be used to sequentially executing 1 of those tasks as you wrote that there is only one thread can actually execute code at a time?\r\n\r\nIn other words, I'd like to know if i concurrent composition (Task.WhenAll) in legacy ASP.NET requests would make better performance compare to await on separated tasks?","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"761d417b-e928-31d5-9717-d9350476c57f","date":"2017-08-11T01:28:16Z","timestamp":1502414896},{"_id":"5f187a2e-b766-34d2-a281-7742d91fd1a7","authorName":"Gavin Sutherland","authorEmailEncrypted":"B8qsdy4t6z9okCQLbyX56DzldqIqyBBxJOtNJO+LOLBA4xhnc1GwHTEX8sesuW/Pte18bHmy5N7KvZV7OZhejScUP/QNOGlPL5v5sAdBC88zbul6nv/TWSezItEcYF4CcjjFiSTRQwC2uOOhSIJumYiFZV5I5TvzFYGAFC9/jpZf5bFGtDfablKfxiOSByeVvEnF8FwuF5MoFKvIBsjwtdFQA8MxATQXx8HqaNxoptxh4EycnLIpkax0c1iobzhTnZEuu/KBeF1oREf7fo4u6ezpasYZKGoSrelGEkTp5rSac52ZDu7BTItHyq+2pmj6507qf9kC2c5KriIFMaZjol9gya7CF0KCFk3rZkPMobxTpVz1/SzCik/sXP74UrtbN/5vCyHs/ro56Q8uFEfXeJneUn3ZTlLMJobb/k5umUGocLpRRWGnRo8Zpy8W+BZoSB6ZEgJUTkcwqS8qfVoS4vp1muQHZjr+3m2hhBN9eAinP8dNoeIxCu8rg2pCEJMrjZcOGfD11oiQJ6j8kjsfkRXa6Oc6qhafr9xMo49cswd88sxF/gGge0sdjXmgqzVCaLo2dGXejsHWPzMYHk7cT2Z8oo8ww7iesuy3knBPRIm1QXsN2JkjZSWpQwO/pJpxJQCxZDtcllOHV5zDI1EVZB/SRe0dNpMYXgB9wFNFStA=","authorEmailMD5":"d35b65f9cfcbbd7cef73c194d7bee4fd","authorUri":"","authorUserId":"disqus:disqus_ZzEOg9V0as","authorFallbackAvatar":"","message":"Thanks for the quick reply!","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"cb00d154-b44b-3ee7-b2b9-d08ccea10531","date":"2017-10-24T19:38:58Z","timestamp":1508873938},{"_id":"9f44162a-87d5-3f6d-8b41-4b8c5fb8cfa5","authorName":"Gavin Sutherland","authorEmailEncrypted":"J/m8/SsAEx8LAlVIr1a6CdpebpprOcz5q/0880JsOyiZs5aG/BGsM6dOdmefV9u9bMiTcuRvSkeqADtvQb3B3onNv4WpP2GX60+CBfcLe3vgEnrqRLlswU3Xy6hs33SlwJG5F/SU5A7qGhrPxm/XyaKvW2IrLyjfyJH7Dfb7eTZS+MBF8ehtqwAj4zS4Jw67m8nuYALEO9vred3wJE7GcY8xIBGyPCflEYb6Kpmp3MYTSwom1OppWfhilDyqkoO+Ek2+wWeQ0nH1bBHmxMzykBLpBPqeJph7hzxP0u4VGtCnDJoPCoAs6bW5yghsAD7UL7DLCZDfhC+A8uCVimAxlyqXqhgHczraeG5ppXndOwS+CjLYxZ+aA6Rok9H9pnAMTPVSsEqhNbn+wt/VEy9EmrfExeTJk/oziwccbxcHUnPeNAOwZADny59vi6o/RoONIo7MYdtM3GAgKWI1lnUmD2kgXKa1n8+aux488clIK86RXpESmWvNK4VgrFhID9VJN8PLVUzvsSx0pwVj+F8tg/A04OW8Li6QEo27eLZevp/sEXhAJw7kduCl0bx00UunAIEV9wlpxDqWNpwh2tSiaTOQtB7PSJqWmmQuRRHOcDUCddx4KKPUHLmdL31DMLWZu67tDqC4kcqiLawdXeD41wpsGm1GosP7lwNUUaopRM8=","authorEmailMD5":"d35b65f9cfcbbd7cef73c194d7bee4fd","authorUri":"","authorUserId":"disqus:disqus_ZzEOg9V0as","authorFallbackAvatar":"","message":"Hi,\r\n\r\nIs this also true for core projects that have a TargetFramework of net462? Do they also have no SynchronizationContext?\r\n\r\nThanks,  \r\nGavin","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"","date":"2017-10-24T15:51:59Z","timestamp":1508860319},{"_id":"cb00d154-b44b-3ee7-b2b9-d08ccea10531","authorName":"Stephen Cleary","authorEmailEncrypted":"ejqQSiYhj1Arg57HkOENZaD42ABJFBmyuOADq1SOCIVnR0zYyy25Sjw3bIfUWskkOLrcGNk4jFlWvx7C4+AIU+lSE3Zl3dGxuPcM28ZLbZKuWFKmYikjm2l5aRoPOU1KVEAamYVj2UiVbdnkYJa5OC2NqhZcNEuEIpP9OmyIS4lqk/70jetslJPQNUFn6kociRM+sKUSwcscYK0qJF4TG/eLyp06C5dwLixshJ6EhkrAvi4AUUJ6utgTrDgvbwbILR8Sfpji6n3qN3QVrin8SxiyKwMthVU+aI3SF9ix6WkoIbegl/ZtPfrohHi4G4YAfVCEquA++LTKSB1mKx4Nh2NxwkWTcck2zQRJwHLgylrHO/Rmh3XEShVHftCzYBRAq3hMRIUNUZhhShG69YnPuQzxl7mnAbSsmjCV4C9aYoKTPwEpdxFwkjHCfhCgHcG9qeIeJ3k+/UrlncJX2g3b8Fr5R1S1fsYizn8MSysN/gmpVcQjJloEVw8xJM6yNGWceqMOlfvZ+KX3ieqIIk8/3RilQPuFv09ZUUZ6JhxhGgolTHEvnZKIph7SaNP+vgg8rmY63CDCdnBpYsrQAzC4DdbxQVw8Od8yxYBUrEs4h6NtsDPsu3dEl4/dXvLkNGWL41NA6yoKQJgEMvpqKmd9ruT7cJEqVCh29eGoAjFsKqk=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","authorUri":"http://stephencleary.com/","authorUserId":"disqus:stephen_cleary","authorFallbackAvatar":"https://disqus.com/api/users/avatars/stephen_cleary.jpg","message":"Correct; it's the framework (ASP.NET Core as opposed to ASP.NET Classic) that determines the SynchronizationContext, not the runtime (.NET Core as opposed to .NET 4.6.2).","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"9f44162a-87d5-3f6d-8b41-4b8c5fb8cfa5","date":"2017-10-24T18:16:33Z","timestamp":1508868993},{"_id":"c191fe09-443d-3b0c-bad6-25f06815e6ff","authorName":"Christian Gollhardt","authorEmailEncrypted":"aiDfFhXs9i37fCGtf1GPdRyu8MPYjyrjQNBLWCFKsUXfergqqsZIgVH+ZW3nPs0VYvFfYxMn6W1WEZyqPMl8CEwyrfW4mbR2jNXRnMmRsAOoY0kPQE/JbEv0bVc+c5UBIDLc3rZVuJ/Z3L0PuGMPcOFq8Dq4GKVMTT9ZfbBFKrL6hL2gAjMmDhidozzhtICDsTVRlTPQUFq+lGwFT48Tvk66nglLdtPWWk1SFJAPwoS0hgmO3LNWOHBq6Xu0W+5l4YhoZ7v93WvxOHheRDZ6im7RJy+2SKWySxiCLQhLlvmd+i+vgGFpFL7qOmzCqTQtq3fymxBJj9nMcxB1Q5COZWNr3LDhBXckjt0rhDXQf2MqOSl7fDSnbHKOt5AlUdk1/x8vBF+gxAaydLXawLWGJqZdjSTE8oXYypAmQhHDMN7ZXt/k+4e+8StcRJgb+rnOeWR68kHGJa8r/i2invKVRt+y2sUge/jfoMyMLBca2cDsuasf80WIciWFCEpJUrJpzzaXpQze+oYbXRtUY0i2q1VLEb6aYXq4UBWtzg/VvKn69/dhRWqfy2DVizQtlScTbiDLgqLfcULJlM3u+CcQuOVpd11e/5tNh++ehl+lwIWmcpfoOBF3h3T9PRICg3Vk5Mxvc1V8hN1m+zTPdipKzMNKDnDkxUriHVFLq9d0Bps=","authorEmailMD5":"1612ef1fc9788d1190b4489d072484b3","authorUri":"","authorUserId":"disqus:christiangollhardt","authorFallbackAvatar":"https://disqus.com/api/users/avatars/christiangollhardt.jpg","message":"Thanks! That was the first question which came into my mind after reading your article.","postId":"2017_03_aspnetcore-synchronization-context-ad62260e-a3f5-3648-b8e3-575b9b12f379","replyTo":"2e9422f5-b41d-3149-8b47-86fb84a22acc","date":"2018-02-09T02:24:44Z","timestamp":1518143084}]