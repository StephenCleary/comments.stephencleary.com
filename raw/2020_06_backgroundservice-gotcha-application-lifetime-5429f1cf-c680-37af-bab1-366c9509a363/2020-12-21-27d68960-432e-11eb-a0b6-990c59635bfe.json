{"_id":"27d68960-432e-11eb-a0b6-990c59635bfe","postId":"2020_06_backgroundservice-gotcha-application-lifetime-5429f1cf-c680-37af-bab1-366c9509a363","postUri":"https://blog.stephencleary.com/2020/06/backgroundservice-gotcha-application-lifetime.html","replyTo":"d75d1f20-4324-11eb-a7e4-816f9e6b3705","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"","authorUri":"","message":"Ah! I was not aware of the 2 phase shudown. Thank you. Does that work the same way when I'm hosting my application via the `WebApplicationFactory<Startup>` TestServer for  Integration Testing..? The issue that I described in my very first comment seems to happen only in during runing Integration Tests on our CI tool. In my Integration Testing TestFixture I mock a few of my external dependancies but I do not mock the BackgroundService. And that is by intent. But the TestServer hosted via `WebApplicationFactory` does not seem to honor the 2 graceful shutdown when it comes to the BackgroundService task completion.","date":"2020-12-21T01:45:08.368Z"}