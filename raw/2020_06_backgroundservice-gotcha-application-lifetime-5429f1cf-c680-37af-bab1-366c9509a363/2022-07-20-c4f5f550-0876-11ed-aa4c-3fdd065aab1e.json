{"_id":"c4f5f550-0876-11ed-aa4c-3fdd065aab1e","postId":"2020_06_backgroundservice-gotcha-application-lifetime-5429f1cf-c680-37af-bab1-366c9509a363","postUri":"https://blog.stephencleary.com/2020/06/backgroundservice-gotcha-application-lifetime.html","replyTo":"cff1baa0-07c9-11ed-b4c5-8b5b3a4bcbb8","authorEmailEncrypted":"Pcx+SnB86Ye0x1ytWT0AaobYRrJGqRIQqtwaV96BRpjhs8ITHp6NQGMEOjZHK7kJiDHT+O+/iimpGGR6uVrWnLGPVQMC/GtUFH5OfUbyrHRPIf+NqONrS5gvy+MwHAcsx4CR8xpfow8MKb+px73jElZ1iJlJBCR3TsKZY/DQNsRvvzrlu2TpxBhWOaiX42QIdPmm2OOs7f3oWI9c4VOG2q5W6c1CerY01Z8DtHKblBi0KTZZtN3uHDLFZLWS5cIwWSUNG5xM149RXSRuriPtyuJBYCDWxMirP/N/wAvSJP9drDrPgPmN3fgkSuwveVtxfNZGVAvXwA3TYpOpDB/CpmhIGJFnsiMdb0Jv4bYkpVMXrzl2NT9K6nhchoSyGjNBMtd8LbKTRSelD/gFBKrg7CRQBejcGzyLPUu/47jlqfN7wqtamROwSdgypaqG46HmvBCd7U+3uEWof9W08jWvONzuDGpv2EICbHkwkH4Jn5HmN/dz37uuARqNsp/3Pk7lgKwTP9GjiAndde9ygkQ9Ee0gs9PsSmkfGVvRlIYdbXzYdN171VcHU06ajZwvRczgL2ZNbfr/Is728m/SvYdkQeQarMt6JJQGb5SNvZKecsqBB/BCPhRsZHlNNZnS3NhI6dLAM9Naruw8yXrXR52f6PwgTyvZZpoegPvfUWwoUyU=","authorEmailMD5":"17d3b2721e96ce7cf395ac5a51fa0d61","authorName":"Dave","authorUri":"","message":"Answering my own question, I found the answer in this [GIT repo](https://github.com/dfederm/GenericHostConsoleApp). By storing a task as a class variable and await it in the StopAsync method, even if another service called StopApplication on the host, the host will wait for the task to complete before graceful shutdown. Nice!","date":"2022-07-20T21:56:12.374Z"}