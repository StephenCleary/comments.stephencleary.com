{"_id":"cd4f6160-4323-11eb-a7e4-816f9e6b3705","postId":"2020_06_backgroundservice-gotcha-application-lifetime-5429f1cf-c680-37af-bab1-366c9509a363","postUri":"https://blog.stephencleary.com/2020/06/backgroundservice-gotcha-application-lifetime.html","replyTo":"8fa6e980-42d5-11eb-8869-e37b446acfb5","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"","authorUri":"","message":"`/ Wait until the task completes or the stop token triggers`\r\nI suppose, the `or` part of that statement is my problem. From what I'm understanding, when the host is shutting down, it calls the `StopAsync` of the BackgroundService with a cancellation token which gets passed on to the Task.Delay. So it no longer waits for the jobs on the bBckgroundService to finish and the host shuts down disposing off the IServiceProvider which my BackgroundService is still making use of","date":"2020-12-21T00:31:01.584Z"}