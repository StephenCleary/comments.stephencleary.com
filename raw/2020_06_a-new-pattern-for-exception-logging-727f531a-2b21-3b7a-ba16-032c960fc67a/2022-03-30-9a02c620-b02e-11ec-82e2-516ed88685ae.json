{"_id":"9a02c620-b02e-11ec-82e2-516ed88685ae","postId":"2020_06_a-new-pattern-for-exception-logging-727f531a-2b21-3b7a-ba16-032c960fc67a","postUri":"https://blog.stephencleary.com/2020/06/a-new-pattern-for-exception-logging.html","replyTo":"f26d5960-aebc-11ec-94de-ef7f6ca0e518","authorEmailEncrypted":"qQIfc/wP8EdjmmhbnMhwx7SN/0fKluJPJcpfkKOvEtJW2huGF+Pi9hZI8GLE4cXPoRk4q7IS5yPQfpVToDIRN/8yoE18pV7JHUcU95Sm45iVkqsshgfz9vuU/G21A8OphiXXNe24eK3ezYUGtTre2czQceMwrhCILVzxCYIAzzT8v8L9zvK4GdiSAQexP9EG2s/KIEgHgD3Pe2+kAdaeKfnhw4nIn1mAoZSidqBYc6L+as7SjsD5NvWSQExMEuNOeuDaxbcPW/1UfnXUP0OTkO6shEvgpM6UtmPBHLEtdrpk8DFyhPhU0JLxRzrJ8OYniM/nNLJXx8j5aSFW9aGAZS9Tou2ZTlnEISYVZdWj+nJ14y8fg0rhjCcM8wOzAOASNodPuYI1S1XnAG8DFO7erOX5yDAJzpHN9AQro+zRBIXXTm1cSiijDUkujb1g/V5TVQSruSpVAKJUxt8WLvvVt14X+D/PdymDKKkwwearS9loQVrj2Y0lo0VhHFLH957P26LoZ5AUaxAmEWXFsVMgJczH00gzcD4OyoYg1yx9gak6qwbAAxiaw5ESzfrQ+51u5aTLMZHOKUud3F+j1qusEEkj5GpVVJM0zXmrQowThnt1HA43iOCVc9ui8XyCOZrHH8iBrG8CFABWJ/TUabjKabsryG7qF2yzx0Y60uWf8eA=","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"If you mean you're storing mutable data in an `AsyncLocal<T>`, then I can't recommend that. In the general case, I recommend [storing immutable data](https://blog.stephencleary.com/2013/04/implicit-async-context-asynclocal.html).\r\n\r\nIf you were very, very careful about how and when `AsyncLocal<T>.Value` was set, and if your mutable data is all threadsafe, then storing mutable data *might* work. But I always store immutable data, myself; the edge conditions around storing mutable data in async locals are too scary.","date":"2022-03-30T13:37:54.202Z"}