{"_id":"96f0b64e-c3a7-36b9-a314-6d4ad627e652","authorName":"Stephen Cleary","authorEmailEncrypted":"W66r9CI4hKijiOhJ69cpsS6MscBmLpVY9AaXJrXSzUZlJ7exzuF4PopxTT5jgdB1i6aWkT2UipVZ/P5g1VxqJ3sjAAll39uuor6kJA3zmQMFW3tpsyvhwurFKKK4f0paXyxTDdY1CYm1CF4TeifuM4HKrJhtuMgH/yzjWhp27XYOITHtCqm35n8OUU6xZb6+DWk8XqlxKVLznV8PFLJB/xGymrYtGttUUgyuwB8KDifJymn19i3obTFjUqfP1W9/t5DZoNCAU+dsh3Dih+qHBkgKp93w/lSwi4gYwyLm/7co7lKTxJr8kxtmXemOpR+FErbPbaT8NjTUQWVdqlf0tmnlzkWRSvWahVCBbUGpb0/ezlnrrlkpB3z3+hoN3K61jIzO9rnQTthWfkW2O0MSV/ptwCQOUASAxZR7QtKBYepK+ouSuh6zv1+y5WRVRR67ZUywr29ky6rpASVHYZdZUfPiqxc4cFN9s/xEOt+ApV+oS148zRrb0CzlsjBMUFo/Nq4wkU7qNinuzXmQ1Elb1joLOy/2Uglv+Pfy9bOC4UuuqEKRrdnUBnH3AHLUQDeGahVIV3Nf9De8260qBz2Q4uCwAqmjaIlmgT14cbHjXZ2bUpSHqY7ciBTPz3skV7kAkCiPJCpqCUAE2c08vE08NgwvSTJgc7KhBKoiR8wBPF8=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Well, for one thing, this post is a more general approach for \"async-local\" data. It *can* be used as a diagnostic causation-stack, but it can just as easily be used to store other contextual data (i.e., a kind of application-specific HttpContext).\r\n\r\nHowever, I did look into LogicalOperationStack when you commented, and it turns out that it does (correctly) use the logical call context, but it (incorrectly) uses a mutable stack. So it will not operate correctly when your code uses asynchronous concurrency (i.e., Task.WhenAll).","postId":"2013_04_implicit-async-context-asynclocal-f13467e9-235a-3d80-9d73-143a2fd30bb5","replyTo":"51403dc2-c17a-3cd6-8d09-40199c253938","date":"2015-02-17T02:05:27Z","timestamp":1424138727,"authorUserId":"disqus:stephen_cleary"}