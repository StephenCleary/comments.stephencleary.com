{"_id":"96f0b64e-c3a7-36b9-a314-6d4ad627e652","authorName":"Stephen Cleary","authorEmailEncrypted":"smtovMEp8b7WorytOtukyslyCnt1x/r3EhXvzeq2o8LuEYlpBzLW742EZn6C0XOxEw1wtC3K8cw8QnnYh2/4eVr0VkxlCAIJAFzd1DMyhVWT1WeGeWTmmcjKRCIi6VUz4rcp5f+Ffz5NOzu3QGkRGCcMRjVBuDipvoo+qC9f1x2VqWh5LpviN0Ys+IYf968ruk6Pu03RfrozJHYOXjn8LNSza8o2faOxHyyMF6cU8UhveqP8RfB8bOK/eGV09PL5Cj1e9blQUVGMUH0GRZRykAHbZYEOWZKj+uroZODQvyJt/bhA946/WG4Na8d6yYE/vpzbc0kDeHIBu8zB2oO3/M3sGsudtYsr8WvYFho5IJ0zAjqRuIOFwIM4YlH2ggPr93UG2QbdT0o69Sv0HbJdILkHg5xFUnl+u+rY2O/EH4XfND1SrstftbPj0p1hScYInBGyuoweaYqNMFG90hiFmnsvwuQ5Vw+CrcN1w7ZZXI9P3VCLl4X0pW6hdRzU7w/Gau5knMg8F9nUaqlIEgtiepNDgI0hNcHoMOW+RfdF1JRKAVVNhYDaraYj/jo/LcMqcTETc2PbhPr9S0y6bh9Xe3a5LweEKaLF7u6M2Xh7Ql/om/+tZuzX6QqzZRLFxSAZ6bprsBDFntBhjCOvqrBDZREAtu6c/4ZeHjH6n9TaSSg=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"Well, for one thing, this post is a more general approach for \"async-local\" data. It *can* be used as a diagnostic causation-stack, but it can just as easily be used to store other contextual data (i.e., a kind of application-specific HttpContext).\r\n\r\nHowever, I did look into LogicalOperationStack when you commented, and it turns out that it does (correctly) use the logical call context, but it (incorrectly) uses a mutable stack. So it will not operate correctly when your code uses asynchronous concurrency (i.e., Task.WhenAll).","postId":"2013_04_implicit-async-context-asynclocal-f13467e9-235a-3d80-9d73-143a2fd30bb5","replyTo":"51403dc2-c17a-3cd6-8d09-40199c253938","date":"2015-02-17T02:05:27Z","timestamp":1424138727,"authorUserId":"disqus:stephen_cleary"}