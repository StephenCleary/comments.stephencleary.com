{"_id":"96f0b64e-c3a7-36b9-a314-6d4ad627e652","authorName":"Stephen Cleary","authorEmailEncrypted":"eGHkhtdkYNn+bkHWqPaooYvpLzc29QXjSudgWl7j/w6zA5C4JG2amS8lY7BKMwZdCyOvqO2pWzoN8HDAT3b+HWxQP6bA56Uqtf2wConwT5q5DwfEj5hfakqTbgnaZR6yKGh+nDNCJFWdumowOapKN4lp699wxWfm/NES92Tl5cFqxuK1mu4Wc4pXaULzA5E0cXOcSDdc3WgXCpkJp/nSrWa/sdYtneqvKpc3PjUw/02mTjTJH2F5S2OavAl1zatgAGmCi7v1vmajAY9N4ADhjEHVGowj7oGRGKy6sUDrBvD+6fca8Utb4m+4q9oVznOdjZLqDL4NVzXWJUbmcJ+2+zR//nIpU3yEdkXnoUNaRNcSVRnno6n2347yO2GNfg0g+gzyIdcDkMDL7v2e0nu36B4NmQ3oX7oPzsJ4kwi17QDdJIpvKT1JzrfpTsfhxDpQRK4bHQr42+9sDdWgJOa8lt3L8lgShOLRfWH8CxKy03kDvB72eOJm+z6E1YdTbb+BPkHoPz2Vd9Pf+kfmOTMajbd4BGUzKFTFIrie0VyEm/iwNTgj2GJ1H9sGfPjDMnXuux36OWIZ8KCX4Wtv8CvPaVxsrwS6AJ23owADa3pHLOcv1XtLhkr6xFlZH33EtLd7+d2ludSdjnm/s8DYjgiuHU34MNkhx6JDDKhhJ9qGc20=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Well, for one thing, this post is a more general approach for \"async-local\" data. It *can* be used as a diagnostic causation-stack, but it can just as easily be used to store other contextual data (i.e., a kind of application-specific HttpContext).\r\n\r\nHowever, I did look into LogicalOperationStack when you commented, and it turns out that it does (correctly) use the logical call context, but it (incorrectly) uses a mutable stack. So it will not operate correctly when your code uses asynchronous concurrency (i.e., Task.WhenAll).","postId":"2013_04_implicit-async-context-asynclocal-f13467e9-235a-3d80-9d73-143a2fd30bb5","replyTo":"51403dc2-c17a-3cd6-8d09-40199c253938","date":"2015-02-17T02:05:27Z","timestamp":1424138727,"authorUserId":"disqus:stephen_cleary"}