{"_id":"0ec82c0b-50ac-3922-9394-43b19b8a3748","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"The vendor's firmware would only accept one connection at a time. However, instead of accepting new connections and disposing of the existing connection, they just refused new connections. They did not want to change this behavior, and their embedded IP stack did not support keepalives (back then, most of them did not).  \r\n\r\nAt our insistence, the vendor implemented a second listener. So, when we detected a half-open situation (where we did not have a connection but the bridge refused new connections), we could connect to a second special port number. I don't remember if we had to send a special message over that second connection or not. The vendor's \"special\" server would then kill their regular server, and we could (after a short delay) connect to the bridge normally again.  \r\n\r\nThis was not the best solution (it's still technically possible for a half-open situation to exist for *both* the bridge server and \"special\" server), and the workaround was annoying, but in testing it worked well enough to ship to the field.","postId":"2009_05_detection-of-half-open-dropped-f127b1d1-2c83-3dd0-9e4b-214360c6e878","replyTo":"","date":"2012-06-29T23:42:14Z","timestamp":1341013334}