{"_id":"2041fbe8-37e4-418d-811b-35faa738754b","postId":"2022_03_cancellation-3-detecting-cancellation-8b525936-6562-34ae-94c1-4dc6f19d6004","postUri":"https://blog.stephencleary.com/2022/03/cancellation-3-detecting-cancellation.html","replyTo":"355edc71-7c39-4f90-80dc-4f6f0db6fce3","authorEmailEncrypted":"ogekGN6GpYWA6xUMNX68GDxFrjZ8ViTq4O1k7dVNLPniNR/fMkLWwDml\u002BRHgvxqSt8DVMpvQZYqT8vOOLBWzruypDx4XU55A5RFCrXeEUuHsdVA/nwBUZaRf3R1jwx/f5Li2je6THZAJW0\u002BJAcQUevQPzbZZwqLHRCWP1Orn2KLqJ9vj0RcW9s5a1VryAp3XSPtbcyJ9uN6uvsZNU9P3/XBojTZ87/D7CtmPOyD2Lbb/toEas0QP12P9zetwB96QOYpW9Mlt0EVmLWezYpHFPUf5JQ3yCyEhpPy2wNwl7FRYJ6EEQgVJcGXt4WUvj4Hk5/0a2eM\u002BmORW6GL0tAk8cW2MsfBB5YgsV6lkT1Cvl60Yhj32T9rOEq4U4Z2/gtKg3EE2ziXboU5EaHgU7ZlT1zjXpwkXGA8RUz8i4bYrD6mSNqNZOn0oOV9Xu63NaDEcRE2mZ91SKvIbvQTXNlsWdiiRZcHPV2uKAEnUt63KQbjEVz4Ve4h6\u002BlLzypfk0bnDE8imm67ZIN/DKjRrHa/wSjYnuJnHHZ9utpCTekqnyY/mVvpBP7pEV7/7l\u002BBrv8KOrjF60RaNkijUqq0Bpog6EM8m6xCFz\u002BnYSq6Cx7FdNIFtwbpBgHWkldbjOU1Oiezd2kiYxrPtjreJ3egklaSXgoeGZ4Ub7Zn\u002B\u002BwULlHiiFy4=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Yes, as noted in my post, \u0060OperationCanceledException.CancellationToken\u0060 isn\u0027t really useful in practice.\n\nI\u0027d say that the best solution is going to be the same as any other code (the fact that it\u0027s ASP.NET doesn\u0027t affect the answer): you\u0027d have to catch \u0060OperationCanceledException\u0060 and then check the \u0060IsCancellationRequested\u0060 of your request cancellation token. E.g.:\n\n\u0060\u0060\u0060C#\ncatch (OperationCanceledException) when (!context.RequestAborted.IsCancellationRequested)\n{\n  // this was a timeout, not a request cancellation\n}\n\u0060\u0060\u0060\n\nThis doesn\u0027t actually check \u0022was the request cancellation the reason for the cancellation\u0022. It checks \u0022after cancellation happens, is the request canceled\u0022. And that\u0027s good enough IMO.","date":"2023-01-03T14:48:37.1677375Z"}