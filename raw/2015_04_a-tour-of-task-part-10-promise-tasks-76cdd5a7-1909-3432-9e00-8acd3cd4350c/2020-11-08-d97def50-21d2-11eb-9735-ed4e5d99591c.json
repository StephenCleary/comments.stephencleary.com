{"_id":"d97def50-21d2-11eb-9735-ed4e5d99591c","postId":"2015_04_a-tour-of-task-part-10-promise-tasks-76cdd5a7-1909-3432-9e00-8acd3cd4350c","postUri":"https://blog.stephencleary.com/2015/04/a-tour-of-task-part-10-promise-tasks.html","replyTo":"","authorEmailEncrypted":"Z4Vv7QAK54WTv7HQwQThR6wB2iepp4FNIQqv3wLBAh9KnNfWkLz2IYHqdQcTxz/CRwj5CBUO0Tm6vYvDFPJ0EM/1DaCe4uAzYDMkRLrWfa2xqCfT7/b52KchyVLTExw8TJQ7zvBtQdBJMf024NMIiMDfU/4rsE09eM4v3NInpeIjQoV6PVgreLANTQDRuYZsoCI51BV3Ji6hkgemuNHH+2cAhuChG2auRISzL23JY7lG5D+oIxTdOLPfEJxR3vlQ/vACibxZ2+Ye2EyLAdozmoOXJzEhPxgdxxuCkYnaU6jpzgRawkL+ckre8vo9Sgrtfx7Nox1my0pMD/ITJVJclBEhp40XL+UKede33vRYbSkEosF4BaVzBpbD2ZgCLN8OCADth+RfLHL2HdfLPjGZ9oDKO92siNATHBL99+/BOWMo+L+V7jRy8P3IJNcB46j9pCiyKQtC0XLDU76WhhKGQ4uRhvg3gNXCQnwtSFsL8Z/gmKpwF9OUrOtaoUy2x/l3sDWj1V8/hGOoIuHnWmQcz2ie8c1BT5+yf2mt8j9OaQJVjAVJ6+SlbuVeqsN5pKQUR0sK1k1YH+bkz4SajV7lyPYCrvf7VuyW3H1yWQ9h30chZUx/sUyAVZ5yYC3MEUhxsSoWEGj/kTiXlbzt10V+LmWjR43hbSNEN9pSJ2u6Xf4=","authorEmailMD5":"dc0ec3e4dafd2207137ebe76d765b8b2","authorName":"Zden","authorUri":"","message":"Hi Stephen, I would like to know your opinion on scenario with Task.Yield() and Asp.Net Core. \r\nThere is long running CPU-Bound operation(few minutes) and Task.Yield() which returns early from the request. \r\nThis request returns only id of the pending Task. There is another request which can check if the operation is still running.\r\nIs it good use-case for Task.Yield()? Are there potential issues with this approach? what are your recommendations for this scenario?\r\nThanks,\r\n\r\n\r\n[HttpGet]\r\npublic OperationResponse Get()\r\n{\r\n    var pendingTask = LongRunningCpuBoundWork();\r\n\r\n    if (pendingTask.IsCompleted)\r\n    {\r\n        return new OperationResponse(\"ops running ...\");\r\n    }\r\n\r\n    return new OperationResponse(\"ops\");\r\n}\r\n\r\nprivate async Task LongRunningCpuBoundWork()\r\n{\r\n    await Task.Yield();\r\n    \r\n    for (int i = 0; i != 500_000; ++i)\r\n    {\r\n        ... // CPU-bound work.\r\n    }\r\n}","date":"2020-11-08T14:58:24.343Z"}