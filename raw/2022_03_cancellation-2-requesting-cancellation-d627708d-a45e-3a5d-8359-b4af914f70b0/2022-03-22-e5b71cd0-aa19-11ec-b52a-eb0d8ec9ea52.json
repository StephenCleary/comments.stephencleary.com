{"_id":"e5b71cd0-aa19-11ec-b52a-eb0d8ec9ea52","postId":"2022_03_cancellation-2-requesting-cancellation-d627708d-a45e-3a5d-8359-b4af914f70b0","postUri":"https://blog.stephencleary.com/2022/03/cancellation-2-requesting-cancellation.html","replyTo":"08cd8cb0-9c53-11ec-8f3f-5fb84fd1010b","authorEmailEncrypted":"jOjxr7mitPXf42ICHEMepOQx2qR5Wh+aZ3XRmYU3boN9oF+cGitW8lgnkdSBBmAWEqV02/YmptHQIvwelPLgLWTTszy9E62sEOmJGlrn5uv3pdcaCGWCxO9E2wIjU5aWpLMexZdg9PriPUSFTsA+JqexxBW6+DzEG/jwI8ee2GnfsghjN6NeK1LOsGIF/+DmK2dMInLTheUZOdLwL4NJ5T+MK8sHzVCVOeqryXlzvi3qmlphjTfM5ZlYLVDxgCE0wYTdd+yvM+VZli//x0vu7MCwnvVzK0Xu49JINrwGP2Qxenku6LntmiFJiXMFBk+TJufFigKmKDap4mFnyqqcSroBOmV8J2SjsBxDTvxiwyXg2w4MhYrW2Ls8GFKJ35EQ3ya5mv23m/WqIXekI/oxvccWLV6J7J/to+ktGoUynwfQZJTjwsnDhlclld+GyjPZ4lWZyZ2d6oKgD9xH8la81wUd1kQg50l5vkrLmuvi1OTq733vUMUBQ7KazsW8U1jif9F55k0tZ3KQYkeFlQ+Qwp4TvKadIJMJRi0gKj7dCQxlG7z7vrwE7aTDuMRI2cdMp69p5c1x2aiQ9BhJiFoIo1ZP663KO+LVO9kUpRnPVUDltC8Q8kfdF70/v0EqqXKreTsC5E02Gc+PncuB4CM73QB1x7FM1MWsDUpP33oowBE=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"I agree that the timeouts - and `TimeoutException` - are confusing. Timeouts may or may not be a kind of cancellation. In the case where timeouts *are* a kind of cancellation, then they do throw `OperationCanceledException`.\r\n\r\nI do cover a pattern that can be used for distinguishing timeouts from other cancellation in [the next post in this series](https://blog.stephencleary.com/2022/03/cancellation-3-detecting-cancellation.html). It would essentially look like this:\r\n\r\n```C#\r\nasync Task DoSomethingAsync()\r\n{\r\n    using CancellationTokenSource cts = new(TimeSpan.FromMinutes(5));\r\n\r\n    try\r\n    {\r\n        await DoThingAsync(cts.Token);\r\n    }\r\n    catch (OperationCanceledException ex) when (cts.IsCancellationRequested)\r\n    {\r\n        .. // Timeout has expired\r\n    }\r\n}\r\n```","date":"2022-03-22T19:54:34.835Z"}