{"_id":"2991b6b7-f259-4908-87f1-f04c9dcf6944","postId":"2022_03_cancellation-2-requesting-cancellation-d627708d-a45e-3a5d-8359-b4af914f70b0","postUri":"https://blog.stephencleary.com/2022/03/cancellation-2-requesting-cancellation.html","replyTo":"43fc3c16-3cf1-4d2e-97c4-d72631fdc001","authorEmailEncrypted":"vrWs/xYXR3qLDhUkHDCior3IjJy5nm1PBJRrHvzhkxODPliHxt5PdQGDPZKUgBX5SNGfaSwqN1IHHF8jrtN9cYBRovkV8b7VvBVKc\u002BomFoe7CRRR4cxBZIOpYwaD8218Gg/suTtSXiXl/ysM\u002B7dQkxL2nrqYXt7OHIxAp1kvZR6Qsp3MFszfbejiJCG9Db79eRXoXR0ZA\u002B0bWx7idGWu6Np\u002BeorLyW/U/SLlwFklwWuER\u002B9ObNf3Q1PFh8xIYZgbUIYyLecv3syeYFp5yjQVkctvVZz9HR9tNiNDndVQPEJLCptBBtVR/D8xJbd2RrnYO2VAXo0HWAPx9\u002BOfRn2pdov0qVFMj7JaVi7xJTfURkpYj5ngihwYfMhIlZ1VRO5tC8otCtvsiRpHKgUme71QrjWlCFAy6FrsN88u4k\u002BTxkhIOlSVCBHJCFSWDfH/NlsD2kZvW3ojsywnOJnYsUGdFom9UmmaxQJST\u002BMWP0gVMd5W9V7sOvCrrgmaZlFTKRXRrm\u002BpCUnMXsWC3DyB8FunvNvfClTrxI0H57hWmV1akaQwRbmgp8q1oxwofJzvqbgt3/L46uqvQAUUgEk3NtjbPv3VOlOi18BkfYAbN7bx1q771VXEAXNJcUHIbM0uU\u002Bq8roddk50xjyi\u002BRzaaOCUeWrM/g3bO0vfj4lj9WBYhlMA=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Great question!\n\nWhen working with UI code like this, any time there\u0027s an \u0060await\u0060 then the user can interact with the application and cause other things to happen - including clicking the Start button again. So the user can do this:\n\n- Click Start. The Start button is disabled. \u0060_cts\u0060 is set to the first instance.\n- Click Cancel. The Start button is enabled immediately. \u0060_cts\u0060 (the first instance) is cancelled.\n- Click Start _before the first operation completes_. \u0060_cts\u0060 is set to the second instance.\n\nNow there\u0027s two operations going. The first one has been cancelled, but it hasn\u0027t actually completed yet. It needs to check whether \u0060_cts\u0060 is its own \u0060cts\u0060 to know whether it\u0027s an \u0022outdated\u0022 operation that has already been replaced by a newer operation.","date":"2024-09-29T19:02:22.5653175Z"}