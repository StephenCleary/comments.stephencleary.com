{"_id":"4786a8b0-e1a6-31ea-8a81-7105e16f9659","authorName":"Stephen Cleary","authorEmailEncrypted":"sp5b0ld9NiNvQYJQPODKeJ69GOa4RActtMO6jnqQwIfXm/bs5YKLYsI8p4XXT3NAeene9Gisrq6qM3VgF3M5lLF28SgyAVN0mnIHMVdzPbBr+9J7R9IhEkpOyUpHexCogrlzsrTAZmzDPUgvy8r79lUkKGamLL9tM7Y1Pn9v7Niwdn1bmhdvHXk+PYF1b7DZGGett468zaGjeg5kGtgYtlMLqXzDnI81N4peELYrN74Uxt/J5imMniKxZIVTjdV1GEQbNMjfq9Jpbp/qtUvH2arrFcinDFrFDNL+1EaOifXBJ+IeRC/l4iXpwepFatk6OYl/Y6yIjnN23LyAlwEDDfWpReuSPe5MRyXPTrf2pAcZgSd38p6Rs+Jc8PXWBvo1UHpitQanWjwni/ryqo49R8sfGPJEyfwsa3UqcH+t2oqdV191HntT0Bi4+8VAi0dxNuts8Vbfr0P8RJZ0Q0Bd7SONJw8+zIDNW16bWPnKdeoobmU681R06eSUePHcGU5Ng7IWIVLH0E+lj/5Q7MLMt2eSHE7fNmhFl+Fq3kESXo0hKbFFGkQQVKHlnjHzVj/nzyehaAPwRNKPmW2CFmSwwzsdQdAPJcB/q9+veWJRVahpQfz8NosTBX3yxcCUVk6UFPky0YcUl8f1qfn6Q++WmJ1JBMUCt2z29LNlujuM1R8=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"This post is about using BufferBlock as a Producer/Consumer Queue. It sounds like your scenario may work better as a Dataflow-based solution instead of just using it as a queue. With TPL Dataflow, a \"consumer\" often isn't necessary; you can just end the pipeline with an ActionBlock instead. You can also use TransformBlock to modify the data as it \"flows\"  \r\nthrough. This seems to be to be more in line with your needs than having multiple producer/consumer queues.\r\n\r\nI'd also recommend not to place \"locked\" jobs into a separate buffer. Since you need to retain order, your processing action should just wait for the lock to be free directly.\r\n\r\nHope this helps!","postId":"2012_11_async-producerconsumer-queue-using-7d55b643-a325-3ba0-9ffa-7ec6b0363eaf","replyTo":"389f005a-be32-305c-ab95-cd4edc9be21c","date":"2016-12-17T13:38:15Z","timestamp":1481981895,"authorUserId":"disqus:stephen_cleary"}