{"_id":"9aa2d887-1e40-3d42-8d06-93c8779f7bf5","authorName":"Robert","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","message":"I would appreciate a suggestion on how to implement efficiently the following scenario.  \r\n\r\n- One producer prepares request messages which are submitted to a \"component\" which consumes them and replies back with another message (a future)  \r\n- each message can be processed by a consumer in maximum 30 seconds   \r\n- the \"component\" which consumes messages cannot process more than x request messages at a time  \r\n- if the \"component\" is completely busy, a producer should wait for an amount of time to be accepted for issuing another request message. If the timeout expires, the request message is dropped (as cancelled) and another request message can be processed.  \r\n- the producer should be able to await the result for each individual message if he wishes. Practically, for each request message a \"future\" response should be generated which can be awaited if the producer wants.  \r\n\r\nIt seems like a good fit for the subject of your post but I am not sure about which async/await constructs I need.  ","postId":"2012_11_async-producerconsumer-queue-using-7d55b643-a325-3ba0-9ffa-7ec6b0363eaf","replyTo":"","date":"2013-08-28T02:10:16Z","timestamp":1377655816}