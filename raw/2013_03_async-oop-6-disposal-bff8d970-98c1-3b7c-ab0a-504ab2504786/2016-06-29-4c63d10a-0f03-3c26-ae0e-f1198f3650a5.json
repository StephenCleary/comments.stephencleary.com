{"_id":"4c63d10a-0f03-3c26-ae0e-f1198f3650a5","authorName":"Nathan Phillip Brink","authorEmailEncrypted":"oj/Wv4yvClpizPIz8Qz4QsSpv+K0o62x27CdNoHSWhiScI3mni6kjfjmCQRrO3bys6Tn5jafZZeq0MLbEursyuafdTMc+OcXD7/R19VHpyWlRxX5iXMvMOTsIH5JMI9ZgFSOnCdnP4QmjRck2blN9qy4iISbmskc7fajHLiEiPbYJWol11EiuyX6NFGUl7rWMR5uoathXs4bTLPvw85h22WVpIOBBOFWb9GuFS9x8AgZ2gcje06fWM4pdrCH8nn/Gj+LTSbl8Mb7jrNdMmVNpz9QVKf3OAe4Avor0fTslvnRtt2e3AxVeCr47EFxMxesHSDyYVv2y9qZQ+2WdtepO+d+oL1RTldZJurcTi6QHweXrsucwiNgCtWt61mtUKDwYchFnrSptnkP1yJLERsNr2GKubEAh9lLIro/Et1XtrMOud6SS3kEX+WsVvPvJ52X34VoZ13Nc+9c3tyMjXxFz4T3ukj3c9K/AzSvkeuIfoXsycXEBmC2k4lT2/KME/rkV6reUGbZZgOBR3f3enIaIowELZ8XO0gRsknOIUzv4QIJ5UFsbFJcb6Cz1/jsUUm0LMX+ZaK9xdWUvzW/eCAeBEuEUyuFE7z8rnmNWcL0hLJRgLq83SwrRy9I7sGbpVaRFBMMWpJxU9kWWgICsxr7xmDV2ptcC4u284umSJdFso0=","authorEmailMD5":"a8defe14b1c80bc2bd59a1fab3848cfb","message":"I agree. Scope-safety is one of the nicest things that `using` and even `async`/`await` gives you. You can `await` something inside of a `using` block and not trigger the scope cleanup—something I’d consider very ugly to do if directly calling `ContinueWith`.\r\n\r\nI think your pattern should be added to the Stephen Cleary’s cookbook. It is even useful outside of just the problem of asynchronous cleanup because it is, uh, easier to fall into the pit of success when the developer doesn’t even have to write `using` where scoping is critical. Also, lambdas enable this pattern to be fairly easy to use:\r\n\r\n await CleanupCriticalFactory.UseAsync(  \r\n async thing =>  \r\n {  \r\n await thing.DoSomething();  \r\n });","postId":"2013_03_async-oop-6-disposal-bff8d970-98c1-3b7c-ab0a-504ab2504786","replyTo":"ee3e0914-d37f-39fb-9ac3-abc6eea495cc","date":"2016-06-29T19:11:13Z","timestamp":1467227473,"authorUserId":"disqus:ohnobinki"}