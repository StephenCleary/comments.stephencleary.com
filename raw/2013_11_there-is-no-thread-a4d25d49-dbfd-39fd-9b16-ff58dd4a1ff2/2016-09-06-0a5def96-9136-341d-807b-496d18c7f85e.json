{"_id":"0a5def96-9136-341d-807b-496d18c7f85e","authorName":"SharpTag","authorEmailEncrypted":"eLKRhOGq9PSbM4taYmK4Yzsos4W9NAC7iAptmBWhICmMW60sq6F/1zqL2lHKGSbtiiZuUXOJUgMhuqwImim4QtuTxYtH6197x98DBRZQxiFd8sfO3FQWlk8ko2IMcRTHOAWHQXCRaOxNXRI4fckMMprWzIIuh+UeApR9kKgEonLMW6sN1wyDWxtvRMRmygwTpZheleIh8z5QOGphEtoYPVlZWTS96oJiPNKVFFGDgAW6MoEbk34ftQXSbIV0u4GyiwJ3mN6glutUNInt+LwEsdHAEs8YTXONXfyvqjrQF9iW6kuOmKT6CqfSpj2y+cZ+hF2qot25C4DuGWfdPwme0qvisRhIfuFUQptZhETnkT5/lhc3hLvNVIbgfa0gs8I+N8OQs0EigIjklWPnpgLXNnwzCNy+mlL8ZjESEBpB0lbXIAlPREl7hj3dJ31AeK3NNPS7aSLxurl2xqxieLbbFgUx3mCeEUoDkGRocn2ey8UXbq+xUO1lXwpJBnNVYj8/MaoFAsL/h+qU9RkGCeaJAt8cwCvJKEsa8vcEgxPITPcnmmF1xkYQvQ/tZ9pb7SkCN5gLAIELcpaDYTMX9XaJvqFGZvgeitLJjEcT+TGJFUl8nM9rC4JORBlXDB7uDYFehCKQjaM4I6ulTlUDVaLLr61I/jirOSG6Fnhsj88atcA=","authorEmailMD5":"5164af4f96639d26aa14d0570108de15","message":"In case anyone wanders by and starts to build a mental model of this, just think of the DPC as part of the Windows Kernel. It is just getting the next available time slice which means it runs in whatever thread or process the scheduler has running but it has no interaction with the thread other than the ability to clobber RAM anywhere on the computer. Although it can only be interrupted by NMI, the fun part of the mental model is that there is a DPC Queue for every Core on the CPU. So the next slice could be on any Core. If the device has another ISR which most often is the case you now have more than one DPC servicing your Async request. Now everything is at the mercy of the Device Driver programmer to SpinLock the right memory locations and coordinate all the literally non-time sliced but actually simultaneous DPC's so that I/O completes without incident and starts the more orderly sequence nicely described in the article to return to Windows Userland. There really isn't any analogy or sense to be made out of the DPC system from the perspective of a C# programmer, but it is awesome to visualize your code running simultaneously and that SpinLocks are executing constantly on everyone's computer to make this system work. If you have 8 cores, they all stop completely dead doing absolutely nothing during the few microseconds of the lock. Not elegant at all!","postId":"2013_11_there-is-no-thread-a4d25d49-dbfd-39fd-9b16-ff58dd4a1ff2","replyTo":"a8dd8eac-88e2-3dde-b645-4a475a8dfb1f","date":"2016-09-06T02:07:16Z","timestamp":1473127636,"authorUserId":"disqus:sharptag"}