{"_id":"c60fdedf-fab0-362a-b788-9ccc16b13cc0","authorName":"Stephen Cleary","authorEmailEncrypted":"qUmq1WJLek8frbRbikFOnK+Sc7QXmBlATPrEpPgNTEV9mTOZn5peFExjLo88WgJHh/0klT4erS8e0JjYG/G26I9MHJzee4Iwh4Cav+NoGbO7dsezlCyXz3thKF8bZEk5U4w0DAOM+0EQi01q5GyM8i7biIP/2irtxG+biR/AwbybV0GgElU3OwgcpMugalx+ut3+f/X96quZgIyPqXKCyImRKZpaVSNygT4/RW4dHfEH6K9RMjYr7QfkJzBu1snw6FV9sU8b7Jwyc40GKjWdjpCE8H2PrUWkMH2EsYh+mLPD/A/W0bSs3r71XHv8Z9szs16ZZYB8XDDYPptc2DZbjzYosA0JC91/gGPQ/IFkAjJgsURUBzKL1UzHtVQdMA/kKuhNySIYAhezEaZkiRfX9CWiqkpqhi+sPTJ6mr/3g/uh3hJzl1qTFXV4m8UtK7KiS7ggt7TITx9FidXaHMEj67YnMevhUmzVeTvcdJa7I76UjhP7wGlEpKK1OJMH8cFuVhnYs7nq+cyYvRMMQYDULA1NKL9gHR/1ngSKD3PCW26dnziQzrSXFUaokTS010sCIYaazfHJMwweAiotrRf0hXp3wmoFVGPbfWv8p0knF3Cz75A8iI97wJBHt6COy9NMqwc5Aqct8o1JHkekK4SaTz1W/5I6YQcQYFqNZ0oDcDc=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"If your code is using Task.FromResult, then it's not asynchronous and you don't get the benefits of asynchronous code. You should be able to use await with Task.Factory.FromAsync wrappers around HttpWebRequest's Begin/End methods (see [https://msdn.microsoft.com/...](https://msdn.microsoft.com/en-us/library/hh873178(v=vs.110).aspx#ApmToTap \"https://msdn.microsoft.com/en-us/library/hh873178(v=vs.110).aspx#ApmToTap\") ).\r\n\r\nHowever, it may be easier to use HttpClient, which wraps HttpWebRequest. Also, it seems to me that sending keepalive messages may work better than setting SO_KEEPALIVE, but I'm not familiar with that exact SNAT problem.","postId":"2012_08_async-wcf-today-and-tomorrow-962c9b7d-5731-340e-90d7-2697f0bef315","replyTo":"91f51b08-ea36-3d2b-a703-ece742cc427b","date":"2017-03-28T14:17:02Z","timestamp":1490710622,"authorUserId":"disqus:stephen_cleary"}