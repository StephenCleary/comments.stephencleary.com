{"_id":"1e453095-7ca4-3a19-9269-7c19639d8dfb","authorName":"Exploration","authorEmailEncrypted":"","authorEmailMD5":"","message":"When i put this in my service the EndCreateTrafficAlerts method is never called. When I set a breakpoint on the callback(tcs.Task) line, I can see it get hit but nothing happens.  \r\nIn client;  \r\npublic static Task CreateTrafficAlertsAsync(this Release2Client client, IEnumerable trafficIds, TrafficMasterAlert alert, Release release )  \r\n {  \r\n return Task.Factory.FromAsync(client.Contract.BeginCreateTrafficAlerts, client.Contract.EndCreateTrafficAlerts, trafficIds, alert, release);  \r\n }  \r\n\r\nIn server:  \r\npublic IAsyncResult BeginCreateTrafficAlerts(IEnumerable trafficIds, TrafficMasterAlert masterAlert, AsyncCallback callback, object state)  \r\n {  \r\n try  \r\n {  \r\n var creator = new TrafficAlertsCreator();  \r\n var task = creator.BeginCreateTrafficAlerts(trafficIds, masterAlert);  \r\n var tcs = new TaskCompletionSource(this);  \r\n task.ContinueWith(t =>  \r\n {  \r\n if (t.IsFaulted)  \r\n {  \r\n if (t.Exception != null) tcs.TrySetException(t.Exception.InnerExceptions);  \r\n }  \r\n else if (t.IsCanceled)  \r\n tcs.TrySetCanceled();  \r\n else  \r\n tcs.TrySetResult(t.Result);  \r\n if (callback != null)  \r\n callback(tcs.Task);  \r\n });  \r\n return tcs.Task;  \r\n }  \r\n catch (Exception exc)  \r\n {  \r\n Log.Error(exc);  \r\n throw new FaultException(exc.Message);  \r\n }  \r\n }  \r\n\r\n public bool EndCreateTrafficAlerts(IAsyncResult ar)  \r\n {  \r\n try  \r\n {  \r\n MethodLogger.LogMethodCall(\"Started to execute method\", MethodBase.GetCurrentMethod(), ar);  \r\n ar.AsyncWaitHandle.WaitOne();  \r\n var task = (Task) ar;  \r\n task.Wait();  \r\n var creator = (TrafficAlertsCreator) task.AsyncState;  \r\n return creator.EndCreateTrafficAlerts(ar);  \r\n }  \r\n catch (FaultException)  \r\n {  \r\n throw; //just rethrow  \r\n }  \r\n catch (Exception ex)  \r\n {  \r\n Log.Error(\"An error occurred in the EndCreateTrafficAlerts method\", ex);  \r\n throw new FaultException(ex.Message);  \r\n }  \r\n finally  \r\n {  \r\n MethodLogger.LogMethodCall(\"Completed executing method\", MethodBase.GetCurrentMethod(), ar);  \r\n }  \r\n\r\n }","postId":"2012_08_async-wcf-today-and-tomorrow-962c9b7d-5731-340e-90d7-2697f0bef315","replyTo":"","date":"2013-10-25T22:24:23Z","timestamp":1382739863,"authorUserId":""}