{"_id":"84307935-c21f-370c-b700-e0fdc289d4e1","authorName":"Juan Loustau","authorEmailEncrypted":"DdL8DOgqmEAGg/4S+Dmv+LlEDv7uRrYY6Qo1aOAWlT232mH6VXFniNV+aq1z7xXAgBP7KiIai47J819PTGNNux/y6Kw/iSj2vz7RhSPlYnFycD92ntYRUEuZoX7wzVvTAA4TvADz6DwY1Oauamh7bc0sqoOE/4K+MCtlVKCWkiYX/R2sji2/DuZYQHisMZGnkdA0FuR55jANvk/mN5Q4FZqmLGA+/ksTMwUqlkM4lKpYCynf2uXjO27cTGHzq/lFe3r+NxGmY8CwSzTSzl8QBfAbC6BB6I9WJD7YzbdBUcssUEodh8AHu0PZ12hbU7jNj7redUrzUbiX38JBvhyEkd2CRgqBexdTmJXSSZjrus1DOqYwY/UrKCuOi52spIbYuV43f/IcBGqmjZycJhAXV8aqKX8Sogkc+gQtQwgC5ob8YBBIrwjisC3J4/hdbJ+sq30iQK+A7GydaQlqe4OW+O1TxYOvwlZI0f+axL0l3KnpHv79aL++FBgkRRSkkJ4ib0HUVnhRoSUzPSCHt7sJ9J64FQ9xr/yO9D5aX/PAVj5GxgNvXT0NuACgmmP5I2ED0OujZqA/OZA5BoA9xzG7ppwE4bYeyweBV00pkhevUuaazwifn9o9nMUtxKepUkfFKEBHZ96IYmmpVXzVQUmJ/4qDp4rCVf1JkQlN2C+vFJk=","authorEmailMD5":"1cff41e7d88698ee36c729d7dcde52e3","authorUri":"","authorUserId":"disqus:juanloustau","authorFallbackAvatar":"https://disqus.com/api/users/avatars/juanloustau.jpg","message":"I think the best solution is the Factory Method, because you make sure that the instance is never available while it is not fully initialized. To solve de IoC problem, instead of using a factory method pattern, we could use the abstract factory pattern: Instead of injecting the instance, we inject simply a factory, which in turn takes care of creating the instance and initializing it asynchronously.\r\n\r\nSomething like this:\r\n\r\npublic sealed class MyClass  \r\n{  \r\n private MyData asyncData;  \r\n private MyClass() { ... }\r\n\r\n private async Task<myclass> InitializeAsync()  \r\n {  \r\n asyncData = await GetDataAsync();  \r\n return this;  \r\n }\r\n\r\n public class MyClassFactory : IMyClassFactory  \r\n {  \r\n public Task<myclass> CreateAsync()  \r\n {  \r\n var ret = new MyClass();  \r\n return ret.InitializeAsync();  \r\n }  \r\n }  \r\n}\r\n\r\npublic class MyClient  \r\n{  \r\n IMyClassFactory _factory;  \r\n public MyClient(IMyClassFactory factory) // IoC  \r\n {  \r\n _factory = factory;  \r\n }\r\n\r\n public async Task UseMyClassAsync()  \r\n {  \r\n MyClass instance = await _factory.CreateAsync();  \r\n ...  \r\n }  \r\n}","postId":"2013_01_async-oop-2-constructors-a5a9395b-82e1-300c-a62f-4326cea131b5","replyTo":"","date":"2015-03-28T23:37:21Z","timestamp":1427585841}