{"_id":"c6bfbf19-cc46-36d8-8297-dab25ced8eba","authorName":"Stephen Cleary","authorEmailEncrypted":"qH8p9B0XhDC2uiT2PJqJMsWpiLi8rSKobtuXq1tajIJqjhZQ2g1cjgwx++YL94rmchdE46q3ro684d8sMtdy7cFSG+t1dCjCPUOFjGb9UGdLLIqAPqY/EcriUj6kEVFuZYzCE18wx2wwq3xOYdpagO7SlkNXS/6gXga+x+rUJMVqXAK3p32NPqbZYcs78qtdZLG7FTRQr8Et73sYGeopPUHLRIUktOKJg5UxferJjz62KthFZHWeL5r/ceftmibtlRcF3t5Hu4fWbndToYLvFwRLc5Gz3b3PQYZ2+wCJkDZ/8j4mTwl+hNQtflyIgxWB0N/uSEfyE7wJCYj5CB8Xxd6dT82WH9i2KcEMx1SvOLRN7g5duvzQnpDZMaEMCW14BXSjb2skWQ6nCJFe3D3vpZpZ7KOcN8UcgzUDKUTLv1LsAqGuwileZiGysYjDgrai3wdkYm0VdtV12LBGbfkucLwfzAoTr2rCH7UWWY8NrYDsBTWie5SQlJ+Xa/WgIy8yXse1jEETYscuwWS0mlDXfds4n0vavdaTe7a5Gs1yUZoiF+vudNU4A0wPizP0MSEGZr1p+KKuUzyEoLPaMpslb04nHdk08PJ3sQJIbkzP/K8LLMnSzFHjQ93wgEqVVn0x58rxLvB1T/hfanE2qidxB2aZFY0U8bScg8VmlL2y5fM=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"Yes, the code in my blog post assumes that you've already copied the received bytes into a separate array and pass that into DataReceived. It's inefficient (additional memcpy), but it does make the DataReceived code a bit simpler. Since that's the most complex (and most important to understand) piece of code in the whole sample, I decided to do it simpler and less efficiently for this blog post.\r\n\r\nIn real-world code, I don't use the additional array. I always either pass the bytes read as you do, or use an ArraySegment. Actually, updating this code to use the new Span would be a fun project!","postId":"2009_04_sample-code-length-prefix-message-ba45f669-db06-32ff-ba50-472b420edace","replyTo":"09737035-652b-36cb-8e8e-963a58804f5f","date":"2018-03-04T03:02:14Z","timestamp":1520132534,"authorUserId":"disqus:stephen_cleary"}