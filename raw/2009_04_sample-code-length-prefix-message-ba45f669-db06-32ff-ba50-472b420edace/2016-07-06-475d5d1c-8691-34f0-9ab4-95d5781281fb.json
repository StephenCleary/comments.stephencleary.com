{"_id":"475d5d1c-8691-34f0-9ab4-95d5781281fb","authorName":"Stephen Cleary","authorEmailEncrypted":"ky/V8cQ0ORB1MZppS260YkBfILQd9ZL0nOmwTiNIuiD3gPrtTXI+VvYZML6N00KH67THc9fkmZP1Ln9HTqhcRP9Qx367sTFlY/r45Q2ylg1B6sMh1fYAu0d4YSRW6/5acIvju6FJskRViG1cZ6bVF22jnQ7tn+B0pjIeLcAio6G2/dxH5Z1U9fObmswq3X9OZ1R7nTy+ME2z8uZoSi4lkPwh8IgRF4WX3MsFE5kw+PXoaS/ixa14Sj6HyPvLsMwgncLjJar0A2R6GJxZKntRxgvX/kkeeivWLR0R6+8/JmMYK7DARFK031LhKyIPkR9k4sLh0q+XYdusDcsIgf9FdzRFyAKGkhGpoPxbjnkam7+UmqooNxoaw3D1ZoY7EA+ZVqe3/3v7ksb/WkgqY7sBgMUtX8ysjmSqreON9iJkRqoHY/EANCyO8pfIfXpJw7VKM5nT/aygkgzBmlio7VePX1ZxouaZaolDhdt2qNGtNHhVuVKcqkIymdB/5hBRTIIFUivEO79j0rSVC/+Hp+6Hv6DkmuEPdQ2UWUM0ZlOv+DY+bXt1Zuc/thKcvKSsDJw99UobqE60oqhEQU5c95+Qim1X1LDVgWcaRle0mIh9sLdOM9IiocEbph9KCREhjq2CQfBQxxzesB1WAbJvLdy4bpxzN8JV4aGSgCfuG3w78G4=","authorEmailMD5":"28dde5772b48c92e08b8050411aa5ba8","message":"I'm not sure what you mean by the \"payload length differs\". Length prefixing allows for different messages to have different sizes without any problem.\r\n\r\nThe chance of undetected corruption is very small. Both the link layer (e.g., Ethernet) and TCP have checksums that the corrupted data would have to pass. The rate of real-world undetected errors is estimated to be between 1 in 16 million to 1 in 10 billion ([http://dl.acm.org/citation....](http://dl.acm.org/citation.cfm?id=347561&dl=GUIDE&coll=GUIDE) \"http://dl.acm.org/citation.cfm?id=347561&dl=GUIDE&coll=GUIDE)\").\r\n\r\nThe recovery for any kind of \"impossible\" message (maximum length too large, incorrect length for the specified message type, etc) is always the same: close the socket and start a new connection.","postId":"2009_04_sample-code-length-prefix-message-ba45f669-db06-32ff-ba50-472b420edace","replyTo":"961d68e0-de3c-36aa-ae0c-c6f476ac4c73","date":"2016-07-06T12:25:10Z","timestamp":1467807910,"authorUserId":"disqus:stephen_cleary"}