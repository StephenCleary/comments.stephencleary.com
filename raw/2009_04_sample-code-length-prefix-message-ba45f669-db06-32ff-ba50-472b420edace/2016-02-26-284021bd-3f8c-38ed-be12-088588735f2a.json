{"_id":"284021bd-3f8c-38ed-be12-088588735f2a","authorName":"Amir","authorEmailEncrypted":"eGT6RfUQLVMc0qP4WA5PIANSWwkrHafQ7vfboch6sjuZCqzcFEGgeJfSN9T5bMVNh3q8yDA/dydWygblqLmAd/HjxEqy6dyhWj0jfbSX4jYp7KpMmxtzOghilQXwhsPyk6A6sQSwv9kSU2BDp2kgQ4NnbhMPdNgmOw2hQPMoCFgla4kVGqWvxvcEK943mSvQCL4JG3guxvYIowZNPLuXbrLZYxcimdwErPG1n09muwb9CxTgeBf7TyNZUqNY8tnFHhxIpmuszO3O7JOaRijAxbk0IemZbQfjqDhXqoDXfxOCU6rY6dhJqrBy/94ZYGQszYqb0bUsSCSl4Jk/RqoBavphLQ1gOytaEqQNrBglY0NKVX8XL0t+pYI1Mj4QrvPWqhCVUq0DS7fqSVK/pKvgFr4S35D7ntFhvAgv0UlKoT/Tm3T2cDhZq0EMuFBdVgGiPXoIuGHUD2owu47oS19e7cVdj7Wv9GBhMBGVQTKI68XuLBUm5l5Zy1S2KodjPYzWIJfvaI22B2tqg6cM3SX56Kbp4687g6Q2j4jb3i39rU2lk8XLMULX6DBpZ4SDOjWxExak7RcGRv8+yoBqwkLp4cof7G9kFZnSUC7WT9p1dMaUPCi0eftPzwKPKcdy4YY8UcKtU6IaGd7JWJmbrxJZPyvSY00hYzXZkt4+qWy75ho=","authorEmailMD5":"fb538b1e65a06ca517809472352602dc","message":"Thanks for the code. It helped me alot. However, there is a bug in the WrapMessage method. Instead of   \r\nbyte[] lengthPrefix = BitConverter.GetBytes(message.Length);  \r\nthere should be:  \r\nbyte[] lengthPrefix = BitConverter.GetBytes(message.Length + 4);  \r\n4 is the size of the header.","postId":"2009_04_sample-code-length-prefix-message-ba45f669-db06-32ff-ba50-472b420edace","replyTo":"","date":"2016-02-26T21:45:14Z","timestamp":1456523114,"authorUserId":""}