{"_id":"284021bd-3f8c-38ed-be12-088588735f2a","authorName":"Amir","authorEmailEncrypted":"d/yU6RwCLotQqCCBz0Q6ytK06ek3RCpNLfcmVXBB9dU3/yPhJjzTIi015uNEC4c/xi+GfelbPyfBBCJcAHDXGBcmhpYO00FRzWzfvr4F0XiTRWJ1fSdh5wscsIITU8iEX4scvLM5p6pFvvQscnuw+kfB8EJM+JGAD9DLopprqyBOy6Mm/WZc06vFo4TeAVA+vwtqmcR6K3w0Ypk3fhKstNlThN0zS7whStM4dcIPoOxh/f0jR8BRlyDfU2iqsvbuwfrGhI1Lyjwde0FIgbKQ8tRdX5CGRFBTp9uyPBHdsqTwKPZZxU7qMm/2ASFyQPd5HJ3TEOIad4G51XC9iFOK5xbFj3hFsLf2vnlxK04GtHJ1gn6M7zlCo34BZ6AWb3a028czZ4pPKh/wjgI3OOhLjxg3dWoCgnEufHw+0LozbKFFoDp69RaIVK1jmYEqxp5RVWVfgmq3UE77msG57Sp5/39B685gDmE5KHAvKile+jAEADm7ItkChD5X46VM72h7D3wH+6wpOM3joDZidz/ZZLHEV/TSx1jkLlQ6mHieFrZK1XpTPOKBoyjQm7toExF2q+9kvMavs68TsUaIeJlOSy4Ku/fkdpWsq4B4Qk/mC/ts0oaynww0++SCL2ZXXALqNzx5m4Svkmjw171bSo/CsAS1xFJck0xvzxzG450MlLs=","authorEmailMD5":"fb538b1e65a06ca517809472352602dc","message":"Thanks for the code. It helped me alot. However, there is a bug in the WrapMessage method. Instead of   \r\nbyte[] lengthPrefix = BitConverter.GetBytes(message.Length);  \r\nthere should be:  \r\nbyte[] lengthPrefix = BitConverter.GetBytes(message.Length + 4);  \r\n4 is the size of the header.","postId":"2009_04_sample-code-length-prefix-message-ba45f669-db06-32ff-ba50-472b420edace","replyTo":"","date":"2016-02-26T21:45:14Z","timestamp":1456523114,"authorUserId":""}