{"_id":"1c4c35a5-bc62-3836-a790-c7ef068acf73","authorName":"Soumen Mondal","authorEmailEncrypted":"P2NHgVuhMLMEvQy70+lRDdZbS3oyj4b2T9Qp3qGo2dzNht/mRe9RbYNJuC+V67MEO/zzxB1+7amnfGqoSkUK5O57YGKgLM97beBuih3wEh2DqmoOq6tZl9NlKNFHx+craAXEA7lb/woj9r37bP6oytOhlIf7GWmBv+hrCFq6jA3h1HMsw9D5xX0hH8bbf4gA3t2rSRXWA8qUh3r6RcEzCDn2nua8lk5ZFCRZzxzfugcjubSMIFGhUG6KDI+FnmyMbnFPuThfvvrlXt1kCh/pGdzsKs/7ev7P99ztT+8HXXbyZxiSCw2qDrcJJS7FGptW3mr69N3s3fvPhJEFHfAd34x4EKRpeS/yRZm2ViwnoD9Xnrbh73H6VbvkrlPFykk6qjL+QCDhT9SfsWsuONJRbMiw2Sw12WdqMCHK9/4X7HPDJ8hRsGusB9LA4xpk341gUge8lJSwselCVMKD1Zq2nNxl61ot9wID4VZ+5Mr6Dq94BF2P/hyG7LBtTBUHnKW+C6SMzddVQvS/HILh2gDlX30ESWLK7fjyceLec9PGX+2DthChNLtXanwcVC8awFCudB2JRWgpQKg/AAheK1tS/iRi7pI1qwJy5DVCFBMrriQmGDcD5IRZiTME2gLpMRvBSyPHEFtxozHZ8J7Zfzz16FtKWZZ1ohCkav0+GHLeyGc=","authorEmailMD5":"bf0ce2750b73e0f385399d45fdff6f01","authorUri":"","authorUserId":"","message":"How can i use this packet protocol when send file data over ssl stream.Please help. I am using this code to send data to server from client  \r\n private Boolean SendTCPPackets(String filePath)  \r\n {\r\n\r\n Boolean status = false;\r\n\r\n TcpClient client = null;  \r\n SslStream sslStream = null;  \r\n String returndata = String.Empty;  \r\n String reciveddata = String.Empty;\r\n\r\n client = new TcpClient(serverName, serverPort);\r\n\r\n // Create an SSL stream that will close the client's stream.  \r\n sslStream = new SslStream(  \r\n client.GetStream(),  \r\n false,  \r\n new RemoteCertificateValidationCallback(ValidateServerCertificate),  \r\n null  \r\n );  \r\n try  \r\n {\r\n\r\n sslStream.AuthenticateAsClient(serverName);\r\n\r\n String fileName = Path.GetFileName(filePath);  \r\n Byte[] fileNameByte = Encoding.UTF8.GetBytes(fileName);  \r\n Byte[] fileNameLen = BitConverter.GetBytes(fileNameByte.Length);\r\n\r\n String filetext = File.ReadAllText(filePath).Trim();\r\n\r\n Byte[] fileData = Encoding.UTF8.GetBytes(filetext);  \r\n Byte[] fileDatalenByte = BitConverter.GetBytes(fileData.Length);\r\n\r\n Byte[] clientData = new Byte[4 + fileDatalenByte.Length + fileNameByte.Length + fileData.Length];\r\n\r\n fileNameLen.CopyTo(clientData, 0);  \r\n fileDatalenByte.CopyTo(clientData, 4);  \r\n fileNameByte.CopyTo(clientData, 4 + fileDatalenByte.Length);  \r\n fileData.CopyTo(clientData, 4 + fileDatalenByte.Length + fileNameByte.Length);\r\n\r\n client = new TcpClient(serverName, serverPort);\r\n\r\n client.Client.SendTimeout = 5000;  \r\n client.Client.ReceiveTimeout = 5000;  \r\n Byte[] messsage = clientData;  \r\n // Send message to the server.  \r\n sslStream.Write(messsage);  \r\n sslStream.Flush();\r\n\r\n String serverMessage = ReadMessage(sslStream);  \r\n serverMessage = serverMessage.Substring(0, serverMessage.Length - 5);  \r\n if (serverMessage.ToLower() == \"true\")  \r\n {  \r\n status = true;\r\n\r\n }  \r\n else  \r\n {  \r\n status = false;  \r\n }  \r\n //status = false;  \r\n // Read message from the server.\r\n\r\n }  \r\n catch (AuthenticationException e)  \r\n {  \r\n Console.WriteLine(\"Exception: {0}\", e.Message);  \r\n if (e.InnerException != null)  \r\n {  \r\n Console.WriteLine(\"Inner exception: {0}\", e.InnerException.Message);  \r\n }  \r\n Console.WriteLine(\"Authentication failed - closing the connection.\");  \r\n //client.Close();  \r\n return false;  \r\n }\r\n\r\n finally  \r\n {  \r\n //client.GetStream().Close();  \r\n //sslStream.Close();  \r\n client.Close();  \r\n }\r\n\r\n return status;  \r\n }","postId":"2009_04_sample-code-length-prefix-message-ba45f669-db06-32ff-ba50-472b420edace","replyTo":"","date":"2017-08-01T07:45:03Z","timestamp":1501573503}