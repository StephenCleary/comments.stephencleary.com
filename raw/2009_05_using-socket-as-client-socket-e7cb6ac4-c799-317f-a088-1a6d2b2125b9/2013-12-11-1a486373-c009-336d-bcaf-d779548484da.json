{"_id":"1a486373-c009-336d-bcaf-d779548484da","authorName":"TH","authorEmailEncrypted":"","authorEmailMD5":"","message":"I use MSDN async sample + your length prefix solution to write an Async socket Client and Server class, 3000 GB data all success transferred under single client and single data send thread test.   \r\nBut when I use a for loop to create several threads to send data to server, I found that in Client side, the thread created for BeginConnectCallback were always have the same id.  \r\nand all ManualResetEvent mechanism failed, all threads actived when ManualResetEvent.Set( ) called by first thread.  \r\n\r\nHere is my Client side Log sample: ( the problem is why it always Thread 7 do the EndConnect job? )  \r\n\r\n15:33:05.100 Data send Thread 1, BeginConnect to Server 192.168.1.100 Port 6000  \r\n15:33:05.100 Data send Thread 2, BeginConnect to Server 192.168.1.100 Port 6000  \r\n15:33:05.100 Data send Thread 3, BeginConnect to Server 192.168.1.100 Port 6000  \r\n15:33:05.102 ConnectionCallback Thread 7 Execute EndConnect and mreConnectDone.Set( );  \r\n15:33:05.102 ConnectionCallback Thread 7 Execute EndConnect and mreConnectDone.Set( );  \r\n15:33:05.121 Data send Thread 1, Connected via Port 2650, Socket Handle: 8234  \r\n15:33:05.145 ConnectionCallback Thread 7 Execute EndConnect and mreConnectDone.Set( );  \r\n15:33:05.170 Data send Thread 2, Connected via Port 2651, Socket Handle: 8235  \r\n15:33:05.177 Data send Thread 3, Connected via Port 2652, Socket Handle: 8236  \r\n\r\nI can mail you source code if you interested on this.  \r\nmy mail is thlin.harcon@gmail.com  \r\n\r\nthe MSDN sample URL: [http://msdn.microsoft.com/e...](http://msdn.microsoft.com/en-us/library/bew39x2a(VS.80).aspx \"http://msdn.microsoft.com/en-us/library/bew39x2a(VS.80).aspx\")","postId":"2009_05_using-socket-as-client-socket-e7cb6ac4-c799-317f-a088-1a6d2b2125b9","replyTo":"","date":"2013-12-11T16:35:24Z","timestamp":1386779724,"authorUserId":""}