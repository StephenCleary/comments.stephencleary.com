{"_id":"10cff160-ef0c-11e9-9ee1-a1a740761680","postId":"2012_02_async-and-await-bb1cce3d-e706-3ecf-ab89-6f7945ef7d0f","postUri":"https://blog.stephencleary.com/2012/02/async-and-await.html","replyTo":"","authorEmailEncrypted":"WH+nXYlCYBGa8ZKY703B2KCOXXb2N9i/hdDSN7LZT0vutBckL1qOeRnxqhnx3zA9yhpUDV9ci3/FkuFk2c/UHLwTrnXjr0vFcGUjQIzvHNwU3wYcmO6pXMpxfUnBFs2MWEAl/6ciAkWgp/WsmbtZYxc4TF/Eca6EBwyDtbC4BC/ffInsCC1tUDZuxuYNxF1ZplZszvQK7CRwo0F7fC28I1H1yjE94fCZ7UKuH0m9QeqeHjYZapSQgYYQua7uVwOlS96ivPOedSuZGq37NcGz7L9yKy8z2BbG8akf4LuaqKwfGJTRAQgdc0Uw7pWTqxu5Gu7VYD5a8B/SuLcJ7TllAbL9PNNGz+4MxaZSNj/b9oQgXi/0fQaSGk62Ug2V3RXLdm3/hYq93Pc3G20WNJQKFvkpUmUg5AEGSQ3LqlKdKV1yrjV6O7j7dr6dsryqURLwz2Z8krkEam9y8x4bHVwdYtMmZ1c7AHP3VfXgNf3OWftUIFcMM+eGyrNbAoBK0XkLX8uXQbrXjan9LwHewaLRjTSXeXnGBH2v3kcZD9azlCWYKfjtvKHUL1YYze+Df/a88sBbqP2we0MNnmwfqsajf3i2fG1zNCdTPS2aL33A63/ciVvJJ4/uYYSS6JYmgJyDdyypYtQfszcroWeo/6TT1m5/SLaSsKGQkbCGgvZTNVA=","authorEmailMD5":"212f70f2307ec902156edb2cd35aceeb","authorName":"Ashutosh","authorUri":"","message":"Hello Stephen,\r\n\r\nOne think I dont understand that even after using await I am able to access httpcontext from the async method.\r\n\r\nEg:\r\nInside Controller:\r\n\r\n    await service.GetValue();\r\n\r\nInside Service:\r\n        public async Task GetValue()\r\n        {\r\n            await GetValue1();\r\n            var data = System.Web.HttpContext.Current; //Location 1\r\n        }\r\n\r\n        public async Task<string> GetValue1()\r\n        {\r\n            var data = string.Empty;\r\n            using (var streamReader = File.OpenText(@\"C:\\Users\\VBY3\\Desktop\\11102019.txt\"))\r\n            {\r\n                data = await streamReader.ReadToEndAsync();\r\n            }\r\n            var test = System.Web.HttpContext.Current;  //Location 2\r\n            return data;\r\n        }\r\n\r\nMy understanding is that when we await a task it is actually running in a different thread which have a different context than the original thread.\r\n\r\nBut let say if new thread is not created when calling await on a task, then how does it free up your UI/ASP.NET thread?\r\n\r\nGiven that information why I am still able to access context at both the locations Location 1 and Location 2?\r\n\r\nThanks.","date":"2019-10-15T05:24:31.513Z"}