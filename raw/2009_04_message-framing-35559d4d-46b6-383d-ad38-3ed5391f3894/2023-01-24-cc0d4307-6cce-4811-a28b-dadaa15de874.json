{"_id":"cc0d4307-6cce-4811-a28b-dadaa15de874","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","postUri":"https://blog.stephencleary.com/2009/04/message-framing.html","replyTo":"52fad9cc-6826-460a-8e12-91a3205c4d12","authorEmailEncrypted":"S\u002BLnkFi2PLYbP\u002BBOZwu6aU7EaelCiYTZZkfZo06F7zMYVr1kZZrbHohX/6j8ibfJAtgJ2cK1PhWfL/jGqdfJq19l5KOQHrO\u002BsvtJe/tDt2iBg1SMt5bOY32DNHYRCGxYXw6YWUJbYDx9TYoknizCrMDRx1vYE4q0TQMF2b9GOq4V3hs93HPOfLwkLzspEVVhvD5fVnsEy4kWTrt01isTZgTqnDBK1qp\u002B2HLFZUCnAbmLrtZOvWOVMEHaitn4VBnM3zEL9xtiI\u002B3jLPhBaaldRCdAkyk\u002BaBp3UXfbKItffNLRQqW9p30azcnDWovfIdP\u002BKH/OCphaKXiEpuqxwsVaVtzWSIO5uTv7A55HfZUaEICIsA9iUis8SWFYwmAxVo5MfatxRahxP2joYtB2pIH3mgu2hb3aszGJaybw2lt0GXygJ3Ay7TNweobiIkLTXsjJH4xultYnWFaPuAmigt0MglacQDYioMxENmp7GRxk15G/4Jnm90dxZ7k2kfamKn\u002BVvxNWp6R7Ph7VCEB2fM7qNdYXpaES/yoCMsYpDfYHHwuJ7QxQ1hYOVDaZG1jig8M8FQ10jhGC9UlPH4L88uMmjLurDt5PpZr8Ww1olYBjZETn5SJcaRmmYsIiiKxUcVavXSZd5ktbqPzj0NZ4CyfISxUFVQAof6SdR/pNUvxbe/E=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"First, I have to point out that there is no way to send a single packet over a TCP/IP socket. But it\u0027s possible that a single \u0060Send\u0060 *may* result in a single packet.\n\nThe second thing to note is where on the wire you\u0027re talking about. If you verify that there is a single packet on the sending side, that does not necessarily mean there will still be a single packet on the receiving side (see: packet fragmentation). This is a very common problem for developers who test their TCP/IP apps running on the same machine (or in the same network), and then have problems when it comes to deployment where the socket connection is suddenly traversing routers or the Internet.\n\nIf you verify that you have a single packet on the *receiving* side, then I would *expect* that a single \u0060Receive\u0060 (with sufficient buffer, of course) would read the entire thing. However, this is not *guaranteed;* the OS may decide for whatever reason to only read part of the packet into your buffer.","date":"2023-01-24T18:17:11.9423240Z"}