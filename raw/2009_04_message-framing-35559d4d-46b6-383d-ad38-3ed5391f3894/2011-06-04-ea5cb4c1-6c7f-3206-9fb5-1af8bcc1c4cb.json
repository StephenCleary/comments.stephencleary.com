{"_id":"ea5cb4c1-6c7f-3206-9fb5-1af8bcc1c4cb","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"\"Send\" is not always a simple operation either. There's a reason why it returns the amount of data sent -- its quite possible for the send to fragment as well (if the hardware buffer gets full, for example), necessitating a retry on the sending side (and you have to be careful to start the retry at the appropriate point in the outgoing data array). Send is only slightly simpler than receive (no need to worry about allocating/growing the buffer or dealing with situations where you read more than needed and have to hold on to the excess for the next read call).  \r\n\r\nAnd on another note, length specifiers are usually pretty redundant for anything other than string and array lengths (and even then, string lengths are only really needed in binary streams.. text streams typically just run a newline-delimited protocol). Its much simpler to just specify in the protocol documentation that an integer in a particular part of the data stream is 4 bytes, signed, little endian then the implementers can handle it however they need and the protocol itself is significantly simplified (not to mention reducing the number of bytes needing to travel the tubes).","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2011-06-04T02:34:16Z","timestamp":1307154856}