{"_id":"750e3399-d230-3501-a17f-b4cbfa1080e6","authorName":"Piet","authorEmailEncrypted":"LBOXGdBBULi9jaIw9apd1CtUsS8H9iPFHSeGVG5YQ09Siu5UpfFiizBjjow0FeGrlK6nhoCujJ2Ezxy6GpZUzHw2X7jl3tLjs0XHpsGiAQ6+6PGQn1/DwfjUxDoIulKLhLgCzk7JiBtmTo4Vdxj0coJLDvOt+8ax9mMPGZFpyXSipkOcMkSoMTgblmlvGbfexCMh+pXGNegNe/rX6xo7HB3Qn+jUlutvETqZKGaguALoC/foW5C8pWTLdorEmeYLksjaqXLBA4A7x3Ro5WAJD6XaFIm8qL/UFfETA5UbmyoFusshyS9+I0PndDbYYh21QVVXBZcGtScEPgoihxDGfgEVb0BPBGYWvVNxwhTRPa+jbyjbcOzhIEb0T8ONKMyaVJUBndt92bK0Feo04zum+ekcc6f5HGJ4nVo3vnmpOwRP9pctGxEz7/+xb0n4HJUawtyWfnNBcG1sBOWgZJuy1gNMFMYsJ6RqLNTmAYNjXnnLZ2B78pR71v2/o++kzZM7Htrludc5XI74mKjMAcMy4hj5spkE16yJDG9N9Orc8n0lRILSW8E56+/UJQ6PlYrrpKN5bY98edtmwvMjulJ7IkIavip1CFNZGl/JDD6hbUON5CU2kb7QaquhO2SpH1CPGMTAypU+bWEBroGsOyAWFeYOenIavmCI/Ope1Px/+1k=","authorEmailMD5":"b3029fe9f1cea0938143f07a0dddd5d6","authorUri":"","authorUserId":"","message":"Thanks for the quick response..\r\n\r\nFinally found the problem, turned out it had nothing to do with async issues, but with the folowing:\r\n\r\n\"Azure Load Balancer has an ‘idle timeout’ setting of 4 minutes\"\r\n\r\nSo after 4 minutes the connection was closed and no exception was thrown (or catched) and my call keeps waiting.\r\n\r\nSolution:\r\n\r\n var servicePoint = System.Net.ServicePointManager.FindServicePoint(new Uri(ToolboxSettings.GetSetting(ToolboxSettings.Settings.StorageServiceBaseUrl)));\r\n\r\nif (servicePoint != null)  \r\n{  \r\n servicePoint.SetTcpKeepAlive(true, 60000, 60000);  \r\n}","postId":"2012_07_dont-block-on-async-code-abe2d9c7-c3e9-3ed8-827c-021686fa2310","replyTo":"50f7875b-ef7e-3516-b4a5-2ba91aaf283a","date":"2015-11-11T16:18:13Z","timestamp":1447258693}