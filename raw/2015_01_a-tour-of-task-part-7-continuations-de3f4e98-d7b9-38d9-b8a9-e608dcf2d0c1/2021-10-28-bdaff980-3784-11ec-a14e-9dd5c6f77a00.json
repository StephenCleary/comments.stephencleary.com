{"_id":"bdaff980-3784-11ec-a14e-9dd5c6f77a00","postId":"2015_01_a-tour-of-task-part-7-continuations-de3f4e98-d7b9-38d9-b8a9-e608dcf2d0c1","postUri":"https://blog.stephencleary.com/2015/01/a-tour-of-task-part-7-continuations.html","replyTo":"","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"Nic","authorUri":"","message":"<i>\"The “parenting options” control how the continuation task is attached to the antecedent task. ... AttachedToParent will attach the continuation as a child task of the antecedent task.\"</i>\r\n\r\nIs this correct? See the following code:\r\n\r\n    class Program\r\n     {\r\n        static void Main(string[] args)\r\n        {\r\n            var task1 = Task.Factory.StartNew(\r\n                () =>\r\n                {\r\n                    Console.WriteLine(\"start task 1\");\r\n                    Task.Delay(2000).Wait();\r\n                    Console.WriteLine(\"end task 1\");\r\n                }\r\n            );\r\n\r\n            var continuation = task1.ContinueWith(\r\n                task =>\r\n                {\r\n                    Console.WriteLine(\"start continuation\");\r\n                    Task.Delay(2000).Wait();\r\n                    Console.WriteLine(\"end continuation\");\r\n                },\r\n                TaskContinuationOptions.AttachedToParent\r\n            );\r\n\r\n            task1.Wait();\r\n            Console.WriteLine(\"fin.\");\r\n        }\r\n    }\r\n\r\nWhen running, the output I receive is:\r\n\r\n    start task 1\r\n    end task 1\r\n    fin.\r\n    start continuation\r\n\r\n\r\nMy understanding is that `TaskContinuationOptions.AttachedToParent` works only for \"child tasks\" - i.e. those defined within the delegate of the first task - not continuations. Is this incorrect?","date":"2021-10-28T00:19:40.213Z"}