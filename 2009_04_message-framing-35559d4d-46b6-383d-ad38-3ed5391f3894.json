[{"_id":"9dbc0bb8-ccc7-3318-a079-8e18f6066c64","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Hi  \r\n\r\nWhat about UDP? Does it use streams like TCP? Do you have any articles or links about it?  \r\n\r\nThank you","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2009-06-25T19:00:36Z","timestamp":1245956436},{"_id":"b4a6b8ed-50bd-324d-9fd4-cec6eea5b6d2","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"UDP does not use streams; it uses packets, so message framing is not always necessary. With UDP, however, you have to deal with issues such as unreliable delivery, re-ordering, and hard (possibly changing) maximum packet sizes.  \r\n\r\nI don't have any articles on UDP, and I don't really plan on writing any. TCP is low-level enough to be confusing to many programmers.  \r\n\r\nThe books referenced in my post on TCP/IP resources ([http://nitoprograms.blogspot.com/2009/05/tcpip-resources.html](http://nitoprograms.blogspot.com/2009/05/tcpip-resources.html)) do have UDP information.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"9dbc0bb8-ccc7-3318-a079-8e18f6066c64","date":"2009-06-25T21:40:44Z","timestamp":1245966044},{"_id":"92651e1d-7397-301f-b195-0bfdffa43fb5","authorName":"emrahustun","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/16123435078330948562","authorUserId":"","authorFallbackAvatar":"","message":"Helps. Thank you.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2009-07-24T18:28:32Z","timestamp":1248460112},{"_id":"cef139e5-adbb-3ec9-ad61-8f191ce49c55","authorName":"Ignacio","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://patronesvbnet.blogspot.com/","authorUserId":"","authorFallbackAvatar":"","message":"Again, an excellent article. I will repeat 5 times more the mantra. Thanks a lot.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2009-12-30T13:11:37Z","timestamp":1262178697},{"_id":"81ecbb8a-36eb-3fbf-9d18-ec0d70151a4e","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks for this. I was already doing this in my code, but you have given me a clearer understanding of what im doing!  \r\n\r\nMuch easier to design/visualise now","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2011-05-31T14:49:44Z","timestamp":1306853384},{"_id":"ea5cb4c1-6c7f-3206-9fb5-1af8bcc1c4cb","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"\"Send\" is not always a simple operation either. There's a reason why it returns the amount of data sent -- its quite possible for the send to fragment as well (if the hardware buffer gets full, for example), necessitating a retry on the sending side (and you have to be careful to start the retry at the appropriate point in the outgoing data array). Send is only slightly simpler than receive (no need to worry about allocating/growing the buffer or dealing with situations where you read more than needed and have to hold on to the excess for the next read call).  \r\n\r\nAnd on another note, length specifiers are usually pretty redundant for anything other than string and array lengths (and even then, string lengths are only really needed in binary streams.. text streams typically just run a newline-delimited protocol). Its much simpler to just specify in the protocol documentation that an integer in a particular part of the data stream is 4 bytes, signed, little endian then the implementers can handle it however they need and the protocol itself is significantly simplified (not to mention reducing the number of bytes needing to travel the tubes).","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2011-06-04T02:34:16Z","timestamp":1307154856},{"_id":"ad8dab86-cb3e-36eb-898b-d2f645e00059","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Brilliant article.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2011-08-02T17:55:34Z","timestamp":1312307734},{"_id":"263ab40c-6bb9-3760-92e6-6191c8a9b593","authorName":"jonathan","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://id.dickinsons.co.za/jonathan","authorUserId":"","authorFallbackAvatar":"","message":"You didn't mention resiliance as a solution. Designing your serializer (or XML reader and so forth) so that bytes are 'pushed' into it, instead of it reading them means you don't need to care about framing.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2011-09-05T16:50:27Z","timestamp":1315241427},{"_id":"18755c84-619f-3737-ad7d-9388355045e8","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"@Juefu: that is not a solution to the message framing problem. e.g., it is possible for \"nbytes\" to not be 4 where you expect it to be 4.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"cfa70f9c-60ac-319e-8313-1ad0bb0a44c5","date":"2011-11-22T06:15:10Z","timestamp":1321942510},{"_id":"68d31e77-e57d-3fd3-81a9-15c587762dd5","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Stephen,  \r\n\r\nThanks for the clarification. Network programming is totally new to me. I think that we are talking about different problems. It seems that the purpose of message framing is trying to break between messages so that the receiver can extract useful information from received stream. Is that right? In contrast, my problem is how to avoid data loss in TCP/IP transfer. My tests showed that the function 'send' couldn't send a big chunk of data a time. I had to split it into pieces and made many send calls. In addition, there should be some blocking mechanism to make sure each call is completed without errors before the next call of send. My trick was to ask the receiver to send back a confirmation, which seemed to work for me. But now I am concerned since it is not quaranteed to be right as you suggested.  \r\n\r\nI was trying to develop a class for my parallel computing applications, which actually needs message framing. Typically in my application, the server (parent) reads data from disk and sends data and instructions to clients (children), and then collect results from children. I don't want to use MPI since it is not robust in handling individual host failure. Do you have any suggestions for this kind of problems? By the way, I working on Linux system. Are you working on Windows? Thank you for your help.   \r\n\r\nJuefu","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"edeb1a5f-cf86-3cc1-9e5a-d439fbb03ed4","date":"2011-11-22T21:09:34Z","timestamp":1321996174},{"_id":"9a840ace-b887-3e45-bb9e-d29e1196b04d","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"@jonathan: Resiliance only works if you have a concept of a natural \"end\" (so it works fine for XML but you have to design it into other forms of serialization). I have found that code for this approach is usually more complex than basic framing. Not every platform has SAX-style XML parsers available.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"263ab40c-6bb9-3760-92e6-6191c8a9b593","date":"2011-11-22T06:10:46Z","timestamp":1321942246},{"_id":"cfa70f9c-60ac-319e-8313-1ad0bb0a44c5","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"My solution is to ask receiving host to send back an integer number to confirm the message has been received. Therefore on the server side:  \r\nfor (i=0; i<npass; i++){  \r\nnbytes=send(fd, buf, size_buf, 0);  \r\n..check nbytes here. nbytes=size_buf  \r\nnbytes=recv(fd, &idone, 4, 0);  \r\n..check nbytes. nbytes should be equal to 4   \r\n}  \r\n\r\non the client size:  \r\n\r\n for (i=0; i<npass; i++){  \r\nnbytes=recv(fd, buf, size_buf, 0);  \r\n..check nbytes here. nbytes=size_buf  \r\nnbytes=send(fd, &idone, 4, 0);  \r\n..check nbytes. nbytes should be equal to 4   \r\n}  \r\n\r\nJuefu","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2011-11-22T03:01:14Z","timestamp":1321930874},{"_id":"edeb1a5f-cf86-3cc1-9e5a-d439fbb03ed4","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"@Juefu: Data is not lost in TCP/IP transfers; it just gets transferred in a stream rather than messages. One solution for this problem is message framing, which is what my blog post is about.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"f5792bf2-10c2-334e-8814-5e6c0244a516","date":"2011-11-22T19:51:10Z","timestamp":1321991470},{"_id":"f5792bf2-10c2-334e-8814-5e6c0244a516","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Stephen,  \r\n\r\nYou are right. Based on my tests. The back-and-forth communication between server and client does help to stabilize the data transfer ('stablize' means that no data is lost during socket streaming). But if the data size for each send/receive call should be small, for example 1024 bytes. If each time I wanted to transfer 6000 bytes, I got errors. Not sure about the best solution for this problem.   \r\n\r\nI wrote a class to perform data exchange between server and client. My method is similar to the prefix method since each time I send a short message about the information about a big array that I will send to the client. Then in the class I compute the number of passes I need to call 'send', etc.  \r\n\r\n So far I am satisfied with the performance. Does any one want to test my class? I can share it by putting it on my Google documents.  \r\n\r\nJuefu","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"18755c84-619f-3737-ad7d-9388355045e8","date":"2011-11-22T07:21:00Z","timestamp":1321946460},{"_id":"d99fa9f4-b5f3-34cd-a5d4-3dda679d7d24","authorName":"JeeShen Lee","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/08040994135883927383","authorUserId":"","authorFallbackAvatar":"","message":"nice post. Thanks!","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2012-01-11T07:53:15Z","timestamp":1326268395},{"_id":"61576a02-1a0d-3e20-917d-39e2aa189cf7","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks man...","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2012-04-18T17:35:19Z","timestamp":1334770519},{"_id":"2bb14791-66c7-3c0d-a19d-e7ca9eb8e05b","authorName":"Anonymous","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Stephen,   \r\n\r\nthanks for you mantra, an important help.  \r\nWhat experience do you have with transmission of data streams over unsecure connections, means e.g. a WLAN, where sometimes there is a connection loss and a reconnection of client and server is neccessary. Target is the same: Transfer messages over unsecure connection by handling a tcp stream with a small protocol (length coded or with delimiters). But now there is an additional level that client and server have to make decisions after which time they assume a connection loss and decide to make a reconnect. Did you manage problems like this ?  \r\nMarkus","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2012-06-25T10:23:55Z","timestamp":1340619835},{"_id":"20e39394-35fc-3668-9a55-d1e8bc8793db","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I've developed some systems like this, where a command/response has to survive underlying connection loss and reconnection. Conceptually, it's just an abstraction layer.  \r\n\r\nThe systems I did were quite complex due to timeouts and error recovery requirements. In modern-day code (particularly with async/await), I think this kind of system would be much simpler.  \r\n\r\nIdempotent commands really help in situations like this.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"2bb14791-66c7-3c0d-a19d-e7ca9eb8e05b","date":"2012-06-29T23:32:53Z","timestamp":1341012773},{"_id":"63ecebff-15ec-34cb-a4e5-9cfbe88193ca","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Sorry for replying so late - your message got caught in Google's spam filters...  \r\n\r\nMessage framing is used to break up the TCP/IP stream into messages. TCP/IP itself guarantees that no data will be \"lost.\" If you lose data, the connection is broken. This is true on all platforms (Windows/Linux/whatever). TCP/IP will split up the stream into packets on the wire and re-assemble them in the correct order automatically on the other side. There's no length restriction on TCP/IP data. Perhaps you're using UDP/IP?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"68d31e77-e57d-3fd3-81a9-15c587762dd5","date":"2012-08-06T23:26:07Z","timestamp":1344295567},{"_id":"3de75d60-b873-3152-897a-4c17372c4d5f","authorName":"Uday Gupta","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/16780765000928234784","authorUserId":"","authorFallbackAvatar":"","message":"How do you check if the UDP socket on other side has shutdown/stop. Since, UDP is unreliable, it is difficult to know if UDP on other side has stopped working or has shut down","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2013-03-06T10:14:00Z","timestamp":1362564840},{"_id":"937695eb-68ee-3c3b-8270-f3e9331f7525","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If you need the concept of a \"connection\" complete with detection of dropped connections, then use TCP. Otherwise, you'll just end up re-inventing TCP over UDP, which can get really ugly.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"3de75d60-b873-3152-897a-4c17372c4d5f","date":"2013-03-06T20:54:08Z","timestamp":1362603248},{"_id":"8b52750a-a1d6-3e32-8fe0-582584aaf804","authorName":"Michael Mankus","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/00879337794584805047","authorUserId":"","authorFallbackAvatar":"","message":"I am talking to a piece of test equipment which is already using a message delimiter at the end of each message. So I can't implement your message length solution (which I love and use often by the way). Do you have an example of a message-delimiter solution?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2013-05-13T19:07:47Z","timestamp":1368472067},{"_id":"a746a262-8748-3e92-92a3-bea5c9a9b05c","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I do not have a message delimiter example.  \r\n\r\nI'd start off by partial-reading a large amount off the socket (the maximum message size, if there's a maximum), splitting by the delimiter, and saving any leftovers for next time. If you don't have a maximum message size, then you'll also need to handle growing your buffer if necessary.  \r\n\r\nIn .NET, I find the string methods (Split, Substring) more useful than the binary methods (Array.Copy, etc), so if your protocol is something simple like ASCII (many delimiter-based protocols are), I'd start with a conversion to string and then do the message framing. But don't do this if your protocol is any kind of Unicode (e.g., UTF-8 or UTF-16) or binary.  \r\n\r\nIf you do have tight timing constraints (e.g., you're reading a continuous stream of messages), then you may find my ArraySegments library useful (it's on NuGet). This makes it easier to minimize the amount of copying done (and memory garbage created).","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"8b52750a-a1d6-3e32-8fe0-582584aaf804","date":"2013-05-13T22:12:30Z","timestamp":1368483150},{"_id":"4b2b434c-0af4-3a47-ad9c-6c1ce61795e3","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"That protocol was the client/server part of an application for managing an AGV fleet. Only the client/server part had this problem; the server/AGV communications were fine.  \r\n\r\nThe company I worked for at the time was called Control Engineering Company, a part of Jervis B. Webb, which is now Daifuku Webb.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"97621086-79f2-3939-934c-fa10d4a15ab4","date":"2014-05-03T21:20:47Z","timestamp":1399152047},{"_id":"97621086-79f2-3939-934c-fa10d4a15ab4","authorName":"Bruce Stephenson","authorEmailEncrypted":"","authorEmailMD5":"","authorUri":"http://www.blogger.com/profile/01321631245118583318","authorUserId":"","authorFallbackAvatar":"","message":"Stephen, thanks for another extremely helpful article. You've probably saved me much heartache for my upcoming field deployment. I'm intrigued by your True Story. I've been working in the automation industry for years, and I'm curious as to what that protocol was that you were referring to. Omron by any chance?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2014-05-03T17:20:39Z","timestamp":1399137639},{"_id":"b39b0602-c661-3e2e-b4be-04fa398c9ad6","authorName":"udit ajmera","authorEmailEncrypted":"q5Z199whFFNmnZokEOJUMNa70CLkiziKmZCWJCTMXfTS/lc8uDvBsvT5nk18shYPrZtZ1V4ZgWUdu6OuYrWGyjpp9aNUqSwiLiidrLi5iBppPEueN9FXc/u8HTLgnFqZbWgQ8wsuQhjbd1TSXtVmvWPi0ePDn5G0mYE9BCw5ZMq2V+fU4XozLTBugohWk42ki8U0ZiG9KRUbOLC60ITSbei8fnt8I6CgSVeXvsZlKeFJVU8hyGsN5KxXOWEannsaYnZJWUnTgFsnYY5snr2XNwZgZpRbhUHGE9OB9lbpwoVdxwE6lVBAGhmigkW/ISKR0ZT6xNJjfcrCvwk+kMWBu+vjsGSGMXQoz3ewb+JM9BLDN3s8DD5KC4N4l6J+X+JiaYMELjKjQdfHSh2F0ZDD5E20U7Z5nTpwvXh0pzSVG5XVnXKpkK656jrYCc9CpXm3sU3oKA8ECjxXT/TZrZ9QVFm/r/ZBZAUeWmeRDXrB6o6PHkXlnbXuoyPT5FAYnkEJuPhyX1L0oFVhO2iadYT8zX3m3uYM5Uvh4YTVf6L8A0WEohCfSixtSVQDAQ9sN/tctQ+l4BRUA4RmDiFnNzW/Ndgc/jbufBrtdQmJMYo9iLRGXtBNCd0VpUxWnsUYtDHqwqfsXXj9Unxi9pKHzzGo6Pwkoa5Lve2mO4sZ7WBjrRo=","authorEmailMD5":"ec04ff946631d55b1d94315d0615b5e5","authorUri":"","authorUserId":"disqus:uditajmera","authorFallbackAvatar":"https://disqus.com/api/users/avatars/uditajmera.jpg","message":"[http://stackoverflow.com/questions/9860242/how-to-link-to-coco2d-static-library-1-1-beta-2-using-workspaces-in-xcode-4-3](http://stackoverflow.com/questions/9860242/how-to-link-to-coco2d-static-library-1-1-beta-2-using-workspaces-in-xcode-4-3)","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2014-12-24T08:55:28Z","timestamp":1419411328},{"_id":"30b039b1-b78f-3c73-bdb3-0d2a81db73fa","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Did you mean to post to a different question? That one has nothing to do with this blog post.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"b39b0602-c661-3e2e-b4be-04fa398c9ad6","date":"2014-12-26T18:06:39Z","timestamp":1419617199},{"_id":"09c22cc4-50c5-3b59-b7f7-3492e38f7e6c","authorName":"Naeem Akram","authorEmailEncrypted":"wKGIEIi54F4H47G0TdVd2YrIdYRJ1pYtojd6WXBjkLuvVRMu9LjcApgsF8IJY4lhksyjarSnyP4yeebpCQBQh7V7xUaGefqRDu8BnXdRuubCraeoJdrVPxKeoqIxTTVrBgbr7XNDIDJkYptf7rgsk18PCqn0OvUP5GzJt5JP3mCJzKm6BDaKcYetlnHajNX9HDxrk4mQNa1UDoECLrvyyCp7KFLl7MT0li5BO9HbrPnbUth21Pey/j9L5gHonEBwxRY3XHgh8MXdIrsvyfAYGNv7gbRlkHpXQz0XHdGTyM+UhhSWajvjvDSAsiLzfgq/9ORqraLFxoHayLBjJDj0VRf0DvCpoMmNyP1YF3aVEZRcbC0PMKSE3pf5rMeDvPr0HVzGYMXsJP2fg+rCmBcXSvxq2fYMMMYbFLMUgdk9zPTKGgB/q/jidk9OSEqARDgYSDHOEo2n27Z5WJv6hfKzya1j5bOTPREhPqEyNmzRlnLccDvtsSY/Ijsw98SBbbLQuHZcJI4kKgu4qqIbA3DGARW3a8E/3Anb63cMrktT4OswlVlcQJ+We95TsVFMcjSAMDeQGXhGUJJQpjoqxZFcpb55XaGdSA+wiuxRtR22M8pxoozvdsGV0acvLBLP0t2bTGUrsZQZWWMgT2FGRymJ0cGbK200kAODLk6T7Qbr4qg=","authorEmailMD5":"3e87502e2d00dddc4d2049b30d268f3c","authorUri":"","authorUserId":"disqus:naeemakram","authorFallbackAvatar":"https://disqus.com/api/users/avatars/naeemakram.jpg","message":"single byte like only \\r or \\n I think ... makes good sense ...","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"78914fae-c2d2-3380-ab80-b98f72a7bc1a","date":"2015-01-13T14:19:57Z","timestamp":1421158797},{"_id":"78914fae-c2d2-3380-ab80-b98f72a7bc1a","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"You could. I personally prefer to use single-byte delimiters because you don't have to handle the situation where you only get a partial delimiter read.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"9a4b334c-c213-3bdd-a58b-5cdeed1fa4c7","date":"2015-01-13T14:17:10Z","timestamp":1421158630},{"_id":"9a4b334c-c213-3bdd-a58b-5cdeed1fa4c7","authorName":"Naeem Akram","authorEmailEncrypted":"gisEkSZmlzUeqtMTMgzPN51gwLPd1rcoyfUhQv3UuAGqbHfuD02jf4VS0TJaw3dqlnCK7rwB1gAxF5RG2L7U72lbsYygw92NfSDFOfa4c2vEIkGAU1+citFOQpFkLaS7i/jOfRorfxIjXX2Xc/CUFpVNlYNBWOuuLtUCjeckp8epqKT99tewbK5zg9iiCi+e0FS1z7f0LW2X2hoYGavVikas8YDXaOSwmSkOOOGMYX23w76fX4DVoVTzJ+1QvXA1sSB332MzGujhb9cNIbJd1EtQ6KO7r8qHh3kii5wrUq98XBsjllyIcRCbE7WVc+Q9DiBXkeYgad5Rm67Ljepe6fJhGzNC1N58iHTQep46ckh78GGokkxisX691z1s0a3DoPcckcOQorSJr92+moYqUdajaAMVfPQh8w7b62oEqP8O/RyoVCGbhDQwQitiTyEPDvzhsdt8eYM85GCs3KBjY+kqikKbmObJARvFp8htcXjLqUsFQ862JnaLs4ogK4SoV+47WWBMi9fL/Il1Sqq3IiSOl/r75hBA/nw/x4XAgozm1ok2uVEI3Z/5aDq3p3kef3EK6iXNctdxhEhbzkNIQA7n723LPUaHpdhl0j0k2OBBa4fN1uxc1yu9OF4NHrH6ckdrPSBMae79zZJgpjMbPYmYX36GwaA2rlv3FmhjwGw=","authorEmailMD5":"3e87502e2d00dddc4d2049b30d268f3c","authorUri":"","authorUserId":"disqus:naeemakram","authorFallbackAvatar":"https://disqus.com/api/users/avatars/naeemakram.jpg","message":"Question: Why don't we use \\r\\n as delimiter?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2015-01-13T13:17:16Z","timestamp":1421155036},{"_id":"b9a544f6-e7d1-3ea6-baf7-866b3af3d922","authorName":"Naeem Akram","authorEmailEncrypted":"fV6P6Ww5LkGgT9XNCqpetcUyluMh2iIMJgGbmxmQXMx4MGXRqo2o53Qmy03qDw/JHXexanB4V8NuB0BqTOzJfl6pI2uFPmZB1SU/TylHYLAYwxozsN51+9b8iMQx9hGJ+pM/AALu9zosxdaWGIs7fi6xHVOjaxcq8o0mwiZlwwovD7q6/q4jVIcz1GA7cynj6sFo5H9BRGwI8m8GRaPmjwwVOGeVU99Cijq+I+cRaChgTA3vdpCPfse72cOIMAlnOGItnLU9DgOlhvoyQxI1VizwKLrOJRyU/fY0TLbIglmOKNSPHa3+oWbiIViznJF/MVX6Tswski1d3/RNTR2l6t1l1kS+mRjvGXnafa8PLcKp2ANONuX1qlfES+lBX1QVvdEpmtgyvwFA7OHQ20kLAIoTkwxPfAsxjfGd65Jun/HvUIlleP3Nrl/7JGBLZ+Et+4/+XUizSIZETs4VwlvNlA/cxrm/A4ZJF07azhIaFR6heil0h85yZF2kJjR1Edh1wW4OwqqHgtUVPzKU3nBUFH6uWeaPZivx3aLtMtGuDGwh21nom8CbRuY3YFP68Fi31fh8s552f+jIsFYrdFzpZvGwuJrz/ecZdqA4ZOKUl3jjsT4JK9lJ2dbC4R9aLSKcU4HmjP8MiXxqY16Tx5FYVd1MuaZZ4J1rtjCn74M1cNk=","authorEmailMD5":"3e87502e2d00dddc4d2049b30d268f3c","authorUri":"","authorUserId":"disqus:naeemakram","authorFallbackAvatar":"https://disqus.com/api/users/avatars/naeemakram.jpg","message":"I've been writing socket code for so many years, I even came across delimiter based data when connecting to Asterisk PBX via AMI socket interface. But I never paid attention to the concept of reading/writing streams instead of packets. My bad.\r\n\r\nI've even created a course on TCP/IP socket programming which is doing pretty good, here's the link\r\n\r\n[https://www.udemy.com/tcpip-socket-programming-for-coders-using-csharp-net/](https://www.udemy.com/tcpip-socket-programming-for-coders-using-csharp-net/)\r\n\r\nI've added link to this page in course discussions section so that students will know.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2015-01-13T13:13:57Z","timestamp":1421154837},{"_id":"43f495cd-26d4-3f2b-b33b-502304ecc28f","authorName":"Andrew Stephens","authorEmailEncrypted":"VNoAOVSUf0lzNLc/izS0Eqkwu3V/FzHsqk7Yi/0XBHD4K1lkftB8uzw33B04U6XHfKPk1PATGKdpg3P0rWAIAETsSCduwuXOYs5+Y+Oh+uYutyvBnuvFNHu4SQId2s3yiT++WBCbYX3CvvethRweVwCNALX0aXj1g3RpP/jfRA02PdmruWJSsPa3ZhdWr3xN08h0lTdMdNQ0p92kM5VaYMx8byo2kNQWJIKA8LpcUR2eQrzWFL5Mrd0s2eGUW4KLI7g7+ILwzYS9yFWx/HauQzUUWQop9NOZLCytr+S7R2uORdeIAvPKkwd+I2UzvTjK15fpksvnBsfb/vXvEBG+qaOH71akeO74JoPpXx+D2iIEaatNW/UnrBvKdR6kv7UbLkUi9phDNJhlEJXu6/Db4DtB98iCNt6CeF3woW/XLjQwijaEX8uAAqd3s0WR20bZ2W1P46kOknc4BpxffPh3C6tIPKD9eA52QUyqPGcs2ikAZUEunhbH+QeI7ylJ68/H+582N9VJAJbg11EzYlcf4F4kE59PskUnZx7a2pt4Lv9Ia4BuMOW5kE1dw344dDb7OYWICK3xo9gnwU5CdJYykC2Kb016YUrR9WiD230vAkmp9MAonOLDICgqRadgmywJhjEzZrB1zKUtDX38LZ9VUrWObOtyowdx8HV9oi6t9Jo=","authorEmailMD5":"89bfbacc849835ca831d84ae6bd014aa","authorUri":"","authorUserId":"disqus:andrew_stephens","authorFallbackAvatar":"https://disqus.com/api/users/avatars/andrew_stephens.jpg","message":"Apologies, when I say \"message\" I really meant to say \"received all the available data\". As mentioned, I can't find where I read this now, but from what I've seen elsewhere the idea of 0 signifying \"end of data\" is incorrect?\r\n\r\nThe MSDN doc that mentioned the -1 value is here: [https://msdn.microsoft.com/en-us/library/cc319081.aspx.This](https://msdn.microsoft.com/en-us/library/cc319081.aspx.This) page that appears if you F1 on the Receive() method in Visual Studio - it's not the same page that appears if you Google for Socket.Receive(), so I suspect it's incorrect/out of date!\r\n\r\nSo, to achieve what I want (a request/response model), I really have no choice other than to implement message framing as a means to know when I've received the entire response?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"68ba7bf1-518a-329a-b18f-c09fb6013483","date":"2015-02-20T17:15:12Z","timestamp":1424452512},{"_id":"58b229d6-d749-3302-8f65-bc3c535b3641","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"That link is to the .NET micro framework, which is an environment where exceptions can be prohibitively expensive. The regular .NET framework version of that method definitely throws an exception on an error.\r\n\r\nYes, you need to implement message framing on TCP/IP.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"43f495cd-26d4-3f2b-b33b-502304ecc28f","date":"2015-02-20T23:43:49Z","timestamp":1424475829},{"_id":"68ba7bf1-518a-329a-b18f-c09fb6013483","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"The TCP/IP socket abstraction is a stream abstraction, so it's not even possible to have the concept of a \"message\" unless you build it yourself (i.e., message framing). The same socket class can be used for datagram sockets (UDP/IP), which do use \"message\" terminology but they don't have the concept of a partial message read - you either read the entire message or you don't get any of it.\r\n\r\nI can't find any of the MSDN docs that talk about Socket.Receive returning 0 for a \"message completed\" or returning -1 for an error code. Could you post links?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"6b848a0b-43b9-326f-804d-7f987dcb6380","date":"2015-02-20T13:48:56Z","timestamp":1424440136},{"_id":"6b848a0b-43b9-326f-804d-7f987dcb6380","authorName":"Andrew Stephens","authorEmailEncrypted":"Rq2lMuzOUPv/A2LPFf4T1oFfIMpfJ0shqMtTkHryewQlYQQf67Hyoqb7rkc3gVbw112sgyz8QyoBLracfcdCIDMkv14aS0A2bp4K3RpN4zXgsg2TvT/NSiHOsd2h6Vs6cKUG3qricV8b00e80N3LNFrG865JauomGdbmetiZF244dgCwvR6ExhMaWLsCLGuQepZXHgiyyaRvtHwO5IsBpkJ/Mg8awqUlLu3qr3nvuncNX8ULGUMdxhhG77X2kx/TIuRpiKu32PS5gbxXq7X5yJCUr2PNDkbLN8jHnC0fPcMaieIw7aPEMg8jZmmwVhm+mXxI4jj3CW23cKiLGi3UytZZ+2d8aPild/IXupgX/tb86nuGa4+LjimQpbQEO5o6YgmoC68R+K4BD4QX8WW6O7EgacTIf2fzOA64yOybT6maC5sMQQJMr61PmhTY5OZBFoCw6OtiEb5+xMoxTOlFn8MM9lHLtoQb6sStgyP6tbg8e/9fV66fjnWAeyoic7eVkZUM22hRj/xK7394ACCGBPN8tqPIGmWZqEMBKHQTD6NLyiWMjPr6OmZgGIIxbR6iXn1bIaeSJuMaI87mFQ/Edci1h9Xlcy1HofEU9puXBUQdnQeMf+tvXaf6+VMOyEEN+X2JwbJH8FAd1SgtoXOGYLqgJTMmfwTt125Tq8B3HaE=","authorEmailMD5":"89bfbacc849835ca831d84ae6bd014aa","authorUri":"","authorUserId":"disqus:andrew_stephens","authorFallbackAvatar":"https://disqus.com/api/users/avatars/andrew_stephens.jpg","message":"Your \"Connected Sockets\" page says that when zero bytes is read, it indicates that the socket has been closed by the other end. However I read somewhere in the MSDN docs (I can't find the page now!) that seemed to suggest that when zero bytes is read via Socket.Receive(), it can be interpreted as \"you've received the entire message\". Is this incorrect (or at least a little naive)?\r\n\r\nI'm looking to implement a request/response scenario, initially without message framing. Based on what I read, I was hoping I could write the request then go into a loop that repeatedly calls Socket.Receive(), appending the data to a buffer, until zero bytes is received.\r\n\r\nLastly, the Socket.Receive() MSDN docs mention that a return value of -1 means that \"the call was unsuccessful\". What do they mean by this? Wouldn't it just throw an exception if something went wrong?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2015-02-20T11:34:48Z","timestamp":1424432088},{"_id":"7731e3b5-6d8d-3644-a0f6-58217ed7d34f","authorName":"Stephen Cleary","authorEmailEncrypted":"ae6TIbclG3Vmb3iRCIPWRU8/AIxhfACKX9J2S2yauFtWlO8y8j5+MEZnT5WGKJCNTB8bUN7LhMbNPc/mo/sEGy4aKIwpJZlehO3ex0DfeHxakf9G2IjeKQZRNrq4IzkPWH/PEyG1PB/+pvsGxwKo0Lv9rpJ6PVOiPRZ5IoebzcawcNBfECLkWRWG2DM4Qnu3CGi744FKfzaLqadYsN3E3eFXyf0eGd9qckhbq2wIU8KKvYvd6AibkYztxIIagV2wmwCIIPXnpxRSSELGKVHcJg0Gkmz5Fcffl9UnO2WVn/bbnXRJEF7owzdQcZBQNjneN/aUWTlm6oB8m9rjjH2TX3zoJJwp3K1Wx0DX5Ck4a77T4FbhWil1SgZ9FTIDIVkvbCi8QTJVHSJJPhvOQW9LN40X37Eyo0iQ4Ui41KYr/m4AJqbG0QEBcWxgwGLBHJjCIasRIj01GZH3gIHX794mW3eJa9xJ1s0/tzJbxj9cfK8aay2+OAyTR56GwTZQ7d3wcFEVMrKliipydLZHNrh9cyBWhRVVLoLtP7W+anRWaHlkAUHLy3Sdz4bOFOVk8RopoPhVnw381BGki/uNWqlelsFRexM0p+GB8tiSZTq0gZzhEN6itke2T0Pw42nv6RMq3/gmE0PmDaaY0IGTlMAZ5l5Ci9gjSCMXljfu0nJcIFY=","authorEmailMD5":"ad2250182ff26a84dda974e50cd94382","message":"(copied from reply below): If you need the concept of a \"connection\" complete with detection of dropped connections, then use TCP. Otherwise, you'll just end up re-inventing TCP over UDP, which can get really ugly.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"3de75d60-b873-3152-897a-4c17372c4d5f","date":"2015-02-20T13:49:49Z","timestamp":1424440189,"authorUserId":"disqus:stephen_cleary"},{"_id":"6a290094-457d-34c0-8834-61a265a01926","authorName":"Zisis Anagnostou","authorEmailEncrypted":"WCacxOCA7VcYeJJo5bfTYW2efZI7KvuX+lPtk+zDw9eQmpLcXJwz1TRBMAIddYyOpwAI0b+ha4daXv8dHgwKEahgoV807KyiiY01FEBxsdqwGGfDpFw7DJkPYrahmRHYh9IfjnqASdTw45BWtnClzKiKtuMb0zMJBU9NyWpVf5/M4J7agFp0DUEpzO7LnM6N0/aQd+jsObyUw0IAIPfpOkQfAhZ5KochyPo+HDUMlqdEMHgQ7nwghrDN4qtMPriPUoUeZHnz024LkPZkR+1s5katlMPs+/+PnY/z8S9DF7rBPdrzc1aU69pKquwRrsmLKK0vFcfKm/OKWl3aVe4Uk8WV9EyHWn5AosL/58CW4JPV+8qrTKxKgl1io4LFozZEvi8FjfbMkJdPDcQM9qJy0k/aX3g034303NQEK5orj8epjsPbaJZSQOdjnT9QOs1IBbtw4zCOJmlqvP1WqtbgWgeY9NBHU1GeyTow9QBk3X/K856PUdSOOMP9w1MFcSw1iDP1hANycif1a1tEGzTtIQVGUpdCEDqFRPTKagSZioMg+peSgthtn7lhc97eztmpKGcs3Zs7zlJ4ihTujXcdDEVPvtl1WpQGvVxbNX+PxdjvcJLKa5L/VvqdfrRBKF6sAlU3n0haao3GxmsPNcAl/dgWP8Rwk3WXR/NK7g/6WLY=","authorEmailMD5":"d071586661f2daa19a05942aa9c5c75e","authorUri":"","authorUserId":"disqus:zisisanagnostou","authorFallbackAvatar":"https://disqus.com/api/users/avatars/zisisanagnostou.jpg","message":"Hi,i am new to socket programming and i want to make a TCPListener.I wonder how i should read tcp messages. Currently i use Stream.Read method. This method on remarks says:\"Readreturns 0 only when there is no more data in the stream and no more is expected\"([https://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx](https://msdn.microsoft.com/en-us/library/system.io.stream.read.aspx)) How should i know what kind of message is this?? Is one tcp message per client stream or its possible to be 2 or more tcp messages together on one stream. Need to have knowledge at the client side who sends the data to decided that?","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2015-08-11T12:39:20Z","timestamp":1439296760},{"_id":"1b01d14a-e3ef-31c1-b2fc-ee594ccb2b12","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Since you're using low-level sockets (and not something easier like SignalR), it's up to you to do all this yourself. You have to decide how messages are delimited and defined in the socket's stream of bytes; and you have to match up requests with responses.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"6a290094-457d-34c0-8834-61a265a01926","date":"2015-08-12T01:23:18Z","timestamp":1439342598},{"_id":"696672b2-3ae4-3873-9813-3939ca37bb7e","authorName":"Zisis Anagnostou","authorEmailEncrypted":"nUo0/V/Yb/o17JARjyT2sRok58/2WVC4j5tBjHFNUCED9FudP+AU+pY3oqU9EHGpdinSFoPIRE86rM0sVAu0Ni14NF3LLUEBpa1q4ogh4QNWMoYgQlxAMcVXNCXVHD93KpQ0BJqEn8pfIlyeR3kWVLltrs/IdpcSetMCgyiWTugNByJaonP2Fv7z+eksaek8W5nYF6lgpTgo3BbDlEYKEIh5myj805OL1jJY3MAWd8+HfMD/QyVOI7637rjiPbdRjV9MJt1ZIATLp0Pu4eqV6U6s6B7rcVxRz2hNQA95OnY+PYd9xDjgEjet0bPl0N1pgQhUUcplTmUUFdpvrH4ywOc2HxulRJ9TVDQj+ZB0EsW4rEi4W6Pvn5TrI033aUAGCsTaPzhJWbvK/7YMdcJtKHAAGS6PmT0Dmac6UMNwL8cpYIgj9WxoBWSrvpxk6xdlHxtgR8ErpEy+wJria8o1hzwrnRr8MMRX7HcWTeX1LzMvvg8i2ITGtfuhGneYKGsbt139U/4pUzI+Jht9PfG/sDfmalPA0T0bEP9wwdDzneGeQf6uNWcEDS9h3uCR+q+qFUnGwi3JpAxixggdysC+xvFIHT7SRzSVGNwV9cfSOz7Ojza8k8nHuaJlDcSyCrbYx+W+GAbN6iSOJOttbSGogTlTzpS+8Wd9nkFZJCipbw4=","authorEmailMD5":"d071586661f2daa19a05942aa9c5c75e","authorUri":"","authorUserId":"disqus:zisisanagnostou","authorFallbackAvatar":"https://disqus.com/api/users/avatars/zisisanagnostou.jpg","message":"Thanks, i will look into it !","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"1b01d14a-e3ef-31c1-b2fc-ee594ccb2b12","date":"2015-08-12T09:46:21Z","timestamp":1439372781},{"_id":"dbb5413d-3720-3b68-8a91-8051cf1b5ee3","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"In the general case, you can't reuse a disconnected socket. You just need to connect a new one, exactly the same way you connected the original one.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"e9a352be-fcb9-323b-b2ad-ea406c097e5b","date":"2016-06-21T14:54:31Z","timestamp":1466520871},{"_id":"e9a352be-fcb9-323b-b2ad-ea406c097e5b","authorName":"Thangamani Palanisamy","authorEmailEncrypted":"I+foZ54aNjqgM7fKo2/+AK9nlE0tHOFQCdA4/MAU1lsfPK5tUXyHYdAuLYBl+NPh1j2Bx/XYfVy9mUS1Agqmw50yjS3Qoa4V/eizDQTZJsxJZqjqfMb+kKLlzHy0uySlSPNdTC4cbelqoeKzG1BKMOGGmt9LNcROjjnj2eOViIsU0P4La0vKvX/MQismBfOTZrKaGvPrg5iFjP6QTgIfMcT4C/x4rZCcap0WdpJiq5cx50xyQNBLCT/kEmDIcv5UXepAHwmpF/UvR/U23OylVGlefkJRT1DCllG/wt1+YXPQikO9f82OLYwECFBdfaofVOhQNYIBHbF8wxVqU3c8hmcMV6wSPbPC62CPtlUb/u7WCWa54VOpEzvlPTVdTo0fZe5sEjJB3GCAk2aFzQfGcIlcsyzo+keOLS3W4+Q3IMyrTuIUhcHE2mzkrYGchqrBvDm8u0JnYc4TmQakN6bbMt3niIqZTkreqKGDEUa36jeCk1Iqa+DTTOS7hY+MzBW1GZG5iaEh0cXL263iOVLH2jU9EL+D3cGNErpNiNN4gC2iAbMzq2Vw07HTpfKxkyUklXQrMtSfM800hVWt5jPv+0bRAaePZ18u4lNr+77ShEgGgk1blrKtAuWCqs0jHqO08s4FPA6Ser1qcWnB8YxoHiliajDCLr0RckVtv+ATKTw=","authorEmailMD5":"5b20881db9d19d421cbfd28dec7b3d3a","authorUri":"","authorUserId":"disqus:thangamanipalanisamy","authorFallbackAvatar":"","message":"Hi Stephen,  \r\nWe are connecting the socket in Async mode. All the sending and receiving using BeginSend and BeginReceive method. How to reconnect the disconnected Socket in C#? Please give sample code to reconnect.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2016-06-21T12:55:51Z","timestamp":1466513751},{"_id":"bf841b66-88de-3625-9972-9c4589c07c4f","authorName":"Thangamani Palanisamy","authorEmailEncrypted":"tbRV5Itk8sdFVJX+Yp8cL2pEsGatEWhY/qvCh1CoTq4jXrw3UZhvkXmMhwPJxoBpVmD+9s1googoJBYgoFTaMqymc/i7bMayqGYnGr6nsBMmuFZNe9RZOELqV9cN9dDY72ZuN2KqEpmDh7W8BMQUi+0v8Hzbs36GXPhXlj9YmiBBBx3AWtryKmxfckw0rmLhu+38heQf1eFbqo/qAnDqE3xtIOLfJ3/vyemH5gP2GL91ZoDhcBonOf3D0OaVgYUA6S4QW3mAJgLapOdMVJprhT1GxVf6DRqiG07DSiGITu70/hxpntIzbhyDmD/dlO4cKHNGhmg0ReWEl7nQn6NFGtuh5anvGgk1L0+lb/yi69C5vKEJD2GdELfS2wEVOhfPp/BKRNNl1wkO7ZuQX184dGTkXVikQHBmNKmgVJlt9Paa/ygo0hiMpKKkoTFj8wNsCbM7rwcK3sG2bMCRFgMgfsIAmrzYfnjVuiAA1Apzuxo9jQdAP2ekItUGABJAlBChH9a+lBySuELMxBb3kjWNCneQgaj5KFtPX9TY/lA4pxuOdsRlYDvHPLuU2M3n90HwYS6NnKySC3Fm8dQCuX84wXMi+aFvMe1A0tIYsA2csMCDyHE6L8GH4YnzoA6Su8jjsteAUnAxo5w4d3ki4PcfYcZyGCuOzir65c+35RBdE/k=","authorEmailMD5":"5b20881db9d19d421cbfd28dec7b3d3a","authorUri":"","authorUserId":"disqus:thangamanipalanisamy","authorFallbackAvatar":"","message":"But i am detecting the socket is disconnecting when i am trying to send the bytes to it. Actually i am facing the when i am trying to connect to RDP.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"dbb5413d-3720-3b68-8a91-8051cf1b5ee3","date":"2016-06-22T07:07:40Z","timestamp":1466579260},{"_id":"cfc55906-1f02-3930-afdb-5ce38be833ca","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Yes, so you'll have to close that one and open a new one. The behavior you're seeing is normal when the other side has closed its side of the connection.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"bf841b66-88de-3625-9972-9c4589c07c4f","date":"2016-06-22T11:41:07Z","timestamp":1466595667},{"_id":"58ae16ed-afdd-3346-8ae5-e50d53fbde08","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"That's what this blog article is entirely about. You need to add message framing. E.g., have your sender first send the length of the message and *then* the message. Then have the receiver parse the length of the message and *then* the message.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"84ee948d-5af3-37eb-8406-9874500473d2","date":"2017-09-03T23:24:35Z","timestamp":1504481075},{"_id":"84ee948d-5af3-37eb-8406-9874500473d2","authorName":"PROJECT IN C#","authorEmailEncrypted":"X6wKFMPhHFkfH+CJfH71lW+JKnZPvCWj9L8N56lS0HpfwG5vrHCrTZ1gHdZ98sByEKk+rpHId0Qw1HEtK48zT7iI1Tu07BqVo49YxP6fIsHPyHGgQrAe5sVP48Zv4Vqa/dBmoDYgPYYhL6eSq/dz3QjzIcRf1G5JFiVgCpkv/NwJG1knCLRo3BMZgl9QG2O0fxBYJrpAEPkIMgwkw0bKEd6tyz1aG4h0ODym2SBR3n0Gnhqapzzwc3WG9GiRORzjZx/7h4QVRk6Oi/8cNw1yO+nRqPZzbymnPxD2sx8FOYCtG/dAN7ceZH6IKFJhWQPH+Gbz6JZrsi9kmRURSnzSFEhOcgkhSeSPgBFmqig7JK+KiWoFC/mkgDU0/+niOBHVc89PRRcUiihNb8gc7rGhBDGHzbva+ea2AXljIKRVvgvRhPOTP0c3sab31UpiioXvZYSHIVpDrUMYRnBQRH+qxtnA1aAENvTHsSsYcSXvUr7D5U0l6L9oibJD3aOvuiYQ7uAyCElPsxHzRBJvhGKWHZn83PdTxzWsg9W15Pyi0V/o6l3/XJYSp0u67eaZ183r0Ud3bP7wQdDObevLJ+EPtv/z9kd16qe1qD+XrOzehsOOFw5vIpQb08YHheov3xfhBZJXGw+wSlbh6y6HzBy8yynFz0jW+d1yBPhFRvYfALI=","authorEmailMD5":"6007950fcd8849a4f80e1d7e0d2a900b","authorUri":"","authorUserId":"disqus:projectinc","authorFallbackAvatar":"","message":"if for examples my first message as 000545565\r\n\r\nand 2 message is 0008asdf and 3 message is 0010aaaaaaaaa and when we receive message 0005455650008asdf0010aaaaaaaaa this. because in 2 message length mention is 8 and message sent is 4 . so the second message is mixed with 3 message . how we handle this situation. Help me.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"","date":"2017-09-03T15:53:25Z","timestamp":1504454005},{"_id":"a725277b-1e57-3974-af28-ac979d85bcf0","authorName":"PROJECT IN C#","authorEmailEncrypted":"E0WaV+5yknJsMC/IC32nG/tkGU0ccOlHPjJ3kF5FZagAQShxr32QBc1kgfIHT/fdbgcxaYYjaW7UMGGrQg2w3geTwULjy1YaCfzRMB2ysaeEK0zQhCGX18jSfH7Pmz6C/9lSVHFjZweu7hTr0xdp1nnkiMbKO7v3FAKZrDrpKZ+JnLrgdGi49zZutBL4J6R22n8vQA/AyBw4EObhwFSP0+yt1YnA1s3FzFovPupVJ5T6AaSwoAmMsK3OKZjvaY2gRJUjNJ0VrZTPX+Jf5JO3JL+OhQsBpNMyiKG37HiIoJeBCBj6lc5DudokF86RGMKDGqFW45MDshMO+0+YgZQYGJBcChYDG9ASULx2Yz6Tw1NKI52Eb30U7+cOUFBkwRZ+vc/dv4CmYH/Lo8BQv9dxU/2OU6Cpq7kGIeJusRBlgC/LEQjo/wILAjnZp0Dqxr8PtOyEaH9uVRF4rkJlphoIAvXUgjbouhVD/8Ux9MLxvOj+sTbbsX2H6I1Ufmt2hj1+GR9lGlHAqn7/ufMdFLAPQpgHBD4LWlBGiHnjDncquIsHyoYtHLl+OPnxCpxZNtW/YeJyRrzFHzuWQBfBvrs55X0Q6T4RUJUrvK6N1Uncq1zYFIi7bbVi73SopZvsepYKz6Y/3wwVeUKLtppDjV1xpodmL6O7E+njZ90wFGtSkHE=","authorEmailMD5":"6007950fcd8849a4f80e1d7e0d2a900b","authorUri":"","authorUserId":"disqus:projectinc","authorFallbackAvatar":"","message":"for example if i first send the message length is as 0005 and then send message as 45 two digit and then send length as 0010 and message as 1233456565 then message receive at same time how we discard first message because its length is mention is 5 and message sent is 2 digit . kindly you explain me this.   \r\ni ask this question in stack overflow   \r\n[https://stackoverflow.com/questions/46010688/how-to-validate-the-message-that-is-receive-in-socket-in-c-sharp](https://stackoverflow.com/questions/46010688/how-to-validate-the-message-that-is-receive-in-socket-in-c-sharp)  \r\ncan you please answers this i am very thank full to you.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"58ae16ed-afdd-3346-8ae5-e50d53fbde08","date":"2017-09-04T02:48:02Z","timestamp":1504493282},{"_id":"213c7f7f-0fe6-3a62-9718-9d1d61d71336","authorName":"PROJECT IN C#","authorEmailEncrypted":"Cjxo0xirSRId1L3uVRda0otS4jedVIZhH+eRdpYJtDVQG6SsVXOGr5p6YHXxs5ZTK+xGGEVfTSFcC4y4IdXiynoXgDSJYX4JJ5rMabegs37AWCbz7W6ErXbBXEDL8hacl7oAcPHkbSRG+kX0JhRmRlaLLoShdO5IX/ptPgBpNX1/Z+wmGnXbyn+cSzCGG4Gna0BCpyGAkVR5Rm6dM2x1VrKZVexb0Deou0K3iCGo2OZOzXZ8oBnuLTk84bRwHU03mUiaOLaH1iJCQqwkeDkmcZ768gPOgLFjDpcoPOP+evupzwLuX6nXqhPuwo4C+Gr0ZhljbzRN71Yg7YaH6M/VwVuXtW3f10jhF7H8XvvjpvXFTGTF6c6O/YEiPEK6tzEaduhu8GBdAKZb3YGPa9vWOEAoh5TmzaxLYX0AdPn8ecTjmG2r67KiBSFbSuw7OEafhCWTX5kY4Qlf3vN/IHGCqW0kxE3nHhE0+/3fUisKw1NSAU4Ab8wfmqUC9v7PVgdMDR+zs3jlJJtW1H1nc3sTAUccWZL2BvwfIwYnD+fCNQuEvwCxfwFoiWTD4+pjXudKexpCtQNDjZ9lYTt8rQ9G1iZ8rr/dVPSsD8GMEndRwZvuzJ5zeNySTAq8bZ9J4IltByidqsxqHz757EzQo6JGUdJSXSB2IdKJiP1jgMZD+wQ=","authorEmailMD5":"6007950fcd8849a4f80e1d7e0d2a900b","authorUri":"","authorUserId":"disqus:projectinc","authorFallbackAvatar":"","message":"Nice decision it is very helpful for Every One. I am Waiting for this Great blog.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"5adc198e-cb64-3676-9941-5f475caee214","date":"2017-09-07T18:03:28Z","timestamp":1504807408},{"_id":"5adc198e-cb64-3676-9941-5f475caee214","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I'm planning to do a blog series on writing a TCP/IP client/server, and contrasting that with a SignalR client/server. But I haven't had time yet.","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","replyTo":"a725277b-1e57-3974-af28-ac979d85bcf0","date":"2017-09-07T17:08:22Z","timestamp":1504804102},{"_id":"fd219a10-0d73-11eb-94e1-2bb3e4478170","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","postUri":"https://blog.stephencleary.com/2009/04/message-framing.html","replyTo":"","authorEmailEncrypted":"ZxCHXk/rIe8+VqP6R4iE1azXk4R1uPWrIt2hjVV0tMRupo4T3pivCT62gFyTRGHcfC2d1dIlL4XccR7z74CgSvOGEqoRyihU+6K9aqX7Ej8lzb5nlEMCIXN4VdA8mkLeGfB+uui9Xcc9Gdch0DvGrTA3NVuhSviTO0+e3plgdx/6zU8CtAdUEi2z7gto0UV3JX3pFBt05w1RjZBBXuG+U6XWxhXgKHgr3x8y5nqIzF3gbxZP0EIVHpbywYuI7zTXdYnQK6F7CNjJ7ygDUaPRmEgYuJ/qnTtlX4ErQa3u/59DYQ6MF/nsVfM+QikhQ8bYPLr/3nzGmd2fDekXWAWXJhKpEESM01iOlfOIPk0z5kmC+kMI5zLBNEHQVweDPdnKXynB3v9PwWqD4XzOADlnI3cQrLYlEEVui3yNJTBX6us2BiVSytmzBAsDyP22SbSZ60lKaZiiVUlaiRuY9CJUJ7wVP1/p34uQGMAAxcDMj5qk/lQWQ0Djnfsp8HCHXsUGofZIeGsyjcvEmXMKwel25wONOcyraNJnV44yVIKCxR5wUiPxnn0lQgyCIEoQPmIIRX5Z0Oboagb+CaBDBzSAt1VW3B2sHl+1epK+FaXqGKFWr//RE5LeUaUgRyDSEPeX+hHV22k4IEP6P0/bWG6TPWGWgaOv7Ypx6pwT2Dclq/o=","authorEmailMD5":"959334c98d5cb411f3363bb71aa83d99","authorName":"Alex","authorUri":"","message":"Fantastic article - you yourself pointed me here from another post - as I fell head first in to the same trap - looking for a one to one on the send to receive. I consider myself an experienced developer... but I still get surprised by just how much I either don't know or assume completely incorrectly!","date":"2020-10-13T16:48:58.757Z"},{"_id":"52fad9cc-6826-460a-8e12-91a3205c4d12","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","postUri":"https://blog.stephencleary.com/2009/04/message-framing.html","replyTo":"","authorEmailEncrypted":"au55qkSkalLfKKR12x+8GuUrfTFk6nx92HcHO7ANWrlETUPEysvb34t64F4eq/AlNrbJiDkec0d0xjL7keSC+eiYqKLQosvD2g3DcdcJGMpMuOFH4ikWcYoQPYlpfBbdenwYfcHWsCcbfao9LeEyv8vhCriRKmfJbIV2NXPBIhcuUrOFULo82jyDQ1C3uu2qy4yAPCD93Y4vgfUJIWNV22QhLKECH1UiNc8pnfqqaycnahiErI186LSkeJw//2F6yx3x0q6iQb7NoTaGHWE0o++Nvd1j7jSp3azGe6hXASzhKMzRd4mQF59Oi5O4tKvS8r5670P4C0gL0lFTZILuzW6tjPy21XOApqp5DCWIn1fy3Vb2aT6HbrS1JcGPRJoeZ3HG/huCwZD/W81iGpdWQGZU+grtkxpSVt3sWqgw039h9dPoua7EXDVnf6jmoL/2H4pp/XTPZ2SratVKcoyhF5ffX/vBM/Om9SrbsTPKzDiHdWtiyE60TBb27C2c9hRzVTOtXBvil3987Bu6kiD+Jipvm+TS5ePbO3CMIRBuvejzr6Pq97QpxY3Btc40qF+OBcIVxjOs5JyRfx0pDbSwEX0Q7r95vhU+pY3Bifpa3scPA1v8DrUUfrHbhuasUuXVPdHRVCx89U20S+HIPBOPMjvwzgVebxOSbS6j+p9yTcE=","authorEmailMD5":"56533698ada12b4496c79732b7cce2aa","authorName":"Jim Williams","authorUri":"","message":"You state 'they assume a single “Send” will result in a single “Receive”'.  But, if I confirm a single packet on the wire, might a receive return less than the complete packet of data, requiring another receive to get the rest? Or are you referring only to the case when a single send results in multiple packets.","date":"2023-01-24T17:40:37.4281820Z"},{"_id":"cc0d4307-6cce-4811-a28b-dadaa15de874","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","postUri":"https://blog.stephencleary.com/2009/04/message-framing.html","replyTo":"52fad9cc-6826-460a-8e12-91a3205c4d12","authorEmailEncrypted":"S+LnkFi2PLYbP+BOZwu6aU7EaelCiYTZZkfZo06F7zMYVr1kZZrbHohX/6j8ibfJAtgJ2cK1PhWfL/jGqdfJq19l5KOQHrO+svtJe/tDt2iBg1SMt5bOY32DNHYRCGxYXw6YWUJbYDx9TYoknizCrMDRx1vYE4q0TQMF2b9GOq4V3hs93HPOfLwkLzspEVVhvD5fVnsEy4kWTrt01isTZgTqnDBK1qp+2HLFZUCnAbmLrtZOvWOVMEHaitn4VBnM3zEL9xtiI+3jLPhBaaldRCdAkyk+aBp3UXfbKItffNLRQqW9p30azcnDWovfIdP+KH/OCphaKXiEpuqxwsVaVtzWSIO5uTv7A55HfZUaEICIsA9iUis8SWFYwmAxVo5MfatxRahxP2joYtB2pIH3mgu2hb3aszGJaybw2lt0GXygJ3Ay7TNweobiIkLTXsjJH4xultYnWFaPuAmigt0MglacQDYioMxENmp7GRxk15G/4Jnm90dxZ7k2kfamKn+VvxNWp6R7Ph7VCEB2fM7qNdYXpaES/yoCMsYpDfYHHwuJ7QxQ1hYOVDaZG1jig8M8FQ10jhGC9UlPH4L88uMmjLurDt5PpZr8Ww1olYBjZETn5SJcaRmmYsIiiKxUcVavXSZd5ktbqPzj0NZ4CyfISxUFVQAof6SdR/pNUvxbe/E=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"First, I have to point out that there is no way to send a single packet over a TCP/IP socket. But it's possible that a single `Send` *may* result in a single packet.\n\nThe second thing to note is where on the wire you're talking about. If you verify that there is a single packet on the sending side, that does not necessarily mean there will still be a single packet on the receiving side (see: packet fragmentation). This is a very common problem for developers who test their TCP/IP apps running on the same machine (or in the same network), and then have problems when it comes to deployment where the socket connection is suddenly traversing routers or the Internet.\n\nIf you verify that you have a single packet on the *receiving* side, then I would *expect* that a single `Receive` (with sufficient buffer, of course) would read the entire thing. However, this is not *guaranteed;* the OS may decide for whatever reason to only read part of the packet into your buffer.","date":"2023-01-24T18:17:11.9423240Z"},{"_id":"83734e59-4db8-4b21-b69a-a33a456a8d5d","postId":"2009_04_message-framing-35559d4d-46b6-383d-ad38-3ed5391f3894","postUri":"https://blog.stephencleary.com/2009/04/message-framing.html","replyTo":"","authorEmailEncrypted":"","authorEmailMD5":"","authorName":"Juppeck","authorUri":"","message":"Avery old article but very right and very often not known. It's just an assumption that a sender package will be received as is delivered. Often not remind is, that internet topology does not use TCP/IP as the transport protocol. There are several different network protocols in use and has a different behavior as TCP/IP.\nThis often starts behind the gateway router. We use DSL / ATM / SDN /PDM and some other protocols that use quite different parameters compared by TCP/IP. MTU/MSS and the fragment aspect are only valid for TCP/IP. Other protocols support smaller or bigger frames and share the containment with several other data types and sources. It would be magic, if a full-filled Ethernet frame delivered by a sender, will be received in the same full-filled packed at the destination.\n","date":"2025-08-29T15:13:31.4521399Z"}]