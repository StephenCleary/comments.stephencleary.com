[{"_id":"e1feaea8-a545-312a-911b-446839d0d2b1","authorName":"Alvin ","authorEmailEncrypted":"FeSnX1PNSuHigk7fVQSVy4kFBiaaKco41s5nZy9GKcKqwFVDZQWOr1F5g+1l9dB6a8JaImsVzRPhVS9ZLpDsfPEbcHc27UR9rwpyaoGDyt32Rr3jhuIIE/lHJMXhwcLan6AM9DmacbhASkaURzFkL7qJBpa/Vmzp0D8qmcHD9pmpM7AaskCXc/ZoUWtikgkOqSXEyS2v+g9zWcLentZSwjIcrwy4L64ViZIfJi4RjIk38GRgSVUWl+9AeLyfwksLqSGf7DMF4WUofmFGGTMUdYkiRH+DL4/ByekpBRKc1rUvskgz9EFOPaVHKGD9K6wA/VCttidjKrS5JFYCGsST6DsVOLXAfm6Jqnq++26ss/EV/j4ozKlzjftobOwiS2pO+N/Vk+5/iO7xKHqp/bonow/SLuVuHMbztaZerc24Tqxqwu7HweiJ/FO30nZfd5tB428nGn3FltNNG0/Z+aNg1OQ8far4hwWP9H3dml7q9WVMNs+E7ntCYfT/FZL1VcN7KaPIKXEeGAs9+pmE+y6636pUVOryldMntWWu3eFcQ2SfZ93lQ4REOi7sZJWkrCDU9YY6kVFow9ruabby9CIRXxv6HUjIJZHm3DV8NZOKTtsmCx9iye/f+eDVOfOvglGBU167quAQvmJnsbsSzRQXOuEfVI1RufO5VJ2Iq5s+E1s=","authorEmailMD5":"57d544a1aad0e1258c55c5b2d6c0d213","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"I would love to hear more about what you mean by storing work semantically. ","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2014-06-08T23:31:15Z","timestamp":1402270275},{"_id":"0e7479a3-4532-3b0b-9231-3a20459beac6","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"That quote is from the IRegisteredObject semantics. QBWI does use IRegisteredObject, but it returns immediately from Stop(true). So, it's true that ASP.NET will delay the unload until Stop(true) returns; but QBWI returns from Stop(true) immediately (without waiting for the background work to complete).","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"887a921f-0358-344d-b38c-1a0d8a062ea6","date":"2014-06-09T17:09:01Z","timestamp":1402333741},{"_id":"3d187730-ddea-3cd2-9a8b-a8dc99d713e5","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Yeah, I was trying not to be too drawn-out in my post. What I meant by storing it \"semantically\" is that what would actually be stored would be something like \"{ version:1, action:'compressImage', imageUrl:'[http://example.com](http://example.com)' }\". This is in contrast to the way HangFire stores its work, which is just as a serialized delegate.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"e1feaea8-a545-312a-911b-446839d0d2b1","date":"2014-06-09T02:45:42Z","timestamp":1402281942},{"_id":"887a921f-0358-344d-b38c-1a0d8a062ea6","authorName":"Felipe Fujiy Pessoto","authorEmailEncrypted":"ULmCOUsZFWCLH2DffHW6c8bvv7QzdG5a+GFnIR1/C5+QQ1298FUUvsGZGH8ne4iwZMlelTJwHQfsiNoZm+egZ1i0uaO9Nw2ugZzAZxfwOJvhUaqhIxbNgWG4DkPtvoXpsZy/xTevFQ7xxtbAN1+V/+Kvy0zDUlhRRi77B/gQoDwG8Wu8rf5PFcBNI9JlgVq04j6sKJGKZTXCx8DwkLLAFRrnPQ3v3p857fWl+QfRRvRmvADFTLkho+u0zYcL9ihOqeFoO4pBpLh3PGpasBJCcPpsoQghoiKDJ60ixA5ijvvR4eSchnmYXgiHYPzHCaG4bLQSMaupv673DCqs9ZdrOM+R7IJpNl5Trmrmdwj4/uzO8c24cT1QjBsblzNclqN/pPT6Fcaq88qeMGo/vDykS6yGfXYLIboZq8qeBTWEw2cNPs7hGAo1PsMNhz1FtdRoKYyg8TGar9kY1OftqKeCauOQdw+HEjAB3yMnhlvegKGWivfFQAHUCNoiGra22som5wEweFAYl2BYHduHeoF9KWNtMG9DUCt+drNGf0YJ0/Q/O0hsfvuKbTGHKZux2wjJ1YjansN5/sfhs41JyzXlBN4RQ4qu4Xzg2yr+o/xptCS4gKOHdgUaEvPcIp3DbQBIbu9H9s6aBbCkOzk+moQEIWlTKnN+mjtA+LzwZ0XyLrg=","authorEmailMD5":"39429a964f784d31ae353038f724e3ac","authorUri":"","authorUserId":"disqus:fujiy","authorFallbackAvatar":"https://disqus.com/api/users/avatars/fujiy.jpg","message":"Probably I understood wrong, but seems QueueBackgroundWorkItem also wait for backgroud tasks: \"If you need to, you can hold up the unload as long as you like, because we won’t unload until your Stop method returns the second time.\"","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2014-06-09T16:16:29Z","timestamp":1402330589},{"_id":"a774efc4-1211-36b4-8acd-dead4fb506be","authorName":"odinserj","authorEmailEncrypted":"jvEQeZHCSBh7t806d+7bo7ihanm7PuWFAVFbYeX4ouvYvaemleV1Wj8o5bIpArOJct1+die2/Xvbk+PSvEdVZg2aNpPcfLfahsL8qspM5q+JuEKzYhPzbeFmXkLYPf0bRAONruq2FWnNSAwy+ZxwSjYce5z0MhIq6gzdc/MfETPSxakLOIvYtEge2kDfE+5HlPPKyt3zwy0IIaOH/fZCCUoZxGwMfL/9z/imeEoK+A07LRwUj1MK0mcG6QZ40dWI6w+m2A/z6ZHdsJocy0wA7e796KDAXXWWTcwJShwic4ifyU7UnbTkk31qznE+Mhkszb5nQzNxCSYWeItCE8u+j3mCc2HAWLpoONqIfDgTvaHYExwLcXq7VjlGdOu27ZdpZ7KjkVKeC8dMIl22BH402hRo7nEu7rfuJNEyoqnJTD1Prz7FP2T7XGLj+ndzV89m7SifAtu6L+7Wl6Zf7pMAEWQUgMkELYgM7Nwy+mE3jaYP8bx4MmB/qEOf+JFC7cpLSb3oQtFy5hPk7wCyKLNuUB+sCWVZPjZoy0/lLaWrDlf6KgbM5PlIdiRN7pntQRUMu/NgZHsw5of2D2NEtAuHrwTMVW7tyFLdJY7auQITNUkDbwRn+4vD79ohnJ8OQyuAa528KbcIgNn3g4mImi5kJl+moD1W+vgWwT+fguwejVc=","authorEmailMD5":"0a71abb01f527c8830f708948ca07351","authorUri":"","authorUserId":"disqus:odinserj","authorFallbackAvatar":"https://disqus.com/api/users/avatars/odinserj.jpg","message":"Thanks for good post! I'd like to provide some things about HangFire.\r\n\r\n> I’d like to see support for Azure tables and queues as well\r\n\r\nCheck [https://github.com/odinserj/HangFire.Azure.ServiceBusQueue](https://github.com/odinserj/HangFire.Azure.ServiceBusQueue) and [https://github.com/odinserj/HangFire.Azure.QueueStorage](https://github.com/odinserj/HangFire.Azure.QueueStorage) repositories. They made as a proof-of-concept and not tested at all (and currently don't support the latest HangFire), but they can work together with SQL Azure.\r\n\r\n> The second assumption is that the code will not significantly change.\r\n\r\nYep, but you can put all the code related to background jobs to the separate folder, name it \"Jobs\", and refactor it carefully.\r\n\r\n> I’m not sure how the system will respond when it attempts to run the old background work.\r\n\r\nThe job will be failed (this is a well-known state for HangFire, nothing bad and unusual), there will be an error log message about this event, and you are able to fix it, redeploy your application and retry manually at any time.\r\n\r\n> as previously mentioned, HangFire prefers databases\r\n\r\nYep, it leverages databases for full transparency and manageability – it is very hard sometimes to debug background jobs.\r\n\r\nUPD. The way HangFire utilizes background jobs is well-known for Ruby on Rails developers – they processed many millions of jobs with HangFire's analogs – Sidekiq, Resque, delayed_job and others.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2014-06-10T07:33:53Z","timestamp":1402385633},{"_id":"e84dbcf9-7cfd-386d-a22e-f661155bdba6","authorName":"odinserj","authorEmailEncrypted":"KkNtVlOqZsebyZfNfLsq/eIH17b6oRkdJ/vswhbXXypdqgyTV+Uv0f1Lz13qD1CbxjWjnr7jA1SLQIJfj1I07ykXcONKXF3X5QZM3FGmF+6Bs/4Wdj/Xvxp1yb/BKTolNtQYfPR1WFTUBeQ//SqaTsRF/4zuXocdWVkC/qiz1yHnaTEo0aYeKtvY6o3gftWBK+0UghFgzLDOHgh8zUms4MEzp3UER7UKUNNSbT7YKcRNiVwT6EEQXLdnH5BZxkx61GoxL6p5ejllfVJX/pGZdoTAHkb0D/SNBqeiR/vLmLIYpcaFLRp3aYAi3bxWeN1x9DFJvXl9c1Y5+nptGADw5XkPP2Un9j1Y+s+VV/CZdA1JucYl6zGbA9HtgprW44eqgP5RnugR7GNOWBU4sllYcf1q1dYS6s6p7USan06M7A2YdQ+ZoIygTjUH6fQ3SxOd/5Nr0vdl7Z3AfQByQQf8hzXMmC2Tr4A9skn5vEuTbIunAESwJYarn/Tc2QFBZ159XVRq42gc1JN0DuENIE1rIESdkI7APr94CFO2oYZynoCZHkgqPCrGR9itYhDwI2hiumwmuZffkTIfVQttwJ4ibec8xvBeEAu5wPfDao4kJG8K4Ynvuqc2WUC0kRdemlXiI0atCGUDbfQPNTYxKiyL4y4lx2H9qQI5mkxD8p3DbNc=","authorEmailMD5":"0a71abb01f527c8830f708948ca07351","authorUri":"","authorUserId":"disqus:odinserj","authorFallbackAvatar":"https://disqus.com/api/users/avatars/odinserj.jpg","message":"BTW, for semantic invocations, you can use interfaces with IoC container plugged in: BackgroundJob.Enqueue<isomejob>(x => x.SomeMethod(\"args\")); and choose different implementations using the container.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"a774efc4-1211-36b4-8acd-dead4fb506be","date":"2014-06-12T15:20:36Z","timestamp":1402586436},{"_id":"96ffc66a-b00a-3705-b2bd-676b9d2e2a3c","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"It's true that WebAPI is not an ideal \"subscriber\". With those technologies, I would recommend a WebJob (if hosted in Azure), a separate process (Win32 service), or (if you must) a separate thread in your WebAPI app. This intermediary would subscribe to the RabbitMQ bus and pass that notification to the WebAPI service. The WebAPI service can pass that notification on to its clients via SignalR.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"bbc92b7a-7d7f-331c-947a-16dc649002e5","date":"2014-09-18T20:03:43Z","timestamp":1411070623},{"_id":"bbc92b7a-7d7f-331c-947a-16dc649002e5","authorName":"Adam Hiler","authorEmailEncrypted":"ejnFvrWLrWSOQ10+TdS0bWYPkf05TYYVduUQqlfNeuAMIDhGYagGqaRwYm1oLsugjgV98PAeaU0xjnRpSAYUAcKSgrGj4imPpzhYPajCsFcy4VSWG0GitRSRQ+arLDrjcCyAQ5eAF/Q1y0wGgEwkuWD0eRgU5Ei/VyytiHbwrs8xooNmjIM3oS7wyCVL/FP9mzYYkrW6Q5tz6jzxjnOXmp1ZHzokeWfRv4MG51RCG6ep/65wdnKssCVSRnT2nUyYgBbt+/mbmLTRosNFcWSodibUmzIwV2pT2JdEJM8KUEfQ6u3NHQ2DUjvBB4NEhXG6SvYV8aJSqgzd/fyy1Kb7mN9vjy2G0zVvGEprbymWib/nNdgxnqS+q+CrnqONNnEMndH3Uus3TffHUvvVWnxCYX1MQ6k9PdPh0/f1Pt5c6p5q5BBlg0+T4lf4YmJq7wf0SaO43TDO2qwF1Y7TrSyv0jvobeG0kmj6AmYzh2Nu51yZp3wSeLg0IA0LlLAA2SRbscDrdNzCTYbI2aPqONcvmcH6eCJhhCydW9TcgqcmoF7C4wMwiXJUz/X49lJI2ONgwdxe/XflZEJywPNlXOwzgAOW6WP0qb/HzpFo4hkbxXhHRGGjEzL4r7k+TAnwiLMQl6UoKpvwvafSDt081LmPi1leLP/8z2IMR/MDcWRLHSg=","authorEmailMD5":"a339705f3d79035f605795ddffb5d235","authorUri":"","authorUserId":"disqus:adamhiler","authorFallbackAvatar":"https://disqus.com/api/users/avatars/adamhiler.jpg","message":"This seems to be partial confirmation of an architecture choice we made for queuing and farming jobs that are initiated through a Web API app. We are in the middle of a debate about the best way to handle asynchronous notification to the (browser) client (if they are still there) that a particular job has completed. It seems that the Web API app has no choice but to poll the datastore. Our farm sends reply messages (RabbitMQ) with status but no one is \"there\" to receive them in the Web API app.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2014-09-18T19:49:33Z","timestamp":1411069773},{"_id":"6fd5c3c0-43e0-3e58-97df-b0a0205dde09","authorName":"hannan","authorEmailEncrypted":"DaTee3KWnjkDIsSyYvivy9y+tVyKweImljDTl/khZVjdhvt8dazzLfgThxmvEB/7V2c+vNzvuQj4vQ++bbHYKt6Xpp6kzXYoL8UJdSrgginXnhI29Xjfx4AzqvglPEKtKATFmhzZM4i+L00pd4gtwwiiCuvJwyeu1TfeE1MfvNJIpSuEFu5Q/4/66qcmgzIaUc4+mTiFfnrbEunls1nhiO0fzUjxVf3v1zr0rqCUjA9jPo6S2/QyIvGgTwxsyUE/7wwdJHT1tJkOCKGll7nCBW2NduPfjkfJyUj+5Ukj9sez6JePG/V9RSaOMWBAbKI+iCxafoxToyjNsNVx2n+828og2P0j5E2dbsdOMcm+LgJgJRae0ZEdhpdyRn/uE2FY5t5Rmi4GQHz33J1PyzQFIFSkoF4ZnYzEHOghmDPdmIgEt6L4brWZVcfKEEsjRcpWndDE0Ldi80HwC1mybTAxbnhFqPfanR5pF2X1fbvkcXXgXAjlZ3OVFnHWlgZi9ocGTAot3jYI6zyWBlbYeelPdwrQi93cdQ6zBKp67vfRK3PrAwijvoV9lBc1ctZG+dP/d95Bpo7BDLn6nRH+WHcv8dZodG69UIel2blcmULGpcUv7Jhs6uAUKRfRduTV1EDYAd2SZaGVhI3iMpyO7L7gxiUPOq4F3yZ1nTR1dt1FW3E=","authorEmailMD5":"a399ec896d50731298760dc2cb5393e7","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"First of all, thanks for your valued information.  \r\nI want to clarify my second point that If a WebAPI send request to itself using httpclient then IIS/[asp.net](http://asp.net) will not aware of the request?  \r\nthanks.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"c3df7ebb-e0d1-3821-8e21-098527068cb4","date":"2015-04-29T13:05:10Z","timestamp":1430312710},{"_id":"c3df7ebb-e0d1-3821-8e21-098527068cb4","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If the user closes the browser, ASP.NET is still aware of the request. In some cases, ASP.NET can detect this and notify your code that the request is no longer necessary; in other cases, ASP.NET cannot even detect this situation. But either way, ASP.NET is still aware of the request.\r\n\r\nIf you send a response back immediately and send another request to your WebAPI, then you're in the same dangerous fire-and-forget situation. Because you're not waiting for a response from the \"inner\" call.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"e99d346e-e8f2-3d36-9afc-d0e4ad2ecff0","date":"2015-04-29T12:27:56Z","timestamp":1430310476},{"_id":"e99d346e-e8f2-3d36-9afc-d0e4ad2ecff0","authorName":"hannan","authorEmailEncrypted":"pVyZekhjL6l2vTkW1jRyHYbzS0560VDs2sWfIbgfPn/KDnFmDq05C5L+vm18H2ICPdCWK7uggZkBxdFeNBmjLmZuD/2DzkEG/5pmmTcjyFaWY1iPfgkKUZWv8mHqF03RTPcmnurOkZxTYciY86PIhDdU8tNGbLlRUxz3dgVPowB+9INUlgVAhkwOp+57VegQhnC81wPDm4jlESrVfu3S/VUXucwiVMRdzFZy4tt3qA2axxxQCevHzYVLp/gbv0tBe/8aGTWQp8A+CZ8t6JXh+djEvspGjmRUy7xLiRGbuKRh+6OBjFA1Ah4eyKvzYXcPnO5Lyszpgk/008RUBjpK+bjSNQaFX+Cb08NOTs0OpKFkQG7Fw2TJv8JH0CX5uHc/36SzlpWvlub0kKhkZXurYpaFlEcprxaAzJ26W/SErPOH3mr01PpOaAUD47L03Yu6qd3AGaQBkARibEm2fI23POwac+Hw943etgdJVziAPS7UOJd7OXJd4yFSXKRD6LIpCnyqxq5h4uCHEmTn7Fg1IBGBhqFJSQSwKV50vns1WKsyff9i90Cv9buVcqaZckUTDyfSoY5P9drC6c69wMMIlLa0xWVBRK/YK34VH9kwnnG7AJ7LngGVmMovHxGeZtRR5aQeZeZaojhx0pF6S6a4JgOQ5TCvqGBpb/8u3HxavWE=","authorEmailMD5":"a399ec896d50731298760dc2cb5393e7","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"What IF we close the browser after sending request to Web API? Will it be the same case as you mentioned :\r\n\r\nThe reason is that the ASP.NET runtime has no idea that you’ve queued this work, so it’s not aware that the background work even exists. For a variety of reasons, IIS/ASP.NET has to occasionally recycle your application. If you have background work running when this recycling takes place, that work will mysteriously disappear.\r\n\r\nWhat IF we send response back immidiately and continue processing with sending another request to Web API from within itself?\r\n\r\nPlease suggest.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2015-04-29T07:52:08Z","timestamp":1430293928},{"_id":"3e299f8d-43ea-3a4c-ba9f-c826298a8492","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Since the \"outer\" request is not waiting for a response, the socket for the \"inner\" request can be closed, and so ASP.NET may abort the inner request.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"6fd5c3c0-43e0-3e58-97df-b0a0205dde09","date":"2015-04-30T00:34:06Z","timestamp":1430354046},{"_id":"877f15b8-b495-3e1b-9dc6-03fb84117baf","authorName":"Ibrahim","authorEmailEncrypted":"WWRVUHvta/024iue0jQKzPRO3Tx8yxJA4kmLZS/6xGeeA7AjCmXNtMTc+az+sJRPPdP3TDGNPQIdAO5ALiDu9/Qwkf5jyZIIj3hiW7eVkKZKfieCf82UAWZHtC4LgJoBweiXzmB2UM5p4MAAFj1ea60eno3uoPPX/dK6rDPEyeVEbTSH50cnjcWwyErj1DQI8fS19nAshurJr5NbVljlehoy1WvXwgwvO9XwkWHn6nH6syQpNJSmtyLk2DxcZ2r6PhYh/kcfWjmZ+e1ZbKZHTmZ/UzC2WAl9uqjRUT5q0IHuhBinP8rq6MVrVf702OYvNwpdJuum3hJtgJjtk9m/YhE3XbOXzyc0bX0TSlcSPQs7FVtqD56eJNknV7J/QYSmlKYRNep2jzBQL9uOEoupi1LfcOuw65Sp4tgDJmYkHSV1PMw9ILZJsB862W2Gg9L8xPR1BOz0RmY7udnK8JhKZEXOV3BjNIkpow48HGWAYevDdYAOmoCDuweCoZCRRVs7glxue6hzkceuREEzj5QwrW++lP5l6LOAHSMxsF+HSqELvVhxvcItXA6gW6jOhZZlOF0eiRBmpTvsB/EdsnlcUnUUTA+3mxPESgYdolzmQv29g1KiyRw8ic7tQCioZE8A05OVKGn90/OI1yVUoGVl5D/YDP9FqHke0CZ318HZGhg=","authorEmailMD5":"9b6b1ef9d92de1784d74f0d74941a99a","authorUri":"","authorUserId":"disqus:ibrahimdisqus","authorFallbackAvatar":"https://disqus.com/api/users/avatars/ibrahimdisqus.jpg","message":"Best article on Fire n' Forget in ASP.NET!","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2015-09-06T10:19:07Z","timestamp":1441534747},{"_id":"0fbae6a9-4ca9-37fc-b753-78e61116b755","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"It's not a question of scale; it's a question of correct behavior. Just tossing work onto the threadpool with Task.Run (or - even worse - StartNew) is simply unsafe.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"39954e6a-6deb-3fb8-bac4-149e4f6bc115","date":"2015-09-30T22:42:21Z","timestamp":1443652941},{"_id":"39954e6a-6deb-3fb8-bac4-149e4f6bc115","authorName":"Daniel Vieira Costa","authorEmailEncrypted":"vN0iiCTMtrIcz7IZ6N3SgV6ZP1XHxHyLAWyT07GXfAhuzYzKZIWplsnELB9UZkZKoEq13jrpACpy4TVxQdJLrJhNf/onfhYwkF1vOtdzbgc7TwWeTc+p3Mo2x+wdpKY55yPS4HUkPUShaJdP+UGdELDtZgq3z09H3yquZ8rE31EO2zgtpWuUtokg65RyN3/kyA9hKn+kiVhzYsTTbJ1AE3RRd/A3D3N+vhLak6nozOss6Y904zEIc7+N4iC38i5xDaWVGyjz+b8aY6jO4JrBfOKjh1nwglIHuNI3jk0BBK0iqrC/4TAGS6l/U0ycojw03oF8mXFIHXBG3c/0Pwr7N1Yg/Iqx63tx03dlcUVa7NcsT2uvcHGGeZkmdsaKia6Ixdo67iM8GdVdpQ11AUEblLy/nnJRP4ICqz59TdtcJj0DDf1418Ouj6h649akmfHCkFBfzA9RbSIxiyYB0DuR0howjDqWY4melSGgdpW3uM1p2nFsTvdWWKSmrik2EM0YeKvK/lzubTS2Q/3gtIQFancnyVvMwt1Ju2+n84yjPnXynyHttpSJBTuzZ1EUp8QzGaO0gfCKAY9JoolyMYZ3U1TJdsh/QbEjSErJNiqycDhQv56tUvAUwFxu8veazTQqr1zq6Iv+PjsAm5EBPBlpVGk8Vb89pwVqqaoaSa+U70w=","authorEmailMD5":"5121227e0455aabf2410615006c0e9cb","authorUri":"","authorUserId":"disqus:danieleritavieiracosta","authorFallbackAvatar":"https://disqus.com/api/users/avatars/danieleritavieiracosta.jpg","message":"I'm doing something about sending emails in background: I like too the idea of queuing up the the emails that need to be send, and I believe that it is the most correct way in large scale, like this case. There is no miracle to do, however, while this, I need to do a workaround like Task.Factory.StartNew","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2015-09-30T21:18:53Z","timestamp":1443647933},{"_id":"a1b12729-eea3-3b67-b836-e2266ee8f745","authorName":"Alex Zqwez","authorEmailEncrypted":"fIs4w3dxAYwPeVD+QnfpEvkIzNIVXLGQ41+4OXiZz8yncZ/CLNATa2FsNSlEta7qSUcGaKJ8pSpqvdKiqqJ40jtECI2h430YuKa2XzkOlqet/n6nhgevxkN1kiW/ATEbftzNHGxd8CwFC7S8unHUXVZiWxoa7yNMoWU6FFbe524Rn0/IOh9XEPY4PZBaoEYkDQBdq4ug0pQEndKhz0pO8BZV2fTBk+FqBUpNknZK2iVii2sBGA06ltdVe1mkQwfwY8Os+mqbR04EzSjBlxv4/gjff4HkAnTVN6N0mM8nuiiMSI5XZ+Oni/4i6fF6dAufpczNH9cV2hleNGNR1diinLZEaO59fRfkytU/83/9C0+UXsKF8qig3rFc+SuU3n0XwpWoX7erPCnrIhZhzBGXB7SEtCbjY7qKGt25n0qJGhE0Z1U3tJWa2KfF0vwwHKlx3NTqzJbGISkePVgd8tqDUpNaMODRp7gmZsK+d35o2QYfsdEyzxzS08lSd1mH1spqesFew/4J+mpDJliZC/Cc4PaT6t5OXSQzloiOyx6JgcgFO8Yws8/wdqM6PnaEGUuI9NwmWnR0dAXYHHH0uIfgegAUT5LdMpNBYFUuF8RL2F4pn2bnwqE96ITyqY9bvPKOpa++2HAqF3GYmmgRvOsFHerHrXxa1qjQRd1vDQM3bDw=","authorEmailMD5":"15faa42c097aaf59e55537799b092575","authorUri":"","authorUserId":"disqus:alexzqwez","authorFallbackAvatar":"https://disqus.com/api/users/avatars/alexzqwez.jpg","message":"Hello Stephen - can you explain difference between classic Semaphore in Win32API and SemaphoreSlim. I understand that SemaphoreSlim use only locally and this is not kernel object in OS. May be you know how it work internally and what is it ? And what about speed ?","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2016-06-06T16:06:22Z","timestamp":1465229182},{"_id":"bd874324-db86-3a51-83f3-d5b68dac9d34","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Semaphore is a wait handle (OS kernel object) that supports cross-thread and cross-process coordination.\r\n\r\nSemaphoreSlim is a faster implementation that will fall back on a lazily-constructed wait handle (OS kernel object) if necessary. It is only for cross-thread use and does not support cross-process coordination. SemaphoreSlim also has been enhanced to allow asynchronous coordination (WaitAsync).\r\n\r\nMore here: [https://msdn.microsoft.com/en-us/library/z6zx288a(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/z6zx288a(v=vs.110).aspx)","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"a1b12729-eea3-3b67-b836-e2266ee8f745","date":"2016-06-06T19:35:21Z","timestamp":1465241721},{"_id":"688db17b-32a4-3478-862c-fe2eb09c28b4","authorName":"Doron Grinzaig","authorEmailEncrypted":"lKQhZ7ylpt9fjZ+QX8I5sVKgaHcYhG0CjQJhPgo+Y3ut2l/5vEtv8lhlpTv3S44Zl3QsHNesvQxU9oukgAZH6kEVRh53+2OZrDZEUlvvg9bH5ETO5X4JzitQwyv1g03duvupI3j6EzV6QSSZHeV9uM/JL7DX9LLGmkj78g5/tXv/FsKIBWD0Ht9sv1/H+4NtGMq0g1mm27iGqmfXxcnQi6AxZcJ72jtGrW3InoAXm12/k/c9ykdTh8M0koGeBina5xzk4Fjo94cvZLaVEkMHtGGARq6r/r21TxfB9N/b3cJWF+fQiFB25ophFG0TGUBOIuPQcx4l3Vta1QgxV60wa6yAdDNxx9JmShj5m3bfcHMUxZsDjns36MEj9ngL/d24tyEEhcqxPvB1z6qvlA69v0wajh2P9aaN3b+VSUFIKQLPPMNNYRVSyeDrB38yds249Q/YLvQQkSSKZv+DCXlTH3HcFIo7+tXI90sgIommAoUovCQcs3Q0xfCUgLf5dEeXuAhvhUbcHAV6Vm4DnQeuDXnw6IrYMg80IGR4RuyOc1IQnZUBduL1edpN0BM46eAowNRmVbgOj/OAUxCVVNS+HYUNRQG53+/YDIZ8JWEPeyCb9A46HgGIIaWIvyfXGaravielcC0gqdBlIWDxFvOkDKdW7GB5UxJUwnf/iMJZcMk=","authorEmailMD5":"02b2b843388c866cab51a735f817b291","authorUri":"","authorUserId":"disqus:dorongrinzaig","authorFallbackAvatar":"","message":"\"In some cases, ASP.NET can detect this and notify your code that the request is no longer necessary\" can you share some links about it? Thanks!","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"c3df7ebb-e0d1-3821-8e21-098527068cb4","date":"2016-07-31T16:22:05Z","timestamp":1469982125},{"_id":"0455c565-1a4f-368c-b2e9-79c58e12c58c","authorName":"Doron Grinzaig","authorEmailEncrypted":"Q0tJzxJjXy1nOMxCVuo5HprHQlr2bRl1/aAsyqTdV8QqHZnHrCaeKOA8Em1WCudGdh8bbU6zrCeK/WHUyucnQy52umfKIhN2jMdKe8CinAosknCcYTDLWe5npJvtomxoOYIT3qsng3RtgqMY8vACsGwywSUyRUvfiUVQNLGno4aESPnqHvRo9IRIBxldCVAMto+R/Cn8hKTR34MqH/D3O/glVczavG1WliLGDjATZcH8hGx/W+mjDQvW8Sg6OKvuLE+aLj3WkxobJWclGu4yWHL1lrrwKZ+xw0d5ONiGocz+wf0iFP3Voscp820+ZeI5yiCqJOsnaHre3EXzhyQiLFTA8bfhRrK5bSciZrnNxNayillrfpWpFmmAapbVBXLAEQB9DFIwT2yMH36KKp9/hc4G/huAYjL1cM7cIjen5UqX8HQA/5zg99ieaezdEViPUHhqpe2ERmviw0LxnU/r+wRzCnR388en1Ar71tRVTIuyEhabgx9MHlJ9+4VPWZjZftRB84i9d4w2wL1XAay+KmtALxDUI6KFs782JWrv08bey725SM80Zr3pSn0AqucBche+MSSDmscbgzmexOH2k3U946I1rYF0sdycGfMOIOk3bYYX5XJb+bubGPzkoBy60bTg+oh/OuFNfr7K3DJHVVo/ZnutqTRzwDa9aZpHxOc=","authorEmailMD5":"02b2b843388c866cab51a735f817b291","authorUri":"","authorUserId":"disqus:dorongrinzaig","authorFallbackAvatar":"","message":"Thanks!","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"61a0bc8e-41a0-3052-a3fa-b58a74ce403f","date":"2016-08-01T10:36:25Z","timestamp":1470047785},{"_id":"61a0bc8e-41a0-3052-a3fa-b58a74ce403f","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"There isn't much written about it, but here's something: [https://msdn.microsoft.com/en-us/library/system.web.httpresponse.clientdisconnectedtoken(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.web.httpresponse.clientdisconnectedtoken(v=vs.110).aspx)","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"688db17b-32a4-3478-862c-fe2eb09c28b4","date":"2016-08-01T10:18:37Z","timestamp":1470046717},{"_id":"5055e0c7-b8af-3b9d-bbb1-d04812901d14","authorName":"ayman metwally","authorEmailEncrypted":"NeWyw7mQhbqVIvsqmNC68f0bc+HtLp+s3NH1L1GgDhoFidQlrSuOZ7PkNCjxv1qSCZXTzBFzR4e6ZCH6yn0+vcYI+lvsIavwDwmIwCWKyivyrAf2t6xLGyWRwnabypXCx0w+Mzdut0je7K4lSGKJ69HfOVFfE8yKBurPfdpRVjp5nLXnUKjXgxJrzMkqck6JoPk1J+N0H25I9Y9tD6WflYeS3rZ0HmvizXqN30nMNmFvZJ4IMczDeso6urK4+A9gLaf819Vi+1N1ii7iB7hj1PDf6jeEfXwAp94L47+40ckMhQXp57/pAFTqX4mkxx1pRIO7fJZXtVVEeFZrBlLni15WMtVvgLANpYWF5tzj7QtqTQdHSLKIsj01f2CI9nSYfDLw2bEKvkN6GaFdKRLXXQ8KVIh3AAcjC1swE/QMY6fLyE7+1jG4i6tsJnsmNrsdaSDR9QywImU6cW9U8OgJ3Xa7MryO1zTggyrkwKSlaPhihvgT9e+TwuBsowjTrqdQzlqji3s67tDfWD0j1JvHM3Pv/bwxKlHeir0/lnb1Zcf8j4fntDV2clAwwVrUiJWfRHIO+SEVzf1dxXzrD3lip2udX4fkrXFP4eyiuBIsPQgphlsPgVc3H6OPZs/AhdtIwLVjIkeEFdolZa45FV1v6V3qzyrQB+5nWN+vC2ZcQeA=","authorEmailMD5":"424e448aee11240309cca7b0023de2cb","authorUri":"","authorUserId":"disqus:ayman_metwally","authorFallbackAvatar":"","message":"Great article .. thanks.  \r\nCan we add the following solution?  \r\nUsing Self-Host so your ASP.NET app is under your control and no more IIS auto recycling. Then you can safely use Task.Run and all .Net async goodies?\r\n\r\nWhat do you think about that? Although I'm not sure how to self-host MVC and which version supports that.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2016-09-16T04:30:50Z","timestamp":1474000250},{"_id":"5a248b30-655f-313a-94a4-bdc1e070c8b9","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I would hesitate to take this approach, because I don't know how much of ASP.NET assumes that it *will* recycle occasionally. Also, (of course), this approach will still lose work when the recycle occurs at a higher level - like a power outage. For truly reliable code, you have to plan for (and even desire) system crashes.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"5055e0c7-b8af-3b9d-bbb1-d04812901d14","date":"2016-09-16T14:08:15Z","timestamp":1474034895},{"_id":"5c9ae958-30e2-3f38-8e5b-47e5e1704b8f","authorName":"ayman metwally","authorEmailEncrypted":"HQKH/f+4jbSrLvPt0cB0wwPaVZMia1b63N2KyzsMKFf6y3RlmFCgK+6u/pLiGFhI3PSjAhObC36XDC1MkQLZI3KJQCe7p8EKGglF0cRRpWCCeJwdyUEoSSgT6cnX+ekKrY/1SXHGBSETzxDvVILflya/FFNVqpzpviEowI2hSUaSFfhBT2t5cRk/PCSnBYOe55IZuEYyIknoptcIpGKvHeC1BMEqhJqLu0Roi3oRcgIaVqZDhL5oMVJgENUQPbiCH3gRQMUpC8s6//H8DiMLnqS8mw9cELk0rRtTGnsS6Chr1nnhbXBIBxhE8FucTNfS67Sn+pyJ+sKdbiraKy74DyO9537Z7DEnEQ8Qh81dcw+RFCEDcqNnbSlTM6tcKt1gmuN+zVvoprmn/8YxoNP6FfhMIcHXja4RXHHsEgGC/d3xDhHpyMT0BnOQ0bQKy+pg+3hAxYDfc4V0cGlMSEnw5u+fKrqoVDkMzBYsU+BTkoTNiogK7O87ZH2HdCxJVA93aIDj3oTiBA6UmNjAdI0v5+TxACIe2pWDY+mX0S+A6Xks3soZblFvcVOM3qSgArn6ncFgi+vayf37voHJU8qPQiDIhidywyMmJwySJjDs1ojV4HtjBBC2z0DE59BLB5a/Fp/JxG7f1MUIsfcbKuKTuhcgMFNnhOh/3zH3i8YmLHc=","authorEmailMD5":"424e448aee11240309cca7b0023de2cb","authorUri":"","authorUserId":"disqus:ayman_metwally","authorFallbackAvatar":"","message":"Thanks for replying .. I never thought about that risk (the ASP.NET assumption) .. such a valid consideration .. but this brings a new related thought about \"Self-Hosting\" in general (for Web API for example) .. would the same concern also be valid here? I mean to avoid any self-hosting for ASP.NET even for the Core version? What do you think about that as an expert?","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"5a248b30-655f-313a-94a4-bdc1e070c8b9","date":"2016-09-16T14:45:49Z","timestamp":1474037149},{"_id":"75230143-06cf-31d5-b40c-2b543141f1cd","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"The Core version is a complete re-write, with self-hosting scenarios in mind. The auto-recycling was originally put in place because synchronous requests were cancelled by thread aborts. In Core, thread aborts are not used, so recycling is not necessary. I *expect* recycling is not done by default on Core, but I don't know for sure.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"5c9ae958-30e2-3f38-8e5b-47e5e1704b8f","date":"2016-09-17T01:37:31Z","timestamp":1474076251},{"_id":"13c0fce2-57c0-3cf2-a89b-4916abcad358","authorName":"Vincent Gravel","authorEmailEncrypted":"ISOBOOQgUN3akQTpr8QnmOMuovMsKPrKrP73jhgvuxAjLsh6yErBUTPUGS2Mc1r2V5EnZ8BIlt3PK70qh/Cn87Rssk4+T9ItqL1f6I3KHIFCtKKigMaPCEaDmKcw0OH56RFtqNZn7MfUdkYRM+5k2ZyT6rbzBMxPm/Jss9DrnHA08+Q67cvGJB/fWbYwCr/1igPukvb+cGYktZlIDPZlyh93gFFlRdgXlrupWPxlq7jBplSO7nZu8dKXfhV976xBMbJQ3oIinGO80dAr58k9GQzzjluiWnwcBveMHxDhbzpgfr0XovfxbIWrZ85LS8p+ClJ9dXx11cX0rap30GK26SY/80p64lh8pl3KV2zWECLpc70VH7aijOmO+yS2Ma4Sf9Y67WUINcubClUCvrwTtQ2XqUeNCeOdtwRbS5YMC2Ru5gRCAUcmfKqCa8pGiSAVZlPnyECn/MEqW2qqN1NJ7RKexQUOVUJzFQ+E5RhOltY3JO0P10RahrXGHP5wwJXnj+o0KmGn/6N/oWXpOANOZ3yaADruWvncTwAIu00jeS4BwXSZeyRNwFzNZttXo+i8F44hhNHffQLGNb/DogMfYrDRVfdVm+nVySNfWEduw+OInLl9sq3WPevDD6qojnHRD3WlLsbHWVahbuML9DPX9365YdKwg+i402QL6eHdUps=","authorEmailMD5":"4e9d619f1a01bbb4f1c209dbbcad2498","authorUri":"","authorUserId":"disqus:vincent_gravel","authorFallbackAvatar":"https://disqus.com/api/users/avatars/vincent_gravel.jpg","message":"Hi, if in my case it's not quite a big deal that the Task mysteriously disappear or never gets to completion, is it fair to use Task.Run to fire and forget some work? I have a lot of small and quick tasks to fire and forget, will my web application scale well or I will run out of threads in my threadpool and then the following requests will have to wait until a thread is freed up? Does HangFire use a thread from the threadpool ?","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2016-10-08T04:14:50Z","timestamp":1475900090},{"_id":"3eecca4d-aca6-384e-89ef-d98f267d476f","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I'd still use `HostingEnvironment` instead of `Task.Run` - it's practically the same except the work is registered with ASP.NET. There's no reason *not* to do it.\r\n\r\nThe only way you can know for sure about scalability impact is to build a realistic test and measure it.\r\n\r\nI don't know if HangFire takes from the thread pool or not.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"13c0fce2-57c0-3cf2-a89b-4916abcad358","date":"2016-10-08T10:32:07Z","timestamp":1475922727},{"_id":"371baae1-f883-3de5-a5b2-602397bedda1","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"How would `DomainUnload` help you do fire-and-forget work reliably?","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"d5bb44c2-c017-3ebe-9b88-d6a1e85fee94","date":"2016-11-02T19:39:47Z","timestamp":1478115587},{"_id":"d5bb44c2-c017-3ebe-9b88-d6a1e85fee94","authorName":"Daniel Bezerra","authorEmailEncrypted":"mC3WvZ7xVN3wN9PzIsfN+aAlLQX0Xp1txe11Vrafo0p4zpZUw62K/3rfvORK8uizDdVVh1BXLskaoZl4Ozi+Jso+4809zmAVK1b2zENN8DpJPRSUBCmmOSQU1WHFyBxXJNObYb5nQ7fmK9Bf82VYcSt+7ZSV1TpscYUTCbMeOpkM/I4hvncOPWA/mCsNPTslmslWMwXkX2LM0ae2xcaLC78D60mWZ4dxVDJZHONXDnmQyY5+RYMOyDg2ZaPEOhh6tVOqRwJkgWOtSyNk32HEz+RRTZlrJ1zyiSDjH7tdN1GSuy7q3dei2ngDBrmEHV0vN9AzYbRAfZjHBUI0LPJepFz9DnSkNGFab+qbLLcjDhBq6UAvYGq4cTYoam1An/fYei5ZctGaxaC1PFOaEkYUjELnHbhl7A1QMT/Td+KSAJlrNpwScwgFFvt1hwJUm+lRFm8cW0ZyjvP/Sr1I8hPXl+w+a+lzPo4jIEaYsgiJ41lzlvqDWJVKzDfS9/mjy1HaA98S9YKhasvVYTri1hbXixlYJgFsLIW/AvM8NRBJ5hyAqF8umHYY9r1tSa+BRIBBQcBOKwrBptORJ+zHGA2WlTfKsD1XZkvpatUEa9Aj/HXk/jkpgxhqbP9opNYpAoGuTn5PP7nLuFgac0fQ+ZZe9KFLVcMRQr+UHXxee2k3TNI=","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Why not using the old simple 'AppDomain.CurrentDomain.DomainUnload' event?","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2016-11-02T18:53:56Z","timestamp":1478112836},{"_id":"d851d9c8-691e-3289-a483-407960d7d1a5","authorName":"Daniel Bezerra","authorEmailEncrypted":"CS5oe2CczFLCV510fJ25K+yMeP/upvoUOee095in4tlwiERn6VQ25DLxSrzFy14FnsCsd6YUIPpW962U3ZVunHjV6UjE0z4gvCsulUE27Mq4D7Jgj+YpoeX8/BTqqs18sI/Weg5bJQiiTRzLOD8AhoLgpLWJssU9aBgUbm6qiCghH9S2ysVafOS5siqWlN62/uGdS0TVtAy+hJyj7Uxlzz1BaI8928io0MiVxqdG+3zTBHYvoiaM/f2V1I5+0VRKcxUkNz4Y0Mb/fMSfbaMwqXYJB8cV6OFTUhQIZG1WEzOPvgekkhKkG6f5Flamfg/i2bBQOwh/5OT9Vaa1+R2wYwO8D3Yt6fxXoaTaS4hmJpsts+Ebv0qvCgnAOLDUfaoaYnF7E4kLtLiIXvdAUu41BPl5Y6mndxzvVkfMcVNMZenfe+rGcr+Q8Nu+5dOUk/+ryFfrFJgDeHAAWNR7Ts5As8ZHT8MAtcCw4p1WfVrDPahHTFOrR7dJGRuSVVKTDJpxFIBh/WOaji+KavskQzhvAVG0DlMcq8E5mkVkvUPSv4O8+gZ0b41sjHQ22rIGcoejf6mHUi0Z7NyIr0mbq8vp93Tguk7GNIfP4ki3pdTAB55nMSzLZtA25nVwsO2Yte4K+YfvHdaHrSoY0ZuR64vuDoUSEtJE2k7ubhzkKbX0QtA=","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"When you are ready to start your background work, which can be at any time, you subscribe to the 'DomainUnload' event, then you just throw the work onto a background thread. Inside the event handler you make sure the background work has stopped before leaving the handler.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"371baae1-f883-3de5-a5b2-602397bedda1","date":"2016-11-02T19:56:06Z","timestamp":1478116566},{"_id":"c01c4ac1-bdbe-32e4-b335-3ced2b3c4088","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"I suspect that there's a maximum time you could block the `DomainUnload` event before ASP.NET escalates to recycling the entire process. So, it's roughly as reliable as HostingEnvironment.QueueBackgroundWorkItem or IRegisteredObject; not as reliable as Hangfire or a distributed architecture.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"d851d9c8-691e-3289-a483-407960d7d1a5","date":"2016-11-03T13:31:08Z","timestamp":1478179868},{"_id":"47a7f61e-79d0-3f9c-82bd-f97e8868d0b1","authorName":"Daniel Bezerra","authorEmailEncrypted":"fd+X8Lry4lNHrdqg5goCsCKbndUGGyAcBh+0p1KWhkuSZGSIpeRoTJk7Lp/6S3g4X8jqdvrmArM+HZECFtJEnw1S3hPx4hFTnCXyFCSQk9jReuMFxVbPHfM1p84bkBPT4X+aOrFZTt4TV0yQtGpbbVwMDIKYDp1WTg0T5pNaPy8ut/npRK5ii/16YjwwvYywGVnwN3WnK0qm2nuhAfEYCyrCPRe58aPe8WT82aFCSSpugy1x+A4V1gxDRXyktcdD1zxnDElDcsvlGWh8F0XS0d3rJsj+k+bexDPPvcNk8eIlfsi0LQLW6taT6Hf8y7ELosa2mvmKUQzPSGEr5Rxaoim4Lp6N4e2jjc8O3TZcD+D9/xunITYgZFT0Dz6Hz0aStPrQofSJlicRuKwaUxxFBJrLIyp3hQYY8nJaET8cKyaNJM1Iefd3Lwpp+gVrnsEON+oFnJsuJwjohhrVEB9mSNn7Z4RuSNMz9SHMjKqdE23/NlbD4iepmbd+x56zC+5SuUCTYfKWcJJC8NrR+NCX/usfGDsgSnXkfAub2A9YbhnvjvmUUQvmkOtt+K9QBkN2/6X5q3uPmKCS8xgqwuA1djaYzRe4BFKJOwanHrxlqcBgmJcQyl0c1ZQTZSoYbUo/rDpRGsjDyWp1aJvx+IaDwW0aUac0VTUodvSb3ZtTEPo=","authorEmailMD5":"","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"One vantage of the 'DomainUnload' event is that it is independent of the host application. Using this approach, your assembly could be hosted by an application not necessarily related to ASP.NET, for example. Also, it is available since .NET 1.1 out of the box; it is very cheap.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"c01c4ac1-bdbe-32e4-b335-3ced2b3c4088","date":"2016-11-04T01:53:39Z","timestamp":1478224419},{"_id":"33bb7ef5-630e-3135-b0ce-1982cba051d3","authorName":"Vincent Gravel","authorEmailEncrypted":"EDifi8PruQgVkQah1ntv0stML16XDG7zC6MDEcWMJOSWbY3WP6sbul/WExw62P1OmDzqA1+x4Jx+g4QXMm6cf4X3sMg8fC5PzO+shCX9yxjdx0nef1fWrmkHi0hweVMkLkzXleGZjC3GSlnuFb8ak8dULseD2VuJKGQ/lUfZmpxYkM/xbjpa3y/BjIOwSbuVQB8fN+SEvVfRBtdlv7FwWpkMEBbDYcZq9lrwM3xdK/CqGqHaCeTjI/YGH0CN6gj/e3YNXReCQyISMhzulnPhFxTz22flzu5bYlKqZgOZN97e54+yGzhiYR6CjiWoXlkT8md/rnOJVU89CsNOJD/WHFZX3Oghy3vHUaWRVUwO94g5n5HJANbyKPx1+B7/3pkxKfQbIAblJxVF+OXf06PeY7nXlilohffujDgWRwfslFacnMfF+1evQycjlNxkSHBXFVndI9Tx1YF5T66ewloiwaNqr6xyLvv0VGeKi0Dt4Kyb2G+N34TZNq5Nu7glR+aFd9cJvrVCS4zAmoQDMHzfhYdtCMoG8mey4dyGbcmJJrNRt79qTxyRkzCl/wfB3sauc84XaXo1zwyyj6QK9qK/wRMWiPA7ELTwsN2nvDbM5D6OvEAn1L4+QargcxRmCTw2Du/c/nPFCvuixb0TcgxfvzEpOO3Aix/vsm/nfBThJ9k=","authorEmailMD5":"4e9d619f1a01bbb4f1c209dbbcad2498","authorUri":"","authorUserId":"disqus:vincent_gravel","authorFallbackAvatar":"https://disqus.com/api/users/avatars/vincent_gravel.jpg","message":"Hi,\r\n\r\nWhat would happen if I fire and forget a task like that :\r\n\r\nHostingEnvironment.QueueBackgroundWorkItem(async cancellationToken =>  \r\n{  \r\n await CallWebServerAsync();  \r\n});\r\n\r\nWill it release the thread used by QueueBackgroundWorkItem while calling the web server so the thread can serve other requests? With a web application in .Net\r\n\r\n(By the way that you so much for your blog, it's always open on one of my monitor, it helps me so much)","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2016-11-30T14:30:27Z","timestamp":1480516227},{"_id":"8227901e-c6e2-36e9-9b8b-a2ebe21cba42","authorName":"David Fowler","authorEmailEncrypted":"fjvJCJkNnnxWASpZYG2jFB9MlAd01RqfO66kYFvt4pkFW1+PXj1RYn6kz6lIeCghEDwsRuPFwDTBQwhRpH8AgsOpopbjPbix0hHew2kaRHZkGxcljTQNZwJ6Fl0ypiT0Z4b/JYg+qYt3sLT4LozwCZ4toMMNSemKfoxR+7Ajdu4MfzPXldjlUYikFv9lujZ0O18GOW3VTYKX+1C2cA0JevhWxHmlsaETfW5y+YytT6smeJpUorH6hYB4wR0+4JIAUrwFA44YuSnjVBFYuY6gkmZB13lWakHyzOj4CgQ4ZLldRKO6B8aMNPvFZWsFn9CbYKI23nKkoEMX75w4NQOoowI7vnhmBuadxZW2nYE2ZBalALaCel0+zZNnNQCyzjSnTIwiJYF5I45OzenxLbgqZ/PHycK3jcXiKBDwFnjlrXM3ezO9IaN35lXxs666rH1o/1VQEON3TynVN5kYX52n36lZFyBI8hjUpPrDcUGHBkcfakWuNdDNZl+0ykGCWKDPbIUDO+XF8PbJNSvkrN28BPhLW3PbKmkNi/8Xd8IDC6H9aTr111MdWDTATv4Mp0MhgAh+xQz5QrfBCv1V0yS2KhtT9zpZASK+kWnk8A+ryQWlTm9pCPNvDJd5FtXDftdAp7ae9OCLN8fenVKM43u1p/G2sAjLHQwKSxTYZcvCDoU=","authorEmailMD5":"1fe64ebb176498be5f73ab51986c6b7b","authorUri":"","authorUserId":"disqus:davidfowl","authorFallbackAvatar":"https://disqus.com/api/users/avatars/davidfowl.jpg","message":"By the time the domain unload callback is called, you might not have access to the same objects you would have if you handled IRegisteredObject.Stop (like an ASP.NET object your app might need access to).","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"47a7f61e-79d0-3f9c-82bd-f97e8868d0b1","date":"2016-12-03T11:09:10Z","timestamp":1480763350},{"_id":"a30bc40d-e584-323f-a69b-f09629827b1d","authorName":"David Fowler","authorEmailEncrypted":"Xin6I14FyxtabEzKafVlnR7QV1tHjG8Imp1tekxPGHS2BzXNEq72ndMJBCaot0HwHycXhTRfdX4hosniU7sUTB9gU3jcObFbydswDcYuDO+socC8aCbtZwVEYSsG95/QSCvtcphb1j0MHPaxpcawvGiQmLNfrNba7gz7J0QD2WBXbPevcimQ6v3MMB4af0LR3Md2FOD6D3txulZPRzQinSdsUFId2a+B0eMEsLes/2LEm8e48ibwHbxtJbmztDt0d8kGMfnBaLdkQ81rWcgJohUtEu/5ATKO3alGuujKssjOnZF3yzhe8f/cfSfjdTTa/46I0qb2eONGsw2tlbGo5hUO8qTOINjqo4uryiz95njEGvAzHu1fmg9nilyOH8SKyQwX55E3T5bFZ3f0he0829gU25Ha5zgFDsC3xEbMhYIiZs8OkcGMUMTRtrs44hgmun6m4tB3LRlx9HhaI6dQnJLGQLSGWkiDiiGgAd1Ho9IrwWp9aNm9z+8SQTQMlQoqjo4j0gBV+qbWInHgBgz30dxRj6g9NcQYBnwi63H8vd2dOUFAJN6Rr4GJuMjcRlhePl+L5WfDlGMoCGGjcHOFrY0Oxr22k5txEy3bfEB/0ZDc79m6MEVOkhFjF76JcYdsxJwZ58oRIeioufzbIvBBCSjgSUELB7iLqREdBiXV6rg=","authorEmailMD5":"1fe64ebb176498be5f73ab51986c6b7b","authorUri":"","authorUserId":"disqus:davidfowl","authorFallbackAvatar":"https://disqus.com/api/users/avatars/davidfowl.jpg","message":"It's really about the hosting environment. These same primitives exist in ASP.NET Core in different forms but the same ideas are all relevant. If the environment hosting ASP.NET Core decides to shutdown, similar components will fire events so user code can handle them. ASP.NET Core, even when self hosted behind the ASP.NET Core IIS module can still receive shutdown events from IIS.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"75230143-06cf-31d5-b40c-2b543141f1cd","date":"2016-12-03T11:12:25Z","timestamp":1480763545},{"_id":"432c4404-5c52-3dfe-9b00-ee3dfc7b43d8","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Yes, it would. Async/await works here just like it works with a regular thread pool.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"b067bfdb-a477-3e60-b4ce-e1dad9045074","date":"2016-12-05T14:15:36Z","timestamp":1480947336},{"_id":"b067bfdb-a477-3e60-b4ce-e1dad9045074","authorName":"Vincent Gravel","authorEmailEncrypted":"KuyQQQEX2rqnQCQZLlLIHHDe5pss2O88PaMLhx3VYTztklM9mHvpyJQRGhQ45brpvBD7GkZOZQx+XSfNUksZJJQ5nxWsyoVjINniCXB8lvtgbThOLbc9Di2GxVjQyfVQAwjzXi2yZbcpuwO3FggcQhPhaeYTOL9DOEqQ01rH9pRszUrAH0T+CEUAKp4QE4vIV5V5B5U2UKYQi6zxvg2NOp4CEp6qX6+69Diydhb15PrfjS1Z6irLwGbB7vwy3LOAZ6SHB6E57PhYdnz3k7JQFiMeYJly9QWvWR0jS3ZqRfTLXnVLwVq6l74bVFSzl9Q8R8tPxSOTCM2nDaz73pVFBXonTLtYQ+AMK9ejwFZ8otemj5RYUkdp7Vmt5MwmCQU4Lq+ZQTdOoW3hKEDqhqcZ6X9J9Y94FGyAqL0GggXAEf/uEh6NS2JYzt+5STRkSLd+8Anh2wX/ACvIBA+iCpnRDc2G/4Q4dgJ2OQAAm/9PcApF/cdBpSGSaPaqE0rbKDGNvQNDNvpLrS4uPDRY/9Zi3519C+GTqKxf7yqh1HKEAQ3qoueMFftALM1PwmSSccbzImuhlQRJgxHt9ZsWoixdEAcCNdj1GXSLONjkGlrJMMp5Mc+kRCCfG8BJHt4qKh9CmdQLH6aaufkLj4LAYtu0GaZko5V9foxg5upYSBW+e48=","authorEmailMD5":"4e9d619f1a01bbb4f1c209dbbcad2498","authorUri":"","authorUserId":"disqus:vincent_gravel","authorFallbackAvatar":"https://disqus.com/api/users/avatars/vincent_gravel.jpg","message":"Sorry for bothering you,\r\n\r\nWhat would happen if I fire and forget a task like you said and I await a call inside that task ?  \r\nHostingEnvironment.QueueBackgroundWorkItem(async cancellationToken =>  \r\n{  \r\nawait CallWebServerAsync();  \r\n});  \r\nWill it release the thread used by QueueBackgroundWorkItem while calling the web server so the thread can serve other requests? With a web application in .Net","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"3eecca4d-aca6-384e-89ef-d98f267d476f","date":"2016-12-05T03:35:18Z","timestamp":1480908918},{"_id":"178c2a89-bebc-35f9-a24e-86b4ab3f6f3c","authorName":"Igor Kondrasovas","authorEmailEncrypted":"EbijVS1saOIozznzbmF8Ko3QAIl3OkjA9CsJXxhGHSceWvKUevjjyZ2O/MlgfZOVtMk+v9nNQHXZ5YEDIq4NX4NcDEYrnocLEU9gnKCZcdqWvKWzzwbV8hTYvsppc0Ma1qxmlndZ2/VK4TW5KlhQuagfoFUhxT4Iz2YeRk0m7U1mnnQb9ElzzhVudzGbsMrhAM4ZFyM6i3Lfj1ejjzNUERqNyaYniW3lEAJMgtNT0pEUxbCeFS4a/qLO+1P3aWSwZgB97sHY8fZ9c03n2tPmZ3VpslRMX44HG1f/Wyj7vV2yf2ns05k8YMAJkJlg6Mwo6LIz4deGEmFJHBbhGyiI8NUoNGQcCall5HGuN6L9/92oT/k0YNUJwBL/BEDKIQlUNdFY8xWRb9EFN6cHCDwxXW2jZEe/K89B7myVKkZU9NcK09i3aX4wT4JSs0neBSoFDhuA1tSEDhqwaeD0qoCSq54SPtp5yYYiicm2Ys+ixGFmcHj4TZhH+JNO+zg6iYPqhtFHUfznFN/YTk5/a1vEN4gXjPcvHVFKQ9LvfFkUW3Hm85r3PNRnJnpHUPJdpzocno4eFm44bAFEGTFL8WMv+M2sO5gly0H4KcWX66f+n/Pa2IT6YFUMcaUerPoGpcGVdUGpDRdz5jVPrrKY/+u6jtkeuDboXOS98gpVc46uFmw=","authorEmailMD5":"86121edaf76dad98d4a2a7ba979e4f38","authorUri":"http://www.otimizenesting.com","authorUserId":"disqus:disqus_7CeRgmnYkL","authorFallbackAvatar":"https://disqus.com/api/users/avatars/disqus_7CeRgmnYkL.jpg","message":"Thank you for the great post!\r\n\r\nUsing a distributed architecture, where the background work is performed by a windows service running in a virtual machine and listening to Azure queued messages, how can I notify the clients (web browser) when the job is finished?\r\n\r\nI was thinking about SignalR, but I am not sure if the notification should be sent by the background work directly to clients. Or maybe the background work could callback a web api and then this api methos would use signalr to comunicate with clients.\r\n\r\nWhat approach do you think its best?\r\n\r\nThank you,\r\n\r\nIgor","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2017-05-26T09:51:59Z","timestamp":1495792319},{"_id":"79819145-f385-3670-aa88-3e0aa2049d27","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Good question; I was just looking into various solutions myself yesterday...\r\n\r\nOne common approach is to use SignalR, e.g., a Message Bus with a SignalR receiver that \"reflects\" the Message Bus messages to HTTP clients. I haven't heard of people using a WebAPI endpoint for the *backend* to hit, but there's no reason why it wouldn't work.\r\n\r\nIf your work is more permanent in nature as opposed to transient, then you can also consider polling. Polling has a bad rap, but it's appropriate for a lot of use cases and - depending on what your app does - can also scale much further than an actual bus. There are some big names in distributed computing that swear by polling.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"178c2a89-bebc-35f9-a24e-86b4ab3f6f3c","date":"2017-05-26T12:39:57Z","timestamp":1495802397},{"_id":"f5c4b9fe-7f0d-3009-a4d5-f6fa014d8cce","authorName":"Bryan Martin","authorEmailEncrypted":"tEG9+vIiukUwhc2fcQIWPCrPISnWDsICBMjQwuzsXtVlwmD7xNkVFyfzkjyYI3VhavIjs8am76taZsi11tjjRJns4+ZZjuIE0mDOTTJNaku+bpC3UTXCq2Jt7kGQYZcub8I7fOorFOkOTbWd4j04zZo53n4h94+73EaCTKoyZOATFO1nGIleRB5T99/kuWUNTpsE82DYsfMEnzPjIYY+ZsocrzOpPYS2TO8QayzSjSBsNDZyLZzYbi773hWN+BSnXjtVWkbtxfbvGdP+2heDHcr7xAf9a8Gwf76PnH2U2pJZdhiech5Xmv7r2/a6BOHPRB+EbUITWpCC6QsFu6uXIGoWICFxcQV7g2CcznrYQKPoKt/djXYyNGCp5NUUOu720oTcNBYxUcQuXUVgfCkvV/E0c61NTA4SsSzWc9z197YZr8GHtABDXthsOHPZkINxHfiaYbx6AiBRJ6HBh6accZw5+azGgXpAKNY2c9+h1ad/H4a+N1BUcYvkis00F8RmxPGPzaVlkl7uHRQZozDdWhgFKwLaDa1yUhZiDihMompqfdal8l/Ie6jwjpYgs3kKHLHJWhlZlddIe3Ejh2E7bzOAHMWuEePAeKnIz/NOVNaET26aF20lHsu21l3qa+VZZcLv9oyPcUrW/N9g6Z27jmAonpFXYsEjgWouux8kDNo=","authorEmailMD5":"7a543c72807ab80eb69ca69ec8417ac2","authorUri":"","authorUserId":"disqus:disqus_gzcXLIqYXy","authorFallbackAvatar":"","message":"Great post. It was the basis of some research I was tasked (pun) at work. For QBWI, based on this link, ASP.NET will wait up to 90 seconds. But even that was misleading.  \r\n[https://blogs.msdn.microsoft.com/webdev/2014/06/04/queuebackgroundworkitem-to-reliably-schedule-and-run-background-processes-in-asp-net/](https://blogs.msdn.microsoft.com/webdev/2014/06/04/queuebackgroundworkitem-to-reliably-schedule-and-run-background-processes-in-asp-net/)","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2017-07-26T21:31:29Z","timestamp":1501104689},{"_id":"5fedfc9e-3e60-3c43-953d-f46291b0eb95","authorName":"Matheswaran Sagadevan","authorEmailEncrypted":"lyYYE2eWGlpRmEQr7aSfXzJrLrdYoJ1nSrUZ3Z0tmiC/Drkt8KCtfP0E/zwtsKjY4x6na7HfcCPZyZmGBOMGNysSTVSQ7xVE+4xfmsVKpViXb3gnwbIL7exuygfybkWy8LaX8NRXkYdG/uqjmnzpMgu6GYICKWB118yIe9Hd39IZlTlnxrLNkQ0hn9eMwdJienVZh4cKknYZDIY/C58hpGv8jcpLxm/zFlEgL0izI+J49fXOLXoBJm7Ccl4j9Q3YbGIeHh7ph734Mu7OADO2/l5j8Yj/n1p5YPPRuBk7Tpm1t4Eg6WDPWnRix2hU9mbZ4WpNHL7BaGlORH3z8xCaf6CkUh1w1jcilQufJahNE3rtIo2bGrhUbbsTvcW9Fa3MrwjlP4gfCvBqG7HqhDJatyM0uksJr8I0s8igbZeQVI5l6UPA1dnDc31sX5iZ7ZseBQ1zVcocCgz0BeuJzyYJx0JM1WMTsKZcXm7qUDhJwAPGCX6ozDULUA5NzBXMfzMNOlk3Xh5a+hm9BMCzJBi4BHpQkDXNCggzdumrECpivS7FbwHh+NnQHPU5K6rgI+i7e+ldU+zVvfLeJajmLOHJjJrD0tXerBn/S3biCdpL8VXH/3N3sMQVVNfTu3xdktUC/Vx0Y8r3BULbOXn2skBm4lLg3Oxs4CdSSX3tInBU7fs=","authorEmailMD5":"23c2bd3f80d190be6cec9fe4ece228ad","authorUri":"","authorUserId":"disqus:matheswaransagadevan","authorFallbackAvatar":"","message":"Hello,  \r\nThis is one of the greatest post i have ever reading worth. Thanks a ton for this.\r\n\r\nIn my project, there is need for fire & forget call from our webapi to other project webapi, and these above I have chosen the IRegisteredObject and I have used your nuget from [https://github.com/StephenCleary/AspNetBackgroundTasks](https://github.com/StephenCleary/AspNetBackgroundTasks) here.\r\n\r\nThe reason why I have chosen is,  \r\nto go with Queues, Hangfire or other distributed way, we need project level agreements as we are following SOA. we are the consumer, so the provider should be reading our message if we put into the queue. So this will take more time from business perspective.   \r\nAs of now I have chosen your nuget with IRegisteredObject as i also need error logging mechanism which may not be possible with solution 2 above.\r\n\r\nThe code perfectly works in our qualification environment. But when it goes into Pre-production environemnt which load balanced, there i can see the 401 unauthorized error. I do not know why?\r\n\r\nDo you have any idea in this regards,? this is very urgent.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2017-09-28T13:56:36Z","timestamp":1506606996},{"_id":"7f832460-446f-322b-9fcd-59936615714a","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Regarding logging, QBWI will log exceptions automatically. My AspNetBackgroundTasks will not; you'd have to add your own exception catching and logging code to whatever delegate you pass to Run.\r\n\r\nA 401 error showing up in a load-balanced environment is usually due to keeping session state in-memory instead of in distributed storage. It certainly wouldn't have anything to do with the type of background task technology you're using.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"5fedfc9e-3e60-3c43-953d-f46291b0eb95","date":"2017-09-28T21:57:14Z","timestamp":1506635834},{"_id":"12c58ddc-58ec-3fcf-802d-14f1d06e0452","authorName":"Matheswaran Sagadevan","authorEmailEncrypted":"Ysn/mzR0lMWUR5Zcrq/Lbg4yf6d88/6aAjzwpH6qGLM1QtUbOw1ccykUjCGhkrsnHRjqybPh7GmQirO9/4vhkaWwvm/MfCigKyJjKAzDsY+hhgT+5bObLHTB9yfVM7bGj3RKeoAu1TblD9wkNqqMLrm/fUqI80l3UC6TGPCmEpPn/uD1LLAegjHaJXn7gugzV6Al8IWEPmMecS2IT80vCgiR1RQPGEZU8cjyFta/x8d7Bkpa2KNHB6oWGLGdRN0Svese6ezXfexbAVbhkiBimCzPX3H5EKqEzLv7zNgQ+Ox6UPoBa46GtOXDPLYasCHIshOBKnv0OXc/sJ0EQRqmWIScfY0HqrsiclUn7AVez18zyfzWGmuHWyrUbc+5ux6HFtzZtqDgZoj/P9GTFV2YzmvVVDVcGLb41bw33RzHV6/VAxLtahPGWbaTf8LPpPTIC2/7DbOJ5GElobtqzgdXAvaEDTKOoy50+kWYiGJK8kyzxvW4eNzYxpFNWezEr3Deso1QfJtEdk9X7rZSeonRZCiw35n7DxVvBftxjp25M6/Hoff0ymS3keMfI9nOWJDuBTZs/p2FtdDUgnfKlEHJQ1yYbblPSL+V18y8mLuP7HEiQjY8mROfaa6u+en+ZKr+bfK+bc2Vnc1LHogyCCc8cKVivZZ7ErfNbgYlyIjphlo=","authorEmailMD5":"23c2bd3f80d190be6cec9fe4ece228ad","authorUri":"","authorUserId":"disqus:matheswaransagadevan","authorFallbackAvatar":"","message":"lot of Thanks again.  \r\ntwo more questions:  \r\n1) QBWI - if I implement this where can i see the logs and exceptions ?  \r\n2) Regarding the 401, I found this is not because of Load balanced. Actually for our application we use only the IIS-Windows authentication. but it seems the background task expects the Anonymous authentication. Because When I enabled Anonymous authentication, my background task are run successfully, but if disable and just keeping the windows authentication, it gives 401.  \r\nKindly help me.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"7f832460-446f-322b-9fcd-59936615714a","date":"2017-09-29T09:16:25Z","timestamp":1506676585},{"_id":"8889074b-e094-322c-9740-7414dac794ad","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"1) I'm not entirely sure. I think they just go into the web server logs, along with the standard request information. I've never used QBWI (or, for that matter, AspNetBackgroundTasks). I always choose a proper distributed architecture instead.  \r\n2) I'm not an authentication expert; I recommend you reduce the code to the smallest sample that reproduces the problem, and ask on Stack Overflow.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"12c58ddc-58ec-3fcf-802d-14f1d06e0452","date":"2017-09-29T13:13:35Z","timestamp":1506690815},{"_id":"6b75d485-f570-34a4-86ce-241c38913801","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Yes, it would. You can think of QBWI as a Task.Run that registers with the hosting environment.\r\n\r\nSo, it runs in a regular thread pool thread outside of a request context (just like Task.Run), but ASP.NET and IIS are actually aware of it and will try not to recycle your process as long as it's running (unlike Task.Run).\r\n\r\n(Sorry about the delayed reply; Disqus has been sending a lot of comments to spam and I just noticed today)","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"33bb7ef5-630e-3135-b0ce-1982cba051d3","date":"2017-10-04T16:10:41Z","timestamp":1507133441},{"_id":"977dba87-4cbf-3c86-a939-e3ba5d2c2ce3","authorName":"Jeff","authorEmailEncrypted":"BABDo5pmGbr+KIVFn/OFW4wcdoWwVNJHQZ42/0gaO01wYGtz7ogSzXMIDz2hL2qqUbvBofEBOV3X8yiMlqnBDsUxWl9v93PZInznY8eRKQAX937oEt1oXXX4c9vYpc+9nX+ACb6mNPS9vCO1Dz/PulWIDXgKIDZDaSy2xaJOvTngCJ0HqebvUjPkBxEbL3h2E30umt8YRAWAWAxD2XMLFIuPbPULwgWzmrGiJcM9ZbZ/KjqSyuYP5bk4RyZI9e//xapb5k8Tci8xw3TF0Rej/iMWrll3hHQiVNPA1YaVh5qTN+Ppu2KWD+rOd3Ee2YHPCim6OcglXB0tUfk9VEfjaNCVWRbKqsmzFGnm0tueoKlZZY038d3Tsxr9AY26AFXc2qcLRPGCU6lIMUhtLpU0ZMJgW4uSZHWZ42aeShFn5Z5oDz79erwi2+WDRcnnwBpaRcbSnc04l+P2xmCKSlFBowN8IJLunngCHIm2LaPeg6ssGE6Gj8XycI8yXhmIEIb6BkfbyK6nqE5lAvyABoBjdIdNh2IN/D8TEe+tfokIWgqGjN5h5U2HFuNfVZ4dp8+9jE0bP0/qWGs5Cmm6tUFJVAFiTd1YH5pl0TGeJrp4m1mIyAQmkZnra97ZNTap4slzcchOXv4l2OVfNQpEBzY9s7ea2SiRqMyKedubHgi64ww=","authorEmailMD5":"dde3bf631a325497e9e1d211ae80dbcd","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"@stephen_cleary:disqus   \r\nThanks for your awesome blogs. I have a question, I am building a library and all callers may not be ASP .NET applications. Do you have a recommendation on fire and forget mechanism to do some task asynchonously and not block current thread?\r\n\r\nHere are some options:  \r\n1) ThreadPool.QueueUserWorkItem: Simplest approach but doesn't let me control how many threads/work items will be created and there is a risk of adding too many work items to pool (I am assuming number of threads will be controlled by CLR/OS). Also, the API I am calling inside the work item is a sync API and there are chances it can potentially hang and QueueUserWorkItem doesn't provide a timeout to kill/cancel the task if it is hung.  \r\n2) Task.Run: Provides a way to put a timeout on the operation but not sure if it puts a limit on number of threads that would be created in parallel with every Task.Run - can we create too many threads due to tons of Task.Run?  \r\n3) ActionBlock: Allows limiting number of concurrent requests through MaxDegreeOfParallelism if same ActionBlock is used for fire and forget but doesn't have a way to put a timeout and that puts the risk that task I'm running can get hung - same problem as outlined in #1.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2018-03-02T04:02:06Z","timestamp":1519963326},{"_id":"8b798499-b628-3d08-95e5-e2104bc10d66","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Since this is a library, then if at all possible, I would push the \"fire and forget\" part on your users. If you have a synchronous API, then your API should likewise be synchronous. Async-over-sync is generally an antipattern: [https://blogs.msdn.microsoft.com/pfxteam/2012/03/24/should-i-expose-asynchronous-wrappers-for-synchronous-methods/](https://blogs.msdn.microsoft.com/pfxteam/2012/03/24/should-i-expose-asynchronous-wrappers-for-synchronous-methods/)\r\n\r\nThat said, if you are sure you want to provide an async API for a sync operation (and in a fire-and-forget manner, no less!), then I would say:\r\n\r\nStrongly consider providing a \"done\" signal for your consumers. This blog post of mine covers problems with fire-and-forget on ASP.NET, but the same problems exist for any other host. If a Console app uses fire-and-forget, then it can't know when that work is done, so it doesn't know when to exit. If a UI app uses fire-and-forget, then it can't know when that work is done, so it doesn't know whether to prompt the user to wait. If a Win32 service uses fire-and-forget, then it can't know..., so it doesn't know if it should delay a Windows shutdown. Etc.\r\n\r\nRegarding your options, I would say that it depends on what kind of \"kill/cancel the task if it is hung\" behavior you need. Thread.Abort is dangerous (can easily corrupt application state); AppDomains are a bit cleaner (more difficult - but not impossible - to corrupt application state); but the best all-purpose \"kill\" solution is a separate process (impossible to corrupt application state). I once had to encapsulate a database driver into a separate process because it was so unstable it would crash our main app on a regular basis - not fun, but doable.\r\n\r\nBTW, Task.Run doesn't provide a way to timeout a task, at least not in the way you're thinking.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"977dba87-4cbf-3c86-a939-e3ba5d2c2ce3","date":"2018-03-04T03:15:24Z","timestamp":1520133324},{"_id":"1df10440-5e43-3ae3-914c-d4694f4093b7","authorName":"Jeff","authorEmailEncrypted":"aOfciOuERbXfrdE0NSKrB2MNt0THuJkl91B2OXgld63RKg7pWZShO1XqJsnsDDdX2GU/WdpyFHel49lcjKL90UWD4Eiy6KwYHV6VKs8Q0S4qujq84RgvB60fPMuk8cSBuLLRfC/ZHZc0Y9oHOsPN8QKOMJzRKrrQtt6jHT+K2R82n4o/eIohqJy2u26NgWJs2hwcsDU/Mu95FU5aOTuKtvoBs/IE3B7MrnCCB3Io45Mh1IQFRrHwYqClhRVqAN8vHwAZdSScz2ftryGRCU5zVBed06CvxxRq1e0QVdHzpBE4gnjvVjMP84gKe155VXm6fGY8JApUqmIsPoLTH978MFQUNFk1tIpogeEKIuEFodqyrx5SG9WvyqjTsO+cgh8n++MNCV+hKhSJeCvanjw+alMlxMpNnuuPB1gmXeRaPyEIezkCOVVQ7n8gAA7mZiBnnP5Sh3Nkj1AQTdWTKFMWDCfXfYXSBpTLE4lLTehtud5mE5ePUdDjGKccj075fKkBW4SabVWOmYQM+XedDxWbu4boKc5YS+zTk+RQj2Z2CZdod9L+X83hU6zk5DMzwO673LwkTHojdmdUJoJjPiOamZrLm5q4wcTXSoxcOs9BGytgReHJWotsxTnxdGrnUZF096l4XhiXVaMVYRHP+YpAYcWwUa6qr5+2cwv77UOyt1M=","authorEmailMD5":"bedfbecae9ad412ac942b195af154544","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks, I'm doing the refactoring and the actual background work can be encapsulated/done in a different process.\r\n\r\nBut, I still need to call the API to initiate async work from my low-level data abstraction library in such a way that the call is not blocking for my callers - this is avoid my library users deal with this complexity. How do I initiate the call from my library?\r\n\r\nDo you think ActionBlock is a good solution? It sounds like ActionBlock and QueueUserWorkItem provide similar functionality but ActionBlock provides the capability to limit the number of threads we will create and hence not impact the whole system if something wrong.\r\n\r\nAny advantages of using Task.Run over ActionBlock?","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"8b798499-b628-3d08-95e5-e2104bc10d66","date":"2018-03-05T07:46:21Z","timestamp":1520235981},{"_id":"57cda899-4c47-3892-bd9b-be5979cd9e68","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If you use a separate process, you can be treat it asynchronously (so no async-over-sync wrappers are necessary). If something goes wrong, terminate the process and you'll get guaranteed cleanup.\r\n\r\nQUWI is very low-level; I wouldn't recommend it at all in this case. Task.Run is a modern QUWI. ActionBlock is a higher-level abstraction; as you noted, you can limit the threads with it. But if you encapsulate the call in a separate process, that's what I would recommend.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"1df10440-5e43-3ae3-914c-d4694f4093b7","date":"2018-03-05T21:23:57Z","timestamp":1520285037},{"_id":"9374c12a-313d-392f-af7c-e9fceff89a3a","authorName":"Jeff","authorEmailEncrypted":"WyXdzLJDMZBtDapW9QpDfy5QB0sGX7Q8gtj2OwpzNx/33WtOMtBPH8n8DwVfCxcbdWw1x3UQb8ay71H9gqXEcADxU0CdahGs8bkYgJls+gGTyvra4Cy/s0Rz5fB/O9op1NtktTFK7Zrez9dkUbcKQonpfJRuArCK5TQJZms4h/GbQqdTeWArG+G5lND0JDfMCOzULZP05eAo0JsFbatVIfC4e8e4AiP4XeCG4icpmV9eMPHOOoDXaEpdjGrjm/qXJqJkq693J3ahhrXQi5UvZlJ1/0eS9JQ4yv/3uakPUxtgvFsfDkElNpdeSH2IWlmthGISb0ooGoYxN4u6dH/ajhGbk5Z50Cj2k7bwpv7vVWyngN2qWPVprKp93f89BdYerreaJK7pcEor6Wc25IrDOc7uMBQbtUWGC5blGd7Gq9xsepY7Fn986dDk8lR7WXhODJfl6Zg2/19gbH+efLsG1Cxk37xMV4YTTpi63fThboz7g8aOkLM5/I+b+MvO5/Vah2QCImSAXkc6d7bMBLPPXFnZF9rlYF+WtFR3Vsankt19NCMOiECcWH2QO1Dknbggg7bpI9Hs4iECI2Vg9wKcVCH07GIezQG7Oj9R9p0TlGnws31PElpfcJo7+KQ1KjfBmtNa6eHdYseiSwCt4L7kE+wSoTT8Z/TGS5ZJ6i9rV6M=","authorEmailMD5":"dde3bf631a325497e9e1d211ae80dbcd","authorUri":"","authorUserId":"","authorFallbackAvatar":"","message":"Thanks Stephen, I'm doing refactoring such that async work in separate process but I still didn't get how that will avoid async over sync wrappers. Let me take a step back and elaborate:  \r\n1) I have a data abstraction library that is caused by several calls, not all of them are ASP .NET  \r\n2) Async work is done in a separate process P2.\r\n\r\nHowever, from the sync API provided by my library in #1, I need to queue/schedule work using one of the 3 approaches (say ActionBlock) outlined above in such a way that my sync API caller in #1 is not blocked while the async work is done in #2. So, I am still scheduling some async work from a sync API in #1, the actual handling/heavy lifting of the work is happening in a separate process. However, to even make that cross-process call from my library in #1, I need to have some thread that makes the cross-process call . I don't want to pay the penalty of making a cross process call from my sync API from library in #1.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"57cda899-4c47-3892-bd9b-be5979cd9e68","date":"2018-03-08T04:51:20Z","timestamp":1520484680},{"_id":"e51b5f5e-dba0-36ab-bff4-30781b612fcb","authorName":"Admirador de Damas","authorEmailEncrypted":"IKeoafY0mAXyLNc19YX+Soa/0iTHVUHOAwuts7EDfLjU3qxSU1BdyZVlAHKDwHk0qJsnDkTIC32WtVcNUz/0CYJRq4cXILTv4vu5DxRlAziDum8skAjmYJ23iUWTFfLMkiLFnGA0oPChXzDOeumTk8aaQl/NAt2s6jpikOuFhI/c2O0+SYj6AuqihV4ufwqrYfhQLei2obf2Tuq0PAdCwTFv4LlJyzJul8a+h77Cr/2gPzjYamFin0WPntEFMMNED+VDdH3i29iujIjKc+Hu7/2NYbfOdqSKcUJr8AaNoUWFLx8OTaUtAOda7FsxNTgFjxX4Algr0HreHu90XwWsAKWkIiIihCwK/8AI2xFwtLv4tPnwQyWe368fKxkJUJnTnSlTfZgWsgIPwTlN5b3SikbdfE0rg2qm4sVqA0DJO9dh7RNJkcrfaf2crQsPLL1IbJPfiPrt6mRO0gie7dRQIsko/a3RLuoF7rryTjIJPQ1MaomLidCfqKW6n3NNx9OucYUcNTCINlFPfvRJ/a5g9utnXRfK1utDzFuzJWHDGnPRnFCzjKYei/qqJ11pZJhgKYWP4/3vofKL7lhLAvSwT8o1BSsvSqrJWcoA8coEhXSiw/6GeF2BmVEzavy1VpBnwxTxtR1IJNflWdr/n2nBeO+140i4K3lU3gHdmIRlBcw=","authorEmailMD5":"873dbd5fe8982d6380307a3d52e59b5d","authorUri":"","authorUserId":"disqus:admiradordedamas","authorFallbackAvatar":"https://disqus.com/api/users/avatars/admiradordedamas.jpg","message":"How use HANGFIRE in Windows Service, for communicate Website WebForms ASP.NET with HangFire, using Sql Server, with full source code real world sample and good patterns and practices? Maybe too using log4net, Nlog or Serilog and Exceptionless.\r\n\r\nHangfire Server not hosting in Website IIS, better in Windows Service - Console   \r\nPhil Haack wrote a great article on the dangers of recurring background tasks in ASP.NET\r\n\r\n[http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx/](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx/)","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"","date":"2018-03-10T12:33:00Z","timestamp":1520685180},{"_id":"18c0754b-d791-3a12-88e7-5f67eff4eafa","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"If you have a separate process, then that can act as a sync/async boundary. So your slave process can receive requests, do the work, and send the response, all synchronously; and the master process can send requests and receive responses asynchronously.\r\n\r\nIt's the same as a standard client/server scenario (where the asynchrony of the client is independent of the asynchrony of the server), just in this case there's only one client and they're both on the same box.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"9374c12a-313d-392f-af7c-e9fceff89a3a","date":"2018-03-15T15:01:04Z","timestamp":1521126064},{"_id":"5ab879d2-e127-37df-a211-71398404f840","authorName":"Stephen Cleary","authorEmailEncrypted":"","authorEmailMD5":"3db7b6e14d9da42751e4bab03bc4d034","authorUri":"https://stephencleary.com/","authorUserId":"","authorFallbackAvatar":"","message":"Sorry, I don't have any sample code for Hangfire. In fact, I've never used it.","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","replyTo":"e51b5f5e-dba0-36ab-bff4-30781b612fcb","date":"2018-03-15T15:01:48Z","timestamp":1521126108},{"_id":"21c98b90-4833-11ea-aa1f-e3aa3fdd1c82","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"b5bcd860-482a-11ea-aa1f-e3aa3fdd1c82","authorEmailEncrypted":"Pbm+f1UlQijPEqMod5FqciZBCDhVrSA3RHzpQFdEjANb9QQD4I6x3GKEUbOuF05ocCiufhJ1ceBI7DDDZAk/PTHQu0I3Ozs5Xur143/Vt9lhVXNhH0KKfPRRO3Lm3W/gQCja4sggykZ3mMNn+iq8v3fxJQq8WwgC4bvbqHYGaXS+ueQTvKdo4esqhyB8cP0qucJEpyBVmVmVqXDyuyGEtkx+EuorV0QgnEtFfi/7ZzuiOxqQg0mOnFB0p2DgbdpDOmYS1mbmCGa2i4BKwwIUgGaSDgNQHqv9xPlYwANF3EckCEkdKzukbXcmIDtMGByEoCGtEW/P2QBOd4PCwdj+8n61jhN8YoG6Xu2Cl+UFvWKIRuAh7XbS1XlZdHGCrZdkRYEuuzbeRf5qPts2uPZ8Fg25qjPV82nHuu6qSjjKjqg4gwkTqoIYWe2fsuCxOdcXSb6Hucz0OdNvBvH/5szaJW+RH70SwVCB7aRhq1jyG6sWbX0dNqfLD1HLY9xnCn6gR+M3a5mgzYHiJttl3uFJ/RaR5X5/kNJLz1dznhP0yIYnpCcycd0Jn5AZpvtTI/z5iXq6Bn9FVHrdLQlXyMPvbZD53HSHuMjZf8nLLHY9rCKMe0QlN8nFgzhlw0yFN5LtFi1+3pJjXQZmwRwwoVeWKN7B4HJvOAfUkqxmHnN/3NA=","authorEmailMD5":"dc0ec3e4dafd2207137ebe76d765b8b2","authorName":"Z","authorUri":"","message":"I mean reliable, but it is not critical piece of work. If Task.Run or QBWI should not be used in Asp.Net, what about HostedServices in Asp.net? Background tasks can be implemented as hosted services and I am curious if this is the reliable way how to implement  fire and forget on Asp.Net today (not critical work).","date":"2020-02-05T16:18:23.877Z"},{"_id":"2660c190-4820-11ea-aa1f-e3aa3fdd1c82","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"7d009c10-4810-11ea-aa1f-e3aa3fdd1c82","authorEmailEncrypted":"e92wuBKTOBmLJ/GsTCueHqbpfpMhzseZTpctuoOtBglq54iQNlq5jo9kwH50z5U0jQlY5mJn7IotFMgLq2diAqxR0VUyYfjhKHTkRuoeHpTUQ6wi5XVZF0sO7J73mwC/o8JDJX2dSABmtwA0zFmj3O9PMoo8D3Qsl6XUFT6ntaC5ky+G/vGr4lZ33BfD2omzwzhbOBwWqNRJXuyQDfO6kGlHKFfUoRlu3DVROhkwwpWGOZydinjjEIPXYsrxu+jHJ+A6DHS1BkcULKQJOaScOhuvhQLlO+AxeY9SfS498pbfqcDzRwHDqxwvv3HrJuDMjSftR4DdATJI69G3R0Xp/PVNHMUpdsb8uAWVadrqNqRnCC69LmXdWNryw8nKC3JaFDAgvelDm9nTE+TCeDxQFmw8s0gZtjPpGVtO/Qt9eZlgDc+rLdyxXEn4+juzJMFTyb5EkUDf6J1CF12nNVHGZPo4MpYS5Ec7aMt0ovYNurroyc7wlIu7u1o92hJMWXImOIcQo7gTYD5y/d8jtGwPpy2n0r5VYZwAoDoAAtO3Y+B9CGy/tRW7h4F9+LdM96wEE2cXMYMZGVIccWViuVGYEV/vtJOF3pDjq83wzxk/Vyop/chpKPJyfUV5dYc+9z7asJBRm7RQfGPISSQOvhJnj4UMFbC20jwmPdW5FjCJRmk=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"QBWI is a much lower-level method than `Task.Run`. I believe `Task.Run` uses QBWI internally.\r\n\r\nBoth of them run their delegate on a thread pool thread, and neither of them inform ASP.NET that they are using a thread.\r\n\r\nNeither of them should be used in ASP.NET apps.","date":"2020-02-05T14:02:31.170Z"},{"_id":"7d009c10-4810-11ea-aa1f-e3aa3fdd1c82","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"","authorEmailEncrypted":"tevougc6PBa55tjn1rmKoNno9zgLdpC6VRnt8VLRudRachaVFDureEJp6cKVfuvoU2o71LJcX72MD0XABsniHrjvTYyxlV3I2gK+GINyOZglx68L+Q9dxvN9KsLB/u4CkX1tUoq8qo9ATFPhpoJgaF71X0DRSLt5fv4Zc9meYWJdD8P2zJGO/Envi1NvuukHWX0QArhWYMggv1wN1a3AylxfCsjlC2VJwZ+4A+o3pXrYLMDGumJBbTiuillegOHEdU4On0xUFNUDvEsQ4cRfoudd2yclC/b6YnOvHULsnP0zENYWdtnwmfVqcjNvbBtdWPCeRO2sPOc2p0FsmolVYT6fW2lQXNMxwNTw7wvd5friskDfzg7Qv8nPEKFjOGjNu4KZOT6JftsRnkHsBKjKd2igWtjY34ub7tLQReUZdrxgKFuVDk1X36zpLhZD2siJXz9+vT8uO0Y91MwjWK6VRhOWUreHyFe1dlWUa252EOU6iN0QH15gZGCtujtg7lhtWSQV8wcnTaCCRz1nbMzb0wQWUhpyzo44L7GTvH6Kbc/+u9zRTsWg6Z1S2e6mQcvZdeKAfEkvvMFEfPXXIx/LUIXq9O0CReTuNScvkRSxjX9FWhgvsH9Q27KwA1PJQA/MAbueDNsO4jD+lHAUZsKbUsOYE3xbs6Wa7qLZqdGO4Ro=","authorEmailMD5":"dc0ec3e4dafd2207137ebe76d765b8b2","authorName":"Z","authorUri":"","message":"Hi Stephen. What is the difference between Task.Run and QBWI if we are talking about performance and heuristics.You said that The ASP.NET thread pool heuristics are thrown off by Task.Run “unexpectedly” borrowing a thread pool thread and the problem is also that .net doesn't know about it, so it can cause performance problem right? Does the same apply for QBWI? Does QBWI hurt performance and heuristics? Or QBWI somehow tell asp.net \"Hey, I will use this thread\". Thanks","date":"2020-02-05T12:10:24.540Z"},{"_id":"903c15d0-4828-11ea-aa1f-e3aa3fdd1c82","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"2660c190-4820-11ea-aa1f-e3aa3fdd1c82","authorEmailEncrypted":"OM3uXaN5Uda2pkXSvSCXzgF4GHP9vOTA+43KS27nAcvmveVXwJTsQdX4iY/ApkOw4jrAgu2+2n6GnRe16ndgbQOKm/2r3hbfuTyw/h/pLYelUTijT4Smh7igt4C9kl2bAXiCoiSaGfXMGvaeXLkvjLIAuPQzjXjYL9UC6N0A1UbfQTKYzWYFxxlGMGj1w2KL0nmlYboCxnGgm5W2Ew7HHZx+fHWdVb+RAiCC9qErpREKBE7trmWmHCRUY19DrANMPu0cxC2MCdcoLXFmCCmdpUDc+hi4Pci0fTwI1o6T8pvqg15rGTCFq/u/44citoKQVE2+38brps6R000O5d0bwP62N5KdzfT+kKK8Szc+FkIbeb5FMvavEJ1wZboeWAstB59fRYd9MrqF5bc4oA73POcIcUBlonNHLNB3tyOvVwI+5iZMh/bIP1IY2ykGVq7/sythoFGS1f0+i/OE1yPVtpPxxOa+bOvVMiwhwXYrDS4Ag3+UwQzFAHN4dqjwOXybotWCLDpcGdJfWpnb3H+5aEKtgQ6fMNPtys2Hsxx8cXPy70phgQ9l+lDmblfbVw6sRP6KRNQOdol4CMGlsT4wLXehlZA1aQ38gL5LTGmV+TrOVhPZ1m/UctLk6Lk452tBl2wX0stzKubzu2G0tCT8LjJjAPqKJOcStoQAonqF1Tw=","authorEmailMD5":"dc0ec3e4dafd2207137ebe76d765b8b2","authorName":"Z","authorUri":"","message":"Thanks for reply, this blog is always helpful. I have one more question. Is it ok to use IHostedServices for fire and forget tasks today? Maybe something like Queued background tasks from official Microsoft pages? Thanks again.","date":"2020-02-05T15:02:44.745Z"},{"_id":"94d5d980-4839-11ea-aa1f-e3aa3fdd1c82","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"21c98b90-4833-11ea-aa1f-e3aa3fdd1c82","authorEmailEncrypted":"OP30ny4rs8dVsSoUItdKCz054qKmpn/am4wKBLCio0SkQx1r822DjPKUNjfdf3rl/ll+cICSMSPrpFhGh99s/CLMIRKi+ZMfXb9dLtnpRRDUqQTjEjDipplF8L4JZ2d+0fFdGJsSD/FvNfXfpE4TqgjE0vS/AuiYCGCCpr0cMAi1YN4VI0xs0oOP8Ai6nD5Ihv8osMqsmHnm5OeWlwRc105EBUyoobXLyrMOtyNNYC7ZGkc6FdqZuVuEkpUW+UMYz85NaWjV6l96aXe9Y/lXbvYSRxt1+0SWYJJzm93TE6jsWjF7IC0/kvwPrUjyLAMdichEIV872gAboJXD2EY3ZRkR2I/cyucypPptXYk306OWJdRW2JfJUf0bJtSMqZm7j5tgvyRtU1INZTGO8v62/IoCGs1SKi/3ndU28VzZdbmBaqi6ESZuNXtcI6cBsVRxiclUqqDlNGoGZzLftX2Lqe3NheHTOX01sHxLrxxcZPtRFN7jZZiudDd3pWwQW4tjUN+gXDWJYKB8bxTTqSz2uBPtMU0Ds8WrttpfgPhQgJ+BiWmCS547zKTux4GYulz9e+Rs7ktpVyaYmzEZBjd1L+MGlTKnc/HlfQWK+lsB7RK5CyyR6iVVIrH8bYjWEK17J32dv4EHD8+csnjVYmRyllR32hAJAdLPDRfzub0dD1c=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"No in-memory queue can be reliable. The reliability comes from the reliable queue; an in-memory queue cannot be reliable.\r\n\r\nYou can run a background task in-process or as another process, but if you need reliability, then you need a reliable queue.","date":"2020-02-05T17:04:33.979Z"},{"_id":"b5bcd860-482a-11ea-aa1f-e3aa3fdd1c82","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"903c15d0-4828-11ea-aa1f-e3aa3fdd1c82","authorEmailEncrypted":"Iw2UEayIbCSminSOsI3QnYPTj5oStlqLOGBnG4gfOB1C2a1HyZVhBqu/s6GLC+Js4WSwuFlovBcyNVGe52fDHSHLMU5P81gin1bozWsjC9CArnGeJd/aln6he9Z9UoVdugtvffBYCoxPZe075DSxrWe2M54hqTLWRUKqTd0LERK7N12VkkZpeEv4T+Cviu6SJJyAShTG+3FEnA/h8AT7QreuiLGquCCtbCFGxa8VAJ3kLEcjd8X7mwxL0UALIbxIjwEqDXCh4NTHfw6z0xiytNfWB9rfUlRLZQkQk8572knYX4yyXDeH+ns2iC3Ibdzxi7N321mOOEv2Js9GtkDuxWHmV+6J5rKE7q/lP+WkeULAjlVK3uQJHKVE5v4vzxsLQg6vI0NQ0WG3XHjCP8HNCQeEPF3tpc5fZ50l9vBsANrC7fGOQ27hJQuh18xrjMqoNsOnKXg6eWZ3/pEOPAvN903uTn2gpuyKHrIWNvcKvUwZUE1mGoeXxK8EA+tGHKTTrQo170NIHCxjhc90jMEnPeMHahYOfMtf2Ob/6z/K7lQcrM0uCwnl5gSVjPGPXSDnToeIAI57rKyyntIwX3DWAqlBNhZlRP3/RttOlfsGvviUXolBRBqYD7B/eqGiCLZRXINXsLlTFG88WTqAYU+qs4cJX1VlkJ2gpoIgbeZBIkQ=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"That depends on what you mean by \"ok\".\r\n\r\nWhen keeping background work in memory, you should use something to notify ASP.NET that the work is ongoing, but that's the bare minimum. It's still possible to lose work if ASP.NET (or the machine running it) dies. If that's acceptable for the work you're doing, then yes, registration with ASP.NET is all you need.\r\n\r\nBut if you have a critical piece of work that, once submitted, *cannot* be lost, then you need a true distributed solution: at the very least a reliable queue. That will always be the case for critical work.","date":"2020-02-05T15:18:06.686Z"},{"_id":"1198ff30-b9da-11ea-922d-e30849a6a544","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"","authorEmailEncrypted":"IBXO9woSstPN6EpuICxRk0vCeHEmSxvYhmMvEmZPMHasf0hwK7T+3xenk7SWI3j8nH1a3aAE+H1hzZoJq1zc3VbPNnnGcUM9+LSorKRGHdiNLKFm9Jho20+wVjMKQvSbL8f+yxGNXQoAffiiziKq29/n0nHju2jh+EX/Fy9pVi0tI+1+37ufiqf8ndvjPKAe+jVVzrrP8EWipD7pMxLGpNiXddxpr1WZ800ZA3dFS5GKEVAL5/6O73GrTrMRDbVZ0cDxCyVcEsAj9WbzrAs1CQQ1x9pSs0r6uddoyiP0qol3tgXmgLPqMZiURgGZnDHnfssiy7O51XKsnZpruIwL+lT9MUOVYv9C1oH9wzeO1sUOKBlhPtVIJsyd15Gts34DkhM+hGAYGMQWws5NMU8Shr61VaJuJokNkZx7AQHj9BvEZwJ73BuA9FLZcnd9BrwaPKE2SimKL/Y2dA4gGeNrI0p/Eus1oTKkJiH7qzI2ezn4WQd2CqQx79Ph1oG2QvkcGHCj2mMxpwv47sZbsPheaBErNSWGanCh77K8s+sBLohsCt2EJ2lnsnoCdhUN/7Yu+yzyKX9Oan3xjft7Td2UUhePA/0j8/AZKL3gevGIVzZv7s8WCMsHy++3pPMekynwVl4qrZXqoISUHj67y6/7zTZmIxYd9NDb+KiEe8eGWLE=","authorEmailMD5":"dac20c02870dd306677cf38192a6f8b3","authorName":"Abhi","authorUri":"","message":"Hi Stephen,\r\nIs it possible to not await an async method to make it fire and forget kind of implementation?  \r\n\r\nMy application is built on ASP.Net Core 2.1 as of today. And I am looking to hand off few processing (some metric logging) in background (not critical). At the same time, I also do not want to block the response from being sent to the caller just for awaiting on these logging.\r\n\r\nHence the question, whether it is possible to just skip the await for such processing? Any suggestion would be helpful?","date":"2020-06-29T07:28:04.054Z"},{"_id":"84861010-ba06-11ea-ab4b-299da919244c","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"1198ff30-b9da-11ea-922d-e30849a6a544","authorEmailEncrypted":"rIvIppLcIrhBVDLzrVWU3cCBDjjvdU/PjE28CFf/PrNy+ssimlXHJYirMQ/Q2QGrNKV9mDco5086pjGQGI7ThoT1h4WWLg9oiggaYlCqwlW2wSzjbduoM3ZtMOTRoebtQ5VmyHUgkWq4frWTl/zPu7JNVzADhalAGqjm9D1V/8gaGhOd0n6+gc7K3iYa+m2iKzywT/qnGfSQP642vMTwRY/j0olJlcaAW0g1OvHOJ/AMJzBcZndZTpApWiV4xx3jw+Ts2iNr6pZ+J4pEOqDf6MfTAYu8Pw3WwrkJ21fykx/qP1l1QspvgajcSwcfBy2mxRUYBbprbLOR1LdxJ03uUjIaqawS49EdwzWqUd9mjsOgLtFwyPZ93IBtqQwzeE7SYudj30BF8qqYrRharUQ34f7bHTUcslSAk0hZoTrMn98m7rLbIzpWrMubU+05RuSVpfREpkuSuy9PXXKlFgk8dHiwMJycab8A86QXuDATTPyEoMDgTxIZx+u6X5xCb3XunBfrusn3D8VXciB22J1+6w5VVfZuBsj+WHEMQxOTAwLDD3E4wP7Obpk0Mfg9O6vg6v6wt5gEYNshTU0N0/f9hVJIfRbKnydUNITUyzOu4q8F7j54foXtrb3vltvSYfRSYPU4QwMIVxDlgeEBo1/p1fZm/LRyQf45okU1/msweZE=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"Yes, you can just do `_ = MyMethodAsync();` to do a simple fire-and-forget. Note that all the normal restrictions around fire-and-forget methods apply:\r\n\r\n- If you have a bug in your metrics logging and it raises an exception, that exception will be ignored.\r\n- Some metrics logging may be skipped (not actually logged).\r\n\r\nIf you're OK with these restrictions, then you can use fire-and-forget.","date":"2020-06-29T12:46:14.709Z"},{"_id":"920e2870-bac0-11ea-9be1-db30c8d5fdd1","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"84861010-ba06-11ea-ab4b-299da919244c","authorEmailEncrypted":"WgEajCaNVAXp77vheR2xkZGKqctb0abAZJkD/ETgDJNZb2ZSMPLoX3L6Uz0dHwEdjQBF0izYLuv1vw2kdUDiS2mLUub7kivWIQQacS9XA1dR2TOpYrFqSAakWHyzG8fY1pPL38OI6KWqhFAWZnIOg6jNH3DvbR0qPvDkXsrNmfBiCxJqg0cwi3y6cbzhf7mFgVEWu9iEccrshbCeBnIILv02vVnJHcYo3tWGqMeWE/Ttrsv2sLpDpinExLu67W34zgVHQGhOUecyR8YacJr5LdFuScbnKDz8svsc5v5deMbys2dRiIl6c8cxEWH3y2OmGfqAGNov9GAjBiNLSYhyq0BI7VB2NwIMrzv1q5cqv6W/Nqos3jBW5ARWxhMRCuplJL8TwB2shSU7pdJmTxZQ02ophsdQVkEBD9vLGQQlO9nQ3bHvdSUXvbDriwRY6rvnxTg1MHYrF/HdivTu5jwrllkWERSjsgQLx6iZyPR30MGIFCBrtO1Z2s0W76GSIcbyJbI9tpFrtVGhdahU5dZV2SF7phL5tvFPXXYLYh7DzrySw+9wcJt7BbqNdjsgOnBN0WOkHBe+EpdyT9ipMO+P+jFgQhSSqukm263DsXQ5tMyPQofSI6LB0t2tH7UHi7uTogL2HL+/aszKUT9hhy/ac83/uoAbbDu1Eb8E1SFC7pM=","authorEmailMD5":"dac20c02870dd306677cf38192a6f8b3","authorName":"Abhi","authorUri":"","message":"Thanks. This is helpful.","date":"2020-06-30T10:58:03.749Z"},{"_id":"460ad240-34a3-11eb-8825-71d468b05184","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"","authorEmailEncrypted":"wMUo08wZXAvkjzDM+padXyyWz7H+y0y02j419SAaQh91Mv9/w3pyL18+C8DAVm/bOJGldhgUVjsZaCY2ExyYViJZuXTx2ExVT5nCTRh43cFUkYVssfA/FGaDKuyBv+spT+IenfIsw6c/Zysq8FWED2jZdDkCe9eHysEfuvqS1y5HGreUdBb42RYkr8s/c9sDy6vI5qaOouMKuijnN9LZDUREWjcpDk7JfBfdhhof3MzFXKN5U993iU0SyWJQ3D3qEgFQCZtx4g96bUp2YGIYm4+ZkthlLmwAyl2R4ojXchvorTzUYNLmtLvFaPul2iPrevj1tpDLVzgwas7b1F1HStpsfaW22ZGilx0gc/CeIdaLhj1HYpv4uA+nqneOjvyP8iE3PcM7djQWVoe38EPUFO1NlxC0ap9KIDf5jdSUcKuAETysvqqiLtxsLNxEDK1dgjpsI14rKkfH2ebU44AjEMcaP0MRxrmTOQHegeWpD4tvxRe6BAXhkj5T46iPpMgoZP5S8I3C0j/LBYgD1F19fUI9OTIZYnf0lHCbSMcqHK+PlFevtEdUxoHKEInOwhRGdrITqCbdUmp8lx+CaC4/7cuScvwVdNTHXhAZh1mR92E7R12rU/58qrovRoWbieJqQVxmFfXHoNUtfg0vvWLZ2FU/XQU5MVgrdbimDCgqjDw=","authorEmailMD5":"63ec2f8bc46a7b2f6b84cda58de159e3","authorName":"Oleg","authorUri":"","message":"Hi, Stephen. \"For a variety of reasons, IIS/ASP.NET has to occasionally recycle your application\" I think it is IIS only related, am I right? The article is fairly old which the time when ASP.NET Core did not exist thus ASP was mostly deployed to Windows machines thus used IIS. But is ASP.NET app still going to be recycled if you run it on let's say Unix and not on IIS?","date":"2020-12-02T13:35:42.688Z"},{"_id":"8f54ad90-34ad-11eb-865b-d79bc081494d","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"460ad240-34a3-11eb-8825-71d468b05184","authorEmailEncrypted":"W/VRr3vq33y+KlxuNvdQWGRi4gvkgbMslnFnpsXa0dQ/fhvRLDGsITlEodXjGzBjvu0P6Tlm1bovMlRNa99oBUINm2L49yEcxOnAgBmYVbPbgMldiub1IHxYhtIgN3mMM85Sb5zCdWMESNhSou1FsKgcQIIrbvSSyv9Ius/jovdOU7PUBEzyRNoU5TJz1YPCMOgc45xSisXDKnJGSZ3YmK90OjX+UHmG2tfcawjCOXD9s5zgXrz+VO0lpwsVToSYSuCCEWMapZU4iWhWrFiPP9V8TM+RnDT/Za8ChDO51ZBj1wdtID9d9ppBW0Ff/6hB1cSjSutcFxYnZiFCDKLniTwuOYnCxGFnB1df+/XxLSzrGfdkBvWmk35YHqZdzdZKZOSL8CoUvOTkuavKT2Rr6Uf31zujEhaJlRrHIhtojGl5J5HwEuqh+DN0UTcxLpRiZfnN/JogmzfHmk/3B3lnKYTTXmXsWU5Yfe34IyJd+CWS/ww3tMNb3l48U5VUXOGwZ7WwxPweTpOQH3zwx3MnSeazY2O67iPALV3AAN8v/+owWvYSLbcLk0EymPSlR+jb4y35MIS8mlFbLoGGReWksJTwisVUacy6EtgD7z1G+dsFoTWqKE2igkv2tr7D9ztWDhd3m3BTQYbYgR90y9GyMaojMch5w5/PPtkAkSjTMxQ=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"ASP.NET pre-Core also had its own AppDomain recycling that it would do in-process, in addition to the IIS recycling the whole process.\r\n\r\nASP.NET Core does not recycle AFAIK. Of course, your code still has to allow shutdowns in order to enable updates. I'm writing a blog series on this right now; should start publishing soon.","date":"2020-12-02T14:49:20.610Z"},{"_id":"289d5000-ca1e-11eb-a2e9-b5a0cb3223fa","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"48901190-ca14-11eb-ac72-e13283981dc6","authorEmailEncrypted":"OiBLgiet2u8+zOOkkflbtJCsXyFP2WPkYnMRBhbg0lZD8hkU2a52ERWl93WV143o+XyA0ugWEC/aRkY2iKK+bWohCdvbGNY8PkAaE4NjJ0RIYs2YnZzrllk7ld6FNcodhB1xxCq2Qr9US8a3gfsuMbvdkolGJfvdnoiSejJcp4P0aMh7+eie+Tc7Rc0WuIltTHkGL/w/9NIEDuQQiXfh041xFaHoOIBjY1wezO6tyWqUOfnu9UztCoTgEI+Ftmv/kh65ax0OEwqIOqa46YpjZ8xiGqeCu8Jsgq4SKMh4sC8l/wukaxoNOlmE51F2b3TZi/lHlMfNI7N+iU4uy1l91LrrQQczQkPvKqlkNZg7BtgD3KnZAeM71kCknbG+V/eNzrPmhOF9VDua+OiFPcOIgDOosJZpPALCtIMaBidOay7eJpzluwuv5HhdTmOs5/NOCNEmsGSLkKnzgo4DJwW8xD7alHLzSCSKccnfRSXot+bq8xtQRrkIksBKN5yBPxSbLwFAEyhlykP4v85gPDyFayHfra6mWHT5bGU8Se/qDjEnIitiZwMjyMyxZ5PKsAHeWA0396FyapFSRMTy7TV+ZuDjnJoVUBU6J+8IyiV2NiuJbslU6ykaJ6k8q3jLwb1HfwQJzQTxDFGujIlnLcx9ugeaM8E/0aTVo86TFjQhnJ8=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"IIRC they're silently ignored. But I'm not 100% sure. I recommend writing a test app; that way you will know for sure.","date":"2021-06-10T19:00:44.676Z"},{"_id":"48901190-ca14-11eb-ac72-e13283981dc6","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"","authorEmailEncrypted":"gqXSgvumk4ha9VYfVg951Q+zBz3UlWWNQiyDCVtfM+V7wtlqMzEBxxrSh4Ag7cwDjn1Q10Rg2Xpo2w6biZSG39BEXPtVZPkngBFa0EYhqq4wR2+v89WCZnetuvNRlKVUDtmE49+nBeUgaETUwfUehVYW+c+aO9IBawT303uWtm0guiRx+Vqx5RMRSh77sKqunpr4h21cKZ9mT2h7NPcJhZLYAjAKEl41fpAoBiQumf6oVyI4vOJTDguD+bAkL3Sd3Fz8rdeSmmMsEj3ILxqJxUZR+bNxMkhirDYgMmsVlVRRbhjLmz6FYMVnHtHPfEsJP5UwoaJ7E7fcZROrOxdBgCGaWrUxdGlrHizjbb5dcEgHbtFjjOzBzCRTF1Nw3tuVdi5se76fPfm3zOnYzhP2zRWjGa1byE4P+A8wP3WXQ/lmUyOWMer9uvPoK9y1JPHohL6oi6NNBQvC9yb15TccIzus4hmcn17g/Ndcoaksuy7nVdMeA+geVRs5d8hNscx7LCaOGLcw1Awhpf9EoVT82EWq5pRkhrr+n0Zi0Yr2ilroKtChsRb3L5hJl6OIBy7Xl1SD+RJPLAVk/cjWfTOu2vmSog8mstSqWVDxvRgElXAwp7e7tx0SgtLRAU/1u5MBPXB8tuZLCPpa4ICgFMLbsJHQHhaGagXrUTX4VzhgE5I=","authorEmailMD5":"1d883742a774325696c76c41f734c3ec","authorName":"Yehuda Makarov","authorUri":"","message":"When it comes to `HostingEnvironment.QueueBackgroundWorkItem`, how are unhandled exceptions handled in the called background work? anything special or do they just bubble up? Been googling forever and all I find is vague mentionings that they may kill the process. What if you put `HostingEnvironment.QueueBackgroundWorkItem` in a `try`, does the `cathch` prevent it from breaking?\r\n\r\nHopefully I receive your reply before I have to make a sample app :)","date":"2021-06-10T17:50:03.412Z"},{"_id":"542994bd-2bc2-4a6d-afba-841c1ff5b9c6","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"","authorEmailEncrypted":"nxAr0nSZYZIqtx9hHP21f7eJEhEtPFGAfx8WgA7MK1e6Jw3fx20B51XpU40DC4Sy+wu6VhIIOyaeqDzv1S+Cmx187KE95jPiYs1sDbTbXPaw9ewQ1b/Ms5tNEqXpuYW9kRVIDOjolXCYnJWQ/Mmz2LiOCfs6ToK8KAQStS3Oe/xZqx6ZsdK7G3C37IcXJLrz9a/TF431+BbYMLdehpleMG1uvAnb9i4TQFn8OGID1mtNst3Vzc9KQN8Z95RD2eSXlCT83jsiT2dEfQ1VKElGxJGs1zKurrNojZXjGxX32Y1wzQYOMlPp8IEge8pOqJgnyGiFLRW6XlZRG0Fxqd8sb5u8ls5eiJtYUHJw4AF4wxsRY5EvtGGCr21Llenu4v5jbU2uPj4pF5SJN7ZeJd7eZIp5tpHfknZqRWPfLG86JGzG0+vQGKTeuoQwUcXuJqfBg6VOAmDKyHzyp+xkWAz7i4SMrNvrewm5su+C2XIwiU11zKu9dTMBxuuYGx9COIKBjFbzTI5CObQHBaiZ1Ll7rkvMElg6YAVmvo45h/TxGJS0215ctevmCH/CFSI0bYL/l+d98DSElFkoF9GJT8QEZbvT/Zde8LWSDR9bgytBX+9mamYodw4EUHVK+p6fnmp652zCdtgCJtCU4uqE29/qBu2jQ9DAowWoOnZgaVFb5z4=","authorEmailMD5":"f8e518b5f2daf872b85a99d10ddfe995","authorName":"Jeff Stevens","authorUri":"","message":"Steven, I know this topic is old.  However, I have seen your comments elsewhere saying HostingEnvironment.QueueBackgroundWorkItem is safer than Task.Run but it was not a glowing reccomendation.  In the current .NET age, do you have your own code to replace this functionality or a link to someone else's?  I know you have suggested Hangfire in the past too but I was looking for something leaner.","date":"2023-01-21T12:04:19.9092894Z"},{"_id":"e526fae3-fd81-46ba-bde8-f5963dee6e56","postId":"2014_06_fire-and-forget-on-asp-net-006b7bdf-c89c-3ee5-bcd5-a85f62b3a22c","postUri":"https://blog.stephencleary.com/2014/06/fire-and-forget-on-asp-net.html","replyTo":"542994bd-2bc2-4a6d-afba-841c1ff5b9c6","authorEmailEncrypted":"OrNQx6Pivs/04NwwPXwDgqc86xN2408s8i/9Fn+4HcZQuwFGq5gMswfao4hn3UunKVaAP0VQfhaMTy3E6WVmI3Ejzp9HcI4OwE/DkKuED+yGg/fJP1QOcev7GVLl8q3vuDuE0E2808GzssL9bY8DNDbPL2c1K3LnXL73K2urKvD/bxy+eonjo/fFX93K39UsE8gzAH3IAGF8iirkSzHYTTg+9ZaI4jofx7G3JgGeEDhkgDzzK9uIKOlHPQZpat63rZ9POYjZHaH4m0XwA+z6mrDVc4IqSEVR64WvRVDCL3ShGFMRWHhA8C+t+paSNDJE3TU7PuDNqp8tyVP3qiFyQvVssLbaU7VLz8+mes78lyoLUh0ZLrnmyWiDybNlCpeXyfx6eJNKvleZGZmGQg9G/kFMaJRQtRA0ywEgl92vpaOBuZDrAGWupfxzCsx7bw5MeT0DUc+ut4FlfXDmju4J521PElmxdKnKMdwP2oYxjwNibXKla6Mn2hf6x6TPeaij9e6Sdy5koaBjrnspiwKykC9E/RWPZxJf3l8u/Op2k0soKbxYXc8wW+9XXAzoD7O3HDopIMQxgPweYHejOUB3vQu9rElSrDOKb1nN6lpNy2EdhfWKOQx1p/0xifOz4rbmJhFsivjnGduNxdUDjS9W/PUsEFSuXGJr1lyzU6RziXo=","authorEmailMD5":"23448e78d187fba56d8bc263081ac5d8","authorName":"Stephen Cleary","authorUri":"https://stephencleary.com","message":"My highest recommendation has always been a [basic distributed architecture](https://blog.stephencleary.com/2021/01/asynchronous-messaging-1-basic-distributed-architecture.html), with a preference for cloud solutions like Azure Queues linked to Azure Functions. Hangfire is OK if you are looking for something simpler. But it sounds like you want something even simpler than that.\n\nThe important thing to note, though, is that as soon as you remove the durable queue from the architecture, there's a fundamental change in behavior: work may be lost. *Simpler solutions are only acceptable if you are OK with losing work.* This includes `QueueBackgroundWorkItem` and `Task.Run`, or in the ASP.NET Core world, something like [this code example](https://learn.microsoft.com/en-us/aspnet/core/fundamentals/host/hosted-services?view=aspnetcore-7.0&tabs=visual-studio&WT.mc_id=DT-MVP-5000058#queued-background-tasks). Again, due to the in-memory nature of the queue, *work may be lost*. See my post on [durable queues](https://blog.stephencleary.com/2021/01/asynchronous-messaging-2-durable-queues.html) for more details.","date":"2023-01-21T13:49:21.3208791Z"}]